/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var d3=Object.create;var dl=Object.defineProperty,f3=Object.defineProperties,p3=Object.getOwnPropertyDescriptor,h3=Object.getOwnPropertyDescriptors,m3=Object.getOwnPropertyNames,$_=Object.getOwnPropertySymbols,g3=Object.getPrototypeOf,U_=Object.prototype.hasOwnProperty,v3=Object.prototype.propertyIsEnumerable;var B_=(t,e,r)=>e in t?dl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,V=(t,e)=>{for(var r in e||(e={}))U_.call(e,r)&&B_(t,r,e[r]);if($_)for(var r of $_(e))v3.call(e,r)&&B_(t,r,e[r]);return t},se=(t,e)=>f3(t,h3(e)),H_=t=>dl(t,"__esModule",{value:!0});var I=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),y3=(t,e)=>{H_(t);for(var r in e)dl(t,r,{get:e[r],enumerable:!0})},w3=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of m3(e))!U_.call(t,n)&&n!=="default"&&dl(t,n,{get:()=>e[n],enumerable:!(r=p3(e,n))||r.enumerable});return t},Y=t=>w3(H_(dl(t!=null?d3(g3(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var wa=I((hue,z_)=>{"use strict";var W_=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);z_.exports=t=>t?Object.keys(t).map(e=>[W_.has(e)?W_.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var Y_=I((mue,K_)=>{"use strict";K_.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var hl=I((gue,J_)=>{"use strict";J_.exports=Ue;Ue.Node=hs;Ue.create=Ue;function Ue(t){var e=this;if(e instanceof Ue||(e=new Ue),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Ue.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Ue.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Ue.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Ue.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)b3(this,arguments[t]);return this.length};Ue.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)E3(this,arguments[t]);return this.length};Ue.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Ue.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Ue.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Ue.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Ue.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Ue.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Ue.prototype.map=function(t,e){e=e||this;for(var r=new Ue,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Ue.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Ue,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Ue.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};Ue.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};Ue.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Ue.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Ue.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Ue;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};Ue.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Ue;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};Ue.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var o=[],n=0;i&&n<e;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=C3(this,i,r[n]);return o};Ue.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function C3(t,e,r){var n=e===t.head?new hs(r,null,e,t):new hs(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function b3(t,e){t.tail=new hs(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function E3(t,e){t.head=new hs(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function hs(t,e,r,n){if(!(this instanceof hs))return new hs(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Y_()(Ue)}catch{}});var Ca=I((vue,oS)=>{"use strict";var _3=require("events"),Q_=require("stream"),ml=hl(),X_=require("string_decoder").StringDecoder,bi=Symbol("EOF"),gl=Symbol("maybeEmitEnd"),Xi=Symbol("emittedEnd"),Zd=Symbol("emittingEnd"),ef=Symbol("closed"),Z_=Symbol("read"),hv=Symbol("flush"),eS=Symbol("flushChunk"),yr=Symbol("encoding"),Ei=Symbol("decoder"),tf=Symbol("flowing"),vl=Symbol("paused"),yl=Symbol("resume"),ur=Symbol("bufferLength"),tS=Symbol("bufferPush"),mv=Symbol("bufferShift"),Qt=Symbol("objectMode"),Xt=Symbol("destroyed"),rS=global._MP_NO_ITERATOR_SYMBOLS_!=="1",S3=rS&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),x3=rS&&Symbol.iterator||Symbol("iterator not implemented"),nS=t=>t==="end"||t==="finish"||t==="prefinish",P3=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,k3=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t);oS.exports=class iS extends Q_{constructor(e){super();this[tf]=!1,this[vl]=!1,this.pipes=new ml,this.buffer=new ml,this[Qt]=e&&e.objectMode||!1,this[Qt]?this[yr]=null:this[yr]=e&&e.encoding||null,this[yr]==="buffer"&&(this[yr]=null),this[Ei]=this[yr]?new X_(this[yr]):null,this[bi]=!1,this[Xi]=!1,this[Zd]=!1,this[ef]=!1,this.writable=!0,this.readable=!0,this[ur]=0,this[Xt]=!1}get bufferLength(){return this[ur]}get encoding(){return this[yr]}set encoding(e){if(this[Qt])throw new Error("cannot set encoding in objectMode");if(this[yr]&&e!==this[yr]&&(this[Ei]&&this[Ei].lastNeed||this[ur]))throw new Error("cannot change encoding");this[yr]!==e&&(this[Ei]=e?new X_(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[Ei].write(r)))),this[yr]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Qt]}set objectMode(e){this[Qt]=this[Qt]||!!e}write(e,r,n){if(this[bi])throw new Error("write after end");return this[Xt]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):(typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8"),!this[Qt]&&!Buffer.isBuffer(e)&&(k3(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):P3(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),!this.objectMode&&!e.length?(this[ur]!==0&&this.emit("readable"),n&&n(),this.flowing):(typeof e=="string"&&!this[Qt]&&!(r===this[yr]&&!this[Ei].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[yr]&&(e=this[Ei].write(e)),this.flowing?(this[ur]!==0&&this[hv](!0),this.emit("data",e)):this[tS](e),this[ur]!==0&&this.emit("readable"),n&&n(),this.flowing))}read(e){if(this[Xt])return null;try{return this[ur]===0||e===0||e>this[ur]?null:(this[Qt]&&(e=null),this.buffer.length>1&&!this[Qt]&&(this.encoding?this.buffer=new ml([Array.from(this.buffer).join("")]):this.buffer=new ml([Buffer.concat(Array.from(this.buffer),this[ur])])),this[Z_](e||null,this.buffer.head.value))}finally{this[gl]()}}[Z_](e,r){return e===r.length||e===null?this[mv]():(this.buffer.head.value=r.slice(e),r=r.slice(0,e),this[ur]-=e),this.emit("data",r),!this.buffer.length&&!this[bi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[bi]=!0,this.writable=!1,(this.flowing||!this[vl])&&this[gl](),this}[yl](){this[Xt]||(this[vl]=!1,this[tf]=!0,this.emit("resume"),this.buffer.length?this[hv]():this[bi]?this[gl]():this.emit("drain"))}resume(){return this[yl]()}pause(){this[tf]=!1,this[vl]=!0}get destroyed(){return this[Xt]}get flowing(){return this[tf]}get paused(){return this[vl]}[tS](e){return this[Qt]?this[ur]+=1:this[ur]+=e.length,this.buffer.push(e)}[mv](){return this.buffer.length&&(this[Qt]?this[ur]-=1:this[ur]-=this.buffer.head.value.length),this.buffer.shift()}[hv](e){do;while(this[eS](this[mv]()));!e&&!this.buffer.length&&!this[bi]&&this.emit("drain")}[eS](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[Xt])return;let n=this[Xi];r=r||{},e===process.stdout||e===process.stderr?r.end=!1:r.end=r.end!==!1;let i={dest:e,opts:r,ondrain:o=>this[yl]()};return this.pipes.push(i),e.on("drain",i.ondrain),this[yl](),n&&i.opts.end&&i.dest.end(),e}addListener(e,r){return this.on(e,r)}on(e,r){try{return super.on(e,r)}finally{e==="data"&&!this.pipes.length&&!this.flowing?this[yl]():nS(e)&&this[Xi]&&(super.emit(e),this.removeAllListeners(e))}}get emittedEnd(){return this[Xi]}[gl](){!this[Zd]&&!this[Xi]&&!this[Xt]&&this.buffer.length===0&&this[bi]&&(this[Zd]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[ef]&&this.emit("close"),this[Zd]=!1)}emit(e,r){if(e!=="error"&&e!=="close"&&e!==Xt&&this[Xt])return;if(e==="data"){if(!r)return;this.pipes.length&&this.pipes.forEach(i=>i.dest.write(r)===!1&&this.pause())}else if(e==="end"){if(this[Xi]===!0)return;this[Xi]=!0,this.readable=!1,this[Ei]&&(r=this[Ei].end(),r&&(this.pipes.forEach(i=>i.dest.write(r)),super.emit("data",r))),this.pipes.forEach(i=>{i.dest.removeListener("drain",i.ondrain),i.opts.end&&i.dest.end()})}else if(e==="close"&&(this[ef]=!0,!this[Xi]&&!this[Xt]))return;let n=new Array(arguments.length);if(n[0]=e,n[1]=r,arguments.length>2)for(let i=2;i<arguments.length;i++)n[i]=arguments[i];try{return super.emit.apply(this,n)}finally{nS(e)?this.removeAllListeners(e):this[gl]()}}collect(){let e=[];this[Qt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Qt]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[Qt]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Qt]?Promise.reject(new Error("cannot concat in objectMode")):this[yr]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Xt,()=>r(new Error("stream destroyed"))),this.on("end",()=>e()),this.on("error",n=>r(n))})}[S3](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[bi])return Promise.resolve({done:!0});let n=null,i=null,o=l=>{this.removeListener("data",s),this.removeListener("end",a),i(l)},s=l=>{this.removeListener("error",o),this.removeListener("end",a),this.pause(),n({value:l,done:!!this[bi]})},a=()=>{this.removeListener("error",o),this.removeListener("data",s),n({done:!0})},c=()=>o(new Error("stream destroyed"));return new Promise((l,u)=>{i=u,n=l,this.once(Xt,c),this.once("error",o),this.once("end",a),this.once("data",s)})}}}[x3](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[Xt]?(e?this.emit("error",e):this.emit(Xt),this):(this[Xt]=!0,this.buffer=new ml,this[ur]=0,typeof this.close=="function"&&!this[ef]&&this.close(),e?this.emit("error",e):this.emit(Xt),this)}static isStream(e){return!!e&&(e instanceof iS||e instanceof Q_||e instanceof _3&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var aS=I((yue,sS)=>{var I3=require("zlib").constants||{ZLIB_VERNUM:4736};sS.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},I3))});var Sv=I(Nr=>{"use strict";var gv=require("assert"),Zi=require("buffer").Buffer,cS=require("zlib"),ms=Nr.constants=aS(),T3=Ca(),lS=Zi.concat,gs=Symbol("_superWrite"),wl=class extends Error{constructor(e){super("zlib: "+e.message);this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},A3=Symbol("opts"),Cl=Symbol("flushFlag"),uS=Symbol("finishFlushFlag"),vv=Symbol("fullFlushFlag"),rt=Symbol("handle"),rf=Symbol("onError"),ba=Symbol("sawError"),yv=Symbol("level"),wv=Symbol("strategy"),Cv=Symbol("ended"),wue=Symbol("_defaultFullFlush"),bv=class extends T3{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e);this[ba]=!1,this[Cv]=!1,this[A3]=e,this[Cl]=e.flush,this[uS]=e.finishFlush;try{this[rt]=new cS[r](e)}catch(n){throw new wl(n)}this[rf]=n=>{this[ba]||(this[ba]=!0,this.close(),this.emit("error",n))},this[rt].on("error",n=>this[rf](new wl(n))),this.once("end",()=>this.close)}close(){this[rt]&&(this[rt].close(),this[rt]=null,this.emit("close"))}reset(){if(!this[ba])return gv(this[rt],"zlib binding closed"),this[rt].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[vv]),this.write(Object.assign(Zi.alloc(0),{[Cl]:e})))}end(e,r,n){return e&&this.write(e,r),this.flush(this[uS]),this[Cv]=!0,super.end(null,null,n)}get ended(){return this[Cv]}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=Zi.from(e,r)),this[ba])return;gv(this[rt],"zlib binding closed");let i=this[rt]._handle,o=i.close;i.close=()=>{};let s=this[rt].close;this[rt].close=()=>{},Zi.concat=l=>l;let a;try{let l=typeof e[Cl]=="number"?e[Cl]:this[Cl];a=this[rt]._processChunk(e,l),Zi.concat=lS}catch(l){Zi.concat=lS,this[rf](new wl(l))}finally{this[rt]&&(this[rt]._handle=i,i.close=o,this[rt].close=s,this[rt].removeAllListeners("error"))}this[rt]&&this[rt].on("error",l=>this[rf](new wl(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[gs](Zi.from(a[0]));for(let l=1;l<a.length;l++)c=this[gs](a[l])}else c=this[gs](Zi.from(a));return n&&n(),c}[gs](e){return super.write(e)}},eo=class extends bv{constructor(e,r){e=e||{},e.flush=e.flush||ms.Z_NO_FLUSH,e.finishFlush=e.finishFlush||ms.Z_FINISH;super(e,r);this[vv]=ms.Z_FULL_FLUSH,this[yv]=e.level,this[wv]=e.strategy}params(e,r){if(!this[ba]){if(!this[rt])throw new Error("cannot switch params when binding is closed");if(!this[rt].params)throw new Error("not supported in this implementation");if(this[yv]!==e||this[wv]!==r){this.flush(ms.Z_SYNC_FLUSH),gv(this[rt],"zlib binding closed");let n=this[rt].flush;this[rt].flush=(i,o)=>{this.flush(i),o()};try{this[rt].params(e,r)}finally{this[rt].flush=n}this[rt]&&(this[yv]=e,this[wv]=r)}}}},dS=class extends eo{constructor(e){super(e,"Deflate")}},fS=class extends eo{constructor(e){super(e,"Inflate")}},Ev=Symbol("_portable"),pS=class extends eo{constructor(e){super(e,"Gzip");this[Ev]=e&&!!e.portable}[gs](e){return this[Ev]?(this[Ev]=!1,e[9]=255,super[gs](e)):super[gs](e)}},hS=class extends eo{constructor(e){super(e,"Gunzip")}},mS=class extends eo{constructor(e){super(e,"DeflateRaw")}},gS=class extends eo{constructor(e){super(e,"InflateRaw")}},vS=class extends eo{constructor(e){super(e,"Unzip")}},_v=class extends bv{constructor(e,r){e=e||{},e.flush=e.flush||ms.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||ms.BROTLI_OPERATION_FINISH;super(e,r);this[vv]=ms.BROTLI_OPERATION_FLUSH}},yS=class extends _v{constructor(e){super(e,"BrotliCompress")}},wS=class extends _v{constructor(e){super(e,"BrotliDecompress")}};Nr.Deflate=dS;Nr.Inflate=fS;Nr.Gzip=pS;Nr.Gunzip=hS;Nr.DeflateRaw=mS;Nr.InflateRaw=gS;Nr.Unzip=vS;typeof cS.BrotliCompress=="function"?(Nr.BrotliCompress=yS,Nr.BrotliDecompress=wS):Nr.BrotliCompress=Nr.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Ea=I((bue,CS)=>{var D3=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;CS.exports=D3!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var nf=I((_ue,bS)=>{"use strict";var R3=Ca(),xv=Ea(),Pv=Symbol("slurp");bS.exports=class extends R3{constructor(e,r,n){super();switch(this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=xv(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=xv(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[Pv](r),n&&this[Pv](n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,i-r),this.ignore?!0:n>=r?super.write(e):super.write(e.slice(0,n))}[Pv](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?xv(e[n]):e[n])}}});var kv=I(of=>{"use strict";of.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);of.code=new Map(Array.from(of.name).map(t=>[t[1],t[0]]))});var xS=I((xue,SS)=>{"use strict";var O3=(t,e)=>{if(Number.isSafeInteger(t))t<0?L3(t,e):N3(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},N3=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},L3=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var i=t&255;t=Math.floor(t/256),r?e[n-1]=ES(i):i===0?e[n-1]=0:(r=!0,e[n-1]=_S(i))}},F3=t=>{let e=t[0],r=e===128?q3(t.slice(1,t.length)):e===255?M3(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},M3=t=>{for(var e=t.length,r=0,n=!1,i=e-1;i>-1;i--){var o=t[i],s;n?s=ES(o):o===0?s=o:(n=!0,s=_S(o)),s!==0&&(r-=s*Math.pow(256,e-i-1))}return r},q3=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var i=t[n];i!==0&&(r+=i*Math.pow(256,e-n-1))}return r},ES=t=>(255^t)&255,_S=t=>(255^t)+1&255;SS.exports={encode:O3,parse:F3}});var Sa=I((Pue,IS)=>{"use strict";var Iv=kv(),_a=require("path").posix,PS=xS(),Tv=Symbol("slurp"),Lr=Symbol("type"),kS=class{constructor(e,r,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Lr]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,n,i):e&&this.set(e)}decode(e,r,n,i){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=vs(e,r,100),this.mode=to(e,r+100,8),this.uid=to(e,r+108,8),this.gid=to(e,r+116,8),this.size=to(e,r+124,12),this.mtime=Av(e,r+136,12),this.cksum=to(e,r+148,12),this[Tv](n),this[Tv](i,!0),this[Lr]=vs(e,r+156,1),this[Lr]===""&&(this[Lr]="0"),this[Lr]==="0"&&this.path.substr(-1)==="/"&&(this[Lr]="5"),this[Lr]==="5"&&(this.size=0),this.linkpath=vs(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=vs(e,r+265,32),this.gname=vs(e,r+297,32),this.devmaj=to(e,r+329,8),this.devmin=to(e,r+337,8),e[r+475]!==0){let s=vs(e,r+345,155);this.path=s+"/"+this.path}else{let s=vs(e,r+345,130);s&&(this.path=s+"/"+this.path),this.atime=Av(e,r+476,12),this.ctime=Av(e,r+488,12)}let o=8*32;for(let s=r;s<r+148;s++)o+=e[s];for(let s=r+156;s<r+512;s++)o+=e[s];this.cksumValid=o===this.cksum,this.cksum===null&&o===8*32&&(this.nullBlock=!0)}[Tv](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=j3(this.path||"",n),o=i[0],s=i[1];this.needPax=i[2],this.needPax=ys(e,r,100,o)||this.needPax,this.needPax=ro(e,r+100,8,this.mode)||this.needPax,this.needPax=ro(e,r+108,8,this.uid)||this.needPax,this.needPax=ro(e,r+116,8,this.gid)||this.needPax,this.needPax=ro(e,r+124,12,this.size)||this.needPax,this.needPax=Dv(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[Lr].charCodeAt(0),this.needPax=ys(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=ys(e,r+265,32,this.uname)||this.needPax,this.needPax=ys(e,r+297,32,this.gname)||this.needPax,this.needPax=ro(e,r+329,8,this.devmaj)||this.needPax,this.needPax=ro(e,r+337,8,this.devmin)||this.needPax,this.needPax=ys(e,r+345,n,s)||this.needPax,e[r+475]!==0?this.needPax=ys(e,r+345,155,s)||this.needPax:(this.needPax=ys(e,r+345,130,s)||this.needPax,this.needPax=Dv(e,r+476,12,this.atime)||this.needPax,this.needPax=Dv(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=e[c];for(let c=r+156;c<r+512;c++)a+=e[c];return this.cksum=a,ro(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return Iv.name.get(this[Lr])||this[Lr]}get typeKey(){return this[Lr]}set type(e){Iv.code.has(e)?this[Lr]=Iv.code.get(e):this[Lr]=e}},j3=(t,e)=>{let r=100,n=t,i="",o,s=_a.parse(t).root||".";if(Buffer.byteLength(n)<r)o=[n,i,!1];else{i=_a.dirname(n),n=_a.basename(n);do Buffer.byteLength(n)<=r&&Buffer.byteLength(i)<=e?o=[n,i,!1]:Buffer.byteLength(n)>r&&Buffer.byteLength(i)<=e?o=[n.substr(0,r-1),i,!0]:(n=_a.join(_a.basename(i),n),i=_a.dirname(i));while(i!==s&&!o);o||(o=[t.substr(0,r-1),"",!0])}return o},vs=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),Av=(t,e,r)=>$3(to(t,e,r)),$3=t=>t===null?null:new Date(t*1e3),to=(t,e,r)=>t[e]&128?PS.parse(t.slice(e,e+r)):B3(t,e,r),U3=t=>isNaN(t)?null:t,B3=(t,e,r)=>U3(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),H3={12:8589934591,8:2097151},ro=(t,e,r,n)=>n===null?!1:n>H3[r]||n<0?(PS.encode(n,t.slice(e,e+r)),!0):(V3(t,e,r,n),!1),V3=(t,e,r,n)=>t.write(G3(n,r),e,r,"ascii"),G3=(t,e)=>W3(Math.floor(t).toString(8),e),W3=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",Dv=(t,e,r,n)=>n===null?!1:ro(t,e,r,n.getTime()/1e3),z3=new Array(156).join("\0"),ys=(t,e,r,n)=>n===null?!1:(t.write(n+z3,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);IS.exports=kS});var af=I((kue,TS)=>{"use strict";var K3=Sa(),Y3=require("path"),sf=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),i=Buffer.allocUnsafe(n);for(let o=0;o<512;o++)i[o]=0;new K3({path:("PaxHeader/"+Y3.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,r,"utf8");for(let o=r+512;o<i.length;o++)i[o]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+`
`,i=Buffer.byteLength(n),o=Math.floor(Math.log(i)/Math.log(10))+1;return i+o>=Math.pow(10,o)&&(o+=1),o+i+n}};sf.parse=(t,e,r)=>new sf(J3(Q3(t),e),r);var J3=(t,e)=>e?Object.keys(t).reduce((r,n)=>(r[n]=t[n],r),e):t,Q3=t=>t.replace(/\n$/,"").split(`
`).reduce(X3,Object.create(null)),X3=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.substr((r+" ").length);let n=e.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return t;let o=n.join("=");return t[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(o*1e3):/^[0-9]+$/.test(o)?+o:o,t};TS.exports=sf});var xa=I((Iue,AS)=>{AS.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var cf=I((Tue,DS)=>{"use strict";DS.exports=t=>class extends t{warn(e,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${e}: ${r}`),n))}}});var Ov=I((Aue,RS)=>{"use strict";var lf=["|","<",">","?",":"],Rv=lf.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),Z3=new Map(lf.map((t,e)=>[t,Rv[e]])),eG=new Map(Rv.map((t,e)=>[t,lf[e]]));RS.exports={encode:t=>lf.reduce((e,r)=>e.split(r).join(Z3.get(r)),t),decode:t=>Rv.reduce((e,r)=>e.split(r).join(eG.get(r)),t)}});var Nv=I((Due,NS)=>{var{isAbsolute:tG,parse:OS}=require("path").win32;NS.exports=t=>{let e="",r=OS(t);for(;tG(t)||r.root;){let n=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.substr(n.length),e+=n,r=OS(t)}return[e,t]}});var FS=I((Rue,LS)=>{"use strict";LS.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&~18),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var Hv=I((Lue,QS)=>{"use strict";var MS=Ca(),qS=af(),jS=Sa(),Kn=require("fs"),$S=require("path"),Yn=Ea(),rG=xa(),US=(t,e)=>e?(t=Yn(t).replace(/^\.(\/|$)/,""),rG(e)+"/"+t):Yn(t),nG=16*1024*1024,BS=Symbol("process"),HS=Symbol("file"),VS=Symbol("directory"),Lv=Symbol("symlink"),GS=Symbol("hardlink"),bl=Symbol("header"),uf=Symbol("read"),Fv=Symbol("lstat"),df=Symbol("onlstat"),Mv=Symbol("onread"),qv=Symbol("onreadlink"),jv=Symbol("openfile"),$v=Symbol("onopenfile"),no=Symbol("close"),ff=Symbol("mode"),Uv=Symbol("awaitDrain"),Bv=Symbol("ondrain"),Jn=Symbol("prefix"),WS=Symbol("hadError"),zS=cf(),iG=Ov(),KS=Nv(),YS=FS(),pf=zS(class extends MS{constructor(e,r){r=r||{};super(r);if(typeof e!="string")throw new TypeError("path is required");this.path=Yn(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||nG,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=Yn(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?Yn(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,o]=KS(this.path);i&&(this.path=o,n=i)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=iG.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=Yn(r.absolute||$S.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[df](this.statCache.get(this.absolute)):this[Fv]()}emit(e,...r){return e==="error"&&(this[WS]=!0),super.emit(e,...r)}[Fv](){Kn.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[df](r)})}[df](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=sG(e),this.emit("stat",e),this[BS]()}[BS](){switch(this.type){case"File":return this[HS]();case"Directory":return this[VS]();case"SymbolicLink":return this[Lv]();default:return this.end()}}[ff](e){return YS(e,this.type==="Directory",this.portable)}[Jn](e){return US(e,this.prefix)}[bl](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new jS({path:this[Jn](this.path),linkpath:this.type==="Link"?this[Jn](this.linkpath):this.linkpath,mode:this[ff](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new qS({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[Jn](this.path),linkpath:this.type==="Link"?this[Jn](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[VS](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[bl](),this.end()}[Lv](){Kn.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[qv](r)})}[qv](e){this.linkpath=Yn(e),this[bl](),this.end()}[GS](e){this.type="Link",this.linkpath=Yn($S.relative(this.cwd,e)),this.stat.size=0,this[bl](),this.end()}[HS](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[GS](r)}this.linkCache.set(e,this.absolute)}if(this[bl](),this.stat.size===0)return this.end();this[jv]()}[jv](){Kn.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[$v](r)})}[$v](e){if(this.fd=e,this[WS])return this[no]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[uf]()}[uf](){let{fd:e,buf:r,offset:n,length:i,pos:o}=this;Kn.read(e,r,n,i,o,(s,a)=>{if(s)return this[no](()=>this.emit("error",s));this[Mv](a)})}[no](e){Kn.close(this.fd,e)}[Mv](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[no](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[no](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[Bv]():this[Uv](()=>this[Bv]())}[Uv](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[Bv](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[no](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[uf]()}}),JS=class extends pf{[Fv](){this[df](Kn.lstatSync(this.absolute))}[Lv](){this[qv](Kn.readlinkSync(this.absolute))}[jv](){this[$v](Kn.openSync(this.absolute,"r"))}[uf](){let e=!0;try{let{fd:r,buf:n,offset:i,length:o,pos:s}=this,a=Kn.readSync(r,n,i,o,s);this[Mv](a),e=!1}finally{if(e)try{this[no](()=>{})}catch{}}}[Uv](e){e()}[no](e){Kn.closeSync(this.fd),e()}},oG=zS(class extends MS{constructor(e,r){r=r||{};super(r);this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=Yn(e.path),this.mode=this[ff](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=Yn(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,o]=KS(this.path);i&&(this.path=o,n=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new jS({path:this[Jn](this.path),linkpath:this.type==="Link"?this[Jn](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new qS({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[Jn](this.path),linkpath:this.type==="Link"?this[Jn](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[Jn](e){return US(e,this.prefix)}[ff](e){return YS(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});pf.Sync=JS;pf.Tar=oG;var sG=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";QS.exports=pf});var bf=I((Mue,ox)=>{"use strict";var Vv=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},aG=Ca(),cG=Sv(),lG=nf(),Gv=Hv(),uG=Gv.Sync,dG=Gv.Tar,fG=hl(),XS=Buffer.alloc(1024),hf=Symbol("onStat"),mf=Symbol("ended"),Qn=Symbol("queue"),Pa=Symbol("current"),ws=Symbol("process"),gf=Symbol("processing"),ZS=Symbol("processJob"),Xn=Symbol("jobs"),Wv=Symbol("jobDone"),vf=Symbol("addFSEntry"),ex=Symbol("addTarEntry"),zv=Symbol("stat"),Kv=Symbol("readdir"),yf=Symbol("onreaddir"),wf=Symbol("pipe"),tx=Symbol("entry"),Yv=Symbol("entryOpt"),Jv=Symbol("writeEntryClass"),rx=Symbol("write"),Qv=Symbol("ondrain"),Cf=require("fs"),nx=require("path"),pG=cf(),Xv=Ea(),Zv=pG(class extends aG{constructor(e){super(e);e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Xv(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[Jv]=Gv,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new cG.Gzip(e.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[Qv]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[Qv]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[Qn]=new fG,this[Xn]=0,this.jobs=+e.jobs||4,this[gf]=!1,this[mf]=!1}[rx](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[mf]=!0,this[ws](),this}write(e){if(this[mf])throw new Error("write after end");return e instanceof lG?this[ex](e):this[vf](e),this.flowing}[ex](e){let r=Xv(nx.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new Vv(e.path,r,!1);n.entry=new dG(e,this[Yv](n)),n.entry.on("end",i=>this[Wv](n)),this[Xn]+=1,this[Qn].push(n)}this[ws]()}[vf](e){let r=Xv(nx.resolve(this.cwd,e));this[Qn].push(new Vv(e,r)),this[ws]()}[zv](e){e.pending=!0,this[Xn]+=1;let r=this.follow?"stat":"lstat";Cf[r](e.absolute,(n,i)=>{e.pending=!1,this[Xn]-=1,n?this.emit("error",n):this[hf](e,i)})}[hf](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[ws]()}[Kv](e){e.pending=!0,this[Xn]+=1,Cf.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[Xn]-=1,r)return this.emit("error",r);this[yf](e,n)})}[yf](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[ws]()}[ws](){if(!this[gf]){this[gf]=!0;for(let e=this[Qn].head;e!==null&&this[Xn]<this.jobs;e=e.next)if(this[ZS](e.value),e.value.ignore){let r=e.next;this[Qn].removeNode(e),e.next=r}this[gf]=!1,this[mf]&&!this[Qn].length&&this[Xn]===0&&(this.zip?this.zip.end(XS):(super.write(XS),super.end()))}}get[Pa](){return this[Qn]&&this[Qn].head&&this[Qn].head.value}[Wv](e){this[Qn].shift(),this[Xn]-=1,this[ws]()}[ZS](e){if(!e.pending){if(e.entry){e===this[Pa]&&!e.piped&&this[wf](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[hf](e,this.statCache.get(e.absolute)):this[zv](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[yf](e,this.readdirCache.get(e.absolute)):this[Kv](e),!e.readdir))){if(e.entry=this[tx](e),!e.entry){e.ignore=!0;return}e===this[Pa]&&!e.piped&&this[wf](e)}}}[Yv](e){return{onwarn:(r,n,i)=>this.warn(r,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[tx](e){this[Xn]+=1;try{return new this[Jv](e.path,this[Yv](e)).on("end",()=>this[Wv](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[Qv](){this[Pa]&&this[Pa].entry&&this[Pa].entry.resume()}[wf](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let o=e.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[vf](s+i)});let r=e.entry,n=this.zip;n?r.on("data",i=>{n.write(i)||r.pause()}):r.on("data",i=>{super.write(i)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),ix=class extends Zv{constructor(e){super(e);this[Jv]=uG}pause(){}resume(){}[zv](e){let r=this.follow?"statSync":"lstatSync";this[hf](e,Cf[r](e.absolute))}[Kv](e,r){this[yf](e,Cf.readdirSync(e.absolute))}[wf](e){let r=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(i=>{let o=e.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[vf](s+i)}),n?r.on("data",i=>{n.write(i)}):r.on("data",i=>{super[rx](i)})}};Zv.Sync=ix;ox.exports=Zv});var Na=I(_l=>{"use strict";var hG=Ca(),mG=require("events").EventEmitter,wr=require("fs"),ey=wr.writev;if(!ey){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;ey=(r,n,i,o)=>{let s=(c,l)=>o(c,l,n),a=new e;a.oncomplete=s,t.writeBuffers(r,n,i,a)}}var ka=Symbol("_autoClose"),_n=Symbol("_close"),El=Symbol("_ended"),Qe=Symbol("_fd"),sx=Symbol("_finished"),io=Symbol("_flags"),ty=Symbol("_flush"),ry=Symbol("_handleChunk"),ny=Symbol("_makeBuf"),Ef=Symbol("_mode"),_f=Symbol("_needDrain"),Ia=Symbol("_onerror"),Ta=Symbol("_onopen"),iy=Symbol("_onread"),Aa=Symbol("_onwrite"),oo=Symbol("_open"),_i=Symbol("_path"),Cs=Symbol("_pos"),Zn=Symbol("_queue"),Da=Symbol("_read"),ax=Symbol("_readSize"),so=Symbol("_reading"),Sf=Symbol("_remain"),cx=Symbol("_size"),xf=Symbol("_write"),Ra=Symbol("_writing"),Pf=Symbol("_defaultFlag"),Oa=Symbol("_errored"),oy=class extends hG{constructor(e,r){r=r||{};super(r);if(this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Oa]=!1,this[Qe]=typeof r.fd=="number"?r.fd:null,this[_i]=e,this[ax]=r.readSize||16*1024*1024,this[so]=!1,this[cx]=typeof r.size=="number"?r.size:1/0,this[Sf]=this[cx],this[ka]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[Qe]=="number"?this[Da]():this[oo]()}get fd(){return this[Qe]}get path(){return this[_i]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[oo](){wr.open(this[_i],"r",(e,r)=>this[Ta](e,r))}[Ta](e,r){e?this[Ia](e):(this[Qe]=r,this.emit("open",r),this[Da]())}[ny](){return Buffer.allocUnsafe(Math.min(this[ax],this[Sf]))}[Da](){if(!this[so]){this[so]=!0;let e=this[ny]();if(e.length===0)return process.nextTick(()=>this[iy](null,0,e));wr.read(this[Qe],e,0,e.length,null,(r,n,i)=>this[iy](r,n,i))}}[iy](e,r,n){this[so]=!1,e?this[Ia](e):this[ry](r,n)&&this[Da]()}[_n](){if(this[ka]&&typeof this[Qe]=="number"){let e=this[Qe];this[Qe]=null,wr.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[Ia](e){this[so]=!0,this[_n](),this.emit("error",e)}[ry](e,r){let n=!1;return this[Sf]-=e,e>0&&(n=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[Sf]<=0)&&(n=!1,this[_n](),super.end()),n}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[Qe]=="number"&&this[Da]();break;case"error":return this[Oa]?void 0:(this[Oa]=!0,super.emit(e,r));default:return super.emit(e,r)}}},lx=class extends oy{[oo](){let e=!0;try{this[Ta](null,wr.openSync(this[_i],"r")),e=!1}finally{e&&this[_n]()}}[Da](){let e=!0;try{if(!this[so]){this[so]=!0;do{let r=this[ny](),n=r.length===0?0:wr.readSync(this[Qe],r,0,r.length,null);if(!this[ry](n,r))break}while(!0);this[so]=!1}e=!1}finally{e&&this[_n]()}}[_n](){if(this[ka]&&typeof this[Qe]=="number"){let e=this[Qe];this[Qe]=null,wr.closeSync(e),this.emit("close")}}},sy=class extends mG{constructor(e,r){r=r||{};super(r);this.readable=!1,this.writable=!0,this[Oa]=!1,this[Ra]=!1,this[El]=!1,this[_f]=!1,this[Zn]=[],this[_i]=e,this[Qe]=typeof r.fd=="number"?r.fd:null,this[Ef]=r.mode===void 0?438:r.mode,this[Cs]=typeof r.start=="number"?r.start:null,this[ka]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[Cs]!==null?"r+":"w";this[Pf]=r.flags===void 0,this[io]=this[Pf]?n:r.flags,this[Qe]===null&&this[oo]()}emit(e,r){if(e==="error"){if(this[Oa])return;this[Oa]=!0}return super.emit(e,r)}get fd(){return this[Qe]}get path(){return this[_i]}[Ia](e){this[_n](),this[Ra]=!0,this.emit("error",e)}[oo](){wr.open(this[_i],this[io],this[Ef],(e,r)=>this[Ta](e,r))}[Ta](e,r){this[Pf]&&this[io]==="r+"&&e&&e.code==="ENOENT"?(this[io]="w",this[oo]()):e?this[Ia](e):(this[Qe]=r,this.emit("open",r),this[ty]())}end(e,r){return e&&this.write(e,r),this[El]=!0,!this[Ra]&&!this[Zn].length&&typeof this[Qe]=="number"&&this[Aa](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[El]?(this.emit("error",new Error("write() after end()")),!1):this[Qe]===null||this[Ra]||this[Zn].length?(this[Zn].push(e),this[_f]=!0,!1):(this[Ra]=!0,this[xf](e),!0)}[xf](e){wr.write(this[Qe],e,0,e.length,this[Cs],(r,n)=>this[Aa](r,n))}[Aa](e,r){e?this[Ia](e):(this[Cs]!==null&&(this[Cs]+=r),this[Zn].length?this[ty]():(this[Ra]=!1,this[El]&&!this[sx]?(this[sx]=!0,this[_n](),this.emit("finish")):this[_f]&&(this[_f]=!1,this.emit("drain"))))}[ty](){if(this[Zn].length===0)this[El]&&this[Aa](null,0);else if(this[Zn].length===1)this[xf](this[Zn].pop());else{let e=this[Zn];this[Zn]=[],ey(this[Qe],e,this[Cs],(r,n)=>this[Aa](r,n))}}[_n](){if(this[ka]&&typeof this[Qe]=="number"){let e=this[Qe];this[Qe]=null,wr.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},ux=class extends sy{[oo](){let e;if(this[Pf]&&this[io]==="r+")try{e=wr.openSync(this[_i],this[io],this[Ef])}catch(r){if(r.code==="ENOENT")return this[io]="w",this[oo]();throw r}else e=wr.openSync(this[_i],this[io],this[Ef]);this[Ta](null,e)}[_n](){if(this[ka]&&typeof this[Qe]=="number"){let e=this[Qe];this[Qe]=null,wr.closeSync(e),this.emit("close")}}[xf](e){let r=!0;try{this[Aa](null,wr.writeSync(this[Qe],e,0,e.length,this[Cs])),r=!1}finally{if(r)try{this[_n]()}catch{}}}};_l.ReadStream=oy;_l.ReadStreamSync=lx;_l.WriteStream=sy;_l.WriteStreamSync=ux});var Of=I(($ue,vx)=>{"use strict";var gG=cf(),vG=Sa(),yG=require("events"),wG=hl(),CG=1024*1024,bG=nf(),dx=af(),EG=Sv(),ay=Buffer.from([31,139]),Jr=Symbol("state"),bs=Symbol("writeEntry"),Si=Symbol("readEntry"),cy=Symbol("nextEntry"),fx=Symbol("processEntry"),Qr=Symbol("extendedHeader"),Sl=Symbol("globalExtendedHeader"),ao=Symbol("meta"),px=Symbol("emitMeta"),nt=Symbol("buffer"),xi=Symbol("queue"),Es=Symbol("ended"),hx=Symbol("emittedEnd"),_s=Symbol("emit"),Cr=Symbol("unzip"),kf=Symbol("consumeChunk"),If=Symbol("consumeChunkSub"),ly=Symbol("consumeBody"),mx=Symbol("consumeMeta"),gx=Symbol("consumeHeader"),Tf=Symbol("consuming"),uy=Symbol("bufferConcat"),dy=Symbol("maybeEnd"),xl=Symbol("writing"),co=Symbol("aborted"),Af=Symbol("onDone"),Ss=Symbol("sawValidEntry"),Df=Symbol("sawNullBlock"),Rf=Symbol("sawEOF"),_G=t=>!0;vx.exports=gG(class extends yG{constructor(e){e=e||{};super(e);this.file=e.file||"",this[Ss]=null,this.on(Af,r=>{(this[Jr]==="begin"||this[Ss]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Af,e.ondone):this.on(Af,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||CG,this.filter=typeof e.filter=="function"?e.filter:_G,this.writable=!0,this.readable=!1,this[xi]=new wG,this[nt]=null,this[Si]=null,this[bs]=null,this[Jr]="begin",this[ao]="",this[Qr]=null,this[Sl]=null,this[Es]=!1,this[Cr]=null,this[co]=!1,this[Df]=!1,this[Rf]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[gx](e,r){this[Ss]===null&&(this[Ss]=!1);let n;try{n=new vG(e,r,this[Qr],this[Sl])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[Df]?(this[Rf]=!0,this[Jr]==="begin"&&(this[Jr]="header"),this[_s]("eof")):(this[Df]=!0,this[_s]("nullBlock"));else if(this[Df]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let o=this[bs]=new bG(n,this[Qr],this[Sl]);if(!this[Ss])if(o.remain){let s=()=>{o.invalid||(this[Ss]=!0)};o.on("end",s)}else this[Ss]=!0;o.meta?o.size>this.maxMetaEntrySize?(o.ignore=!0,this[_s]("ignoredEntry",o),this[Jr]="ignore",o.resume()):o.size>0&&(this[ao]="",o.on("data",s=>this[ao]+=s),this[Jr]="meta"):(this[Qr]=null,o.ignore=o.ignore||!this.filter(o.path,o),o.ignore?(this[_s]("ignoredEntry",o),this[Jr]=o.remain?"ignore":"header",o.resume()):(o.remain?this[Jr]="body":(this[Jr]="header",o.end()),this[Si]?this[xi].push(o):(this[xi].push(o),this[cy]())))}}}[fx](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Si]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[cy]()),r=!1)):(this[Si]=null,r=!1),r}[cy](){do;while(this[fx](this[xi].shift()));if(!this[xi].length){let e=this[Si];!e||e.flowing||e.size===e.remain?this[xl]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[ly](e,r){let n=this[bs],i=n.blockRemain,o=i>=e.length&&r===0?e:e.slice(r,r+i);return n.write(o),n.blockRemain||(this[Jr]="header",this[bs]=null,n.end()),o.length}[mx](e,r){let n=this[bs],i=this[ly](e,r);return this[bs]||this[px](n),i}[_s](e,r,n){!this[xi].length&&!this[Si]?this.emit(e,r,n):this[xi].push([e,r,n])}[px](e){switch(this[_s]("meta",this[ao]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Qr]=dx.parse(this[ao],this[Qr],!1);break;case"GlobalExtendedHeader":this[Sl]=dx.parse(this[ao],this[Sl],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Qr]=this[Qr]||Object.create(null),this[Qr].path=this[ao].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Qr]=this[Qr]||Object.create(null),this[Qr].linkpath=this[ao].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[co]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[co])return;if(this[Cr]===null&&e){if(this[nt]&&(e=Buffer.concat([this[nt],e]),this[nt]=null),e.length<ay.length)return this[nt]=e,!0;for(let n=0;this[Cr]===null&&n<ay.length;n++)e[n]!==ay[n]&&(this[Cr]=!1);if(this[Cr]===null){let n=this[Es];this[Es]=!1,this[Cr]=new EG.Unzip,this[Cr].on("data",o=>this[kf](o)),this[Cr].on("error",o=>this.abort(o)),this[Cr].on("end",o=>{this[Es]=!0,this[kf]()}),this[xl]=!0;let i=this[Cr][n?"end":"write"](e);return this[xl]=!1,i}}this[xl]=!0,this[Cr]?this[Cr].write(e):this[kf](e),this[xl]=!1;let r=this[xi].length?!1:this[Si]?this[Si].flowing:!0;return!r&&!this[xi].length&&this[Si].once("drain",n=>this.emit("drain")),r}[uy](e){e&&!this[co]&&(this[nt]=this[nt]?Buffer.concat([this[nt],e]):e)}[dy](){if(this[Es]&&!this[hx]&&!this[co]&&!this[Tf]){this[hx]=!0;let e=this[bs];if(e&&e.blockRemain){let r=this[nt]?this[nt].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[nt]&&e.write(this[nt]),e.end()}this[_s](Af)}}[kf](e){if(this[Tf])this[uy](e);else if(!e&&!this[nt])this[dy]();else{if(this[Tf]=!0,this[nt]){this[uy](e);let r=this[nt];this[nt]=null,this[If](r)}else this[If](e);for(;this[nt]&&this[nt].length>=512&&!this[co]&&!this[Rf];){let r=this[nt];this[nt]=null,this[If](r)}this[Tf]=!1}(!this[nt]||this[Es])&&this[dy]()}[If](e){let r=0,n=e.length;for(;r+512<=n&&!this[co]&&!this[Rf];)switch(this[Jr]){case"begin":case"header":this[gx](e,r),r+=512;break;case"ignore":case"body":r+=this[ly](e,r);break;case"meta":r+=this[mx](e,r);break;default:throw new Error("invalid state: "+this[Jr])}r<n&&(this[nt]?this[nt]=Buffer.concat([e.slice(r),this[nt]]):this[nt]=e.slice(r))}end(e){this[co]||(this[Cr]?this[Cr].end(e):(this[Es]=!0,this.write(e)))}})});var Nf=I((Uue,bx)=>{"use strict";var SG=wa(),yx=Of(),La=require("fs"),xG=Na(),wx=require("path"),fy=xa();bx.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=SG(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&kG(n,e),n.noResume||PG(n),n.file&&n.sync?IG(n):n.file?TG(n,r):Cx(n)};var PG=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},kG=(t,e)=>{let r=new Map(e.map(o=>[fy(o),!0])),n=t.filter,i=(o,s)=>{let a=s||wx.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(wx.dirname(o),a);return r.set(o,c),c};t.filter=n?(o,s)=>n(o,s)&&i(fy(o)):o=>i(fy(o))},IG=t=>{let e=Cx(t),r=t.file,n=!0,i;try{let o=La.statSync(r),s=t.maxReadSize||16*1024*1024;if(o.size<s)e.end(La.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(s);for(i=La.openSync(r,"r");a<o.size;){let l=La.readSync(i,c,0,s,a);a+=l,e.write(c.slice(0,l))}e.end()}n=!1}finally{if(n&&i)try{La.closeSync(i)}catch{}}},TG=(t,e)=>{let r=new yx(t),n=t.maxReadSize||16*1024*1024,i=t.file,o=new Promise((s,a)=>{r.on("error",a),r.on("end",s),La.stat(i,(c,l)=>{if(c)a(c);else{let u=new xG.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?o.then(e,e):o},Cx=t=>new yx(t)});var kx=I((Bue,Px)=>{"use strict";var AG=wa(),Lf=bf(),Ex=Na(),_x=Nf(),Sx=require("path");Px.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=AG(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?DG(n,e):n.file?RG(n,e,r):n.sync?OG(n,e):NG(n,e)};var DG=(t,e)=>{let r=new Lf.Sync(t),n=new Ex.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(n),xx(r,e)},RG=(t,e,r)=>{let n=new Lf(t),i=new Ex.WriteStream(t.file,{mode:t.mode||438});n.pipe(i);let o=new Promise((s,a)=>{i.on("error",a),i.on("close",s),n.on("error",a)});return py(n,e),r?o.then(r,r):o},xx=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?_x({file:Sx.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},py=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return _x({file:Sx.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>py(t,e));t.add(r)}t.end()},OG=(t,e)=>{let r=new Lf.Sync(t);return xx(r,e),r},NG=(t,e)=>{let r=new Lf(t);return py(r,e),r}});var hy=I((Hue,Nx)=>{"use strict";var LG=wa(),Ix=bf(),Fr=require("fs"),Tx=Na(),Ax=Nf(),Dx=require("path"),Rx=Sa();Nx.exports=(t,e,r)=>{let n=LG(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?FG(n,e):qG(n,e,r)};var FG=(t,e)=>{let r=new Ix.Sync(t),n=!0,i,o;try{try{i=Fr.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")i=Fr.openSync(t.file,"w+");else throw c}let s=Fr.fstatSync(i),a=Buffer.alloc(512);e:for(o=0;o<s.size;o+=512){for(let u=0,d=0;u<512;u+=d){if(d=Fr.readSync(i,a,u,a.length-u,o+u),o===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!d)break e}let c=new Rx(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(o+l+512>s.size)break;o+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}n=!1,MG(t,r,o,i,e)}finally{if(n)try{Fr.closeSync(i)}catch{}}},MG=(t,e,r,n,i)=>{let o=new Tx.WriteStreamSync(t.file,{fd:n,start:r});e.pipe(o),jG(e,i)},qG=(t,e,r)=>{e=Array.from(e);let n=new Ix(t),i=(s,a,c)=>{let l=(h,m)=>{h?Fr.close(s,g=>c(h)):c(null,m)},u=0;if(a===0)return l(null,0);let d=0,f=Buffer.alloc(512),p=(h,m)=>{if(h)return l(h);if(d+=m,d<512&&m)return Fr.read(s,f,d,f.length-d,u+d,p);if(u===0&&f[0]===31&&f[1]===139)return l(new Error("cannot append to compressed archives"));if(d<512)return l(null,u);let g=new Rx(f);if(!g.cksumValid)return l(null,u);let v=512*Math.ceil(g.size/512);if(u+v+512>a||(u+=v+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(g.path,g.mtime),d=0,Fr.read(s,f,0,512,u,p)};Fr.read(s,f,0,512,u,p)},o=new Promise((s,a)=>{n.on("error",a);let c="r+",l=(u,d)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",Fr.open(t.file,c,l);if(u)return a(u);Fr.fstat(d,(f,p)=>{if(f)return Fr.close(d,()=>a(f));i(d,p.size,(h,m)=>{if(h)return a(h);let g=new Tx.WriteStream(t.file,{fd:d,start:m});n.pipe(g),g.on("error",a),g.on("close",s),Ox(n,e)})})};Fr.open(t.file,c,l)});return r?o.then(r,r):o},jG=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Ax({file:Dx.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},Ox=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Ax({file:Dx.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>Ox(t,e));t.add(r)}t.end()}});var Fx=I((Vue,Lx)=>{"use strict";var $G=wa(),UG=hy();Lx.exports=(t,e,r)=>{let n=$G(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),BG(n),UG(n,e,r)};var BG=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>e(r,n)&&!(t.mtimeCache.get(r)>n.mtime):(r,n)=>!(t.mtimeCache.get(r)>n.mtime)}});var jx=I((Gue,qx)=>{var{promisify:Mx}=require("util"),lo=require("fs"),HG=t=>{if(!t)t={mode:511,fs:lo};else if(typeof t=="object")t=V({mode:511,fs:lo},t);else if(typeof t=="number")t={mode:t,fs:lo};else if(typeof t=="string")t={mode:parseInt(t,8),fs:lo};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||lo.mkdir,t.mkdirAsync=Mx(t.mkdir),t.stat=t.stat||t.fs.stat||lo.stat,t.statAsync=Mx(t.stat),t.statSync=t.statSync||t.fs.statSync||lo.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||lo.mkdirSync,t};qx.exports=HG});var Ux=I((Wue,$x)=>{var VG=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:GG,parse:WG}=require("path"),zG=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=GG(t),VG==="win32"){let e=/[*|"<>?:]/,{root:r}=WG(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};$x.exports=zG});var Wx=I((zue,Gx)=>{var{dirname:Bx}=require("path"),Hx=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?Hx(t,Bx(e),e):void 0),Vx=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?Vx(t,Bx(e),e):void 0}};Gx.exports={findMade:Hx,findMadeSync:Vx}});var vy=I((Kue,Kx)=>{var{dirname:zx}=require("path"),my=(t,e,r)=>{e.recursive=!1;let n=zx(t);return n===t?e.mkdirAsync(t,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(t,e).then(()=>r||t,i=>{if(i.code==="ENOENT")return my(n,e).then(o=>my(t,e,o));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(t).then(o=>{if(o.isDirectory())return r;throw i},()=>{throw i})})},gy=(t,e,r)=>{let n=zx(t);if(e.recursive=!1,n===t)try{return e.mkdirSync(t,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(t,e),r||t}catch(i){if(i.code==="ENOENT")return gy(t,e,gy(n,e,r));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(t).isDirectory())throw i}catch{throw i}}};Kx.exports={mkdirpManual:my,mkdirpManualSync:gy}});var Qx=I((Yue,Jx)=>{var{dirname:Yx}=require("path"),{findMade:KG,findMadeSync:YG}=Wx(),{mkdirpManual:JG,mkdirpManualSync:QG}=vy(),XG=(t,e)=>(e.recursive=!0,Yx(t)===t?e.mkdirAsync(t,e):KG(e,t).then(n=>e.mkdirAsync(t,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return JG(t,e);throw i}))),ZG=(t,e)=>{if(e.recursive=!0,Yx(t)===t)return e.mkdirSync(t,e);let n=YG(e,t);try{return e.mkdirSync(t,e),n}catch(i){if(i.code==="ENOENT")return QG(t,e);throw i}};Jx.exports={mkdirpNative:XG,mkdirpNativeSync:ZG}});var tP=I((Jue,eP)=>{var Xx=require("fs"),eW=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,yy=eW.replace(/^v/,"").split("."),Zx=+yy[0]>10||+yy[0]==10&&+yy[1]>=12,tW=Zx?t=>t.mkdir===Xx.mkdir:()=>!1,rW=Zx?t=>t.mkdirSync===Xx.mkdirSync:()=>!1;eP.exports={useNative:tW,useNativeSync:rW}});var aP=I((Que,sP)=>{var Fa=jx(),Ma=Ux(),{mkdirpNative:rP,mkdirpNativeSync:nP}=Qx(),{mkdirpManual:iP,mkdirpManualSync:oP}=vy(),{useNative:nW,useNativeSync:iW}=tP(),qa=(t,e)=>(t=Ma(t),e=Fa(e),nW(e)?rP(t,e):iP(t,e)),oW=(t,e)=>(t=Ma(t),e=Fa(e),iW(e)?nP(t,e):oP(t,e));qa.sync=oW;qa.native=(t,e)=>rP(Ma(t),Fa(e));qa.manual=(t,e)=>iP(Ma(t),Fa(e));qa.nativeSync=(t,e)=>nP(Ma(t),Fa(e));qa.manualSync=(t,e)=>oP(Ma(t),Fa(e));sP.exports=qa});var hP=I((Xue,pP)=>{"use strict";var Xr=require("fs"),xs=require("path"),sW=Xr.lchown?"lchown":"chown",aW=Xr.lchownSync?"lchownSync":"chownSync",cP=Xr.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),lP=(t,e,r)=>{try{return Xr[aW](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},cW=(t,e,r)=>{try{return Xr.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},lW=cP?(t,e,r,n)=>i=>{!i||i.code!=="EISDIR"?n(i):Xr.chown(t,e,r,n)}:(t,e,r,n)=>n,wy=cP?(t,e,r)=>{try{return lP(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;cW(t,e,r)}}:(t,e,r)=>lP(t,e,r),uW=process.version,uP=(t,e,r)=>Xr.readdir(t,e,r),dW=(t,e)=>Xr.readdirSync(t,e);/^v4\./.test(uW)&&(uP=(t,e,r)=>Xr.readdir(t,r));var Ff=(t,e,r,n)=>{Xr[sW](t,e,r,lW(t,e,r,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},dP=(t,e,r,n,i)=>{if(typeof e=="string")return Xr.lstat(xs.resolve(t,e),(o,s)=>{if(o)return i(o.code!=="ENOENT"?o:null);s.name=e,dP(t,s,r,n,i)});if(e.isDirectory())Cy(xs.resolve(t,e.name),r,n,o=>{if(o)return i(o);let s=xs.resolve(t,e.name);Ff(s,r,n,i)});else{let o=xs.resolve(t,e.name);Ff(o,r,n,i)}},Cy=(t,e,r,n)=>{uP(t,{withFileTypes:!0},(i,o)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!o.length)return Ff(t,e,r,n);let s=o.length,a=null,c=l=>{if(!a){if(l)return n(a=l);if(--s==0)return Ff(t,e,r,n)}};o.forEach(l=>dP(t,l,e,r,c))})},fW=(t,e,r,n)=>{if(typeof e=="string")try{let i=Xr.lstatSync(xs.resolve(t,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&fP(xs.resolve(t,e.name),r,n),wy(xs.resolve(t,e.name),r,n)},fP=(t,e,r)=>{let n;try{n=dW(t,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return wy(t,e,r);throw i}return n&&n.length&&n.forEach(i=>fW(t,i,e,r)),wy(t,e,r)};pP.exports=Cy;Cy.sync=fP});var yP=I((Zue,_y)=>{"use strict";var mP=aP(),Zr=require("fs"),Mf=require("path"),gP=hP(),Sn=Ea(),by=class extends Error{constructor(e,r){super("Cannot extract through symbolic link");this.path=r,this.symlink=e}get name(){return"SylinkError"}},Ey=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'");this.path=e,this.code=r}get name(){return"CwdError"}},qf=(t,e)=>t.get(Sn(e)),Pl=(t,e,r)=>t.set(Sn(e),r),pW=(t,e)=>{Zr.stat(t,(r,n)=>{(r||!n.isDirectory())&&(r=new Ey(t,r&&r.code||"ENOTDIR")),e(r)})};_y.exports=(t,e,r)=>{t=Sn(t);let n=e.umask,i=e.mode|448,o=(i&n)!=0,s=e.uid,a=e.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,d=e.cache,f=Sn(e.cwd),p=(g,v)=>{g?r(g):(Pl(d,t,!0),v&&c?gP(v,s,a,w=>p(w)):o?Zr.chmod(t,i,r):r())};if(d&&qf(d,t)===!0)return p();if(t===f)return pW(t,p);if(l)return mP(t,{mode:i}).then(g=>p(null,g),p);let m=Sn(Mf.relative(f,t)).split("/");jf(f,m,i,d,u,f,null,p)};var jf=(t,e,r,n,i,o,s,a)=>{if(!e.length)return a(null,s);let c=e.shift(),l=Sn(Mf.resolve(t+"/"+c));if(qf(n,l))return jf(l,e,r,n,i,o,s,a);Zr.mkdir(l,r,vP(l,e,r,n,i,o,s,a))},vP=(t,e,r,n,i,o,s,a)=>c=>{c?Zr.lstat(t,(l,u)=>{if(l)l.path=l.path&&Sn(l.path),a(l);else if(u.isDirectory())jf(t,e,r,n,i,o,s,a);else if(i)Zr.unlink(t,d=>{if(d)return a(d);Zr.mkdir(t,r,vP(t,e,r,n,i,o,s,a))});else{if(u.isSymbolicLink())return a(new by(t,t+"/"+e.join("/")));a(c)}}):(s=s||t,jf(t,e,r,n,i,o,s,a))},hW=t=>{let e=!1,r="ENOTDIR";try{e=Zr.statSync(t).isDirectory()}catch(n){r=n.code}finally{if(!e)throw new Ey(t,r)}};_y.exports.sync=(t,e)=>{t=Sn(t);let r=e.umask,n=e.mode|448,i=(n&r)!=0,o=e.uid,s=e.gid,a=typeof o=="number"&&typeof s=="number"&&(o!==e.processUid||s!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,d=Sn(e.cwd),f=g=>{Pl(u,t,!0),g&&a&&gP.sync(g,o,s),i&&Zr.chmodSync(t,n)};if(u&&qf(u,t)===!0)return f();if(t===d)return hW(d),f();if(c)return f(mP.sync(t,n));let h=Sn(Mf.relative(d,t)).split("/"),m=null;for(let g=h.shift(),v=d;g&&(v+="/"+g);g=h.shift())if(v=Sn(Mf.resolve(v)),!qf(u,v))try{Zr.mkdirSync(v,n),m=m||v,Pl(u,v,!0)}catch{let C=Zr.lstatSync(v);if(C.isDirectory()){Pl(u,v,!0);continue}else if(l){Zr.unlinkSync(v),Zr.mkdirSync(v,n),m=m||v,Pl(u,v,!0);continue}else if(C.isSymbolicLink())return new by(v,v+"/"+h.join("/"))}return f(m)}});var xy=I((ede,wP)=>{var Sy=Object.create(null),{hasOwnProperty:mW}=Object.prototype;wP.exports=t=>(mW.call(Sy,t)||(Sy[t]=t.normalize("NFKD")),Sy[t])});var _P=I((tde,EP)=>{var CP=require("assert"),gW=xy(),vW=xa(),{join:bP}=require("path"),yW=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,wW=yW==="win32";EP.exports=()=>{let t=new Map,e=new Map,r=l=>l.split("/").slice(0,-1).reduce((d,f)=>(d.length&&(f=bP(d[d.length-1],f)),d.push(f||"/"),d),[]),n=new Set,i=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(d=>t.get(d)),dirs:[...u.dirs].map(d=>t.get(d))}},o=l=>{let{paths:u,dirs:d}=i(l);return u.every(f=>f[0]===l)&&d.every(f=>f[0]instanceof Set&&f[0].has(l))},s=l=>n.has(l)||!o(l)?!1:(n.add(l),l(()=>a(l)),!0),a=l=>{if(!n.has(l))return!1;let{paths:u,dirs:d}=e.get(l),f=new Set;return u.forEach(p=>{let h=t.get(p);CP.equal(h[0],l),h.length===1?t.delete(p):(h.shift(),typeof h[0]=="function"?f.add(h[0]):h[0].forEach(m=>f.add(m)))}),d.forEach(p=>{let h=t.get(p);CP(h[0]instanceof Set),h[0].size===1&&h.length===1?t.delete(p):h[0].size===1?(h.shift(),f.add(h[0])):h[0].delete(l)}),n.delete(l),f.forEach(p=>s(p)),!0};return{check:o,reserve:(l,u)=>{l=wW?["win32 parallelization disabled"]:l.map(f=>gW(vW(bP(f))).toLowerCase());let d=new Set(l.map(f=>r(f)).reduce((f,p)=>f.concat(p)));return e.set(u,{dirs:d,paths:l}),l.forEach(f=>{let p=t.get(f);p?p.push(u):t.set(f,[u])}),d.forEach(f=>{let p=t.get(f);p?p[p.length-1]instanceof Set?p[p.length-1].add(u):p.push(new Set([u])):t.set(f,[new Set([u])])}),s(u)}}}});var PP=I((rde,xP)=>{var CW=process.env.__FAKE_PLATFORM__||process.platform,bW=CW==="win32",EW=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:_W,O_TRUNC:SW,O_WRONLY:xW,UV_FS_O_FILEMAP:SP=0}=EW.constants,PW=bW&&!!SP,kW=512*1024,IW=SP|SW|_W|xW;xP.exports=PW?t=>t<kW?IW:"w":()=>"w"});var Oy=I((nde,UP)=>{"use strict";var TW=require("assert"),AW=Of(),Be=require("fs"),DW=Na(),Pi=require("path"),kP=yP(),IP=Ov(),RW=_P(),OW=Nv(),Mr=Ea(),NW=xa(),LW=xy(),TP=Symbol("onEntry"),Py=Symbol("checkFs"),AP=Symbol("checkFs2"),$f=Symbol("pruneCache"),ky=Symbol("isReusable"),en=Symbol("makeFs"),Iy=Symbol("file"),Ty=Symbol("directory"),Uf=Symbol("link"),DP=Symbol("symlink"),RP=Symbol("hardlink"),OP=Symbol("unsupported"),NP=Symbol("checkPath"),uo=Symbol("mkdir"),Zt=Symbol("onError"),Bf=Symbol("pending"),LP=Symbol("pend"),ja=Symbol("unpend"),Ay=Symbol("ended"),Dy=Symbol("maybeClose"),Ry=Symbol("skip"),kl=Symbol("doChown"),Il=Symbol("uid"),Tl=Symbol("gid"),Al=Symbol("checkedCwd"),FP=require("crypto"),MP=PP(),FW=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Dl=FW==="win32",MW=(t,e)=>{if(!Dl)return Be.unlink(t,e);let r=t+".DELETE."+FP.randomBytes(16).toString("hex");Be.rename(t,r,n=>{if(n)return e(n);Be.unlink(r,e)})},qW=t=>{if(!Dl)return Be.unlinkSync(t);let e=t+".DELETE."+FP.randomBytes(16).toString("hex");Be.renameSync(t,e),Be.unlinkSync(e)},qP=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,jP=t=>LW(NW(Mr(t))).toLowerCase(),jW=(t,e)=>{e=jP(e);for(let r of t.keys()){let n=jP(r);(n===e||n.indexOf(e+"/")===0)&&t.delete(r)}},$W=t=>{for(let e of t.keys())t.delete(e)},Hf=class extends AW{constructor(e){e||(e={}),e.ondone=r=>{this[Ay]=!0,this[Dy]()};super(e);if(this[Al]=!1,this.reservations=RW(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[Bf]=0,this[Ay]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||Dl,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Mr(Pi.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[TP](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[Dy](){this[Ay]&&this[Bf]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[NP](e){if(this.strip){let r=Mr(e.path).split("/");if(r.length<this.strip)return!1;if(e.path=r.slice(this.strip).join("/"),e.type==="Link"){let n=Mr(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=Mr(e.path),n=r.split("/");if(n.includes("..")||Dl&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[i,o]=OW(r);i&&(e.path=o,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:r}))}if(Pi.isAbsolute(e.path)?e.absolute=Mr(Pi.resolve(e.path)):e.absolute=Mr(Pi.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Mr(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=Pi.win32.parse(e.absolute);e.absolute=r+IP.encode(e.absolute.substr(r.length));let{root:n}=Pi.win32.parse(e.path);e.path=n+IP.encode(e.path.substr(n.length))}return!0}[TP](e){if(!this[NP](e))return e.resume();switch(TW.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Py](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[OP](e)}}[Zt](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[ja](),r.resume())}[uo](e,r,n){kP(Mr(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[kl](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Il](e){return qP(this.uid,e.uid,this.processUid)}[Tl](e){return qP(this.gid,e.gid,this.processGid)}[Iy](e,r){let n=e.mode&4095||this.fmode,i=new DW.WriteStream(e.absolute,{flags:MP(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&Be.close(i.fd,()=>{}),i.write=()=>!0,this[Zt](c,e),r()});let o=1,s=c=>{if(c){i.fd&&Be.close(i.fd,()=>{}),this[Zt](c,e),r();return}--o==0&&Be.close(i.fd,l=>{l?this[Zt](l,e):this[ja](),r()})};i.on("finish",c=>{let l=e.absolute,u=i.fd;if(e.mtime&&!this.noMtime){o++;let d=e.atime||new Date,f=e.mtime;Be.futimes(u,d,f,p=>p?Be.utimes(l,d,f,h=>s(h&&p)):s())}if(this[kl](e)){o++;let d=this[Il](e),f=this[Tl](e);Be.fchown(u,d,f,p=>p?Be.chown(l,d,f,h=>s(h&&p)):s())}s()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[Zt](c,e),r()}),e.pipe(a)),a.pipe(i)}[Ty](e,r){let n=e.mode&4095||this.dmode;this[uo](e.absolute,n,i=>{if(i){this[Zt](i,e),r();return}let o=1,s=a=>{--o==0&&(r(),this[ja](),e.resume())};e.mtime&&!this.noMtime&&(o++,Be.utimes(e.absolute,e.atime||new Date,e.mtime,s)),this[kl](e)&&(o++,Be.chown(e.absolute,this[Il](e),this[Tl](e),s)),s()})}[OP](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[DP](e,r){this[Uf](e,e.linkpath,"symlink",r)}[RP](e,r){let n=Mr(Pi.resolve(this.cwd,e.linkpath));this[Uf](e,n,"link",r)}[LP](){this[Bf]++}[ja](){this[Bf]--,this[Dy]()}[Ry](e){this[ja](),e.resume()}[ky](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!Dl}[Py](e){this[LP]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[AP](e,n))}[$f](e){e.type==="SymbolicLink"?$W(this.dirCache):e.type!=="Directory"&&jW(this.dirCache,e.absolute)}[AP](e,r){this[$f](e);let n=a=>{this[$f](e),r(a)},i=()=>{this[uo](this.cwd,this.dmode,a=>{if(a){this[Zt](a,e),n();return}this[Al]=!0,o()})},o=()=>{if(e.absolute!==this.cwd){let a=Mr(Pi.dirname(e.absolute));if(a!==this.cwd)return this[uo](a,this.dmode,c=>{if(c){this[Zt](c,e),n();return}s()})}s()},s=()=>{Be.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[Ry](e),n();return}if(a||this[ky](e,c))return this[en](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=d=>this[en](d,e,n);return l?Be.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return Be.rmdir(e.absolute,l=>this[en](l,e,n))}if(e.absolute===this.cwd)return this[en](null,e,n);MW(e.absolute,l=>this[en](l,e,n))})};this[Al]?o():i()}[en](e,r,n){if(e){this[Zt](e,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[Iy](r,n);case"Link":return this[RP](r,n);case"SymbolicLink":return this[DP](r,n);case"Directory":case"GNUDumpDir":return this[Ty](r,n)}}[Uf](e,r,n,i){Be[n](r,e.absolute,o=>{o?this[Zt](o,e):(this[ja](),e.resume()),i()})}},Vf=t=>{try{return[null,t()]}catch(e){return[e,null]}},$P=class extends Hf{[en](e,r){return super[en](e,r,()=>{})}[Py](e){if(this[$f](e),!this[Al]){let o=this[uo](this.cwd,this.dmode);if(o)return this[Zt](o,e);this[Al]=!0}if(e.absolute!==this.cwd){let o=Mr(Pi.dirname(e.absolute));if(o!==this.cwd){let s=this[uo](o,this.dmode);if(s)return this[Zt](s,e)}}let[r,n]=Vf(()=>Be.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[Ry](e);if(r||this[ky](e,n))return this[en](null,e);if(n.isDirectory()){if(e.type==="Directory"){let s=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=s?Vf(()=>{Be.chmodSync(e.absolute,e.mode)}):[];return this[en](a,e)}let[o]=Vf(()=>Be.rmdirSync(e.absolute));this[en](o,e)}let[i]=e.absolute===this.cwd?[]:Vf(()=>qW(e.absolute));this[en](i,e)}[Iy](e,r){let n=e.mode&4095||this.fmode,i=a=>{let c;try{Be.closeSync(o)}catch(l){c=l}(a||c)&&this[Zt](a||c,e),r()},o;try{o=Be.openSync(e.absolute,MP(e.size),n)}catch(a){return i(a)}let s=this.transform&&this.transform(e)||e;s!==e&&(s.on("error",a=>this[Zt](a,e)),e.pipe(s)),s.on("data",a=>{try{Be.writeSync(o,a,0,a.length)}catch(c){i(c)}}),s.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{Be.futimesSync(o,l,u)}catch(d){try{Be.utimesSync(e.absolute,l,u)}catch{c=d}}}if(this[kl](e)){let l=this[Il](e),u=this[Tl](e);try{Be.fchownSync(o,l,u)}catch(d){try{Be.chownSync(e.absolute,l,u)}catch{c=c||d}}}i(c)})}[Ty](e,r){let n=e.mode&4095||this.dmode,i=this[uo](e.absolute,n);if(i){this[Zt](i,e),r();return}if(e.mtime&&!this.noMtime)try{Be.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[kl](e))try{Be.chownSync(e.absolute,this[Il](e),this[Tl](e))}catch{}r(),e.resume()}[uo](e,r){try{return kP.sync(Mr(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[Uf](e,r,n,i){try{Be[n+"Sync"](r,e.absolute),i(),e.resume()}catch(o){return this[Zt](o,e)}}};Hf.Sync=$P;UP.exports=Hf});var WP=I((ide,GP)=>{"use strict";var UW=wa(),Gf=Oy(),BP=require("fs"),HP=Na(),VP=require("path"),Ny=xa();GP.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=UW(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&BW(n,e),n.file&&n.sync?HW(n):n.file?VW(n,r):n.sync?GW(n):WW(n)};var BW=(t,e)=>{let r=new Map(e.map(o=>[Ny(o),!0])),n=t.filter,i=(o,s)=>{let a=s||VP.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(VP.dirname(o),a);return r.set(o,c),c};t.filter=n?(o,s)=>n(o,s)&&i(Ny(o)):o=>i(Ny(o))},HW=t=>{let e=new Gf.Sync(t),r=t.file,n=BP.statSync(r),i=t.maxReadSize||16*1024*1024;new HP.ReadStreamSync(r,{readSize:i,size:n.size}).pipe(e)},VW=(t,e)=>{let r=new Gf(t),n=t.maxReadSize||16*1024*1024,i=t.file,o=new Promise((s,a)=>{r.on("error",a),r.on("close",s),BP.stat(i,(c,l)=>{if(c)a(c);else{let u=new HP.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?o.then(e,e):o},GW=t=>new Gf.Sync(t),WW=t=>new Gf(t)});var Rl=I(Tt=>{"use strict";Tt.c=Tt.create=kx();Tt.r=Tt.replace=hy();Tt.t=Tt.list=Nf();Tt.u=Tt.update=Fx();Tt.x=Tt.extract=WP();Tt.Pack=bf();Tt.Unpack=Oy();Tt.Parse=Of();Tt.ReadEntry=nf();Tt.WriteEntry=Hv();Tt.Header=Sa();Tt.Pax=af();Tt.types=kv()});var Fy=I(Ly=>{"use strict";Object.defineProperty(Ly,"__esModule",{value:!0});Ly.default=YW;var zW=KW(require("crypto"));function KW(t){return t&&t.__esModule?t:{default:t}}var Wf=new Uint8Array(256),zf=Wf.length;function YW(){return zf>Wf.length-16&&(zW.default.randomFillSync(Wf),zf=0),Wf.slice(zf,zf+=16)}});var zP=I(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.default=void 0;var JW=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Kf.default=JW});var Ol=I(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.default=void 0;var QW=XW(zP());function XW(t){return t&&t.__esModule?t:{default:t}}function ZW(t){return typeof t=="string"&&QW.default.test(t)}var ez=ZW;Yf.default=ez});var Nl=I(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.default=void 0;var tz=rz(Ol());function rz(t){return t&&t.__esModule?t:{default:t}}var $t=[];for(let t=0;t<256;++t)$t.push((t+256).toString(16).substr(1));function nz(t,e=0){let r=($t[t[e+0]]+$t[t[e+1]]+$t[t[e+2]]+$t[t[e+3]]+"-"+$t[t[e+4]]+$t[t[e+5]]+"-"+$t[t[e+6]]+$t[t[e+7]]+"-"+$t[t[e+8]]+$t[t[e+9]]+"-"+$t[t[e+10]]+$t[t[e+11]]+$t[t[e+12]]+$t[t[e+13]]+$t[t[e+14]]+$t[t[e+15]]).toLowerCase();if(!(0,tz.default)(r))throw TypeError("Stringified UUID is invalid");return r}var iz=nz;Jf.default=iz});var JP=I(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.default=void 0;var oz=KP(Fy()),sz=KP(Nl());function KP(t){return t&&t.__esModule?t:{default:t}}var YP,My,qy=0,jy=0;function az(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node||YP,s=t.clockseq!==void 0?t.clockseq:My;if(o==null||s==null){let f=t.random||(t.rng||oz.default)();o==null&&(o=YP=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),s==null&&(s=My=(f[6]<<8|f[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:jy+1,l=a-qy+(c-jy)/1e4;if(l<0&&t.clockseq===void 0&&(s=s+1&16383),(l<0||a>qy)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");qy=a,jy=c,My=s,a+=122192928e5;let u=((a&268435455)*1e4+c)%4294967296;i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=u&255;let d=a/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let f=0;f<6;++f)i[n+f]=o[f];return e||(0,sz.default)(i)}var cz=az;Qf.default=cz});var $y=I(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.default=void 0;var lz=uz(Ol());function uz(t){return t&&t.__esModule?t:{default:t}}function dz(t){if(!(0,lz.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var fz=dz;Xf.default=fz});var Uy=I(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.default=gz;Ps.URL=Ps.DNS=void 0;var pz=QP(Nl()),hz=QP($y());function QP(t){return t&&t.__esModule?t:{default:t}}function mz(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var XP="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Ps.DNS=XP;var ZP="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Ps.URL=ZP;function gz(t,e,r){function n(i,o,s,a){if(typeof i=="string"&&(i=mz(i)),typeof o=="string"&&(o=(0,hz.default)(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+i.length);if(c.set(o),c.set(i,o.length),c=r(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,s){a=a||0;for(let l=0;l<16;++l)s[a+l]=c[l];return s}return(0,pz.default)(c)}try{n.name=t}catch{}return n.DNS=XP,n.URL=ZP,n}});var ek=I(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.default=void 0;var vz=yz(require("crypto"));function yz(t){return t&&t.__esModule?t:{default:t}}function wz(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),vz.default.createHash("md5").update(t).digest()}var Cz=wz;Zf.default=Cz});var rk=I(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.default=void 0;var bz=tk(Uy()),Ez=tk(ek());function tk(t){return t&&t.__esModule?t:{default:t}}var _z=(0,bz.default)("v3",48,Ez.default),Sz=_z;ep.default=Sz});var ik=I(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.default=void 0;var xz=nk(Fy()),Pz=nk(Nl());function nk(t){return t&&t.__esModule?t:{default:t}}function kz(t,e,r){t=t||{};let n=t.random||(t.rng||xz.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,Pz.default)(n)}var Iz=kz;tp.default=Iz});var ok=I(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.default=void 0;var Tz=Az(require("crypto"));function Az(t){return t&&t.__esModule?t:{default:t}}function Dz(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),Tz.default.createHash("sha1").update(t).digest()}var Rz=Dz;rp.default=Rz});var ak=I(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.default=void 0;var Oz=sk(Uy()),Nz=sk(ok());function sk(t){return t&&t.__esModule?t:{default:t}}var Lz=(0,Oz.default)("v5",80,Nz.default),Fz=Lz;np.default=Fz});var ck=I(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});ip.default=void 0;var Mz="00000000-0000-0000-0000-000000000000";ip.default=Mz});var lk=I(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.default=void 0;var qz=jz(Ol());function jz(t){return t&&t.__esModule?t:{default:t}}function $z(t){if(!(0,qz.default)(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var Uz=$z;op.default=Uz});var uk=I(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});Object.defineProperty(xn,"v1",{enumerable:!0,get:function(){return Bz.default}});Object.defineProperty(xn,"v3",{enumerable:!0,get:function(){return Hz.default}});Object.defineProperty(xn,"v4",{enumerable:!0,get:function(){return Vz.default}});Object.defineProperty(xn,"v5",{enumerable:!0,get:function(){return Gz.default}});Object.defineProperty(xn,"NIL",{enumerable:!0,get:function(){return Wz.default}});Object.defineProperty(xn,"version",{enumerable:!0,get:function(){return zz.default}});Object.defineProperty(xn,"validate",{enumerable:!0,get:function(){return Kz.default}});Object.defineProperty(xn,"stringify",{enumerable:!0,get:function(){return Yz.default}});Object.defineProperty(xn,"parse",{enumerable:!0,get:function(){return Jz.default}});var Bz=ki(JP()),Hz=ki(rk()),Vz=ki(ik()),Gz=ki(ak()),Wz=ki(ck()),zz=ki(lk()),Kz=ki(Ol()),Yz=ki(Nl()),Jz=ki($y());function ki(t){return t&&t.__esModule?t:{default:t}}});var _k=I((Mde,Ek)=>{var Ua=1e3,Ba=Ua*60,Ha=Ba*60,ks=Ha*24,a4=ks*7,c4=ks*365.25;Ek.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return l4(t);if(r==="number"&&isFinite(t))return e.long?d4(t):u4(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function l4(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*c4;case"weeks":case"week":case"w":return r*a4;case"days":case"day":case"d":return r*ks;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ha;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ba;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ua;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function u4(t){var e=Math.abs(t);return e>=ks?Math.round(t/ks)+"d":e>=Ha?Math.round(t/Ha)+"h":e>=Ba?Math.round(t/Ba)+"m":e>=Ua?Math.round(t/Ua)+"s":t+"ms"}function d4(t){var e=Math.abs(t);return e>=ks?ap(t,e,ks,"day"):e>=Ha?ap(t,e,Ha,"hour"):e>=Ba?ap(t,e,Ba,"minute"):e>=Ua?ap(t,e,Ua,"second"):t+" ms"}function ap(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Gy=I((qde,Sk)=>{function f4(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=_k(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let f=0;f<u.length;f++)d=(d<<5)-d+u.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,f=null;function p(...h){if(!p.enabled)return;let m=p,g=Number(new Date),v=g-(d||g);m.diff=v,m.prev=d,m.curr=g,d=g,h[0]=r.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let w=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(b,S)=>{if(b==="%%")return"%";w++;let P=r.formatters[S];if(typeof P=="function"){let _=h[w];b=P.call(m,_),h.splice(w,1),w--}return b}),r.formatArgs.call(m,h),(m.log||r.log).apply(m,h)}return p.namespace=u,p.useColors=r.useColors(),p.color=r.selectColor(u),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>f===null?r.enabled(u):f,set:h=>{f=h}}),typeof r.init=="function"&&r.init(p),p}function n(u,d){let f=r(this.namespace+(typeof d=="undefined"?":":d)+u);return f.log=this.log,f}function i(u){r.save(u),r.names=[],r.skips=[];let d,f=(typeof u=="string"?u:"").split(/[\s,]+/),p=f.length;for(d=0;d<p;d++)!f[d]||(u=f[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let d,f;for(d=0,f=r.skips.length;d<f;d++)if(r.skips[d].test(u))return!1;for(d=0,f=r.names.length;d<f;d++)if(r.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Sk.exports=f4});var xk=I((jr,cp)=>{jr.formatArgs=h4;jr.save=m4;jr.load=g4;jr.useColors=p4;jr.storage=v4();jr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();jr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function p4(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function h4(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+cp.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}jr.log=console.debug||console.log||(()=>{});function m4(t){try{t?jr.storage.setItem("debug",t):jr.storage.removeItem("debug")}catch{}}function g4(){let t;try{t=jr.storage.getItem("debug")}catch{}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function v4(){try{return localStorage}catch{}}cp.exports=Gy()(jr);var{formatters:y4}=cp.exports;y4.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var kk=I((jde,Pk)=>{"use strict";Pk.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Ak=I(($de,Tk)=>{"use strict";var w4=require("os"),Ik=require("tty"),tn=kk(),{env:Lt}=process,lp;tn("no-color")||tn("no-colors")||tn("color=false")||tn("color=never")?lp=0:(tn("color")||tn("colors")||tn("color=true")||tn("color=always"))&&(lp=1);function C4(){if("FORCE_COLOR"in Lt)return Lt.FORCE_COLOR==="true"?1:Lt.FORCE_COLOR==="false"?0:Lt.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(Lt.FORCE_COLOR,10),3)}function b4(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function E4(t,{streamIsTTY:e,sniffFlags:r=!0}={}){let n=C4();n!==void 0&&(lp=n);let i=r?lp:n;if(i===0)return 0;if(r){if(tn("color=16m")||tn("color=full")||tn("color=truecolor"))return 3;if(tn("color=256"))return 2}if(t&&!e&&i===void 0)return 0;let o=i||0;if(Lt.TERM==="dumb")return o;if(process.platform==="win32"){let s=w4.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in Lt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(s=>s in Lt)||Lt.CI_NAME==="codeship"?1:o;if("TEAMCITY_VERSION"in Lt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Lt.TEAMCITY_VERSION)?1:0;if(Lt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Lt){let s=Number.parseInt((Lt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Lt.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Lt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Lt.TERM)||"COLORTERM"in Lt?1:o}function Wy(t,e={}){let r=E4(t,V({streamIsTTY:t&&t.isTTY},e));return b4(r)}Tk.exports={supportsColor:Wy,stdout:Wy({isTTY:Ik.isatty(1)}),stderr:Wy({isTTY:Ik.isatty(2)})}});var Rk=I((Ut,dp)=>{var _4=require("tty"),up=require("util");Ut.init=A4;Ut.log=k4;Ut.formatArgs=x4;Ut.save=I4;Ut.load=T4;Ut.useColors=S4;Ut.destroy=up.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ut.colors=[6,2,3,4,5,1];try{let t=Ak();t&&(t.stderr||t).level>=2&&(Ut.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ut.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function S4(){return"colors"in Ut.inspectOpts?Boolean(Ut.inspectOpts.colors):_4.isatty(process.stderr.fd)}function x4(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} [0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+dp.exports.humanize(this.diff)+"[0m")}else t[0]=P4()+e+" "+t[0]}function P4(){return Ut.inspectOpts.hideDate?"":new Date().toISOString()+" "}function k4(...t){return process.stderr.write(up.format(...t)+`
`)}function I4(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function T4(){return process.env.DEBUG}function A4(t){t.inspectOpts={};let e=Object.keys(Ut.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Ut.inspectOpts[e[r]]}dp.exports=Gy()(Ut);var{formatters:Dk}=dp.exports;Dk.o=function(t){return this.inspectOpts.colors=this.useColors,up.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Dk.O=function(t){return this.inspectOpts.colors=this.useColors,up.inspect(t,this.inspectOpts)}});var Ok=I((Ude,zy)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?zy.exports=xk():zy.exports=Rk()});var Lk=I((Bde,Nk)=>{var Ml;Nk.exports=function(){if(!Ml){try{Ml=Ok()("follow-redirects")}catch{}typeof Ml!="function"&&(Ml=function(){})}Ml.apply(null,arguments)}});var Va=I((Hde,Qy)=>{var Is=require("url"),Ky=Is.URL,D4=require("http"),R4=require("https"),Fk=require("stream").Writable,O4=require("assert"),Mk=Lk(),Ts=["abort","aborted","connect","error","socket","timeout"],Yy=Object.create(null);Ts.forEach(function(t){Yy[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var qk=fp("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),N4=fp("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),L4=fp("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),F4=fp("ERR_STREAM_WRITE_AFTER_END","write after end");function $r(t,e){Fk.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}$r.prototype=Object.create(Fk.prototype);$r.prototype.abort=function(){Uk(this._currentRequest),this.emit("abort")};$r.prototype.write=function(t,e,r){if(this._ending)throw new F4;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new L4),this.abort())};$r.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};$r.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};$r.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};$r.prototype.setTimeout=function(t,e){var r=this;function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},t),n(s)}function o(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",o),r.removeListener("error",o),r.removeListener("response",o),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",o),this.on("error",o),this.on("response",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){$r.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty($r.prototype,t,{get:function(){return this._currentRequest[t]}})});$r.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};$r.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=Is.format(this._options),n._redirectable=this;for(var i=0;i<Ts.length;i++)n.on(Ts[i],Yy[Ts[i]]);if(this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function c(l){if(n===s._currentRequest)if(l)s.emit("error",l);else if(o<a.length){var u=a[o++];n.finished||n.write(u.data,u.encoding,c)}else s._ended&&n.end()})()}};$r.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(Uk(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new N4);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Jy(/^content-/i,this._options.headers));var n=Jy(/^host$/i,this._options.headers),i=Is.parse(this._currentUrl),o=n||i.host,s=/^\w+:/.test(r)?this._currentUrl:Is.format(Object.assign(i,{host:o})),a;try{a=Is.resolve(s,r)}catch(u){this.emit("error",new qk(u));return}Mk("redirecting to",a),this._isRedirect=!0;var c=Is.parse(a);if(Object.assign(this._options,c),(c.protocol!==i.protocol||!q4(c.host,o))&&Jy(/^(?:authorization|cookie)$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var l={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,l)}catch(u){this.emit("error",u);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(u){this.emit("error",new qk(u))}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function jk(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var i=n+":",o=r[i]=t[n],s=e[n]=Object.create(o);function a(l,u,d){if(typeof l=="string"){var f=l;try{l=$k(new Ky(f))}catch{l=Is.parse(f)}}else Ky&&l instanceof Ky?l=$k(l):(d=u,u=l,l={protocol:i});return typeof u=="function"&&(d=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=r,O4.equal(u.protocol,i,"protocol mismatch"),Mk("options",u),new $r(u,d)}function c(l,u,d){var f=s.request(l,u,d);return f.end(),f}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function M4(){}function $k(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function Jy(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r=="undefined"?void 0:String(r).trim()}function fp(t,e){function r(n){Error.captureStackTrace(this,this.constructor),n?(this.message=e+": "+n.message,this.cause=n):this.message=e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function Uk(t){for(var e=0;e<Ts.length;e++)t.removeListener(Ts[e],Yy[Ts[e]]);t.on("error",M4),t.abort()}function q4(t,e){if(t===e)return!0;let r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}Qy.exports=jk({http:D4,https:R4});Qy.exports.wrap=jk});var tw=I((ufe,Yk)=>{Yk.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var Cp=I((dfe,Qk)=>{"use strict";var Jk=tw();Qk.exports=function(e,r){if(!e)return function(i,o){return i?Jk(o,i,r):o(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,o){if(i)return Jk(o,i,r);n>=e.length?o(!0):o(null,e[n++])}}});var Zk=I((ffe,Xk)=>{"use strict";var H4=Cp();Xk.exports=function(t){return H4(Object.keys(t))}});var rw=I((pfe,eI)=>{"use strict";var V4=tw();eI.exports=function(e,r){return function(n,i){if(n)return V4(i,n,r);if(e!=null){var o=e;e=null,i(null,o)}else i(!0)}}});var rI=I((hfe,tI)=>{"use strict";tI.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var iI=I((mfe,nI)=>{"use strict";nI.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var sI=I((gfe,oI)=>{"use strict";oI.exports=function(){return function(e,r){r(!0)}}});var cI=I((vfe,aI)=>{"use strict";aI.exports=function(e){return function(r,n){n(e)}}});var uI=I((yfe,lI)=>{"use strict";lI.exports={keys:Zk(),once:rw(),values:Cp(),count:rI(),infinite:iI(),empty:sI(),error:cI()}});var Wa=I((wfe,dI)=>{"use strict";dI.exports=function(e,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,l=!1;c;)if(l=!1,n(null,function(u,d){if(l=!0,u=u||i){if(c=!1,r)r(u===!0?null:u);else if(u&&u!==!0)throw u}else e&&e(d)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!l){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var pI=I((Cfe,fI)=>{"use strict";var G4=Wa();fI.exports=function(e){return G4(null,e)}});var mI=I((bfe,hI)=>{"use strict";var W4=Wa();hI.exports=function(e){return W4(function(r){console.log(r)},e)}});var za=I((Efe,gI)=>{gI.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var wI=I((_fe,yI)=>{"use strict";function vI(t){return t}var z4=za(),K4=Wa();yI.exports=function(e,r){var n=!1;return r?e=z4(e)||vI:(r=e,e=vI),K4(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var bp=I((Sfe,CI)=>{"use strict";var Y4=Wa();CI.exports=function(e,r,n){n||(n=r,r=null);var i=Y4(function(o){r=e(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var EI=I((xfe,bI)=>{"use strict";var J4=bp();bI.exports=function(e){return J4(function(r,n){return r.push(n),r},[],e)}});var SI=I((Pfe,_I)=>{"use strict";var Q4=bp();_I.exports=function(e){return Q4(function(r,n){return r+n},"",e)}});var PI=I((kfe,xI)=>{"use strict";xI.exports={drain:Wa(),onEnd:pI(),log:mI(),find:wI(),reduce:bp(),collect:EI(),concat:SI()}});var II=I((Ife,kI)=>{"use strict";function X4(t){return t}var Z4=za();kI.exports=function(e){return e?(e=Z4(e),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:e(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):X4}});var AI=I((Tfe,TI)=>{"use strict";function e6(t){return t}var t6=za();TI.exports=function(e){if(!e)return e6;e=t6(e);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(l){r?n=c:c(a)}):o(a,function(l){c(a)})):o(null,function(l,u){l?c(l):i?c(i):(r=!0,e(u,function(d,f){r=!1,i?(c(i),n&&n(i)):d?s(d,c):c(null,f)}))})}}}});var nw=I((Afe,DI)=>{var r6=za();function n6(t){return t}DI.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:r6(e)||n6}});var Ep=I((Dfe,RI)=>{"use strict";var i6=nw();RI.exports=function(e){return e=i6(e),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,l){if(!c&&!e(l))return s?a=!0:n(c,o);o(c,l)}),s=!1}}}});var NI=I((Rfe,OI)=>{"use strict";var o6=nw(),s6=Ep();OI.exports=function(e){return e=o6(e),s6(function(r){return!e(r)})}});var FI=I((Ofe,LI)=>{"use strict";LI.exports=function(e,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,l){c?i(c):e&&e(l),a(c,l)})}}}});var qI=I((Nfe,MI)=>{"use strict";MI.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var o=e;e=function(){return--o}}return function(s){function a(c){s(!0,function(l){n=!1,c(l||!0)})}return function(c,l){i&&!c?n?a(l):l(i):(i=c)?s(i,l):s(null,function(u,d){(i=i||u)?l(i):e(d)?l(null,d):(i=!0,n?l(null,d):a(l))})}}}});var iw=I((Lfe,jI)=>{"use strict";function a6(t){return t}var c6=za(),l6=Ep();jI.exports=function(e,r){e=c6(e)||a6;var n={};return l6(function(i){var o=e(i);return n[o]?!!r:(n[o]=!0,!r)})}});var UI=I((Ffe,$I)=>{"use strict";var u6=iw();$I.exports=function(e){return u6(e,!0)}});var HI=I((Mfe,BI)=>{"use strict";var d6=Cp(),f6=rw();BI.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?e(!0,function(l){i(a)}):i(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=d6(c):typeof c!="function"&&(c=f6(c)),r=c,o()})}}}}});var GI=I((qfe,VI)=>{"use strict";VI.exports={map:II(),asyncMap:AI(),filter:Ep(),filterNot:NI(),through:FI(),take:qI(),unique:iw(),nonUnique:UI(),flatten:HI()}});var ow=I((jfe,WI)=>{"use strict";WI.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var o=e;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var _p=I((Ds,JI)=>{"use strict";var zI=uI(),KI=PI(),YI=GI();Ds=JI.exports=ow();Ds.pull=Ds;for(Pn in zI)Ds[Pn]=zI[Pn];var Pn;for(Pn in YI)Ds[Pn]=YI[Pn];var Pn;for(Pn in KI)Ds[Pn]=KI[Pn];var Pn});var mw=I((Xfe,rT)=>{var Qfe=rT.exports=function(t){(function e(){var r=!0,n=!1,i=!1;do i=!0,r=!1,t.call(this,function(){i?r=!0:e()}),i=!1;while(r)})()}});var iT=I((Zfe,nT)=>{var y6=mw();nT.exports=function(t,e){return function(r){var n=[],i,o;function s(l){n.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&s(u),l=="end"&&(i=!0,s(null)),l=="error"&&(o=u)},queue:s},c;return function(l,u){if(i=i||l,l)return r(l,function(){if(c){var d=c;c=null,d(l)}u(l)});c=u,y6(function d(f){if(!!c)if(u=c,o)c=null,u(o);else if(n.length){var p=n.shift();c=null,u(p===null,p)}else r(i,function(h,m){if(h&&h!==!0)return o=h,f();if(i=i||h)e.call(a);else if(m!==null&&(t.call(a,m),o||i))return r(o||i,function(){c=null,u(o||i)});f(d)})})}}}});var sT=I((epe,oT)=>{oT.exports=function(){var t=[],e=0;function r(){return t.reduce(function(n,i){return n+i.length},0)}return{length:e,data:this,add:function(n){if(!Buffer.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=e=e+n.length,t.push(n),this},has:function(n){return n==null?e>0:e>=n},get:function(n){var i;if(n==null||n===e){e=0;var o=t;return t=[],o.length==1?o[0]:Buffer.concat(o)}else if(t.length>1&&n<=(i=t[0].length)){var s=t[0].slice(0,n);return n===i?t.shift():t[0]=t[0].slice(n,i),e-=n,s}else if(n<e){for(var a=[],c=0;c+t[0].length<n;){var l=t.shift();c+=l.length,a.push(l)}return c<n&&(a.push(t[0].slice(0,n-c)),t[0]=t[0].slice(n-c,t[0].length),this.length=e=e-n),Buffer.concat(a)}else throw new Error("could not get "+n+" bytes")}}}});var uT=I((tpe,lT)=>{"use strict";var w6=sT();function C6(t){return Number.isFinite(t)}function aT(t){return typeof t=="function"}function cT(t,e){return e?function(r,n){var i=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),n)},e);t(r,function(o,s){clearTimeout(i),n(o,s)})}:t}lT.exports=function(t){var e=[],r,n,i=!1,o=w6(),s,a,c;function l(){for(;e.length;)if(e[0].length==null&&o.has(1))e.shift().cb(null,o.get());else if(o.has(e[0].length)){var f=e.shift();f.cb(null,o.get(f.length))}else if(s==!0&&e[0].length&&o.length<e[0].length){var p="stream ended with:"+o.length+" but wanted:"+e[0].length;e.shift().cb(new Error(p))}else if(s)e.shift().cb(s);else return!!e.length;return e.length||!o.has(1)||c}function u(){var f=l();f&&!i&&r&&!i&&!a&&(i=!0,n(null,function(p,h){if(i=!1,p)return s=p,l();o.add(h),u()}))}function d(f){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}n=cT(f,t),r=f,u()}return d.abort=function(f,p){c=f||!0,r?(i=!0,r(c,function(){for(;e.length;)e.shift().cb(c);p&&p(c)})):p()},d.read=function(f,p,h){if(aT(p)&&(h=p,p=t),aT(h))e.push({length:C6(f)?f:null,cb:h}),u();else return a=!0,function(m,g){if(i||o.has(1)){if(m)return r(m,g);e.push({length:null,cb:g}),u()}else cT(r,p)(m,function(v,w){g(v,w)})}},d}});var ET=I((Rs,bT)=>{var b6=iT(),E6=uT(),dT=0,fT=1,pT=2,hT="GOODBYE",_6=Buffer.isBuffer;function mT(t){return typeof t=="string"}function gT(t){var e=Buffer.alloc(9),r=0,n=t.value!==void 0?t.value:t.end;return mT(t)&&t===hT?(e.fill(0),[e,null]):(mT(n)?(r=fT,n=Buffer.from(n,"utf-8")):_6(n)?r=dT:(r=pT,n=Buffer.from(JSON.stringify(n),"utf-8")),r=t.stream<<3|t.end<<2|r,e[0]=r,e.writeUInt32BE(n.length,1),e.writeInt32BE(t.req||0,5),[e,n])}function vT(t){if(t.length!=9)throw new Error("expected header to be 9 bytes long");var e=t[0],r=t.readUInt32BE(1),n=t.readInt32BE(5);return{req:n,stream:!!(e&8),end:!!(e&4),value:null,length:r,type:e&3}}function yT(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(dT===e.type)e.value=t;else if(fT===e.type)e.value=t.toString();else if(pT===e.type)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function wT(){return b6(function(t){var e=gT(t);this.queue(e[0]),e[1]!==null&&this.queue(e[1])})}function CT(){var t=E6(),e=!1;return function(r){return t(r),function(n,i){if(e)return i(!0);if(n)return t.abort(n,i);t.read(9,function(o,s){if(o)return i(o);var a=vT(s);if(a.length===0)return e=!0,i(null,hT);t.read(a.length,function(c,l){if(c)return i(c);try{yT(l,a)}catch(u){return i(u)}i(null,a)})})}}}Rs=bT.exports=function(t){return{source:wT()(t.source),sink:function(e){return t.sink(CT()(e))}}};Rs.encodePair=gT;Rs.decodeHead=vT;Rs.decodeBody=yT;Rs.encode=wT;Rs.decode=CT});var xT=I((rpe,ST)=>{function Gl(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}ST.exports=function(t){return new nn(t)};function nn(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests={},this._instreams={},this._outstreams={},this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}nn.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};nn.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));var r=this._req_counter++,n=this;this._requests[r]=function(i,o){delete n._requests[r],e(i,o),n._maybedone(i)},this.read({req:r,stream:!1,end:!1,value:t})};nn.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");var t=this._req_counter++,e=this;return this._outstreams[t]=new Wl(t,this,function(){delete e._outstreams[t]}),this._outstreams[t]};nn.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};nn.prototype.destroy=function(t){t=t||Gl(t),this.ended=t,this._closing=!0;var e=t===!0?new Error("unexpected end of parent stream"):t,r=0;for(var n in this._requests)r++,this._requests[n](e);for(var n in this._instreams)r++,this._instreams[n].writeEnd=!0,this._instreams[n].destroy(e);for(var n in this._outstreams)r++,this._outstreams[n].writeEnd=!0,this._outstreams[n].destroy(e);r===0&&t===!0&&(e=null),this._maybedone(e)};nn.prototype._maybedone=function(t){this._closed||!this._closing||Object.keys(this._requests).length!==0||Object.keys(this._instreams).length!==0||Object.keys(this._outstreams).length!==0||(this._closed=!0,this._closecbs.forEach(function(e){e(t)}),this.read(null,t||!0),this.opts=null,this._closecbs.length=0,this.read=_T)};function _T(t){console.error("packet-stream asked to read after closed",t)}nn.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};nn.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};nn.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};nn.prototype._onrequest=function(t){var e=t.req*-1;if(t.req<0)typeof this._requests[e]=="function"&&this._requests[e](t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){var r=!1,n=this;this.opts.request(t.value,function(o,s){if(r)throw new Error("cb called twice from local api");r=!0,o?n.read({value:Gl(o),end:!0,req:e}):n.read({value:s,end:!1,req:e}),n._maybedone()})}else{if(this.ended){var i=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:Gl(i),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};nn.prototype._onstream=function(t){if(t.req<0){var e=t.req*-1,r=this._outstreams[e];if(!r)return console.error("no stream for incoming msg",t);t.end?(r.writeEnd&&delete this._outstreams[e],r.readEnd=!0,r.read(null,t.value),this._maybedone()):r.read(t.value)}else{var e=t.req,n=this._instreams[e];if(!n){var i=this;n=this._instreams[e]=new Wl(e*-1,this,function(){delete i._instreams[e]}),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)}t.end?(n.writeEnd&&delete this._instreams[e],n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};function Wl(t,e,r){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=r,this._seq_counter=1}Wl.prototype.write=function(t,e){if(e){this.writeEnd=e;var r=this._ps;r&&(r.read({req:this.id,stream:!0,end:!0,value:Gl(e)}),this.readEnd&&this.destroy(e),r._maybedone(e))}else this._ps&&this._ps.read({req:this.id,stream:!0,end:!1,value:t})};Wl.prototype.end=function(t){this.write(null,Gl(t||!0))};Wl.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=_T,this._ps=null)}});var kT=I((npe,zl)=>{"use strict";var S6=_p();function x6(t){let e=!1;return(r,n)=>{e||(e=!0,t(r,n))}}function gw(t,e){let r=[],n=!1,i=!1,o,s,a=x6((c,l)=>{e&&e(c,l),t=null,e=null,o=null,s&&s(c||!0,()=>{})});return t.read=function(c,l){if(n=n||l,o){let u=o;o=null,u(n,c)}else!n&&!i&&r.push(c);n&&a(n!==!0?n:null)},{source(c,l){c?(t&&t.write(null,c),l(c),r.length=0,i=!0,a(c!==!0?c:null)):r.length?l(null,r.shift()):n?l(n):o=l},sink(c){if(n)return s=null,c(n,()=>{});s=c,S6.drain(l=>{if(n)return!1;t.write(l)},l=>{t&&!t.writeEnd&&t.write(null,l||!0),a&&a(l)})(c)}}}function PT(t,e){return gw(t,r=>{t.writeEnd||t.write(null,r||!0),e&&e(r)})}function P6(t){return PT(t).source}function k6(t,e){return PT(t,e).sink}zl.exports=gw;zl.exports.source=P6;zl.exports.sink=k6;zl.exports.duplex=gw});var TT=I((ipe,IT)=>{IT.exports=function(e){var r,n,i;function o(s){return function(a,c){s(a,function(l,u){if(l&&!i)return i=!0,c(null,e);l&&r?c(l):l?n=c:c(null,u)})}}return o.end=function(){return r=!0,n&&n(r),o},o}});var vw=I((ope,AT)=>{AT.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var Pp=I((spe,RT)=>{"use strict";var DT=vw();RT.exports=function(e,r){if(!e)return function(i,o){return i?DT(o,i,r):o(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,o){if(i)return DT(o,i,r);n>=e.length?o(!0):o(null,e[n++])}}});var NT=I((ape,OT)=>{"use strict";var I6=Pp();OT.exports=function(t){return I6(Object.keys(t))}});var yw=I((cpe,LT)=>{"use strict";var T6=vw();LT.exports=function(e,r){return function(n,i){if(n)return T6(i,n,r);if(e!=null){var o=e;e=null,i(null,o)}else i(!0)}}});var MT=I((lpe,FT)=>{"use strict";FT.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var jT=I((upe,qT)=>{"use strict";qT.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var UT=I((dpe,$T)=>{"use strict";$T.exports=function(){return function(e,r){r(!0)}}});var HT=I((fpe,BT)=>{"use strict";BT.exports=function(e){return function(r,n){n(e)}}});var GT=I((ppe,VT)=>{"use strict";VT.exports={keys:NT(),once:yw(),values:Pp(),count:MT(),infinite:jT(),empty:UT(),error:HT()}});var Ya=I((hpe,WT)=>{"use strict";WT.exports=function(e,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,l=!1;c;)if(l=!1,n(null,function(u,d){if(l=!0,u=u||i){if(c=!1,r)r(u===!0?null:u);else if(u&&u!==!0)throw u}else e&&e(d)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!l){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var KT=I((mpe,zT)=>{"use strict";var A6=Ya();zT.exports=function(e){return A6(null,e)}});var JT=I((gpe,YT)=>{"use strict";var D6=Ya();YT.exports=function(e){return D6(function(r){console.log(r)},e)}});var Ja=I((vpe,QT)=>{QT.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var eA=I((ype,ZT)=>{"use strict";function XT(t){return t}var R6=Ja(),O6=Ya();ZT.exports=function(e,r){var n=!1;return r?e=R6(e)||XT:(r=e,e=XT),O6(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var kp=I((wpe,tA)=>{"use strict";var N6=Ya();tA.exports=function(e,r,n){n||(n=r,r=null);var i=N6(function(o){r=e(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var nA=I((Cpe,rA)=>{"use strict";var L6=kp();rA.exports=function(e){return L6(function(r,n){return r.push(n),r},[],e)}});var oA=I((bpe,iA)=>{"use strict";var F6=kp();iA.exports=function(e){return F6(function(r,n){return r+n},"",e)}});var aA=I((Epe,sA)=>{"use strict";sA.exports={drain:Ya(),onEnd:KT(),log:JT(),find:eA(),reduce:kp(),collect:nA(),concat:oA()}});var lA=I((_pe,cA)=>{"use strict";function M6(t){return t}var q6=Ja();cA.exports=function(e){return e?(e=q6(e),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:e(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):M6}});var dA=I((Spe,uA)=>{"use strict";function j6(t){return t}var $6=Ja();uA.exports=function(e){if(!e)return j6;e=$6(e);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(){r?n=c:c(a)}):o(a,c)):o(null,function(l,u){l?c(l):i?c(i):(r=!0,e(u,function(d,f){r=!1,i?(c(i),n(i)):d?s(d,c):c(null,f)}))})}}}});var ww=I((xpe,fA)=>{var U6=Ja();function B6(t){return t}fA.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:U6(e)||B6}});var Ip=I((Ppe,pA)=>{"use strict";var H6=ww();pA.exports=function(e){return e=H6(e),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,l){if(!c&&!e(l))return s?a=!0:n(c,o);o(c,l)}),s=!1}}}});var mA=I((kpe,hA)=>{"use strict";var V6=ww(),G6=Ip();hA.exports=function(e){return e=V6(e),G6(function(r){return!e(r)})}});var vA=I((Ipe,gA)=>{"use strict";gA.exports=function(e,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,l){c?i(c):e&&e(l),a(c,l)})}}}});var wA=I((Tpe,yA)=>{"use strict";yA.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var o=e;e=function(){return--o}}return function(s){function a(c){s(!0,function(l){n=!1,c(l||!0)})}return function(c,l){i?n?a(l):l(i):(i=c)?s(i,l):s(null,function(u,d){(i=i||u)?l(i):e(d)?l(null,d):(i=!0,n?l(null,d):a(l))})}}}});var Cw=I((Ape,CA)=>{"use strict";function W6(t){return t}var z6=Ja(),K6=Ip();CA.exports=function(e,r){e=z6(e)||W6;var n={};return K6(function(i){var o=e(i);return n[o]?!!r:(n[o]=!0,!r)})}});var EA=I((Dpe,bA)=>{"use strict";var Y6=Cw();bA.exports=function(e){return Y6(e,!0)}});var SA=I((Rpe,_A)=>{"use strict";var J6=Pp(),Q6=yw();_A.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?e(!0,function(l){i(a)}):i(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=J6(c):typeof c!="function"&&(c=Q6(c)),r=c,o()})}}}}});var PA=I((Ope,xA)=>{"use strict";xA.exports={map:lA(),asyncMap:dA(),filter:Ip(),filterNot:mA(),through:vA(),take:wA(),unique:Cw(),nonUnique:EA(),flatten:SA()}});var IA=I((Npe,kA)=>{"use strict";kA.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var o=e;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var OA=I((Kl,RA)=>{"use strict";var TA=GT(),AA=aA(),DA=PA();Kl=RA.exports=IA();for(kn in TA)Kl[kn]=TA[kn];var kn;for(kn in DA)Kl[kn]=DA[kn];var kn;for(kn in AA)Kl[kn]=AA[kn];var kn});var LA=I((Lpe,NA)=>{var X6=TT(),bw=OA();NA.exports=function(t,e){e=e||"GOODBYE";var r=X6(e);return{source:bw(t.source,r),sink:bw(bw.filter(function(n){if(n!==e)return!0;r.end()}),t.sink)}}});var Yl=I(In=>{"use strict";var Tp=_p();function Z6(t){return t?Object.keys(t).length===0:!0}In.set=function(e,r,n){let i,o;for(let s=0;s<r.length;s++){let a=r[s];e[a]=e[a]||{},i=e,o=a,e=e[a]}i[o]=n};In.get=function(e,r){if(typeof r=="string")return e[r];let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=e=e[o],e==null)return e}return n};In.prefix=function(e,r){let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=e=e[o],typeof e!="object")return e}return typeof n!="object"?!!n:!1};function e9(t,e){for(let r in e){let n=e[r];t[n]||(t[n]={}),t=t[n]}return t}function t9(t,e){(function r(n,i){let o=e[i];if(n)e.length-1===i?delete n[o]:i<e.length&&r(n[o],i+1);else return;Z6(n[o])&&delete n[o]})(t,0)}function r9(t,e){for(let r in e)t[r]=e[r];return t}In.mount=function(e,r,n){if(!Array.isArray(r))throw new Error("path must be array of strings");return r9(e9(e,r),n)};In.unmount=function(e,r){return t9(e,r)};var Ap=t=>t==="source",Dp=t=>t==="sink",FA=t=>t==="duplex",n9=t=>t==="sync",i9=t=>t==="async",MA=t=>n9(t)||i9(t),o9=t=>Ap(t)||Dp(t)||FA(t);In.isRequest=MA;In.isStream=o9;function Ew(t){return function(e){e(t||!0,()=>{})}}function qA(t){return{source:Tp.error(t),sink:Ew(t)}}In.errorAsStream=function(e,r){return Ap(e)?Tp.error(r):Dp(e)?Ew(r):qA(r)};In.errorAsStreamOrCb=function(e,r,n){return MA(e)?n(r):Ap(e)?Tp.error(r):Dp(e)?Ew(r):n(r),qA(r)};In.pipeToStream=function(e,r,n){Ap(e)?r(n):Dp(e)?n(r):FA(e)&&Tp(r,n,r)}});var _w=I((qpe,$A)=>{function jA(t){if(t.stack&&t.name&&t.message)return t.stack.substring(t.name.length+3+t.message.length).split(`
`);if(t.stack)return t.stack.split(`
`)}function s9(t,e){return t.filter(function(r){return!~e.indexOf(r)})}var Mpe=$A.exports=function(t,e){if(!(t.stack&&t.name&&t.message))return console.error(new Error("stackless error")),t;var r=new Error(e),n=s9(jA(r).slice(1),jA(t)).join(`
`);return r.__proto__=t,r.stack=r.name+": "+r.message+`
`+n+`
  `+t.stack,r}});var HA=I((jpe,BA)=>{"use strict";var a9=xT(),Sw=kT(),c9=LA(),Qa=Yl(),UA=_w();BA.exports=function(e,r,n){let i=a9({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,l=s.args,u=!1,d=!1;l.push((f,p)=>{d=!0,u=!0,a(f,p)});try{e("async",c,l)}catch(f){if(u||d)throw UA(f,"no callback provided to muxrpc async funtion");a(f)}},stream(s){s.read=function(c,l){if(l)return s.write(null,l);let{name:u,type:d,args:f}=c,p,h;if(s.read=null,!Qa.isStream(d))return s.write(null,new Error(`unsupported stream type: ${d}`));try{h=e(d,u,f)}catch(v){p=v}let g=Sw[d==="source"?"sink":d==="sink"?"source":"duplex"](s);return Qa.pipeToStream(d,g,p?Qa.errorAsStream(d,p):h)}},close(s){if(i=null,o.ended=!0,!o.closed&&(o.closed=!0,n)){let a=n;n=null,a(s)}}}),o=c9(Sw(i,()=>{}));return o=r?r(o):o,o.remoteCall=function(s,a,c,l){if(a==="emit")return i.message(c);if(!(Qa.isRequest(s)||Qa.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(Qa.isRequest(s))return i.request({name:a,args:c},l);let u=i.stream(),d=Sw[s](u,l);return u.write({name:a,args:c,type:s}),d},o.isOpen=function(){return!i.ended},o.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!i){a&&a();return}if(s){i.destroy(s),a&&a();return}return i.close(c=>{if(a)a(c);else if(c)throw UA(c,"no callback provided for muxrpc close")}),this},o.closed=!1,o}});var GA=I(($pe,VA)=>{"use strict";var l9=_w(),u9=Yl();function xw(t,e,r,n){for(let i in e){let o=e[i],s=r?r.concat(i):[i];if(o&&typeof o=="object"){let a=o;t[i]=xw({},a,s,n)}else{let a=o;t[i]=(...c)=>n(a,s,c)}}return t}function d9(t){if(t)throw l9(t,"callback not provided")}function f9(t,e,r,n){t=t||{};function i(o,s,a){let c=typeof a[a.length-1]=="function"?a.pop():o==="sync"||o==="async"?null:d9;if(typeof c=="function"){let l;try{l=r(o,s,a,c)}catch(u){return u9.errorAsStreamOrCb(o,u,c)}return l}else return new Promise((l,u)=>{r(o,s,a,(d,f)=>{d?u(d):l(f)})})}return n?i("async","manifest",[function(o,s){if(o)return n(o);xw(t,s,null,i),n(null,s,t)}]):xw(t,e,null,i),t}VA.exports=f9});var KA=I((Upe,zA)=>{"use strict";var Rp=Yl();function WA(t){return Array.isArray(t)?t:t.split(".")}function p9(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}zA.exports=function(e){if(p9(e))return e;if(typeof e=="function")return{pre:e};let r=null,n={};function i(o){if(o.allow){r={};for(let s of o.allow)Rp.set(r,WA(s),!0)}else r=null;if(o.deny)for(let s of o.deny)Rp.set(n,WA(s),!0);else n={};return this}return e&&i(e),i.pre=o=>{if(o=Array.isArray(o)?o:[o],r&&!Rp.prefix(r,o))return new Error(`method:${o} is not in list of allowed methods`);if(n&&Rp.prefix(n,o))return new Error(`method:${o} is on list of disallowed methods`)},i.post=()=>{},i.test=o=>i.pre(o),i.get=()=>({allow:r,deny:n}),i}});var JA=I((Bpe,YA)=>{"use strict";var h9=KA(),Pw=Yl();YA.exports=function(e,r,n){n=h9(n);function i(s,a){return s===Pw.get(r,a)}function o(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&i("sync",a)){let l=c.pop(),u;try{u=Pw.get(e,a).apply(this,c)}catch(d){return l(d)}return l(null,u)}if(!i(s,a))throw new Error(`no ${s}:${a}`);return Pw.get(e,a).apply(this,c)}return function(a,c,l){let u=n.pre(c,l);if(u)throw u;return o.call(this,a,c,l)}}});var ZA=I((Hpe,XA)=>{"use strict";var m9=ET(),g9=require("events").EventEmitter,v9=HA(),y9=GA(),w9=JA();function QA(t,e,r,n,i,o,s){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new g9;o||(o=m9);let l,u={_emit(f,p){return c&&c._emit(f,p),u},id:n},d=v9(w9(r,e,i).bind(u),o,f=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let p=l;l=null,p(f)}});if(y9(c,t,(f,p,h,m)=>{if(d.closed)throw new Error("stream is closed");return d.remoteCall(f,p,h,m)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",p=>{u.id=p});let f=!0;c.createStream=p=>{if(l=p,f)return f=!1,d;throw new Error("one stream per rpc")}}else c.stream=d;return c.closed=!1,c.close=function(f,p){return d.close(f,p),this},c}XA.exports=function(t,e,r){return arguments.length>3?QA.apply(this,arguments):function(n,i,o){return QA(t,e,n,o,i,r,!0)}}});var kw=I((Ii,rD)=>{var Vpe=ow(),C9=mw();function eD(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function tD(t,e,r){var n,i=!1,o;function s(){o||(o=!0,r&&r(n===!0?null:n))}function a(){i||(i=!0,l(),n?s():t(n=!0,s))}function c(u){l(),n||t(n=u,s)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){C9(function(u){t(null,function(d,f){if(n=n||d,d===!0)return e._isStdio?s():e.end();if(n=n||d)return eD(e),s(n);if(e._isStdio)e.write(f,function(){u()});else{var p=e.write(f);p===!1?e.once("drain",u):u()}})})})}function b9(t){var e=!1,r=!1,n;function i(){var o=t.read();if(o!==null&&n){var s=n;n=null,s(null,o)}}return t.on("readable",function(){r=!0,n&&i()}).on("end",function(){e=!0,n&&n(e)}).on("error",function(o){e=o,n&&n(e)}),function(o,s){n=s,e?s(e):r&&i()}}function Op(t){var e=[],r=[],n,i=!1,o;function s(){for(;(e.length||n)&&r.length;)r.shift()(e.length?null:n,e.shift());!e.length&&i&&(i=!1,t.resume())}return t.on("data",function(a){e.push(a),s(),e.length&&t.pause&&(i=!0,t.pause())}),t.on("end",function(){n=!0,s()}),t.on("close",function(){n=!0,s()}),t.on("error",function(a){n=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;r.length;)r.shift()(a);c(a)};var l=u;if(n)return u();t.once("close",u),eD(t)}else r.push(c),s()}}var E9=Op,Np=function(t,e){return function(r){return tD(r,t,e)}},Lp=function(t){return Op(t)};Ii=rD.exports=function(t,e){return t.writable&&t.write?t.readable?function(r){return tD(r,t,e),Op(t)}:Np(t,e):Lp(t)};Ii.sink=Np;Ii.source=Lp;Ii.read=E9;Ii.read1=Op;Ii.read2=b9;Ii.duplex=function(t,e){return{source:Lp(t),sink:Np(t,e)}};Ii.transform=function(t){return function(e){var r=Lp(t);return Np(t)(e),r}}});var iD=I((Gpe,Fp)=>{var _9=require("stream");Fp.exports=Iw;Fp.exports.source=function(t){return Iw(null,t)};Fp.exports.sink=function(t){return Iw(t,null)};var nD=typeof setImmediate=="undefined"?process.nextTick:setImmediate;function Iw(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var r=[],n=[],i,o,s=new _9;s.writable=s.readable=!0,s.write=function(g){return r.length?r.shift()(null,g):n.push(g),r.length||(o=!0),!!r.length},s.end=function(){e?n.length?m():e(i=!0,r.length?r.shift():function(){}):r.length&&r.shift()(!0)},s.source=function(g,v){n.length?(v(null,n.shift()),n.length||s.emit("drain")):((i=i||g)?v(i):r.push(v),o&&(o=!1,s.emit("drain")))};var a;t&&(a=t(s.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,d=!1,f=!1;if(s.sink=function(g){e=g,nD(m)},e){s.sink(e),s.paused=!0;var p=s.on.bind(s);s.on=(g,v)=>{var w=p(g,v);return g==="data"&&s.paused&&nD(s.resume.bind(s)),w};var h=s.pipe.bind(s);s.pipe=function(g,v){var w=h(g,v);return s.paused&&s.resume(),w}}function m(){if(d=!1,!(!e||f)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(u)return s.emit("end");f=!0,e(null,function g(v,w){f=!1,s.paused?(v===!0?u=v:v?s.emit("error",v):c.push(w),d=!0):v&&(i=v)!==!0?s.emit("error",v):(i=i||v)?s.emit("end"):(s.emit("data",w),f=!0,e(null,g))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,m(),s},s.destroy=function(){!i&&e&&e(i=!0,function(){}),i=!0,r.length&&r.shift()(!0),s.emit("close")},s}});var sD=I((Wpe,oD)=>{oD.exports=S9;function S9(t,e){typeof t=="function"&&(e=t,t=!1);var r=[],n,i;function o(d,f){d&&(n=d,i&&u(n)),i=f,l()}var s;function a(d){s=s||d||!0,l()}function c(d){if(!s){if(i){u(n,d);return}r.push(d)}}if(t)return{push:c,end:a,source:o,buffer:r};return o.push=c,o.end=a,o.buffer=r,o;function l(){!i||(n?u(n):!r.length&&s?u(s):r.length&&u(null,r.shift()))}function u(d,f){var p=i;if(d&&e){var h=e;e=null,h(d===!0?null:d)}i=null,p(d,f)}}});var Vw=I((wme,OD)=>{"use strict";var DD=require("child_process"),G9=1024*1024,RD={exec(t,e){DD.exec(t,{maxBuffer:2*G9,windowsHide:!0},e)},spawn(t,e,r){return DD.spawn(t,e,r)},stripLine(t,e){let r=0;for(;e-- >0;){let n=t.indexOf(`
`,r);n>=0&&(r=n+1)}return r>0?t.substring(r):t},split(t,e){let r=t.trim().split(/\s+/);return r.length>e&&(r[e-1]=r.slice(e-1).join(" ")),r},extractColumns(t,e,r){let n=t.split(/(\r\n|\n|\r)/),i=[];return r||(r=Math.max.apply(null,e)+1),n.forEach(o=>{let s=RD.split(o,r),a=[];e.forEach(c=>{a.push(s[c]||"")}),i.push(a)}),i},parseTable(t){let e=t.split(/(\r\n\r\n|\r\n\n|\n\r\n)|\n\n/).filter(r=>r.trim().length>0).map(r=>r.split(/(\r\n|\n|\r)/).filter(n=>n.trim().length>0));return e.forEach(r=>{for(let n=0;r[n];){let i=r[n];i.startsWith(" ")?(r[n-1]+=i.trimLeft(),r.splice(n,1)):n+=1}}),e.map(r=>{let n={};return r.forEach(i=>{let o=i.indexOf(":"),s=i.slice(0,o).trim();n[s]=i.slice(o+1).trim()}),n})}};OD.exports=RD});var LD=I((Cme,ND)=>{"use strict";var W9=require("os"),Jp=require("fs"),sn=Vw(),z9=t=>new Promise((e,r)=>{Jp.existsSync(t)?e():Jp.mkdir(t,n=>{n?r(n):e()})}),Gw={darwin(t){return new Promise((e,r)=>{sn.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=sn.stripLine(i.toString(),2),a=sn.extractColumns(s,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let l=String(c[1]).match(/\.(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[2].length?e(parseInt(a[2],10)):r(new Error(`pid of port (${t}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(t){return new Promise((e,r)=>{let n="netstat -tunlp";sn.exec(n,function(i,o,s){if(i)r(i);else{let a=s.toString().trim();a&&console.warn(a);let c=sn.stripLine(o.toString(),2),l=sn.extractColumns(c,[3,6],7).find(u=>{let d=String(u[0]).match(/:(\d+)$/);if(d&&d[1]===String(t))return!0});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,r)=>{sn.exec("netstat -ano",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=sn.stripLine(i.toString(),4),a=sn.extractColumns(s,[1,4],5).find(c=>{let l=String(c[0]).match(/:(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[1].length&&parseInt(a[1],10)>0?e(parseInt(a[1],10)):r(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,r)=>{let n=W9.tmpdir()+"/.find-process",i=n+"/"+process.pid,o='netstat -tunp >> "'+i+'"';z9(n).then(()=>{sn.exec(o,()=>{Jp.readFile(i,"utf8",(s,a)=>{if(Jp.unlink(i,()=>{}),s)r(s);else{a=sn.stripLine(a,2);let c=sn.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);if(u&&u[1]===String(t))return!0});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})})})}};function K9(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in Gw))return n(new Error(`platform ${e} is unsupported`));let i=Gw[e];typeof i=="string"&&(i=Gw[i]),i(t).then(r,n)})}ND.exports=K9});var jD=I((bme,qD)=>{"use strict";var Qp=require("path"),wo=Vw();function Ww(t,e){return e?t&&t.match?t.match(e):!1:!0}function FD(t){let e=t.split(Qp.sep),r=e[e.length-1];r&&(e[e.length-1]=r.split(" ")[0]);let n=[];for(let i of e){let o=i.indexOf(" -");if(o>=0){n.push(i.substring(0,o).trim());break}else if(i.endsWith(" ")){n.push(i.trim());break}n.push(i)}return n.join(Qp.sep)}function MD(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return Qp.basename(t.substring(0,e))}return Qp.basename(t)}var zw={darwin(t){return new Promise((e,r)=>{let n;"pid"in t?n=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:n="ps ax -ww -o pid,ppid,uid,gid,args",wo.exec(n,function(i,o,s){if(i)"pid"in t?e([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=wo.stripLine(o.toString(),1),l=wo.extractColumns(a,[0,1,2,3,4],5).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[4]&&t.name?Ww(u[4],t.name):!!u[0]).map(u=>{let d=String(u[4]),f=FD(d);return{pid:parseInt(u[0],10),ppid:parseInt(u[1],10),uid:parseInt(u[2],10),gid:parseInt(u[3],10),name:MD(f),bin:f,cmd:u[4]}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(t){return new Promise((e,r)=>{let n="Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",i=[],o=wo.spawn("powershell.exe",["/c",n],{detached:!1,windowsHide:!0});o.stdout.on("data",s=>{i.push(s.toString())}),o.on("close",s=>{if(s!==0)return r(new Error("Command '"+n+"' terminated with code: "+s));let a=wo.parseTable(i.join("")).filter(c=>{if("pid"in t)return c.ProcessId===String(t.pid);if(t.name){let l=c.Name||"";return t.strict?l===t.name||l.endsWith(".exe")&&l.slice(0,-4)===t.name:Ww(c.CommandLine||l,t.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,r)=>{let n="ps";wo.exec(n,function(i,o,s){if(i)"pid"in t?e([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=wo.stripLine(o.toString(),1),l=wo.extractColumns(a,[0,3],4).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[1]&&t.name?Ww(u[1],t.name):!!u[0]).map(u=>{let d=String(u[1]),f=FD(d);return{pid:parseInt(u[0],10),name:MD(f),bin:f,cmd:d}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})}};function Y9(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in zw))return n(new Error(`platform ${e} is unsupported`));let i=zw[e];typeof i=="string"&&(i=zw[i]),i(t).then(r,n)})}qD.exports=Y9});var BD=I((Eme,UD)=>{"use strict";var J9=LD(),$D=jD(),Kw={port(t,e){return J9(t,e).then(r=>Kw.pid(r,e),()=>[])},pid(t,e){return $D({pid:t,strict:e})},name(t,e){return $D({name:t,strict:e})}};function Q9(t,e,r){return new Promise((n,i)=>{if(!(t in Kw))i(new Error(`do not support find by "${t}"`));else{let o=/^\d+$/.test(e);t==="pid"&&!o?i(new Error("pid must be a number")):t==="port"&&!o?i(new Error("port must be a number")):Kw[t](e,r).then(n,i)}})}UD.exports=Q9});var VD=I((_me,HD)=>{"use strict";HD.exports=BD()});var vu=I((ive,EO)=>{var rY="2.0.0",nY=256,iY=Number.MAX_SAFE_INTEGER||9007199254740991,oY=16;EO.exports={SEMVER_SPEC_VERSION:rY,MAX_LENGTH:nY,MAX_SAFE_INTEGER:iY,MAX_SAFE_COMPONENT_LENGTH:oY}});var yu=I((ove,_O)=>{var sY=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};_O.exports=sY});var Vs=I((Po,SO)=>{var{MAX_SAFE_COMPONENT_LENGTH:AC}=vu(),aY=yu();Po=SO.exports={};var cY=Po.re=[],ue=Po.src=[],de=Po.t={},lY=0,Ae=(t,e,r)=>{let n=lY++;aY(n,e),de[t]=n,ue[n]=e,cY[n]=new RegExp(e,r?"g":void 0)};Ae("NUMERICIDENTIFIER","0|[1-9]\\d*");Ae("NUMERICIDENTIFIERLOOSE","[0-9]+");Ae("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Ae("MAINVERSION",`(${ue[de.NUMERICIDENTIFIER]})\\.(${ue[de.NUMERICIDENTIFIER]})\\.(${ue[de.NUMERICIDENTIFIER]})`);Ae("MAINVERSIONLOOSE",`(${ue[de.NUMERICIDENTIFIERLOOSE]})\\.(${ue[de.NUMERICIDENTIFIERLOOSE]})\\.(${ue[de.NUMERICIDENTIFIERLOOSE]})`);Ae("PRERELEASEIDENTIFIER",`(?:${ue[de.NUMERICIDENTIFIER]}|${ue[de.NONNUMERICIDENTIFIER]})`);Ae("PRERELEASEIDENTIFIERLOOSE",`(?:${ue[de.NUMERICIDENTIFIERLOOSE]}|${ue[de.NONNUMERICIDENTIFIER]})`);Ae("PRERELEASE",`(?:-(${ue[de.PRERELEASEIDENTIFIER]}(?:\\.${ue[de.PRERELEASEIDENTIFIER]})*))`);Ae("PRERELEASELOOSE",`(?:-?(${ue[de.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${ue[de.PRERELEASEIDENTIFIERLOOSE]})*))`);Ae("BUILDIDENTIFIER","[0-9A-Za-z-]+");Ae("BUILD",`(?:\\+(${ue[de.BUILDIDENTIFIER]}(?:\\.${ue[de.BUILDIDENTIFIER]})*))`);Ae("FULLPLAIN",`v?${ue[de.MAINVERSION]}${ue[de.PRERELEASE]}?${ue[de.BUILD]}?`);Ae("FULL",`^${ue[de.FULLPLAIN]}$`);Ae("LOOSEPLAIN",`[v=\\s]*${ue[de.MAINVERSIONLOOSE]}${ue[de.PRERELEASELOOSE]}?${ue[de.BUILD]}?`);Ae("LOOSE",`^${ue[de.LOOSEPLAIN]}$`);Ae("GTLT","((?:<|>)?=?)");Ae("XRANGEIDENTIFIERLOOSE",`${ue[de.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ae("XRANGEIDENTIFIER",`${ue[de.NUMERICIDENTIFIER]}|x|X|\\*`);Ae("XRANGEPLAIN",`[v=\\s]*(${ue[de.XRANGEIDENTIFIER]})(?:\\.(${ue[de.XRANGEIDENTIFIER]})(?:\\.(${ue[de.XRANGEIDENTIFIER]})(?:${ue[de.PRERELEASE]})?${ue[de.BUILD]}?)?)?`);Ae("XRANGEPLAINLOOSE",`[v=\\s]*(${ue[de.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ue[de.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ue[de.XRANGEIDENTIFIERLOOSE]})(?:${ue[de.PRERELEASELOOSE]})?${ue[de.BUILD]}?)?)?`);Ae("XRANGE",`^${ue[de.GTLT]}\\s*${ue[de.XRANGEPLAIN]}$`);Ae("XRANGELOOSE",`^${ue[de.GTLT]}\\s*${ue[de.XRANGEPLAINLOOSE]}$`);Ae("COERCE",`(^|[^\\d])(\\d{1,${AC}})(?:\\.(\\d{1,${AC}}))?(?:\\.(\\d{1,${AC}}))?(?:$|[^\\d])`);Ae("COERCERTL",ue[de.COERCE],!0);Ae("LONETILDE","(?:~>?)");Ae("TILDETRIM",`(\\s*)${ue[de.LONETILDE]}\\s+`,!0);Po.tildeTrimReplace="$1~";Ae("TILDE",`^${ue[de.LONETILDE]}${ue[de.XRANGEPLAIN]}$`);Ae("TILDELOOSE",`^${ue[de.LONETILDE]}${ue[de.XRANGEPLAINLOOSE]}$`);Ae("LONECARET","(?:\\^)");Ae("CARETTRIM",`(\\s*)${ue[de.LONECARET]}\\s+`,!0);Po.caretTrimReplace="$1^";Ae("CARET",`^${ue[de.LONECARET]}${ue[de.XRANGEPLAIN]}$`);Ae("CARETLOOSE",`^${ue[de.LONECARET]}${ue[de.XRANGEPLAINLOOSE]}$`);Ae("COMPARATORLOOSE",`^${ue[de.GTLT]}\\s*(${ue[de.LOOSEPLAIN]})$|^$`);Ae("COMPARATOR",`^${ue[de.GTLT]}\\s*(${ue[de.FULLPLAIN]})$|^$`);Ae("COMPARATORTRIM",`(\\s*)${ue[de.GTLT]}\\s*(${ue[de.LOOSEPLAIN]}|${ue[de.XRANGEPLAIN]})`,!0);Po.comparatorTrimReplace="$1$2$3";Ae("HYPHENRANGE",`^\\s*(${ue[de.XRANGEPLAIN]})\\s+-\\s+(${ue[de.XRANGEPLAIN]})\\s*$`);Ae("HYPHENRANGELOOSE",`^\\s*(${ue[de.XRANGEPLAINLOOSE]})\\s+-\\s+(${ue[de.XRANGEPLAINLOOSE]})\\s*$`);Ae("STAR","(<|>)?=?\\s*\\*");Ae("GTE0","^\\s*>=\\s*0.0.0\\s*$");Ae("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var wu=I((sve,xO)=>{var uY=["includePrerelease","loose","rtl"],dY=t=>t?typeof t!="object"?{loose:!0}:uY.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};xO.exports=dY});var Ph=I((ave,IO)=>{var PO=/^[0-9]+$/,kO=(t,e)=>{let r=PO.test(t),n=PO.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},fY=(t,e)=>kO(e,t);IO.exports={compareIdentifiers:kO,rcompareIdentifiers:fY}});var or=I((cve,RO)=>{var kh=yu(),{MAX_LENGTH:TO,MAX_SAFE_INTEGER:Ih}=vu(),{re:AO,t:DO}=Vs(),pY=wu(),{compareIdentifiers:Cu}=Ph(),cn=class{constructor(e,r){if(r=pY(r),e instanceof cn){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>TO)throw new TypeError(`version is longer than ${TO} characters`);kh("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?AO[DO.LOOSE]:AO[DO.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Ih||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ih||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ih||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<Ih)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(kh("SemVer.compare",this.version,this.options,e),!(e instanceof cn)){if(typeof e=="string"&&e===this.version)return 0;e=new cn(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof cn||(e=new cn(e,this.options)),Cu(this.major,e.major)||Cu(this.minor,e.minor)||Cu(this.patch,e.patch)}comparePre(e){if(e instanceof cn||(e=new cn(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(kh("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Cu(n,i)}while(++r)}compareBuild(e){e instanceof cn||(e=new cn(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(kh("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Cu(n,i)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};RO.exports=cn});var Gs=I((lve,FO)=>{var{MAX_LENGTH:hY}=vu(),{re:OO,t:NO}=Vs(),LO=or(),mY=wu(),gY=(t,e)=>{if(e=mY(e),t instanceof LO)return t;if(typeof t!="string"||t.length>hY||!(e.loose?OO[NO.LOOSE]:OO[NO.FULL]).test(t))return null;try{return new LO(t,e)}catch{return null}};FO.exports=gY});var qO=I((uve,MO)=>{var vY=Gs(),yY=(t,e)=>{let r=vY(t,e);return r?r.version:null};MO.exports=yY});var $O=I((dve,jO)=>{var wY=Gs(),CY=(t,e)=>{let r=wY(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};jO.exports=CY});var BO=I((fve,UO)=>{var bY=or(),EY=(t,e,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new bY(t,r).inc(e,n).version}catch{return null}};UO.exports=EY});var ln=I((pve,VO)=>{var HO=or(),_Y=(t,e,r)=>new HO(t,r).compare(new HO(e,r));VO.exports=_Y});var Th=I((hve,GO)=>{var SY=ln(),xY=(t,e,r)=>SY(t,e,r)===0;GO.exports=xY});var KO=I((mve,zO)=>{var WO=Gs(),PY=Th(),kY=(t,e)=>{if(PY(t,e))return null;{let r=WO(t),n=WO(e),i=r.prerelease.length||n.prerelease.length,o=i?"pre":"",s=i?"prerelease":"";for(let a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return o+a;return s}};zO.exports=kY});var JO=I((gve,YO)=>{var IY=or(),TY=(t,e)=>new IY(t,e).major;YO.exports=TY});var XO=I((vve,QO)=>{var AY=or(),DY=(t,e)=>new AY(t,e).minor;QO.exports=DY});var eN=I((yve,ZO)=>{var RY=or(),OY=(t,e)=>new RY(t,e).patch;ZO.exports=OY});var rN=I((wve,tN)=>{var NY=Gs(),LY=(t,e)=>{let r=NY(t,e);return r&&r.prerelease.length?r.prerelease:null};tN.exports=LY});var iN=I((Cve,nN)=>{var FY=ln(),MY=(t,e,r)=>FY(e,t,r);nN.exports=MY});var sN=I((bve,oN)=>{var qY=ln(),jY=(t,e)=>qY(t,e,!0);oN.exports=jY});var Ah=I((Eve,cN)=>{var aN=or(),$Y=(t,e,r)=>{let n=new aN(t,r),i=new aN(e,r);return n.compare(i)||n.compareBuild(i)};cN.exports=$Y});var uN=I((_ve,lN)=>{var UY=Ah(),BY=(t,e)=>t.sort((r,n)=>UY(r,n,e));lN.exports=BY});var fN=I((Sve,dN)=>{var HY=Ah(),VY=(t,e)=>t.sort((r,n)=>HY(n,r,e));dN.exports=VY});var bu=I((xve,pN)=>{var GY=ln(),WY=(t,e,r)=>GY(t,e,r)>0;pN.exports=WY});var Dh=I((Pve,hN)=>{var zY=ln(),KY=(t,e,r)=>zY(t,e,r)<0;hN.exports=KY});var DC=I((kve,mN)=>{var YY=ln(),JY=(t,e,r)=>YY(t,e,r)!==0;mN.exports=JY});var Rh=I((Ive,gN)=>{var QY=ln(),XY=(t,e,r)=>QY(t,e,r)>=0;gN.exports=XY});var Oh=I((Tve,vN)=>{var ZY=ln(),e7=(t,e,r)=>ZY(t,e,r)<=0;vN.exports=e7});var RC=I((Ave,yN)=>{var t7=Th(),r7=DC(),n7=bu(),i7=Rh(),o7=Dh(),s7=Oh(),a7=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return t7(t,r,n);case"!=":return r7(t,r,n);case">":return n7(t,r,n);case">=":return i7(t,r,n);case"<":return o7(t,r,n);case"<=":return s7(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};yN.exports=a7});var CN=I((Dve,wN)=>{var c7=or(),l7=Gs(),{re:Nh,t:Lh}=Vs(),u7=(t,e)=>{if(t instanceof c7)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(Nh[Lh.COERCE]);else{let n;for(;(n=Nh[Lh.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Nh[Lh.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Nh[Lh.COERCERTL].lastIndex=-1}return r===null?null:l7(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};wN.exports=u7});var kN=I((Rve,PN)=>{"use strict";var d7=hl(),Ws=Symbol("max"),Mi=Symbol("length"),vc=Symbol("lengthCalculator"),Eu=Symbol("allowStale"),zs=Symbol("maxAge"),qi=Symbol("dispose"),bN=Symbol("noDisposeOnSet"),Ft=Symbol("lruList"),Dn=Symbol("cache"),EN=Symbol("updateAgeOnGet"),OC=()=>1,_N=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Ws]=e.max||1/0,n=e.length||OC;if(this[vc]=typeof n!="function"?OC:n,this[Eu]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[zs]=e.maxAge||0,this[qi]=e.dispose,this[bN]=e.noDisposeOnSet||!1,this[EN]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Ws]=e||1/0,_u(this)}get max(){return this[Ws]}set allowStale(e){this[Eu]=!!e}get allowStale(){return this[Eu]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[zs]=e,_u(this)}get maxAge(){return this[zs]}set lengthCalculator(e){typeof e!="function"&&(e=OC),e!==this[vc]&&(this[vc]=e,this[Mi]=0,this[Ft].forEach(r=>{r.length=this[vc](r.value,r.key),this[Mi]+=r.length})),_u(this)}get lengthCalculator(){return this[vc]}get length(){return this[Mi]}get itemCount(){return this[Ft].length}rforEach(e,r){r=r||this;for(let n=this[Ft].tail;n!==null;){let i=n.prev;xN(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[Ft].head;n!==null;){let i=n.next;xN(this,e,n,r),n=i}}keys(){return this[Ft].toArray().map(e=>e.key)}values(){return this[Ft].toArray().map(e=>e.value)}reset(){this[qi]&&this[Ft]&&this[Ft].length&&this[Ft].forEach(e=>this[qi](e.key,e.value)),this[Dn]=new Map,this[Ft]=new d7,this[Mi]=0}dump(){return this[Ft].map(e=>Fh(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Ft]}set(e,r,n){if(n=n||this[zs],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,o=this[vc](r,e);if(this[Dn].has(e)){if(o>this[Ws])return yc(this,this[Dn].get(e)),!1;let c=this[Dn].get(e).value;return this[qi]&&(this[bN]||this[qi](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[Mi]+=o-c.length,c.length=o,this.get(e),_u(this),!0}let s=new SN(e,r,o,i,n);return s.length>this[Ws]?(this[qi]&&this[qi](e,r),!1):(this[Mi]+=s.length,this[Ft].unshift(s),this[Dn].set(e,this[Ft].head),_u(this),!0)}has(e){if(!this[Dn].has(e))return!1;let r=this[Dn].get(e).value;return!Fh(this,r)}get(e){return NC(this,e,!0)}peek(e){return NC(this,e,!1)}pop(){let e=this[Ft].tail;return e?(yc(this,e),e.value):null}del(e){yc(this,this[Dn].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Dn].forEach((e,r)=>NC(this,r,!1))}},NC=(t,e,r)=>{let n=t[Dn].get(e);if(n){let i=n.value;if(Fh(t,i)){if(yc(t,n),!t[Eu])return}else r&&(t[EN]&&(n.value.now=Date.now()),t[Ft].unshiftNode(n));return i.value}},Fh=(t,e)=>{if(!e||!e.maxAge&&!t[zs])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[zs]&&r>t[zs]},_u=t=>{if(t[Mi]>t[Ws])for(let e=t[Ft].tail;t[Mi]>t[Ws]&&e!==null;){let r=e.prev;yc(t,e),e=r}},yc=(t,e)=>{if(e){let r=e.value;t[qi]&&t[qi](r.key,r.value),t[Mi]-=r.length,t[Dn].delete(r.key),t[Ft].removeNode(e)}},SN=class{constructor(e,r,n,i,o){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}},xN=(t,e,r,n)=>{let i=r.value;Fh(t,i)&&(yc(t,r),t[Eu]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};PN.exports=_N});var un=I((Ove,DN)=>{var wc=class{constructor(e,r){if(r=p7(r),e instanceof wc)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new wc(e.raw,r);if(e instanceof LC)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!TN(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&y7(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=IN.get(n);if(i)return i;let o=this.options.loose,s=o?sr[Gt.HYPHENRANGELOOSE]:sr[Gt.HYPHENRANGE];e=e.replace(s,I7(this.options.includePrerelease)),Ct("hyphen replace",e),e=e.replace(sr[Gt.COMPARATORTRIM],m7),Ct("comparator trim",e,sr[Gt.COMPARATORTRIM]),e=e.replace(sr[Gt.TILDETRIM],g7),e=e.replace(sr[Gt.CARETTRIM],v7),e=e.split(/\s+/).join(" ");let a=o?sr[Gt.COMPARATORLOOSE]:sr[Gt.COMPARATOR],c=e.split(" ").map(f=>w7(f,this.options)).join(" ").split(/\s+/).map(f=>k7(f,this.options)).filter(this.options.loose?f=>!!f.match(a):()=>!0).map(f=>new LC(f,this.options)),l=c.length,u=new Map;for(let f of c){if(TN(f))return[f];u.set(f.value,f)}u.size>1&&u.has("")&&u.delete("");let d=[...u.values()];return IN.set(n,d),d}intersects(e,r){if(!(e instanceof wc))throw new TypeError("a Range is required");return this.set.some(n=>AN(n,r)&&e.set.some(i=>AN(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new h7(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(T7(this.set[r],e,this.options))return!0;return!1}};DN.exports=wc;var f7=kN(),IN=new f7({max:1e3}),p7=wu(),LC=Su(),Ct=yu(),h7=or(),{re:sr,t:Gt,comparatorTrimReplace:m7,tildeTrimReplace:g7,caretTrimReplace:v7}=Vs(),TN=t=>t.value==="<0.0.0-0",y7=t=>t.value==="",AN=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},w7=(t,e)=>(Ct("comp",t,e),t=E7(t,e),Ct("caret",t),t=C7(t,e),Ct("tildes",t),t=S7(t,e),Ct("xrange",t),t=P7(t,e),Ct("stars",t),t),pr=t=>!t||t.toLowerCase()==="x"||t==="*",C7=(t,e)=>t.trim().split(/\s+/).map(r=>b7(r,e)).join(" "),b7=(t,e)=>{let r=e.loose?sr[Gt.TILDELOOSE]:sr[Gt.TILDE];return t.replace(r,(n,i,o,s,a)=>{Ct("tilde",t,n,i,o,s,a);let c;return pr(i)?c="":pr(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:pr(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Ct("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,Ct("tilde return",c),c})},E7=(t,e)=>t.trim().split(/\s+/).map(r=>_7(r,e)).join(" "),_7=(t,e)=>{Ct("caret",t,e);let r=e.loose?sr[Gt.CARETLOOSE]:sr[Gt.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,s,a,c)=>{Ct("caret",t,i,o,s,a,c);let l;return pr(o)?l="":pr(s)?l=`>=${o}.0.0${n} <${+o+1}.0.0-0`:pr(a)?o==="0"?l=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:c?(Ct("replaceCaret pr",c),o==="0"?s==="0"?l=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(Ct("no pr"),o==="0"?s==="0"?l=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),Ct("caret return",l),l})},S7=(t,e)=>(Ct("replaceXRanges",t,e),t.split(/\s+/).map(r=>x7(r,e)).join(" ")),x7=(t,e)=>{t=t.trim();let r=e.loose?sr[Gt.XRANGELOOSE]:sr[Gt.XRANGE];return t.replace(r,(n,i,o,s,a,c)=>{Ct("xRange",t,n,i,o,s,a,c);let l=pr(o),u=l||pr(s),d=u||pr(a),f=d;return i==="="&&f&&(i=""),c=e.includePrerelease?"-0":"",l?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&f?(u&&(s=0),a=0,i===">"?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",u?o=+o+1:s=+s+1),i==="<"&&(c="-0"),n=`${i+o}.${s}.${a}${c}`):u?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),Ct("xRange return",n),n})},P7=(t,e)=>(Ct("replaceStars",t,e),t.trim().replace(sr[Gt.STAR],"")),k7=(t,e)=>(Ct("replaceGTE0",t,e),t.trim().replace(sr[e.includePrerelease?Gt.GTE0PRE:Gt.GTE0],"")),I7=t=>(e,r,n,i,o,s,a,c,l,u,d,f,p)=>(pr(n)?r="":pr(i)?r=`>=${n}.0.0${t?"-0":""}`:pr(o)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,pr(l)?c="":pr(u)?c=`<${+l+1}.0.0-0`:pr(d)?c=`<${l}.${+u+1}.0-0`:f?c=`<=${l}.${u}.${d}-${f}`:t?c=`<${l}.${u}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),T7=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ct(t[n].semver),t[n].semver!==LC.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Su=I((Nve,FN)=>{var xu=Symbol("SemVer ANY"),Pu=class{static get ANY(){return xu}constructor(e,r){if(r=A7(r),e instanceof Pu){if(e.loose===!!r.loose)return e;e=e.value}MC("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===xu?this.value="":this.value=this.operator+this.semver.version,MC("comp",this)}parse(e){let r=this.options.loose?RN[ON.COMPARATORLOOSE]:RN[ON.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new NN(n[2],this.options.loose):this.semver=xu}toString(){return this.value}test(e){if(MC("Comparator.test",e,this.options.loose),this.semver===xu||e===xu)return!0;if(typeof e=="string")try{e=new NN(e,this.options)}catch{return!1}return FC(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Pu))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new LN(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new LN(this.value,r).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=FC(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=FC(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||o&&s||a||c}};FN.exports=Pu;var A7=wu(),{re:RN,t:ON}=Vs(),FC=RC(),MC=yu(),NN=or(),LN=un()});var ku=I((Lve,MN)=>{var D7=un(),R7=(t,e,r)=>{try{e=new D7(e,r)}catch{return!1}return e.test(t)};MN.exports=R7});var jN=I((Fve,qN)=>{var O7=un(),N7=(t,e)=>new O7(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));qN.exports=N7});var UN=I((Mve,$N)=>{var L7=or(),F7=un(),M7=(t,e,r)=>{let n=null,i=null,o=null;try{o=new F7(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new L7(n,r))}),n};$N.exports=M7});var HN=I((qve,BN)=>{var q7=or(),j7=un(),$7=(t,e,r)=>{let n=null,i=null,o=null;try{o=new j7(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new q7(n,r))}),n};BN.exports=$7});var WN=I((jve,GN)=>{var qC=or(),U7=un(),VN=bu(),B7=(t,e)=>{t=new U7(t,e);let r=new qC("0.0.0");if(t.test(r)||(r=new qC("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(s=>{let a=new qC(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||VN(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||VN(r,o))&&(r=o)}return r&&t.test(r)?r:null};GN.exports=B7});var KN=I(($ve,zN)=>{var H7=un(),V7=(t,e)=>{try{return new H7(t,e).range||"*"}catch{return null}};zN.exports=V7});var Mh=I((Uve,XN)=>{var G7=or(),YN=Su(),{ANY:W7}=YN,z7=un(),K7=ku(),JN=bu(),QN=Dh(),Y7=Oh(),J7=Rh(),Q7=(t,e,r,n)=>{t=new G7(t,n),e=new z7(e,n);let i,o,s,a,c;switch(r){case">":i=JN,o=Y7,s=QN,a=">",c=">=";break;case"<":i=QN,o=J7,s=JN,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(K7(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],d=null,f=null;if(u.forEach(p=>{p.semver===W7&&(p=new YN(">=0.0.0")),d=d||p,f=f||p,i(p.semver,d.semver,n)?d=p:s(p.semver,f.semver,n)&&(f=p)}),d.operator===a||d.operator===c||(!f.operator||f.operator===a)&&o(t,f.semver))return!1;if(f.operator===c&&s(t,f.semver))return!1}return!0};XN.exports=Q7});var e1=I((Bve,ZN)=>{var X7=Mh(),Z7=(t,e,r)=>X7(t,e,">",r);ZN.exports=Z7});var r1=I((Hve,t1)=>{var eJ=Mh(),tJ=(t,e,r)=>eJ(t,e,"<",r);t1.exports=tJ});var o1=I((Vve,i1)=>{var n1=un(),rJ=(t,e,r)=>(t=new n1(t,r),e=new n1(e,r),t.intersects(e));i1.exports=rJ});var a1=I((Gve,s1)=>{var nJ=ku(),iJ=ln();s1.exports=(t,e,r)=>{let n=[],i=null,o=null,s=t.sort((u,d)=>iJ(u,d,r));for(let u of s)nJ(u,e,r)?(o=u,i||(i=u)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,d]of n)u===d?a.push(u):!d&&u===s[0]?a.push("*"):d?u===s[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var f1=I((Wve,d1)=>{var c1=un(),qh=Su(),{ANY:jC}=qh,Iu=ku(),$C=ln(),oJ=(t,e,r={})=>{if(t===e)return!0;t=new c1(t,r),e=new c1(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let s=sJ(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},sJ=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===jC){if(e.length===1&&e[0].semver===jC)return!0;r.includePrerelease?t=[new qh(">=0.0.0-0")]:t=[new qh(">=0.0.0")]}if(e.length===1&&e[0].semver===jC){if(r.includePrerelease)return!0;e=[new qh(">=0.0.0")]}let n=new Set,i,o;for(let p of t)p.operator===">"||p.operator===">="?i=l1(i,p,r):p.operator==="<"||p.operator==="<="?o=u1(o,p,r):n.add(p.semver);if(n.size>1)return null;let s;if(i&&o){if(s=$C(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let p of n){if(i&&!Iu(p,String(i),r)||o&&!Iu(p,String(o),r))return null;for(let h of e)if(!Iu(p,String(h),r))return!1;return!0}let a,c,l,u,d=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,f=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&o.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let p of e){if(u=u||p.operator===">"||p.operator===">=",l=l||p.operator==="<"||p.operator==="<=",i){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(a=l1(i,p,r),a===p&&a!==i)return!1}else if(i.operator===">="&&!Iu(i.semver,String(p),r))return!1}if(o){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(c=u1(o,p,r),c===p&&c!==o)return!1}else if(o.operator==="<="&&!Iu(o.semver,String(p),r))return!1}if(!p.operator&&(o||i)&&s!==0)return!1}return!(i&&l&&!o&&s!==0||o&&u&&!i&&s!==0||f||d)},l1=(t,e,r)=>{if(!t)return e;let n=$C(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},u1=(t,e,r)=>{if(!t)return e;let n=$C(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};d1.exports=oJ});var h1=I((zve,p1)=>{var UC=Vs();p1.exports={re:UC.re,src:UC.src,tokens:UC.t,SEMVER_SPEC_VERSION:vu().SEMVER_SPEC_VERSION,SemVer:or(),compareIdentifiers:Ph().compareIdentifiers,rcompareIdentifiers:Ph().rcompareIdentifiers,parse:Gs(),valid:qO(),clean:$O(),inc:BO(),diff:KO(),major:JO(),minor:XO(),patch:eN(),prerelease:rN(),compare:ln(),rcompare:iN(),compareLoose:sN(),compareBuild:Ah(),sort:uN(),rsort:fN(),gt:bu(),lt:Dh(),eq:Th(),neq:DC(),gte:Rh(),lte:Oh(),cmp:RC(),coerce:CN(),Comparator:Su(),Range:un(),satisfies:ku(),toComparators:jN(),maxSatisfying:UN(),minSatisfying:HN(),minVersion:WN(),validRange:KN(),outside:Mh(),gtr:e1(),ltr:r1(),intersects:o1(),simplifyRange:a1(),subset:f1()}});var iF=I(nF=>{var qJ=Object.create,qu=Object.defineProperty,jJ=Object.getOwnPropertyDescriptor,$J=Object.getOwnPropertyNames,fL=Object.getOwnPropertySymbols,UJ=Object.getPrototypeOf,pL=Object.prototype.hasOwnProperty,BJ=Object.prototype.propertyIsEnumerable,hL=(t,e,r)=>e in t?qu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Do=(t,e)=>{for(var r in e||(e={}))pL.call(e,r)&&hL(t,r,e[r]);if(fL)for(var r of fL(e))BJ.call(e,r)&&hL(t,r,e[r]);return t},mL=t=>qu(t,"__esModule",{value:!0}),O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),HJ=(t,e)=>{mL(t);for(var r in e)qu(t,r,{get:e[r],enumerable:!0})},VJ=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of $J(e))!pL.call(t,n)&&n!=="default"&&qu(t,n,{get:()=>e[n],enumerable:!(r=jJ(e,n))||r.enumerable});return t},ju=t=>VJ(mL(qu(t!=null?qJ(UJ(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),zt=O((t,e)=>{"use strict";var r=function(){function n(){}return n.info=function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];n.enableDebug&&console.info(n.TAG+i,o)},n.warn=function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];n.disableWarnings||console.warn(n.TAG+i,o)},n.enableDebug=!1,n.disableWarnings=!1,n.disableErrors=!1,n.TAG="ApplicationInsights:",n}();e.exports=r}),gL=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(o){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])}return o},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncScopeManager=t.OpenTelemetryScopeManagerWrapper=void 0;var r=Dc(),n=require("events"),i=function(){function o(){}return o.prototype.active=function(){var s=this,a=r.CorrelationContextManager.getCurrentContext();return e(e({},a),{getValue:function(c){return s._activeSymbol?c===s._activeSymbol?a:!1:(s._activeSymbol=c,a)},setValue:function(){}})},o.prototype.with=function(s,a){var c=s.parentSpanId,l=s.name,u=o._spanToContext(s,c,l);return r.CorrelationContextManager.runWithContext(u,a)()},o.prototype.bind=function(s){return typeof s=="function"?r.CorrelationContextManager.wrapCallback(s):(s instanceof n.EventEmitter&&r.CorrelationContextManager.wrapEmitter(s),s)},o.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},o.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},o._spanToContext=function(s,a,c){var l=a?"|"+s.spanContext().traceId+"."+a+".":s.spanContext().traceId,u=e(e({},s.spanContext()),{traceFlags:s.spanContext().traceFlags}),d=r.CorrelationContextManager.spanToContextObject(u,l,c);return d},o}();t.OpenTelemetryScopeManagerWrapper=i,t.AsyncScopeManager=new i}),GJ=O((t,e)=>{t=e.exports=Q;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var C=c++;a[C]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var b=c++,S="v?"+a[f]+a[g]+"?"+a[C]+"?";a[b]="^"+S+"$";var P="[v=\\s]*"+a[p]+a[v]+"?"+a[C]+"?",_=c++;a[_]="^"+P+"$";var k=c++;a[k]="((?:<|>)?=?)";var T=c++;a[T]=a[u]+"|x|X|\\*";var A=c++;a[A]=a[l]+"|x|X|\\*";var M=c++;a[M]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[g]+")?"+a[C]+"?)?)?";var H=c++;a[H]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[v]+")?"+a[C]+"?)?)?";var J=c++;a[J]="^"+a[k]+"\\s*"+a[M]+"$";var K=c++;a[K]="^"+a[k]+"\\s*"+a[H]+"$";var oe=c++;a[oe]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var te=c++;a[te]="(?:~>?)";var F=c++;a[F]="(\\s*)"+a[te]+"\\s+",s[F]=new RegExp(a[F],"g");var L="$1~",q=c++;a[q]="^"+a[te]+a[M]+"$";var G=c++;a[G]="^"+a[te]+a[H]+"$";var z=c++;a[z]="(?:\\^)";var ie=c++;a[ie]="(\\s*)"+a[z]+"\\s+",s[ie]=new RegExp(a[ie],"g");var ne="$1^",be=c++;a[be]="^"+a[z]+a[M]+"$";var Pe=c++;a[Pe]="^"+a[z]+a[H]+"$";var Se=c++;a[Se]="^"+a[k]+"\\s*("+P+")$|^$";var De=c++;a[De]="^"+a[k]+"\\s*("+S+")$|^$";var pe=c++;a[pe]="(\\s*)"+a[k]+"\\s*("+P+"|"+a[M]+")",s[pe]=new RegExp(a[pe],"g");var vt="$1$2$3",Pt=c++;a[Pt]="^\\s*("+a[M]+")\\s+-\\s+("+a[M]+")\\s*$";var ye=c++;a[ye]="^\\s*("+a[H]+")\\s+-\\s+("+a[H]+")\\s*$";var fe=c++;for(a[fe]="(<|>)?=?\\s*\\*",Ce=0;Ce<c;Ce++)r(Ce,a[Ce]),s[Ce]||(s[Ce]=new RegExp(a[Ce]));var Ce;t.parse=$e;function $e(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q)return y;if(typeof y!="string"||y.length>n)return null;var x=E.loose?s[_]:s[b];if(!x.test(y))return null;try{return new Q(y,E)}catch{return null}}t.valid=Ko;function Ko(y,E){var x=$e(y,E);return x?x.version:null}t.clean=Yo;function Yo(y,E){var x=$e(y.trim().replace(/^[=v]+/,""),E);return x?x.version:null}t.SemVer=Q;function Q(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q){if(y.loose===E.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Q))return new Q(y,E);r("SemVer",y,E),this.options=E,this.loose=!!E.loose;var x=y.trim().match(E.loose?s[_]:s[b]);if(!x)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(R){if(/^[0-9]+$/.test(R)){var N=+R;if(N>=0&&N<i)return N}return R}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof Q||(y=new Q(y,this.options)),this.compareMain(y)||this.comparePre(y)},Q.prototype.compareMain=function(y){return y instanceof Q||(y=new Q(y,this.options)),at(this.major,y.major)||at(this.minor,y.minor)||at(this.patch,y.patch)},Q.prototype.comparePre=function(y){if(y instanceof Q||(y=new Q(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var E=0;do{var x=this.prerelease[E],R=y.prerelease[E];if(r("prerelease compare",E,x,R),x===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(x===void 0)return-1;if(x!==R)return at(x,R)}while(++E)},Q.prototype.inc=function(y,E){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},t.inc=Jo;function Jo(y,E,x,R){typeof x=="string"&&(R=x,x=void 0);try{return new Q(y,x).inc(E,R).version}catch{return null}}t.diff=Qo;function Qo(y,E){if(gr(y,E))return null;var x=$e(y),R=$e(E),N="";if(x.prerelease.length||R.prerelease.length){N="pre";var j="prerelease"}for(var B in x)if((B==="major"||B==="minor"||B==="patch")&&x[B]!==R[B])return N+B;return j}t.compareIdentifiers=at;var Tr=/^[0-9]+$/;function at(y,E){var x=Tr.test(y),R=Tr.test(E);return x&&R&&(y=+y,E=+E),y===E?0:x&&!R?-1:R&&!x?1:y<E?-1:1}t.rcompareIdentifiers=Gn;function Gn(y,E){return at(E,y)}t.major=cr;function cr(y,E){return new Q(y,E).major}t.minor=zi;function zi(y,E){return new Q(y,E).minor}t.patch=Ki;function Ki(y,E){return new Q(y,E).patch}t.compare=Ve;function Ve(y,E,x){return new Q(y,x).compare(new Q(E,x))}t.compareLoose=Xo;function Xo(y,E){return Ve(y,E,!0)}t.rcompare=Wn;function Wn(y,E,x){return Ve(E,y,x)}t.sort=Yi;function Yi(y,E){return y.sort(function(x,R){return t.compare(x,R,E)})}t.rsort=Ji;function Ji(y,E){return y.sort(function(x,R){return t.rcompare(x,R,E)})}t.gt=bt;function bt(y,E,x){return Ve(y,E,x)>0}t.lt=jt;function jt(y,E,x){return Ve(y,E,x)<0}t.eq=gr;function gr(y,E,x){return Ve(y,E,x)===0}t.neq=zn;function zn(y,E,x){return Ve(y,E,x)!==0}t.gte=Ar;function Ar(y,E,x){return Ve(y,E,x)>=0}t.lte=kt;function kt(y,E,x){return Ve(y,E,x)<=0}t.cmp=It;function It(y,E,x,R){switch(E){case"===":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y===x;case"!==":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y!==x;case"":case"=":case"==":return gr(y,x,R);case"!=":return zn(y,x,R);case">":return bt(y,x,R);case">=":return Ar(y,x,R);case"<":return jt(y,x,R);case"<=":return kt(y,x,R);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=Te;function Te(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Te){if(y.loose===!!E.loose)return y;y=y.value}if(!(this instanceof Te))return new Te(y,E);r("comparator",y,E),this.options=E,this.loose=!!E.loose,this.parse(y),this.semver===Et?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Et={};Te.prototype.parse=function(y){var E=this.options.loose?s[Se]:s[De],x=y.match(E);if(!x)throw new TypeError("Invalid comparator: "+y);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new Q(x[2],this.options.loose):this.semver=Et},Te.prototype.toString=function(){return this.value},Te.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===Et?!0:(typeof y=="string"&&(y=new Q(y,this.options)),It(y,this.operator,this.semver,this.options))},Te.prototype.intersects=function(y,E){if(!(y instanceof Te))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var x;if(this.operator==="")return x=new ae(y.value,E),Jt(this.value,x,E);if(y.operator==="")return x=new ae(this.value,E),Jt(y.semver,x,E);var R=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),j=this.semver.version===y.semver.version,B=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),Z=It(this.semver,"<",y.semver,E)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),X=It(this.semver,">",y.semver,E)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return R||N||j&&B||Z||X},t.Range=ae;function ae(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ae)return y.loose===!!E.loose&&y.includePrerelease===!!E.includePrerelease?y:new ae(y.raw,E);if(y instanceof Te)return new ae(y.value,E);if(!(this instanceof ae))return new ae(y,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ae.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ae.prototype.toString=function(){return this.range},ae.prototype.parseRange=function(y){var E=this.options.loose;y=y.trim();var x=E?s[ye]:s[Pt];y=y.replace(x,is),r("hyphen replace",y),y=y.replace(s[pe],vt),r("comparator trim",y,s[pe]),y=y.replace(s[F],L),y=y.replace(s[ie],ne),y=y.split(/\s+/).join(" ");var R=E?s[Se]:s[De],N=y.split(" ").map(function(j){return En(j,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function(j){return!!j.match(R)})),N=N.map(function(j){return new Te(j,this.options)},this),N},ae.prototype.intersects=function(y,E){if(!(y instanceof ae))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(R){return y.set.some(function(N){return N.every(function(j){return R.intersects(j,E)})})})})},t.toComparators=Qi;function Qi(y,E){return new ae(y,E).set.map(function(x){return x.map(function(R){return R.value}).join(" ").trim().split(" ")})}function En(y,E){return r("comp",y,E),y=es(y,E),r("caret",y),y=Dr(y,E),r("tildes",y),y=rs(y,E),r("xrange",y),y=lr(y,E),r("stars",y),y}function we(y){return!y||y.toLowerCase()==="x"||y==="*"}function Dr(y,E){return y.trim().split(/\s+/).map(function(x){return Zo(x,E)}).join(" ")}function Zo(y,E){var x=E.loose?s[G]:s[q];return y.replace(x,function(R,N,j,B,Z){r("tilde",y,R,N,j,B,Z);var X;return we(N)?X="":we(j)?X=">="+N+".0.0 <"+(+N+1)+".0.0":we(B)?X=">="+N+"."+j+".0 <"+N+"."+(+j+1)+".0":Z?(r("replaceTilde pr",Z),X=">="+N+"."+j+"."+B+"-"+Z+" <"+N+"."+(+j+1)+".0"):X=">="+N+"."+j+"."+B+" <"+N+"."+(+j+1)+".0",r("tilde return",X),X})}function es(y,E){return y.trim().split(/\s+/).map(function(x){return ts(x,E)}).join(" ")}function ts(y,E){r("caret",y,E);var x=E.loose?s[Pe]:s[be];return y.replace(x,function(R,N,j,B,Z){r("caret",y,R,N,j,B,Z);var X;return we(N)?X="":we(j)?X=">="+N+".0.0 <"+(+N+1)+".0.0":we(B)?N==="0"?X=">="+N+"."+j+".0 <"+N+"."+(+j+1)+".0":X=">="+N+"."+j+".0 <"+(+N+1)+".0.0":Z?(r("replaceCaret pr",Z),N==="0"?j==="0"?X=">="+N+"."+j+"."+B+"-"+Z+" <"+N+"."+j+"."+(+B+1):X=">="+N+"."+j+"."+B+"-"+Z+" <"+N+"."+(+j+1)+".0":X=">="+N+"."+j+"."+B+"-"+Z+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?j==="0"?X=">="+N+"."+j+"."+B+" <"+N+"."+j+"."+(+B+1):X=">="+N+"."+j+"."+B+" <"+N+"."+(+j+1)+".0":X=">="+N+"."+j+"."+B+" <"+(+N+1)+".0.0"),r("caret return",X),X})}function rs(y,E){return r("replaceXRanges",y,E),y.split(/\s+/).map(function(x){return ns(x,E)}).join(" ")}function ns(y,E){y=y.trim();var x=E.loose?s[K]:s[J];return y.replace(x,function(R,N,j,B,Z,X){r("xRange",y,R,N,j,B,Z,X);var qe=we(j),Re=qe||we(B),ke=Re||we(Z),_e=ke;return N==="="&&_e&&(N=""),qe?N===">"||N==="<"?R="<0.0.0":R="*":N&&_e?(Re&&(B=0),Z=0,N===">"?(N=">=",Re?(j=+j+1,B=0,Z=0):(B=+B+1,Z=0)):N==="<="&&(N="<",Re?j=+j+1:B=+B+1),R=N+j+"."+B+"."+Z):Re?R=">="+j+".0.0 <"+(+j+1)+".0.0":ke&&(R=">="+j+"."+B+".0 <"+j+"."+(+B+1)+".0"),r("xRange return",R),R})}function lr(y,E){return r("replaceStars",y,E),y.trim().replace(s[fe],"")}function is(y,E,x,R,N,j,B,Z,X,qe,Re,ke,_e){return we(x)?E="":we(R)?E=">="+x+".0.0":we(N)?E=">="+x+"."+R+".0":E=">="+E,we(X)?Z="":we(qe)?Z="<"+(+X+1)+".0.0":we(Re)?Z="<"+X+"."+(+qe+1)+".0":ke?Z="<="+X+"."+qe+"."+Re+"-"+ke:Z="<="+Z,(E+" "+Z).trim()}ae.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new Q(y,this.options));for(var E=0;E<this.set.length;E++)if(os(this.set[E],y,this.options))return!0;return!1};function os(y,E,x){for(var R=0;R<y.length;R++)if(!y[R].test(E))return!1;if(E.prerelease.length&&!x.includePrerelease){for(R=0;R<y.length;R++)if(r(y[R].semver),y[R].semver!==Et&&y[R].semver.prerelease.length>0){var N=y[R].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=Jt;function Jt(y,E,x){try{E=new ae(E,x)}catch{return!1}return E.test(y)}t.maxSatisfying=ss;function ss(y,E,x){var R=null,N=null;try{var j=new ae(E,x)}catch{return null}return y.forEach(function(B){j.test(B)&&(!R||N.compare(B)===-1)&&(R=B,N=new Q(R,x))}),R}t.minSatisfying=as;function as(y,E,x){var R=null,N=null;try{var j=new ae(E,x)}catch{return null}return y.forEach(function(B){j.test(B)&&(!R||N.compare(B)===1)&&(R=B,N=new Q(R,x))}),R}t.minVersion=Wr;function Wr(y,E){y=new ae(y,E);var x=new Q("0.0.0");if(y.test(x)||(x=new Q("0.0.0-0"),y.test(x)))return x;x=null;for(var R=0;R<y.set.length;++R){var N=y.set[R];N.forEach(function(j){var B=new Q(j.semver.version);switch(j.operator){case">":B.prerelease.length===0?B.patch++:B.prerelease.push(0),B.raw=B.format();case"":case">=":(!x||bt(x,B))&&(x=B);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+j.operator)}})}return x&&y.test(x)?x:null}t.validRange=cs;function cs(y,E){try{return new ae(y,E).range||"*"}catch{return null}}t.ltr=ls;function ls(y,E,x){return Rr(y,E,"<",x)}t.gtr=us;function us(y,E,x){return Rr(y,E,">",x)}t.outside=Rr;function Rr(y,E,x,R){y=new Q(y,R),E=new ae(E,R);var N,j,B,Z,X;switch(x){case">":N=bt,j=kt,B=jt,Z=">",X=">=";break;case"<":N=jt,j=Ar,B=bt,Z="<",X="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Jt(y,E,R))return!1;for(var qe=0;qe<E.set.length;++qe){var Re=E.set[qe],ke=null,_e=null;if(Re.forEach(function(Je){Je.semver===Et&&(Je=new Te(">=0.0.0")),ke=ke||Je,_e=_e||Je,N(Je.semver,ke.semver,R)?ke=Je:B(Je.semver,_e.semver,R)&&(_e=Je)}),ke.operator===Z||ke.operator===X||(!_e.operator||_e.operator===Z)&&j(y,_e.semver)||_e.operator===X&&B(y,_e.semver))return!1}return!0}t.prerelease=ds;function ds(y,E){var x=$e(y,E);return x&&x.prerelease.length?x.prerelease:null}t.intersects=zr;function zr(y,E,x){return y=new ae(y,x),E=new ae(E,x),y.intersects(E)}t.coerce=fs;function fs(y){if(y instanceof Q)return y;if(typeof y!="string")return null;var E=y.match(s[oe]);return E==null?null:$e(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),vL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePatchingRequire=void 0;var e=require("path"),r=GJ(),n=require("module"),i=Object.keys(process.binding("natives")),o=n.prototype.require;function s(a){var c={};return function(l){var u=o.apply(this,arguments);if(a[l]){var d=n._resolveFilename(l,this);if(c.hasOwnProperty(d))return c[d];var f=void 0;if(i.indexOf(l)<0)try{f=o.call(this,e.join(l,"package.json")).version}catch{return u}else f=process.version.substring(1);var p=f.indexOf("-");p>=0&&(f=f.substring(0,p));for(var h=u,m=0,g=a[l];m<g.length;m++){var v=g[m];r.satisfies(f,v.versionSpecifier)&&(h=v.patch(h,d))}return c[d]=h}return u}}t.makePatchingRequire=s}),WJ=O((t,e)=>{e.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),St=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.channel=t.makePatchingRequire=void 0;var e=vL(),r=vL();Object.defineProperty(t,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var n=function(s){return!0},i=function(){function s(){this.version=WJ().version,this.subscribers={},this.contextPreservationFunction=function(a){return a},this.knownPatches={},this.currentlyPublishing=!1}return s.prototype.shouldPublish=function(a){var c=this.subscribers[a];return c?c.some(function(l){var u=l.filter;return!u||u(!1)}):!1},s.prototype.publish=function(a,c){if(!this.currentlyPublishing){var l=this.subscribers[a];if(l){var u={timestamp:Date.now(),data:c};this.currentlyPublishing=!0,l.forEach(function(d){var f=d.listener,p=d.filter;try{p&&p(!0)&&f(u)}catch{}}),this.currentlyPublishing=!1}}},s.prototype.subscribe=function(a,c,l){l===void 0&&(l=n),this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push({listener:c,filter:l})},s.prototype.unsubscribe=function(a,c,l){l===void 0&&(l=n);var u=this.subscribers[a];if(u){for(var d=0;d<u.length;++d)if(u[d].listener===c&&u[d].filter===l)return u.splice(d,1),!0}return!1},s.prototype.reset=function(){var a=this;this.subscribers={},this.contextPreservationFunction=function(c){return c},Object.getOwnPropertyNames(this.knownPatches).forEach(function(c){return delete a.knownPatches[c]})},s.prototype.bindToContext=function(a){return this.contextPreservationFunction(a)},s.prototype.addContextPreservation=function(a){var c=this.contextPreservationFunction;this.contextPreservationFunction=function(l){return a(c(l))}},s.prototype.registerMonkeyPatch=function(a,c){this.knownPatches[a]||(this.knownPatches[a]=[]),this.knownPatches[a].push(c)},s.prototype.getPatchesObject=function(){return this.knownPatches},s}();global.diagnosticsSource||(global.diagnosticsSource=new i,o=require("module"),o.prototype.require=e.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var o;t.channel=global.diagnosticsSource}),zJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),KJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis=typeof globalThis=="object"?globalThis:global}),YJ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(KJ(),t)}),JJ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(YJ(),t)}),yL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.0.3"}),QJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;var e=yL(),r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(i){var o=new Set([i]),s=new Set,a=i.match(r);if(!a)return function(){return!1};var c={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(c.prerelease!=null)return function(d){return d===i};function l(d){return s.add(d),!1}function u(d){return o.add(d),!0}return function(d){if(o.has(d))return!0;if(s.has(d))return!1;var f=d.match(r);if(!f)return l(d);var p={major:+f[1],minor:+f[2],patch:+f[3],prerelease:f[4]};return p.prerelease!=null||c.major!==p.major?l(d):c.major===0?c.minor===p.minor&&c.patch<=p.patch?u(d):l(d):c.minor<=p.minor?u(d):l(d)}}t._makeCompatibilityCheck=n,t.isCompatible=n(e.VERSION)}),$u=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;var e=JJ(),r=yL(),n=QJ(),i=r.VERSION.split(".")[0],o=Symbol.for("opentelemetry.js.api."+i),s=e._globalThis;function a(u,d,f,p){var h;p===void 0&&(p=!1);var m=s[o]=(h=s[o])!==null&&h!==void 0?h:{version:r.VERSION};if(!p&&m[u]){var g=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+u);return f.error(g.stack||g.message),!1}if(m.version!==r.VERSION){var g=new Error("@opentelemetry/api: All API registration versions must match");return f.error(g.stack||g.message),!1}return m[u]=d,f.debug("@opentelemetry/api: Registered a global for "+u+" v"+r.VERSION+"."),!0}t.registerGlobal=a;function c(u){var d,f,p=(d=s[o])===null||d===void 0?void 0:d.version;if(!(!p||!n.isCompatible(p)))return(f=s[o])===null||f===void 0?void 0:f[u]}t.getGlobal=c;function l(u,d){d.debug("@opentelemetry/api: Unregistering a global for "+u+" v"+r.VERSION+".");var f=s[o];f&&delete f[u]}t.unregisterGlobal=l}),XJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;var e=$u(),r=function(){function i(o){this._namespace=o.namespace||"DiagComponentLogger"}return i.prototype.debug=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("debug",this._namespace,o)},i.prototype.error=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("error",this._namespace,o)},i.prototype.info=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("info",this._namespace,o)},i.prototype.warn=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("warn",this._namespace,o)},i.prototype.verbose=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("verbose",this._namespace,o)},i}();t.DiagComponentLogger=r;function n(i,o,s){var a=e.getGlobal("diag");if(a)return s.unshift(o),a[i].apply(a,s)}}),db=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0;var e;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(e=t.DiagLogLevel||(t.DiagLogLevel={}))}),ZJ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;var e=db();function r(n,i){n<e.DiagLogLevel.NONE?n=e.DiagLogLevel.NONE:n>e.DiagLogLevel.ALL&&(n=e.DiagLogLevel.ALL),i=i||{};function o(s,a){var c=i[s];return typeof c=="function"&&n>=a?c.bind(i):function(){}}return{error:o("error",e.DiagLogLevel.ERROR),warn:o("warn",e.DiagLogLevel.WARN),info:o("info",e.DiagLogLevel.INFO),debug:o("debug",e.DiagLogLevel.DEBUG),verbose:o("verbose",e.DiagLogLevel.VERBOSE)}}t.createLogLevelDiagLogger=r}),Uu=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;var e=XJ(),r=ZJ(),n=db(),i=$u(),o="diag",s=function(){function a(){function c(u){return function(){var d=i.getGlobal("diag");if(d)return d[u].apply(d,arguments)}}var l=this;l.setLogger=function(u,d){var f,p;if(d===void 0&&(d=n.DiagLogLevel.INFO),u===l){var h=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((f=h.stack)!==null&&f!==void 0?f:h.message),!1}var m=i.getGlobal("diag"),g=r.createLogLevelDiagLogger(d,u);if(m){var v=(p=new Error().stack)!==null&&p!==void 0?p:"<failed to generate stacktrace>";m.warn("Current logger will be overwritten from "+v),g.warn("Current logger will overwrite one already registered from "+v)}return i.registerGlobal("diag",g,l,!0)},l.disable=function(){i.unregisterGlobal(o,l)},l.createComponentLogger=function(u){return new e.DiagComponentLogger(u)},l.verbose=c("verbose"),l.debug=c("debug"),l.info=c("info"),l.warn=c("warn"),l.error=c("error")}return a.instance=function(){return this._instance||(this._instance=new a),this._instance},a}();t.DiagAPI=s}),eQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;var e=function(){function r(n){this._entries=n?new Map(n):new Map}return r.prototype.getEntry=function(n){var i=this._entries.get(n);if(i)return Object.assign({},i)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(n){var i=n[0],o=n[1];return[i,o]})},r.prototype.setEntry=function(n,i){var o=new r(this._entries);return o._entries.set(n,i),o},r.prototype.removeEntry=function(n){var i=new r(this._entries);return i._entries.delete(n),i},r.prototype.removeEntries=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];for(var o=new r(this._entries),s=0,a=n;s<a.length;s++){var c=a[s];o._entries.delete(c)}return o},r.prototype.clear=function(){return new r},r}();t.BaggageImpl=e}),tQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),wL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;var e=Uu(),r=eQ(),n=tQ(),i=e.DiagAPI.instance();function o(a){return a===void 0&&(a={}),new r.BaggageImpl(new Map(Object.entries(a)))}t.createBaggage=o;function s(a){return typeof a!="string"&&(i.error("Cannot create baggage metadata from unknown type: "+typeof a),a=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return a}}}t.baggageEntryMetadataFromString=s}),rQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),nQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),iQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;var e=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],r=function(){function n(){function i(s){return function(){var a=arguments;if(console){var c=console[s];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,a)}}}for(var o=0;o<e.length;o++)this[e[o].n]=i(e[o].c)}return n}();t.DiagConsoleLogger=r}),oQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(iQ(),t),r(db(),t)}),CL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get:function(e,r){if(e!=null)return e[r]},keys:function(e){return e==null?[]:Object.keys(e)}},t.defaultTextMapSetter={set:function(e,r,n){e!=null&&(e[r]=n)}}}),sQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),aQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),am=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0;function e(n){return Symbol.for(n)}t.createContextKey=e;var r=function(){function n(i){var o=this;o._currentContext=i?new Map(i):new Map,o.getValue=function(s){return o._currentContext.get(s)},o.setValue=function(s,a){var c=new n(o._currentContext);return c._currentContext.set(s,a),c},o.deleteValue=function(s){var a=new n(o._currentContext);return a._currentContext.delete(s),a}}return n}();t.ROOT_CONTEXT=new r}),cQ=O(t=>{"use strict";var e=t&&t.__spreadArray||function(i,o){for(var s=0,a=o.length,c=i.length;s<a;s++,c++)i[c]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;var r=am(),n=function(){function i(){}return i.prototype.active=function(){return r.ROOT_CONTEXT},i.prototype.with=function(o,s,a){for(var c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return s.call.apply(s,e([a],c))},i.prototype.bind=function(o,s){return s},i.prototype.enable=function(){return this},i.prototype.disable=function(){return this},i}();t.NoopContextManager=n}),bL=O(t=>{"use strict";var e=t&&t.__spreadArray||function(c,l){for(var u=0,d=l.length,f=c.length;u<d;u++,f++)c[f]=l[u];return c};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;var r=cQ(),n=$u(),i=Uu(),o="context",s=new r.NoopContextManager,a=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(l){return n.registerGlobal(o,l,i.DiagAPI.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(l,u,d){for(var f,p=[],h=3;h<arguments.length;h++)p[h-3]=arguments[h];return(f=this._getContextManager()).with.apply(f,e([l,u,d],p))},c.prototype.bind=function(l,u){return this._getContextManager().bind(l,u)},c.prototype._getContextManager=function(){return n.getGlobal(o)||s},c.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(o,i.DiagAPI.instance())},c}();t.ContextAPI=a}),EL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0;var e;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(e=t.TraceFlags||(t.TraceFlags={}))}),fb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;var e=EL();t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:e.TraceFlags.NONE}}),pb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;var e=fb(),r=function(){function n(i){i===void 0&&(i=e.INVALID_SPAN_CONTEXT),this._spanContext=i}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(i,o){return this},n.prototype.setAttributes=function(i){return this},n.prototype.addEvent=function(i,o){return this},n.prototype.setStatus=function(i){return this},n.prototype.updateName=function(i){return this},n.prototype.end=function(i){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(i,o){},n}();t.NonRecordingSpan=r}),_L=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getSpan=void 0;var e=am(),r=pb(),n=e.createContextKey("OpenTelemetry Context Key SPAN");function i(l){return l.getValue(n)||void 0}t.getSpan=i;function o(l,u){return l.setValue(n,u)}t.setSpan=o;function s(l){return l.deleteValue(n)}t.deleteSpan=s;function a(l,u){return o(l,new r.NonRecordingSpan(u))}t.setSpanContext=a;function c(l){var u;return(u=i(l))===null||u===void 0?void 0:u.spanContext()}t.getSpanContext=c}),hb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;var e=fb(),r=pb(),n=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function o(l){return n.test(l)&&l!==e.INVALID_TRACEID}t.isValidTraceId=o;function s(l){return i.test(l)&&l!==e.INVALID_SPANID}t.isValidSpanId=s;function a(l){return o(l.traceId)&&s(l.spanId)}t.isSpanContextValid=a;function c(l){return new r.NonRecordingSpan(l)}t.wrapSpanContext=c}),SL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;var e=bL(),r=_L(),n=pb(),i=hb(),o=e.ContextAPI.getInstance(),s=function(){function c(){}return c.prototype.startSpan=function(l,u,d){var f=Boolean(u==null?void 0:u.root);if(f)return new n.NonRecordingSpan;var p=d&&r.getSpanContext(d);return a(p)&&i.isSpanContextValid(p)?new n.NonRecordingSpan(p):new n.NonRecordingSpan},c.prototype.startActiveSpan=function(l,u,d,f){var p,h,m;if(!(arguments.length<2)){arguments.length===2?m=u:arguments.length===3?(p=u,m=d):(p=u,h=d,m=f);var g=h!=null?h:o.active(),v=this.startSpan(l,p,g),w=r.setSpan(g,v);return o.with(w,m,void 0,v)}},c}();t.NoopTracer=s;function a(c){return typeof c=="object"&&typeof c.spanId=="string"&&typeof c.traceId=="string"&&typeof c.traceFlags=="number"}}),xL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;var e=SL(),r=new e.NoopTracer,n=function(){function i(o,s,a){this._provider=o,this.name=s,this.version=a}return i.prototype.startSpan=function(o,s,a){return this._getTracer().startSpan(o,s,a)},i.prototype.startActiveSpan=function(o,s,a,c){var l=this._getTracer();return Reflect.apply(l.startActiveSpan,l,arguments)},i.prototype._getTracer=function(){if(this._delegate)return this._delegate;var o=this._provider.getDelegateTracer(this.name,this.version);return o?(this._delegate=o,this._delegate):r},i}();t.ProxyTracer=n}),lQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;var e=SL(),r=function(){function n(){}return n.prototype.getTracer=function(i,o){return new e.NoopTracer},n}();t.NoopTracerProvider=r}),PL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;var e=xL(),r=lQ(),n=new r.NoopTracerProvider,i=function(){function o(){}return o.prototype.getTracer=function(s,a){var c;return(c=this.getDelegateTracer(s,a))!==null&&c!==void 0?c:new e.ProxyTracer(this,s,a)},o.prototype.getDelegate=function(){var s;return(s=this._delegate)!==null&&s!==void 0?s:n},o.prototype.setDelegate=function(s){this._delegate=s},o.prototype.getDelegateTracer=function(s,a){var c;return(c=this._delegate)===null||c===void 0?void 0:c.getTracer(s,a)},o}();t.ProxyTracerProvider=i}),uQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),dQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0;var e;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(e=t.SamplingDecision||(t.SamplingDecision={}))}),fQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),pQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0;var e;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(e=t.SpanKind||(t.SpanKind={}))}),hQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),mQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),gQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0;var e;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(e=t.SpanStatusCode||(t.SpanStatusCode={}))}),vQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),yQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),wQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),CQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),bQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;var e=$u(),r=PL(),n=hb(),i=_L(),o=Uu(),s="trace",a=function(){function c(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalTracerProvider=function(l){var u=e.registerGlobal(s,this._proxyTracerProvider,o.DiagAPI.instance());return u&&this._proxyTracerProvider.setDelegate(l),u},c.prototype.getTracerProvider=function(){return e.getGlobal(s)||this._proxyTracerProvider},c.prototype.getTracer=function(l,u){return this.getTracerProvider().getTracer(l,u)},c.prototype.disable=function(){e.unregisterGlobal(s,o.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},c}();t.TraceAPI=a}),EQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;var e=function(){function r(){}return r.prototype.inject=function(n,i){},r.prototype.extract=function(n,i){return n},r.prototype.fields=function(){return[]},r}();t.NoopTextMapPropagator=e}),_Q=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getBaggage=void 0;var e=am(),r=e.createContextKey("OpenTelemetry Baggage Key");function n(s){return s.getValue(r)||void 0}t.getBaggage=n;function i(s,a){return s.setValue(r,a)}t.setBaggage=i;function o(s){return s.deleteValue(r)}t.deleteBaggage=o}),SQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;var e=$u(),r=EQ(),n=CL(),i=_Q(),o=wL(),s=Uu(),a="propagation",c=new r.NoopTextMapPropagator,l=function(){function u(){this.createBaggage=o.createBaggage,this.getBaggage=i.getBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}return u.getInstance=function(){return this._instance||(this._instance=new u),this._instance},u.prototype.setGlobalPropagator=function(d){return e.registerGlobal(a,d,s.DiagAPI.instance())},u.prototype.inject=function(d,f,p){return p===void 0&&(p=n.defaultTextMapSetter),this._getGlobalPropagator().inject(d,f,p)},u.prototype.extract=function(d,f,p){return p===void 0&&(p=n.defaultTextMapGetter),this._getGlobalPropagator().extract(d,f,p)},u.prototype.fields=function(){return this._getGlobalPropagator().fields()},u.prototype.disable=function(){e.unregisterGlobal(a,s.DiagAPI.instance())},u.prototype._getGlobalPropagator=function(){return e.getGlobal(a)||c},u}();t.PropagationAPI=l}),dt=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(u,d,f,p){p===void 0&&(p=f),Object.defineProperty(u,p,{enumerable:!0,get:function(){return d[f]}})}:function(u,d,f,p){p===void 0&&(p=f),u[p]=d[f]}),r=t&&t.__exportStar||function(u,d){for(var f in u)f!=="default"&&!Object.prototype.hasOwnProperty.call(d,f)&&e(d,u,f)};Object.defineProperty(t,"__esModule",{value:!0}),t.diag=t.propagation=t.trace=t.context=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=t.isValidSpanId=t.isValidTraceId=t.isSpanContextValid=t.baggageEntryMetadataFromString=void 0,r(zJ(),t);var n=wL();Object.defineProperty(t,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(rQ(),t),r(nQ(),t),r(oQ(),t),r(CL(),t),r(sQ(),t),r(aQ(),t),r(xL(),t),r(PL(),t),r(uQ(),t),r(dQ(),t),r(fQ(),t),r(pQ(),t),r(hQ(),t),r(mQ(),t),r(gQ(),t),r(EL(),t),r(vQ(),t),r(yQ(),t),r(wQ(),t);var i=hb();Object.defineProperty(t,"isSpanContextValid",{enumerable:!0,get:function(){return i.isSpanContextValid}}),Object.defineProperty(t,"isValidTraceId",{enumerable:!0,get:function(){return i.isValidTraceId}}),Object.defineProperty(t,"isValidSpanId",{enumerable:!0,get:function(){return i.isValidSpanId}});var o=fb();Object.defineProperty(t,"INVALID_SPANID",{enumerable:!0,get:function(){return o.INVALID_SPANID}}),Object.defineProperty(t,"INVALID_TRACEID",{enumerable:!0,get:function(){return o.INVALID_TRACEID}}),Object.defineProperty(t,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return o.INVALID_SPAN_CONTEXT}}),r(am(),t),r(CQ(),t);var s=bL();t.context=s.ContextAPI.getInstance();var a=bQ();t.trace=a.TraceAPI.getInstance();var c=SQ();t.propagation=c.PropagationAPI.getInstance();var l=Uu();t.diag=l.DiagAPI.instance(),t.default={trace:t.trace,context:t.context,propagation:t.propagation,diag:t.diag}}),mb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTracingSuppressed=t.unsuppressTracing=t.suppressTracing=void 0;var e=dt(),r=e.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(s){return s.setValue(r,!0)}t.suppressTracing=n;function i(s){return s.deleteValue(r)}t.unsuppressTracing=i;function o(s){return s.getValue(r)===!0}t.isTracingSuppressed=o}),kL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BAGGAGE_MAX_TOTAL_LENGTH=t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=t.BAGGAGE_MAX_NAME_VALUE_PAIRS=t.BAGGAGE_HEADER=t.BAGGAGE_ITEMS_SEPARATOR=t.BAGGAGE_PROPERTIES_SEPARATOR=t.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,t.BAGGAGE_KEY_PAIR_SEPARATOR="=",t.BAGGAGE_PROPERTIES_SEPARATOR=";",t.BAGGAGE_ITEMS_SEPARATOR=",",t.BAGGAGE_HEADER="baggage",t.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,t.BAGGAGE_MAX_TOTAL_LENGTH=8192}),IL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseKeyPairsIntoRecord=t.parsePairKeyValue=t.getKeyPairs=t.serializeKeyPairs=void 0;var e=dt(),r=kL(),n=a=>a.reduce((c,l)=>{let u=`${c}${c!==""?r.BAGGAGE_ITEMS_SEPARATOR:""}${l}`;return u.length>r.BAGGAGE_MAX_TOTAL_LENGTH?c:u},"");t.serializeKeyPairs=n;var i=a=>a.getAllEntries().map(([c,l])=>`${encodeURIComponent(c)}=${encodeURIComponent(l.value)}`);t.getKeyPairs=i;var o=a=>{let c=a.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(c.length<=0)return;let l=c.shift();if(!l)return;let u=l.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(u.length!==2)return;let d=decodeURIComponent(u[0].trim()),f=decodeURIComponent(u[1].trim()),p;return c.length>0&&(p=e.baggageEntryMetadataFromString(c.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:d,value:f,metadata:p}};t.parsePairKeyValue=o;var s=a=>typeof a!="string"||a.length===0?{}:a.split(r.BAGGAGE_ITEMS_SEPARATOR).map(c=>t.parsePairKeyValue(c)).filter(c=>c!==void 0&&c.value.length>0).reduce((c,l)=>(c[l.key]=l.value,c),{});t.parseKeyPairsIntoRecord=s}),xQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpBaggagePropagator=void 0;var e=dt(),r=mb(),n=kL(),i=IL(),o=class{inject(s,a,c){let l=e.propagation.getBaggage(s);if(!l||r.isTracingSuppressed(s))return;let u=i.getKeyPairs(l).filter(f=>f.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),d=i.serializeKeyPairs(u);d.length>0&&c.set(a,n.BAGGAGE_HEADER,d)}extract(s,a,c){let l=c.get(a,n.BAGGAGE_HEADER);if(!l)return s;let u={};return l.length===0||(l.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(d=>{let f=i.parsePairKeyValue(d);if(f){let p={value:f.value};f.metadata&&(p.metadata=f.metadata),u[f.key]=p}}),Object.entries(u).length===0)?s:e.propagation.setBaggage(s,e.propagation.createBaggage(u))}fields(){return[n.BAGGAGE_HEADER]}};t.HttpBaggagePropagator=o}),PQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAttributeValue=t.sanitizeAttributes=void 0;function e(o){let s={};if(o==null||typeof o!="object")return s;for(let[a,c]of Object.entries(o))r(c)&&(Array.isArray(c)?s[a]=c.slice():s[a]=c);return s}t.sanitizeAttributes=e;function r(o){return o==null?!0:Array.isArray(o)?n(o):i(o)}t.isAttributeValue=r;function n(o){let s;for(let a of o)if(a!=null){if(!s){if(i(a)){s=typeof a;continue}return!1}if(typeof a!==s)return!1}return!0}function i(o){switch(typeof o){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),TL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loggingErrorHandler=void 0;var e=dt();function r(){return o=>{e.diag.error(n(o))}}t.loggingErrorHandler=r;function n(o){return typeof o=="string"?o:JSON.stringify(i(o))}function i(o){let s={},a=o;for(;a!==null;)Object.getOwnPropertyNames(a).forEach(c=>{if(s[c])return;let l=a[c];l&&(s[c]=String(l))}),a=Object.getPrototypeOf(a);return s}}),AL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalErrorHandler=t.setGlobalErrorHandler=void 0;var e=TL(),r=e.loggingErrorHandler();function n(o){r=o}t.setGlobalErrorHandler=n;var i=o=>{try{r(o)}catch{}};t.globalErrorHandler=i}),DL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TracesSamplerValues=void 0;var e;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(e=t.TracesSamplerValues||(t.TracesSamplerValues={}))}),RL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnvironment=t.DEFAULT_ENVIRONMENT=void 0;var e=dt(),r=DL(),n=",",i=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function o(p){return i.indexOf(p)>-1}var s=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function a(p){return s.indexOf(p)>-1}t.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:e.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function c(p,h,m,g=-1/0,v=1/0){if(typeof m[p]!="undefined"){let w=Number(m[p]);isNaN(w)||(w<g?h[p]=g:w>v?h[p]=v:h[p]=w)}}function l(p,h,m,g=n){let v=m[p];typeof v=="string"&&(h[p]=v.split(g).map(w=>w.trim()))}var u={ALL:e.DiagLogLevel.ALL,VERBOSE:e.DiagLogLevel.VERBOSE,DEBUG:e.DiagLogLevel.DEBUG,INFO:e.DiagLogLevel.INFO,WARN:e.DiagLogLevel.WARN,ERROR:e.DiagLogLevel.ERROR,NONE:e.DiagLogLevel.NONE};function d(p,h,m){let g=m[p];if(typeof g=="string"){let v=u[g.toUpperCase()];v!=null&&(h[p]=v)}}function f(p){let h={};for(let m in t.DEFAULT_ENVIRONMENT){let g=m;switch(g){case"OTEL_LOG_LEVEL":d(g,h,p);break;default:if(o(g))c(g,h,p);else if(a(g))l(g,h,p);else{let v=p[g];typeof v!="undefined"&&v!==null&&(h[g]=String(v))}}}return h}t.parseEnvironment=f}),kQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnv=void 0;var e=require("os"),r=RL();function n(){let i=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:e.hostname()},r.DEFAULT_ENVIRONMENT,i)}t.getEnv=n}),IQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexToBase64=void 0;function e(r){let n=r.length,i="";for(let o=0;o<n;o+=2){let s=r.substring(o,o+2),a=parseInt(s,16);i+=String.fromCharCode(a)}return Buffer.from(i,"ascii").toString("base64")}t.hexToBase64=e}),TQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RandomIdGenerator=void 0;var e=8,r=16,n=class{constructor(){this.generateTraceId=o(r),this.generateSpanId=o(e)}};t.RandomIdGenerator=n;var i=Buffer.allocUnsafe(r);function o(s){return function(){for(let a=0;a<s/4;a++)i.writeUInt32BE(Math.random()*2**32>>>0,a*4);for(let a=0;a<s&&!(i[a]>0);a++)a===s-1&&(i[s-1]=1);return i.toString("hex",0,s)}}}),AQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.otperformance=void 0;var e=require("perf_hooks");t.otperformance=e.performance}),gb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="0.23.0"}),DQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RpcGrpcStatusCodeValues=t.MessagingOperationValues=t.MessagingDestinationKindValues=t.HttpFlavorValues=t.NetTransportValues=t.FaasInvokedProviderValues=t.FaasDocumentOperationValues=t.FaasTriggerValues=t.DbCassandraConsistencyLevelValues=t.DbSystemValues=t.SemanticAttributes=void 0,t.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var e;(function(d){d.OTHER_SQL="other_sql",d.MSSQL="mssql",d.MYSQL="mysql",d.ORACLE="oracle",d.DB2="db2",d.POSTGRESQL="postgresql",d.REDSHIFT="redshift",d.HIVE="hive",d.CLOUDSCAPE="cloudscape",d.HSQLDB="hsqldb",d.PROGRESS="progress",d.MAXDB="maxdb",d.HANADB="hanadb",d.INGRES="ingres",d.FIRSTSQL="firstsql",d.EDB="edb",d.CACHE="cache",d.ADABAS="adabas",d.FIREBIRD="firebird",d.DERBY="derby",d.FILEMAKER="filemaker",d.INFORMIX="informix",d.INSTANTDB="instantdb",d.INTERBASE="interbase",d.MARIADB="mariadb",d.NETEZZA="netezza",d.PERVASIVE="pervasive",d.POINTBASE="pointbase",d.SQLITE="sqlite",d.SYBASE="sybase",d.TERADATA="teradata",d.VERTICA="vertica",d.H2="h2",d.COLDFUSION="coldfusion",d.CASSANDRA="cassandra",d.HBASE="hbase",d.MONGODB="mongodb",d.REDIS="redis",d.COUCHBASE="couchbase",d.COUCHDB="couchdb",d.COSMOSDB="cosmosdb",d.DYNAMODB="dynamodb",d.NEO4J="neo4j",d.GEODE="geode",d.ELASTICSEARCH="elasticsearch",d.MEMCACHED="memcached",d.COCKROACHDB="cockroachdb"})(e=t.DbSystemValues||(t.DbSystemValues={}));var r;(function(d){d.ALL="all",d.EACH_QUORUM="each_quorum",d.QUORUM="quorum",d.LOCAL_QUORUM="local_quorum",d.ONE="one",d.TWO="two",d.THREE="three",d.LOCAL_ONE="local_one",d.ANY="any",d.SERIAL="serial",d.LOCAL_SERIAL="local_serial"})(r=t.DbCassandraConsistencyLevelValues||(t.DbCassandraConsistencyLevelValues={}));var n;(function(d){d.DATASOURCE="datasource",d.HTTP="http",d.PUBSUB="pubsub",d.TIMER="timer",d.OTHER="other"})(n=t.FaasTriggerValues||(t.FaasTriggerValues={}));var i;(function(d){d.INSERT="insert",d.EDIT="edit",d.DELETE="delete"})(i=t.FaasDocumentOperationValues||(t.FaasDocumentOperationValues={}));var o;(function(d){d.AWS="aws",d.AZURE="azure",d.GCP="gcp"})(o=t.FaasInvokedProviderValues||(t.FaasInvokedProviderValues={}));var s;(function(d){d.IP_TCP="ip_tcp",d.IP_UDP="ip_udp",d.IP="ip",d.UNIX="unix",d.PIPE="pipe",d.INPROC="inproc",d.OTHER="other"})(s=t.NetTransportValues||(t.NetTransportValues={}));var a;(function(d){d.HTTP_1_0="1.0",d.HTTP_1_1="1.1",d.HTTP_2_0="2.0",d.SPDY="SPDY",d.QUIC="QUIC"})(a=t.HttpFlavorValues||(t.HttpFlavorValues={}));var c;(function(d){d.QUEUE="queue",d.TOPIC="topic"})(c=t.MessagingDestinationKindValues||(t.MessagingDestinationKindValues={}));var l;(function(d){d.RECEIVE="receive",d.PROCESS="process"})(l=t.MessagingOperationValues||(t.MessagingOperationValues={}));var u;(function(d){d[d.OK=0]="OK",d[d.CANCELLED=1]="CANCELLED",d[d.UNKNOWN=2]="UNKNOWN",d[d.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",d[d.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",d[d.NOT_FOUND=5]="NOT_FOUND",d[d.ALREADY_EXISTS=6]="ALREADY_EXISTS",d[d.PERMISSION_DENIED=7]="PERMISSION_DENIED",d[d.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",d[d.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",d[d.ABORTED=10]="ABORTED",d[d.OUT_OF_RANGE=11]="OUT_OF_RANGE",d[d.UNIMPLEMENTED=12]="UNIMPLEMENTED",d[d.INTERNAL=13]="INTERNAL",d[d.UNAVAILABLE=14]="UNAVAILABLE",d[d.DATA_LOSS=15]="DATA_LOSS",d[d.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(u=t.RpcGrpcStatusCodeValues||(t.RpcGrpcStatusCodeValues={}))}),RQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(DQ(),t)}),OQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetrySdkLanguageValues=t.OsTypeValues=t.HostArchValues=t.AwsEcsLaunchtypeValues=t.CloudPlatformValues=t.CloudProviderValues=t.ResourceAttributes=void 0,t.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var e;(function(a){a.AWS="aws",a.AZURE="azure",a.GCP="gcp"})(e=t.CloudProviderValues||(t.CloudProviderValues={}));var r;(function(a){a.AWS_EC2="aws_ec2",a.AWS_ECS="aws_ecs",a.AWS_EKS="aws_eks",a.AWS_LAMBDA="aws_lambda",a.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",a.AZURE_VM="azure_vm",a.AZURE_CONTAINER_INSTANCES="azure_container_instances",a.AZURE_AKS="azure_aks",a.AZURE_FUNCTIONS="azure_functions",a.AZURE_APP_SERVICE="azure_app_service",a.GCP_COMPUTE_ENGINE="gcp_compute_engine",a.GCP_CLOUD_RUN="gcp_cloud_run",a.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",a.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",a.GCP_APP_ENGINE="gcp_app_engine"})(r=t.CloudPlatformValues||(t.CloudPlatformValues={}));var n;(function(a){a.EC2="ec2",a.FARGATE="fargate"})(n=t.AwsEcsLaunchtypeValues||(t.AwsEcsLaunchtypeValues={}));var i;(function(a){a.AMD64="amd64",a.ARM32="arm32",a.ARM64="arm64",a.IA64="ia64",a.PPC32="ppc32",a.PPC64="ppc64",a.X86="x86"})(i=t.HostArchValues||(t.HostArchValues={}));var o;(function(a){a.WINDOWS="windows",a.LINUX="linux",a.DARWIN="darwin",a.FREEBSD="freebsd",a.NETBSD="netbsd",a.OPENBSD="openbsd",a.DRAGONFLYBSD="dragonflybsd",a.HPUX="hpux",a.AIX="aix",a.SOLARIS="solaris",a.Z_OS="z_os"})(o=t.OsTypeValues||(t.OsTypeValues={}));var s;(function(a){a.CPP="cpp",a.DOTNET="dotnet",a.ERLANG="erlang",a.GO="go",a.JAVA="java",a.NODEJS="nodejs",a.PHP="php",a.PYTHON="python",a.RUBY="ruby",a.WEBJS="webjs"})(s=t.TelemetrySdkLanguageValues||(t.TelemetrySdkLanguageValues={}))}),NQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(OQ(),t)}),Bu=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(RQ(),t),r(NQ(),t)}),LQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_INFO=void 0;var e=gb(),r=Bu();t.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:e.VERSION}}),FQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unrefTimer=void 0;function e(r){r.unref()}t.unrefTimer=e}),MQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(kQ(),t),r(IQ(),t),r(TQ(),t),r(AQ(),t),r(LQ(),t),r(FQ(),t)}),OL=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(MQ(),t)}),qQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTimeInput=t.isTimeInputHrTime=t.hrTimeToMicroseconds=t.hrTimeToMilliseconds=t.hrTimeToNanoseconds=t.hrTimeToTimeStamp=t.hrTimeDuration=t.timeInputToHrTime=t.hrTime=void 0;var e=OL(),r=9,n=Math.pow(10,r);function i(m){let g=m/1e3,v=Math.trunc(g),w=Number((g-v).toFixed(r))*n;return[v,w]}function o(){let m=e.otperformance.timeOrigin;if(typeof m!="number"){let g=e.otperformance;m=g.timing&&g.timing.fetchStart}return m}function s(m){let g=i(o()),v=i(typeof m=="number"?m:e.otperformance.now()),w=g[0]+v[0],C=g[1]+v[1];return C>n&&(C-=n,w+=1),[w,C]}t.hrTime=s;function a(m){if(p(m))return m;if(typeof m=="number")return m<o()?s(m):i(m);if(m instanceof Date)return i(m.getTime());throw TypeError("Invalid input type")}t.timeInputToHrTime=a;function c(m,g){let v=g[0]-m[0],w=g[1]-m[1];return w<0&&(v-=1,w+=n),[v,w]}t.hrTimeDuration=c;function l(m){let g=r,v=`${"0".repeat(g)}${m[1]}Z`,w=v.substr(v.length-g-1);return new Date(m[0]*1e3).toISOString().replace("000Z",w)}t.hrTimeToTimeStamp=l;function u(m){return m[0]*n+m[1]}t.hrTimeToNanoseconds=u;function d(m){return Math.round(m[0]*1e3+m[1]/1e6)}t.hrTimeToMilliseconds=d;function f(m){return Math.round(m[0]*1e6+m[1]/1e3)}t.hrTimeToMicroseconds=f;function p(m){return Array.isArray(m)&&m.length===2&&typeof m[0]=="number"&&typeof m[1]=="number"}t.isTimeInputHrTime=p;function h(m){return p(m)||typeof m=="number"||m instanceof Date}t.isTimeInput=h}),jQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),$Q=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExportResultCode=void 0;var e;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(e=t.ExportResultCode||(t.ExportResultCode={}))}),UQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompositePropagator=void 0;var e=dt(),r=class{constructor(n={}){var i;this._propagators=(i=n.propagators)!==null&&i!==void 0?i:[],this._fields=Array.from(new Set(this._propagators.map(o=>typeof o.fields=="function"?o.fields():[]).reduce((o,s)=>o.concat(s),[])))}inject(n,i,o){for(let s of this._propagators)try{s.inject(n,i,o)}catch(a){e.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${a.message}`)}}extract(n,i,o){return this._propagators.reduce((s,a)=>{try{return a.extract(s,i,o)}catch(c){e.diag.warn(`Failed to inject with ${a.constructor.name}. Err: ${c.message}`)}return s},n)}fields(){return this._fields.slice()}};t.CompositePropagator=r}),BQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;var e="[_0-9a-z-*/]",r=`[a-z]${e}{0,255}`,n=`[a-z0-9]${e}{0,240}@[a-z]${e}{0,13}`,i=new RegExp(`^(?:${r}|${n})$`),o=/^[ -~]{0,255}[!-~]$/,s=/,|=/;function a(l){return i.test(l)}t.validateKey=a;function c(l){return o.test(l)&&!s.test(l)}t.validateValue=c}),NL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceState=void 0;var e=BQ(),r=32,n=512,i=",",o="=",s=class{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,c){let l=this._clone();return l._internalState.has(a)&&l._internalState.delete(a),l._internalState.set(a,c),l}unset(a){let c=this._clone();return c._internalState.delete(a),c}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,c)=>(a.push(c+o+this.get(c)),a),[]).join(i)}_parse(a){a.length>n||(this._internalState=a.split(i).reverse().reduce((c,l)=>{let u=l.trim(),d=u.indexOf(o);if(d!==-1){let f=u.slice(0,d),p=u.slice(d+1,l.length);e.validateKey(f)&&e.validateValue(p)&&c.set(f,p)}return c},new Map),this._internalState.size>r&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,r))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new s;return a._internalState=new Map(this._internalState),a}};t.TraceState=s}),HQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpTraceContextPropagator=t.parseTraceParent=t.TRACE_STATE_HEADER=t.TRACE_PARENT_HEADER=void 0;var e=dt(),r=mb(),n=NL();t.TRACE_PARENT_HEADER="traceparent",t.TRACE_STATE_HEADER="tracestate";var i="00",o="(?!ff)[\\da-f]{2}",s="(?![0]{32})[\\da-f]{32}",a="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",l=new RegExp(`^\\s?(${o})-(${s})-(${a})-(${c})(-.*)?\\s?$`);function u(f){let p=l.exec(f);return!p||p[1]==="00"&&p[5]?null:{traceId:p[2],spanId:p[3],traceFlags:parseInt(p[4],16)}}t.parseTraceParent=u;var d=class{inject(f,p,h){let m=e.trace.getSpanContext(f);if(!m||r.isTracingSuppressed(f)||!e.isSpanContextValid(m))return;let g=`${i}-${m.traceId}-${m.spanId}-0${Number(m.traceFlags||e.TraceFlags.NONE).toString(16)}`;h.set(p,t.TRACE_PARENT_HEADER,g),m.traceState&&h.set(p,t.TRACE_STATE_HEADER,m.traceState.serialize())}extract(f,p,h){let m=h.get(p,t.TRACE_PARENT_HEADER);if(!m)return f;let g=Array.isArray(m)?m[0]:m;if(typeof g!="string")return f;let v=u(g);if(!v)return f;v.isRemote=!0;let w=h.get(p,t.TRACE_STATE_HEADER);if(w){let C=Array.isArray(w)?w.join(","):w;v.traceState=new n.TraceState(typeof C=="string"?C:void 0)}return e.trace.setSpanContext(f,v)}fields(){return[t.TRACE_PARENT_HEADER,t.TRACE_STATE_HEADER]}};t.HttpTraceContextPropagator=d}),VQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),GQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRPCMetadata=t.deleteRPCMetadata=t.setRPCMetadata=t.RPCType=void 0;var e=dt(),r=e.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),n;(function(a){a.HTTP="http"})(n=t.RPCType||(t.RPCType={}));function i(a,c){return a.setValue(r,c)}t.setRPCMetadata=i;function o(a){return a.deleteValue(r)}t.deleteRPCMetadata=o;function s(a){return a.getValue(r)}t.getRPCMetadata=s}),LL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOffSampler=void 0;var e=dt(),r=class{shouldSample(){return{decision:e.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};t.AlwaysOffSampler=r}),FL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOnSampler=void 0;var e=dt(),r=class{shouldSample(){return{decision:e.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};t.AlwaysOnSampler=r}),WQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParentBasedSampler=void 0;var e=dt(),r=AL(),n=LL(),i=FL(),o=class{constructor(s){var a,c,l,u;this._root=s.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new i.AlwaysOnSampler),this._remoteParentSampled=(a=s.remoteParentSampled)!==null&&a!==void 0?a:new i.AlwaysOnSampler,this._remoteParentNotSampled=(c=s.remoteParentNotSampled)!==null&&c!==void 0?c:new n.AlwaysOffSampler,this._localParentSampled=(l=s.localParentSampled)!==null&&l!==void 0?l:new i.AlwaysOnSampler,this._localParentNotSampled=(u=s.localParentNotSampled)!==null&&u!==void 0?u:new n.AlwaysOffSampler}shouldSample(s,a,c,l,u,d){let f=e.trace.getSpanContext(s);return!f||!e.isSpanContextValid(f)?this._root.shouldSample(s,a,c,l,u,d):f.isRemote?f.traceFlags&e.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(s,a,c,l,u,d):this._remoteParentNotSampled.shouldSample(s,a,c,l,u,d):f.traceFlags&e.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(s,a,c,l,u,d):this._localParentNotSampled.shouldSample(s,a,c,l,u,d)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};t.ParentBasedSampler=o}),zQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceIdRatioBasedSampler=void 0;var e=dt(),r=class{constructor(n=0){this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(n,i){return{decision:e.isValidTraceId(i)&&this._accumulate(i)<this._upperBound?e.SamplingDecision.RECORD_AND_SAMPLED:e.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return typeof n!="number"||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let i=0;for(let o=0;o<n.length/8;o++){let s=o*8,a=parseInt(n.slice(s,s+8),16);i=(i^a)>>>0}return i}};t.TraceIdRatioBasedSampler=r}),KQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUrlIgnored=t.urlMatches=void 0;function e(n,i){return typeof i=="string"?n===i:i.test(n)}t.urlMatches=e;function r(n,i){if(!i)return!1;for(let o of i)if(e(n,o))return!0;return!1}t.isUrlIgnored=r}),YQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWrapped=void 0;function e(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}t.isWrapped=e}),Ln=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.baggageUtils=void 0,r(xQ(),t),r(PQ(),t),r(AL(),t),r(TL(),t),r(qQ(),t),r(jQ(),t),r($Q(),t),r(gb(),t),t.baggageUtils=IL(),r(OL(),t),r(UQ(),t),r(HQ(),t),r(VQ(),t),r(GQ(),t),r(LL(),t),r(FL(),t),r(WQ(),t),r(zQ(),t),r(mb(),t),r(NL(),t),r(RL(),t),r(DL(),t),r(KQ(),t),r(YQ(),t),r(gb(),t)}),JQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionEventName=void 0,t.ExceptionEventName="exception"}),ML=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Span=void 0;var e=dt(),r=Ln(),n=Bu(),i=JQ(),o=class{constructor(s,a,c,l,u,d,f=[],p=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:e.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=c,this._spanContext=l,this.parentSpanId=d,this.kind=u,this.links=f,this.startTime=r.timeInputToHrTime(p),this.resource=s.resource,this.instrumentationLibrary=s.instrumentationLibrary,this._spanLimits=s.getSpanLimits(),this._spanProcessor=s.getActiveSpanProcessor(),this._spanProcessor.onStart(this,a)}spanContext(){return this._spanContext}setAttribute(s,a){return a==null||this._isSpanEnded()?this:s.length===0?(e.diag.warn(`Invalid attribute key: ${s}`),this):r.isAttributeValue(a)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,s)?this:(this.attributes[s]=a,this):(e.diag.warn(`Invalid attribute value set for key: ${s}`),this)}setAttributes(s){for(let[a,c]of Object.entries(s))this.setAttribute(a,c);return this}addEvent(s,a,c){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(e.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(a)&&(typeof c=="undefined"&&(c=a),a=void 0),typeof c=="undefined"&&(c=r.hrTime()),this.events.push({name:s,attributes:a,time:r.timeInputToHrTime(c)}),this)}setStatus(s){return this._isSpanEnded()?this:(this.status=s,this)}updateName(s){return this._isSpanEnded()?this:(this.name=s,this)}end(s=r.hrTime()){if(this._isSpanEnded()){e.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=r.timeInputToHrTime(s),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&e.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(s,a=r.hrTime()){let c={};typeof s=="string"?c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s:s&&(s.code?c[n.SemanticAttributes.EXCEPTION_TYPE]=s.code.toString():s.name&&(c[n.SemanticAttributes.EXCEPTION_TYPE]=s.name),s.message&&(c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s.message),s.stack&&(c[n.SemanticAttributes.EXCEPTION_STACKTRACE]=s.stack)),c[n.SemanticAttributes.EXCEPTION_TYPE]||c[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(i.ExceptionEventName,c,a):e.diag.warn(`Failed to record an exception ${s}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&e.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};t.Span=o}),qL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildSamplerFromEnv=t.DEFAULT_CONFIG=void 0;var e=dt(),r=Ln(),n=r.getEnv(),i=r.TracesSamplerValues.AlwaysOn;t.DEFAULT_CONFIG={sampler:o(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function o(c=r.getEnv()){switch(c.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(a(c));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(a(c))});default:return e.diag.error(`OTEL_TRACES_SAMPLER value "${c.OTEL_TRACES_SAMPLER} invalid, defaulting to ${i}".`),new r.AlwaysOnSampler}}t.buildSamplerFromEnv=o;var s=1;function a(c){if(c.OTEL_TRACES_SAMPLER_ARG===void 0||c.OTEL_TRACES_SAMPLER_ARG==="")return e.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${s}.`),s;let l=Number(c.OTEL_TRACES_SAMPLER_ARG);return isNaN(l)?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${s}.`),s):l<0||l>1?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${s}.`),s):l}}),QQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeConfig=void 0;var e=qL();function r(n){let i={sampler:e.buildSamplerFromEnv()},o=Object.assign({},e.DEFAULT_CONFIG,i,n);return o.spanLimits=Object.assign({},e.DEFAULT_CONFIG.spanLimits,n.spanLimits||{}),o}t.mergeConfig=r}),XQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tracer=void 0;var e=dt(),r=Ln(),n=ML(),i=QQ(),o=class{constructor(a,c,l){this._tracerProvider=l;let u=i.mergeConfig(c);this._sampler=u.sampler,this._spanLimits=u.spanLimits,this._idGenerator=c.idGenerator||new r.RandomIdGenerator,this.resource=l.resource,this.instrumentationLibrary=a}startSpan(a,c={},l=e.context.active()){var u,d;if(r.isTracingSuppressed(l))return e.diag.debug("Instrumentation suppressed, returning Noop Span"),e.trace.wrapSpanContext(e.INVALID_SPAN_CONTEXT);let f=s(c,l),p=this._idGenerator.generateSpanId(),h,m,g;!f||!e.trace.isSpanContextValid(f)?h=this._idGenerator.generateTraceId():(h=f.traceId,m=f.traceState,g=f.spanId);let v=(u=c.kind)!==null&&u!==void 0?u:e.SpanKind.INTERNAL,w=(d=c.links)!==null&&d!==void 0?d:[],C=r.sanitizeAttributes(c.attributes),b=this._sampler.shouldSample(c.root?e.trace.setSpanContext(l,e.INVALID_SPAN_CONTEXT):l,h,a,v,C,w),S=b.decision===e.SamplingDecision.RECORD_AND_SAMPLED?e.TraceFlags.SAMPLED:e.TraceFlags.NONE,P={traceId:h,spanId:p,traceFlags:S,traceState:m};if(b.decision===e.SamplingDecision.NOT_RECORD)return e.diag.debug("Recording is off, propagating context in a non-recording span"),e.trace.wrapSpanContext(P);let _=new n.Span(this,l,a,P,v,g,w,c.startTime);return _.setAttributes(Object.assign(C,b.attributes)),_}startActiveSpan(a,c,l,u){let d,f,p;if(arguments.length<2)return;arguments.length===2?p=c:arguments.length===3?(d=c,p=l):(d=c,f=l,p=u);let h=f!=null?f:e.context.active(),m=this.startSpan(a,d,h),g=e.trace.setSpan(h,m);return e.context.with(g,p,void 0,m)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};t.Tracer=o;function s(a,c){if(!a.root)return e.trace.getSpanContext(c)}}),ZQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultServiceName=void 0;function e(){return`unknown_service:${process.argv0}`}t.defaultServiceName=e}),eX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectResources=void 0;var e=$L(),r=dt(),n=require("util"),i=async(s={})=>{let a=Object.assign(s),c=await Promise.all((a.detectors||[]).map(async l=>{try{let u=await l.detect(a);return r.diag.debug(`${l.constructor.name} found resource.`,u),u}catch(u){return r.diag.debug(`${l.constructor.name} failed: ${u.message}`),e.Resource.empty()}}));return o(c),c.reduce((l,u)=>l.merge(u),e.Resource.empty())};t.detectResources=i;var o=s=>{s.forEach(a=>{if(Object.keys(a.attributes).length>0){let c=n.inspect(a.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(c)}})}}),tX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.envDetector=void 0;var e=dt(),r=Ln(),n=Bu(),i=vb(),o=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(s){let a={},c=r.getEnv(),l=c.OTEL_RESOURCE_ATTRIBUTES,u=c.OTEL_SERVICE_NAME;if(l)try{let d=this._parseResourceAttributes(l);Object.assign(a,d)}catch(d){e.diag.debug(`EnvDetector failed: ${d.message}`)}return u&&(a[n.ResourceAttributes.SERVICE_NAME]=u),new i.Resource(a)}_parseResourceAttributes(s){if(!s)return{};let a={},c=s.split(this._COMMA_SEPARATOR,-1);for(let l of c){let u=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(u.length!==2)continue;let[d,f]=u;if(d=d.trim(),f=f.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(d))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(f))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);a[d]=f}return a}_isValid(s){return s.length<=this._MAX_LENGTH&&this._isPrintableString(s)}_isPrintableString(s){for(let a=0;a<s.length;a++){let c=s.charAt(a);if(c<=" "||c>="~")return!1}return!0}_isValidAndNotEmpty(s){return s.length>0&&this._isValid(s)}};t.envDetector=new o}),rX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processDetector=void 0;var e=dt(),r=Bu(),n=vb(),i=class{async detect(o){let s={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(s,o)}_getResourceAttributes(o,s){return o[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||o[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||o[r.ResourceAttributes.PROCESS_COMMAND]===""||o[r.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(e.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},o))}};t.processDetector=new i}),nX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(tX(),t),r(rX(),t)}),iX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(ZQ(),t),r(eX(),t),r(nX(),t)}),jL=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(iX(),t)}),$L=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=void 0;var e=Bu(),r=Ln(),n=jL(),i=class{constructor(o){this.attributes=o}static empty(){return i.EMPTY}static default(){return new i({[e.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[e.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_NAME],[e.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(o){if(!o||!Object.keys(o.attributes).length)return this;let s=Object.assign({},this.attributes,o.attributes);return new i(s)}};t.Resource=i,i.EMPTY=new i({})}),oX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),sX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),vb=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r($L(),t),r(jL(),t),r(oX(),t),r(sX(),t)}),aX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSpanProcessor=void 0;var e=Ln(),r=class{constructor(n){this._spanProcessors=n}forceFlush(){let n=[];for(let i of this._spanProcessors)n.push(i.forceFlush());return new Promise(i=>{Promise.all(n).then(()=>{i()}).catch(o=>{e.globalErrorHandler(o||new Error("MultiSpanProcessor: forceFlush failed")),i()})})}onStart(n,i){for(let o of this._spanProcessors)o.onStart(n,i)}onEnd(n){for(let i of this._spanProcessors)i.onEnd(n)}shutdown(){let n=[];for(let i of this._spanProcessors)n.push(i.shutdown());return new Promise((i,o)=>{Promise.all(n).then(()=>{i()},o)})}};t.MultiSpanProcessor=r}),UL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopSpanProcessor=void 0;var e=class{onStart(r,n){}onEnd(r){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};t.NoopSpanProcessor=e}),cX=O((t,e)=>{var r=200,n="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",h="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Null]",w="[object Object]",C="[object Proxy]",b="[object RegExp]",S="[object Set]",P="[object String]",_="[object Undefined]",k="[object WeakMap]",T="[object ArrayBuffer]",A="[object DataView]",M="[object Float32Array]",H="[object Float64Array]",J="[object Int8Array]",K="[object Int16Array]",oe="[object Int32Array]",te="[object Uint8Array]",F="[object Uint8ClampedArray]",L="[object Uint16Array]",q="[object Uint32Array]",G=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,ie=/^(?:0|[1-9]\d*)$/,ne={};ne[M]=ne[H]=ne[J]=ne[K]=ne[oe]=ne[te]=ne[F]=ne[L]=ne[q]=!0,ne[a]=ne[c]=ne[T]=ne[u]=ne[A]=ne[d]=ne[f]=ne[p]=ne[m]=ne[g]=ne[w]=ne[b]=ne[S]=ne[P]=ne[k]=!1;var be=typeof global=="object"&&global&&global.Object===Object&&global,Pe=typeof self=="object"&&self&&self.Object===Object&&self,Se=be||Pe||Function("return this")(),De=typeof t=="object"&&t&&!t.nodeType&&t,pe=De&&typeof e=="object"&&e&&!e.nodeType&&e,vt=pe&&pe.exports===De,Pt=vt&&be.process,ye=function(){try{var D=pe&&pe.require&&pe.require("util").types;return D||Pt&&Pt.binding&&Pt.binding("util")}catch{}}(),fe=ye&&ye.isTypedArray;function Ce(D,$,W){switch(W.length){case 0:return D.call($);case 1:return D.call($,W[0]);case 2:return D.call($,W[0],W[1]);case 3:return D.call($,W[0],W[1],W[2])}return D.apply($,W)}function $e(D,$){for(var W=-1,le=Array(D);++W<D;)le[W]=$(W);return le}function Ko(D){return function($){return D($)}}function Yo(D,$){return D==null?void 0:D[$]}function Q(D,$){return function(W){return D($(W))}}var Jo=Array.prototype,Qo=Function.prototype,Tr=Object.prototype,at=Se["__core-js_shared__"],Gn=Qo.toString,cr=Tr.hasOwnProperty,zi=function(){var D=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),Ki=Tr.toString,Ve=Gn.call(Object),Xo=RegExp("^"+Gn.call(cr).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wn=vt?Se.Buffer:void 0,Yi=Se.Symbol,Ji=Se.Uint8Array,bt=Wn?Wn.allocUnsafe:void 0,jt=Q(Object.getPrototypeOf,Object),gr=Object.create,zn=Tr.propertyIsEnumerable,Ar=Jo.splice,kt=Yi?Yi.toStringTag:void 0,It=function(){try{var D=ov(Object,"defineProperty");return D({},"",{}),D}catch{}}(),Te=Wn?Wn.isBuffer:void 0,Et=Math.max,ae=Date.now,Qi=ov(Se,"Map"),En=ov(Object,"create"),we=function(){function D(){}return function($){if(!ps($))return{};if(gr)return gr($);D.prototype=$;var W=new D;return D.prototype=void 0,W}}();function Dr(D){var $=-1,W=D==null?0:D.length;for(this.clear();++$<W;){var le=D[$];this.set(le[0],le[1])}}function Zo(){this.__data__=En?En(null):{},this.size=0}function es(D){var $=this.has(D)&&delete this.__data__[D];return this.size-=$?1:0,$}function ts(D){var $=this.__data__;if(En){var W=$[D];return W===n?void 0:W}return cr.call($,D)?$[D]:void 0}function rs(D){var $=this.__data__;return En?$[D]!==void 0:cr.call($,D)}function ns(D,$){var W=this.__data__;return this.size+=this.has(D)?0:1,W[D]=En&&$===void 0?n:$,this}Dr.prototype.clear=Zo,Dr.prototype.delete=es,Dr.prototype.get=ts,Dr.prototype.has=rs,Dr.prototype.set=ns;function lr(D){var $=-1,W=D==null?0:D.length;for(this.clear();++$<W;){var le=D[$];this.set(le[0],le[1])}}function is(){this.__data__=[],this.size=0}function os(D){var $=this.__data__,W=Z($,D);if(W<0)return!1;var le=$.length-1;return W==le?$.pop():Ar.call($,W,1),--this.size,!0}function Jt(D){var $=this.__data__,W=Z($,D);return W<0?void 0:$[W][1]}function ss(D){return Z(this.__data__,D)>-1}function as(D,$){var W=this.__data__,le=Z(W,D);return le<0?(++this.size,W.push([D,$])):W[le][1]=$,this}lr.prototype.clear=is,lr.prototype.delete=os,lr.prototype.get=Jt,lr.prototype.has=ss,lr.prototype.set=as;function Wr(D){var $=-1,W=D==null?0:D.length;for(this.clear();++$<W;){var le=D[$];this.set(le[0],le[1])}}function cs(){this.size=0,this.__data__={hash:new Dr,map:new(Qi||lr),string:new Dr}}function ls(D){var $=Qd(this,D).delete(D);return this.size-=$?1:0,$}function us(D){return Qd(this,D).get(D)}function Rr(D){return Qd(this,D).has(D)}function ds(D,$){var W=Qd(this,D),le=W.size;return W.set(D,$),this.size+=W.size==le?0:1,this}Wr.prototype.clear=cs,Wr.prototype.delete=ls,Wr.prototype.get=us,Wr.prototype.has=Rr,Wr.prototype.set=ds;function zr(D){var $=this.__data__=new lr(D);this.size=$.size}function fs(){this.__data__=new lr,this.size=0}function y(D){var $=this.__data__,W=$.delete(D);return this.size=$.size,W}function E(D){return this.__data__.get(D)}function x(D){return this.__data__.has(D)}function R(D,$){var W=this.__data__;if(W instanceof lr){var le=W.__data__;if(!Qi||le.length<r-1)return le.push([D,$]),this.size=++W.size,this;W=this.__data__=new Wr(le)}return W.set(D,$),this.size=W.size,this}zr.prototype.clear=fs,zr.prototype.delete=y,zr.prototype.get=E,zr.prototype.has=x,zr.prototype.set=R;function N(D,$){var W=cv(D),le=!W&&av(D),je=!W&&!le&&N_(D),et=!W&&!le&&!je&&F_(D),ct=W||le||je||et,Le=ct?$e(D.length,String):[],lt=Le.length;for(var Kr in D)($||cr.call(D,Kr))&&!(ct&&(Kr=="length"||je&&(Kr=="offset"||Kr=="parent")||et&&(Kr=="buffer"||Kr=="byteLength"||Kr=="byteOffset")||R_(Kr,lt)))&&Le.push(Kr);return Le}function j(D,$,W){(W!==void 0&&!Xd(D[$],W)||W===void 0&&!($ in D))&&X(D,$,W)}function B(D,$,W){var le=D[$];(!(cr.call(D,$)&&Xd(le,W))||W===void 0&&!($ in D))&&X(D,$,W)}function Z(D,$){for(var W=D.length;W--;)if(Xd(D[W][0],$))return W;return-1}function X(D,$,W){$=="__proto__"&&It?It(D,$,{configurable:!0,enumerable:!0,value:W,writable:!0}):D[$]=W}var qe=zV();function Re(D){return D==null?D===void 0?_:v:kt&&kt in Object(D)?KV(D):e3(D)}function ke(D){return ll(D)&&Re(D)==a}function _e(D){if(!ps(D)||XV(D))return!1;var $=uv(D)?Xo:z;return $.test(i3(D))}function Je(D){return ll(D)&&L_(D.length)&&!!ne[Re(D)]}function MV(D){if(!ps(D))return ZV(D);var $=O_(D),W=[];for(var le in D)le=="constructor"&&($||!cr.call(D,le))||W.push(le);return W}function D_(D,$,W,le,je){D!==$&&qe($,function(et,ct){if(je||(je=new zr),ps(et))qV(D,$,ct,W,D_,le,je);else{var Le=le?le(sv(D,ct),et,ct+"",D,$,je):void 0;Le===void 0&&(Le=et),j(D,ct,Le)}},M_)}function qV(D,$,W,le,je,et,ct){var Le=sv(D,W),lt=sv($,W),Kr=ct.get(lt);if(Kr){j(D,W,Kr);return}var Or=et?et(Le,lt,W+"",D,$,ct):void 0,ul=Or===void 0;if(ul){var dv=cv(lt),fv=!dv&&N_(lt),j_=!dv&&!fv&&F_(lt);Or=lt,dv||fv||j_?cv(Le)?Or=Le:o3(Le)?Or=VV(Le):fv?(ul=!1,Or=UV(lt,!0)):j_?(ul=!1,Or=HV(lt,!0)):Or=[]:s3(lt)||av(lt)?(Or=Le,av(Le)?Or=a3(Le):(!ps(Le)||uv(Le))&&(Or=YV(lt))):ul=!1}ul&&(ct.set(lt,Or),je(Or,lt,le,et,ct),ct.delete(lt)),j(D,W,Or)}function jV(D,$){return r3(t3(D,$,q_),D+"")}var $V=It?function(D,$){return It(D,"toString",{configurable:!0,enumerable:!1,value:l3($),writable:!0})}:q_;function UV(D,$){if($)return D.slice();var W=D.length,le=bt?bt(W):new D.constructor(W);return D.copy(le),le}function BV(D){var $=new D.constructor(D.byteLength);return new Ji($).set(new Ji(D)),$}function HV(D,$){var W=$?BV(D.buffer):D.buffer;return new D.constructor(W,D.byteOffset,D.length)}function VV(D,$){var W=-1,le=D.length;for($||($=Array(le));++W<le;)$[W]=D[W];return $}function GV(D,$,W,le){var je=!W;W||(W={});for(var et=-1,ct=$.length;++et<ct;){var Le=$[et],lt=le?le(W[Le],D[Le],Le,W,D):void 0;lt===void 0&&(lt=D[Le]),je?X(W,Le,lt):B(W,Le,lt)}return W}function WV(D){return jV(function($,W){var le=-1,je=W.length,et=je>1?W[je-1]:void 0,ct=je>2?W[2]:void 0;for(et=D.length>3&&typeof et=="function"?(je--,et):void 0,ct&&JV(W[0],W[1],ct)&&(et=je<3?void 0:et,je=1),$=Object($);++le<je;){var Le=W[le];Le&&D($,Le,le,et)}return $})}function zV(D){return function($,W,le){for(var je=-1,et=Object($),ct=le($),Le=ct.length;Le--;){var lt=ct[D?Le:++je];if(W(et[lt],lt,et)===!1)break}return $}}function Qd(D,$){var W=D.__data__;return QV($)?W[typeof $=="string"?"string":"hash"]:W.map}function ov(D,$){var W=Yo(D,$);return _e(W)?W:void 0}function KV(D){var $=cr.call(D,kt),W=D[kt];try{D[kt]=void 0;var le=!0}catch{}var je=Ki.call(D);return le&&($?D[kt]=W:delete D[kt]),je}function YV(D){return typeof D.constructor=="function"&&!O_(D)?we(jt(D)):{}}function R_(D,$){var W=typeof D;return $=$==null?s:$,!!$&&(W=="number"||W!="symbol"&&ie.test(D))&&D>-1&&D%1==0&&D<$}function JV(D,$,W){if(!ps(W))return!1;var le=typeof $;return(le=="number"?lv(W)&&R_($,W.length):le=="string"&&$ in W)?Xd(W[$],D):!1}function QV(D){var $=typeof D;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?D!=="__proto__":D===null}function XV(D){return!!zi&&zi in D}function O_(D){var $=D&&D.constructor,W=typeof $=="function"&&$.prototype||Tr;return D===W}function ZV(D){var $=[];if(D!=null)for(var W in Object(D))$.push(W);return $}function e3(D){return Ki.call(D)}function t3(D,$,W){return $=Et($===void 0?D.length-1:$,0),function(){for(var le=arguments,je=-1,et=Et(le.length-$,0),ct=Array(et);++je<et;)ct[je]=le[$+je];je=-1;for(var Le=Array($+1);++je<$;)Le[je]=le[je];return Le[$]=W(ct),Ce(D,this,Le)}}function sv(D,$){if(!($==="constructor"&&typeof D[$]=="function")&&$!="__proto__")return D[$]}var r3=n3($V);function n3(D){var $=0,W=0;return function(){var le=ae(),je=o-(le-W);if(W=le,je>0){if(++$>=i)return arguments[0]}else $=0;return D.apply(void 0,arguments)}}function i3(D){if(D!=null){try{return Gn.call(D)}catch{}try{return D+""}catch{}}return""}function Xd(D,$){return D===$||D!==D&&$!==$}var av=ke(function(){return arguments}())?ke:function(D){return ll(D)&&cr.call(D,"callee")&&!zn.call(D,"callee")},cv=Array.isArray;function lv(D){return D!=null&&L_(D.length)&&!uv(D)}function o3(D){return ll(D)&&lv(D)}var N_=Te||u3;function uv(D){if(!ps(D))return!1;var $=Re(D);return $==p||$==h||$==l||$==C}function L_(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=s}function ps(D){var $=typeof D;return D!=null&&($=="object"||$=="function")}function ll(D){return D!=null&&typeof D=="object"}function s3(D){if(!ll(D)||Re(D)!=w)return!1;var $=jt(D);if($===null)return!0;var W=cr.call($,"constructor")&&$.constructor;return typeof W=="function"&&W instanceof W&&Gn.call(W)==Ve}var F_=fe?Ko(fe):Je;function a3(D){return GV(D,M_(D))}function M_(D){return lv(D)?N(D,!0):MV(D)}var c3=WV(function(D,$,W){D_(D,$,W)});function l3(D){return function(){return D}}function q_(D){return D}function u3(){return!1}e.exports=c3}),lX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchSpanProcessorBase=void 0;var e=dt(),r=Ln(),n=class{constructor(i,o){this._exporter=i,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let s=r.getEnv();this._maxExportBatchSize=typeof(o==null?void 0:o.maxExportBatchSize)=="number"?o.maxExportBatchSize:s.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(o==null?void 0:o.maxQueueSize)=="number"?o.maxQueueSize:s.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(o==null?void 0:o.scheduledDelayMillis)=="number"?o.scheduledDelayMillis:s.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(o==null?void 0:o.exportTimeoutMillis)=="number"?o.exportTimeoutMillis:s.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(i){}onEnd(i){this._isShutdown||this._addToBuffer(i)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((i,o)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(i).catch(s=>{o(s)})}),this._shuttingDownPromise)}_addToBuffer(i){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(i),this._maybeStartTimer())}_flushAll(){return new Promise((i,o)=>{let s=[],a=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let c=0,l=a;c<l;c++)s.push(this._flushOneBatch());Promise.all(s).then(()=>{i()}).catch(o)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((i,o)=>{let s=setTimeout(()=>{o(new Error("Timeout"))},this._exportTimeoutMillis);e.context.with(r.suppressTracing(e.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),a=>{var c;clearTimeout(s),a.code===r.ExportResultCode.SUCCESS?i():o((c=a.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(i=>{r.globalErrorHandler(i)})},this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};t.BatchSpanProcessorBase=n}),uX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchSpanProcessor=void 0;var e=lX(),r=class extends e.BatchSpanProcessorBase{onShutdown(){}};t.BatchSpanProcessor=r}),dX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(uX(),t)}),BL=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(dX(),t)}),fX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicTracerProvider=t.ForceFlushState=void 0;var e=dt(),r=Ln(),n=vb(),i=HL(),o=qL(),s=aX(),a=UL(),c=cX(),l=BL(),u;(function(f){f[f.resolved=0]="resolved",f[f.timeout=1]="timeout",f[f.error=2]="error",f[f.unresolved=3]="unresolved"})(u=t.ForceFlushState||(t.ForceFlushState={}));var d=class{constructor(f={}){var p;this._registeredSpanProcessors=[],this._tracers=new Map;let h=c({},o.DEFAULT_CONFIG,f);this.resource=(p=h.resource)!==null&&p!==void 0?p:n.Resource.empty(),this.resource=n.Resource.default().merge(this.resource),this._config=Object.assign({},h,{resource:this.resource});let m=this._buildExporterFromEnv();if(m!==void 0){let g=new l.BatchSpanProcessor(m);this.activeSpanProcessor=g}else this.activeSpanProcessor=new a.NoopSpanProcessor}getTracer(f,p){let h=`${f}@${p||""}`;return this._tracers.has(h)||this._tracers.set(h,new i.Tracer({name:f,version:p},this._config,this)),this._tracers.get(h)}addSpanProcessor(f){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(p=>e.diag.error("Error while trying to shutdown current span processor",p)),this._registeredSpanProcessors.push(f),this.activeSpanProcessor=new s.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(f={}){e.trace.setGlobalTracerProvider(this),f.propagator===void 0&&(f.propagator=this._buildPropagatorFromEnv()),f.contextManager&&e.context.setGlobalContextManager(f.contextManager),f.propagator&&e.propagation.setGlobalPropagator(f.propagator)}forceFlush(){let f=this._config.forceFlushTimeoutMillis,p=this._registeredSpanProcessors.map(h=>new Promise(m=>{let g,v=setTimeout(()=>{m(new Error(`Span processor did not completed within timeout period of ${f} ms`)),g=u.timeout},f);h.forceFlush().then(()=>{clearTimeout(v),g!==u.timeout&&(g=u.resolved,m(g))}).catch(w=>{clearTimeout(v),g=u.error,m(w)})}));return new Promise((h,m)=>{Promise.all(p).then(g=>{let v=g.filter(w=>w!==u.resolved);v.length>0?m(v):h()}).catch(g=>m([g]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(f){var p;return(p=d._registeredPropagators.get(f))===null||p===void 0?void 0:p()}_getSpanExporter(f){var p;return(p=d._registeredExporters.get(f))===null||p===void 0?void 0:p()}_buildPropagatorFromEnv(){let f=Array.from(new Set(r.getEnv().OTEL_PROPAGATORS)),p=f.map(h=>{let m=this._getPropagator(h);return m||e.diag.warn(`Propagator "${h}" requested through environment variable is unavailable.`),m}).reduce((h,m)=>(m&&h.push(m),h),[]);if(p.length!==0)return f.length===1?p[0]:new r.CompositePropagator({propagators:p})}_buildExporterFromEnv(){let f=r.getEnv().OTEL_TRACES_EXPORTER;if(f==="none")return;let p=this._getSpanExporter(f);return p||e.diag.error(`Exporter "${f}" requested through environment variable is unavailable.`),p}};t.BasicTracerProvider=d,d._registeredPropagators=new Map([["tracecontext",()=>new r.HttpTraceContextPropagator],["baggage",()=>new r.HttpBaggagePropagator]]),d._registeredExporters=new Map}),pX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleSpanExporter=void 0;var e=Ln(),r=class{export(n,i){return this._sendSpans(n,i)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(n){return{traceId:n.spanContext().traceId,parentId:n.parentSpanId,name:n.name,id:n.spanContext().spanId,kind:n.kind,timestamp:e.hrTimeToMicroseconds(n.startTime),duration:e.hrTimeToMicroseconds(n.duration),attributes:n.attributes,status:n.status,events:n.events}}_sendSpans(n,i){for(let o of n)console.log(this._exportInfo(o));if(i)return i({code:e.ExportResultCode.SUCCESS})}};t.ConsoleSpanExporter=r}),hX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemorySpanExporter=void 0;var e=Ln(),r=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(n,i){if(this._stopped)return i({code:e.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...n),setTimeout(()=>i({code:e.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};t.InMemorySpanExporter=r}),mX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),gX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSpanProcessor=void 0;var e=dt(),r=Ln(),n=class{constructor(i){this._exporter=i,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(i){}onEnd(i){this._isShutdown||e.context.with(r.suppressTracing(e.context.active()),()=>{this._exporter.export([i],o=>{var s;o.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler((s=o.error)!==null&&s!==void 0?s:new Error(`SimpleSpanProcessor: span export failed (status ${o})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((i,o)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(i).catch(s=>{o(s)})}),this._shuttingDownPromise)}};t.SimpleSpanProcessor=n}),vX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),yX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),wX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),CX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),HL=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(XQ(),t),r(fX(),t),r(BL(),t),r(pX(),t),r(hX(),t),r(mX(),t),r(gX(),t),r(vX(),t),r(UL(),t),r(ML(),t),r(yX(),t),r(wX(),t),r(CX(),t)}),bX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.azureCoreTracing=t.AzureMonitorSymbol=void 0;var e=St();t.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1,n=function(o){if(r)return o;try{var s=HL(),a=dt(),c=new s.BasicTracerProvider,l=c.getTracer("applicationinsights tracer"),u=o.setTracer;o.setTracer=function(d){var f=d.startSpan;d.startSpan=function(p,h,m){var g=f.call(this,p,h,m),v=g.end;return g.end=function(){var w=v.apply(this,arguments);return e.channel.publish("azure-coretracing",g),w},g},d[t.AzureMonitorSymbol]=!0,u.call(this,d)},a.trace.getSpan(a.context.active()),o.setTracer(l),r=!0}catch{}return o};t.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("@azure/core-tracing",t.azureCoreTracing)}t.enable=i}),EX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.bunyan=void 0;var e=St(),r=function(i){var o=i.prototype._emit;return i.prototype._emit=function(s,a){var c=o.apply(this,arguments);if(!a){var l=c;l||(l=o.call(this,s,!0)),e.channel.publish("bunyan",{level:s.level,result:l})}return c},i};t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("bunyan",t.bunyan)}t.enable=n}),_X=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.console=void 0;var e=St(),r=require("stream"),n=function(o){var s=new r.Writable,a=new r.Writable;s.write=function(h){if(!h)return!0;var m=h.toString();return e.channel.publish("console",{message:m}),!0},a.write=function(h){if(!h)return!0;var m=h.toString();return e.channel.publish("console",{message:m,stderr:!0}),!0};for(var c=new o.Console(s,a),l=["log","info","warn","error","dir","time","timeEnd","trace","assert"],u=function(h){var m=o[h];m&&(o[h]=function(){if(c[h])try{c[h].apply(c,arguments)}catch{}return m.apply(o,arguments)})},d=0,f=l;d<f.length;d++){var p=f[d];u(p)}return o};t.console={versionSpecifier:">= 4.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("console",t.console),require("console")}t.enable=i}),SX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongoCore=void 0;var e=St(),r=function(i){var o=i.Server.prototype.connect;return i.Server.prototype.connect=function(){var s=o.apply(this,arguments),a=this.s.pool.write;this.s.pool.write=function(){var l=typeof arguments[1]=="function"?1:2;return typeof arguments[l]=="function"&&(arguments[l]=e.channel.bindToContext(arguments[l])),a.apply(this,arguments)};var c=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=e.channel.bindToContext(arguments[1])),c.apply(this,arguments)},s},i};t.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("mongodb-core",t.mongoCore)}t.enable=n}),xX=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(c){for(var l,u=1,d=arguments.length;u<d;u++){l=arguments[u];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(c[f]=l[f])}return c},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongo330=t.mongo3=t.mongo2=void 0;var r=St(),n=function(c){var l=c.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(d){return d()})}}}),u={};return l.on("started",function(d){u[d.requestId]||(u[d.requestId]=e(e({},d),{time:new Date}))}),l.on("succeeded",function(d){var f=u[d.requestId];f&&delete u[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}),l.on("failed",function(d){var f=u[d.requestId];f&&delete u[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}),c},i=function(c){var l=c.instrument(),u={},d={};return l.on("started",function(f){u[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),u[f.requestId]=e(e({},f),{time:new Date}))}),l.on("succeeded",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),l.on("failed",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c},o=function(c){var l=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var u=l.apply(this,arguments),d=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var p=typeof arguments[1]=="function"?1:2;return typeof arguments[p]=="function"&&(arguments[p]=r.channel.bindToContext(arguments[p])),d.apply(this,arguments)};var f=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=r.channel.bindToContext(arguments[1])),f.apply(this,arguments)},u},c},s=function(c){o(c);var l=c.instrument(),u={},d={};return l.on("started",function(f){u[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),u[f.requestId]=f)}),l.on("succeeded",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),l.on("failed",function(f){var p=u[f.requestId];p&&delete u[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c};t.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:n},t.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:i},t.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:s};function a(){r.channel.registerMonkeyPatch("mongodb",t.mongo2),r.channel.registerMonkeyPatch("mongodb",t.mongo3),r.channel.registerMonkeyPatch("mongodb",t.mongo330)}t.enable=a}),PX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mysql=void 0;var e=St(),r=require("path"),n=function(o,s){var a=function(p,h){return function(m,g){var v=p[m];v&&(p[m]=function(){for(var w=arguments.length-1,C=arguments.length-1;C>=0;--C)if(typeof arguments[C]=="function"){w=C;break}else if(typeof arguments[C]!="undefined")break;var b=arguments[w],S={result:null,startTime:null,startDate:null};typeof b=="function"&&(g?(S.startTime=process.hrtime(),S.startDate=new Date,arguments[w]=e.channel.bindToContext(g(S,b))):arguments[w]=e.channel.bindToContext(b));var P=v.apply(this,arguments);return S.result=P,P})}},c=function(p,h){return a(p.prototype,h+".prototype")},l=["connect","changeUser","ping","statistics","end"],u=require(r.dirname(s)+"/lib/Connection");l.forEach(function(p){return c(u,"Connection")(p)}),a(u,"Connection")("createQuery",function(p,h){return function(m){var g=process.hrtime(p.startTime),v=g[0]*1e3+g[1]/1e6|0;e.channel.publish("mysql",{query:p.result,callbackArgs:arguments,err:m,duration:v,time:p.startDate}),h.apply(this,arguments)}});var d=["_enqueueCallback"],f=require(r.dirname(s)+"/lib/Pool");return d.forEach(function(p){return c(f,"Pool")(p)}),o};t.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("mysql",t.mysql)}t.enable=i}),kX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgresPool1=void 0;var e=St();function r(i){var o=i.prototype.connect;return i.prototype.connect=function(s){return s&&(arguments[0]=e.channel.bindToContext(s)),o.apply(this,arguments)},i}t.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("pg-pool",t.postgresPool1)}t.enable=n}),IX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgres7=t.postgres6=void 0;var e=St(),r=require("events");function n(s,a){var c=s.Client.prototype.query,l="__diagnosticOriginalFunc";return s.Client.prototype.query=function(u,d,f){var p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},h=process.hrtime(),m;function g(v){v&&v[l]&&(v=v[l]);var w=e.channel.bindToContext(function(C,b){var S=process.hrtime(h);if(p.result=b&&{rowCount:b.rowCount,command:b.command},p.error=C,p.duration=Math.ceil(S[0]*1e3+S[1]/1e6),e.channel.publish("postgres",p),C){if(v)return v.apply(this,arguments);m&&m instanceof r.EventEmitter&&m.emit("error",C)}else v&&v.apply(this,arguments)});try{return Object.defineProperty(w,l,{value:v}),w}catch{return v}}try{typeof u=="string"?d instanceof Array?(p.query.preparable={text:u,args:d},f=g(f)):(p.query.text=u,f?f=g(f):d=g(d)):(typeof u.name=="string"?p.query.plan=u.name:u.values instanceof Array?p.query.preparable={text:u.text,args:u.values}:p.query.text=u.text,f?f=g(f):d?d=g(d):u.callback=g(u.callback))}catch{return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,m=c.apply(this,arguments),m},s}function i(s,a){var c=s.Client.prototype.query,l="__diagnosticOriginalFunc";return s.Client.prototype.query=function(u,d,f){var p=this,h=!!f,m={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},g=process.hrtime(),v;function w(C){C&&C[l]&&(C=C[l]);var b=e.channel.bindToContext(function(S,P){var _=process.hrtime(g);if(m.result=P&&{rowCount:P.rowCount,command:P.command},m.error=S,m.duration=Math.ceil(_[0]*1e3+_[1]/1e6),e.channel.publish("postgres",m),S){if(C)return C.apply(this,arguments);v&&v instanceof r.EventEmitter&&v.emit("error",S)}else C&&C.apply(this,arguments)});try{return Object.defineProperty(b,l,{value:C}),b}catch{return C}}try{typeof u=="string"?d instanceof Array?(m.query.preparable={text:u,args:d},h=typeof f=="function",f=h?w(f):f):(m.query.text=u,f?(h=typeof f=="function",f=h?w(f):f):(h=typeof d=="function",d=h?w(d):d)):(typeof u.name=="string"?m.query.plan=u.name:u.values instanceof Array?m.query.preparable={text:u.text,args:u.values}:m.query.text=u.text,f?(h=typeof f=="function",f=w(f)):d?(h=typeof d=="function",d=h?w(d):d):(h=typeof u.callback=="function",u.callback=h?w(u.callback):u.callback))}catch{return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,v=c.apply(this,arguments),h?v:v.then(function(C){return w()(void 0,C),new p._Promise(function(b,S){b(C)})}).catch(function(C){return w()(C,void 0),new p._Promise(function(b,S){S(C)})})},s}t.postgres6={versionSpecifier:"6.*",patch:n},t.postgres7={versionSpecifier:">=7.* <=8.*",patch:i};function o(){e.channel.registerMonkeyPatch("pg",t.postgres6),e.channel.registerMonkeyPatch("pg",t.postgres7)}t.enable=o}),TX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.redis=void 0;var e=St(),r=function(i){var o=i.RedisClient.prototype.internal_send_command;return i.RedisClient.prototype.internal_send_command=function(s){if(s){var a=s.callback;if(!a||!a.pubsubBound){var c=this.address,l=process.hrtime(),u=new Date;s.callback=e.channel.bindToContext(function(d,f){var p=process.hrtime(l),h=p[0]*1e3+p[1]/1e6|0;e.channel.publish("redis",{duration:h,address:c,commandObj:s,err:d,result:f,time:u}),typeof a=="function"&&a.apply(this,arguments)}),s.callback.pubsubBound=!0}}return o.call(this,s)},i};t.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("redis",t.redis)}t.enable=n}),AX=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(o){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])}return o},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=void 0;var r=St(),n=function(o){var s=o.Connection.prototype.makeRequest;return o.Connection.prototype.makeRequest=function(){function a(l){var u=process.hrtime(),d={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return r.channel.bindToContext(function(f,p,h){var m=process.hrtime(u);d=e(e({},d),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!f&&{rowCount:p,rows:h},query:{text:this.parametersByName.statement.value},error:f,duration:Math.ceil(m[0]*1e3+m[1]/1e6)}),r.channel.publish("tedious",d),l.call(this,f,p,h)})}var c=arguments[0];arguments[0].callback=a(c.callback),s.apply(this,arguments)},o};t.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:n};function i(){r.channel.registerMonkeyPatch("tedious",t.tedious)}t.enable=i}),DX=O(t=>{"use strict";var e=t&&t.__extends||function(){var a=function(c,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(u[f]=d[f])},a(c,l)};return function(c,l){a(c,l);function u(){this.constructor=c}c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}(),r=t&&t.__rest||function(a,c){var l={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&c.indexOf(u)<0&&(l[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)c.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(l[u[d]]=a[u[d]]);return l};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.winston2=t.winston3=void 0;var n=St(),i=function(a){var c=a.Logger.prototype.log,l,u=function(d,f,p){var h;return l===a.config.npm.levels?h="npm":l===a.config.syslog.levels?h="syslog":h="unknown",n.channel.publish("winston",{level:d,message:f,meta:p,levelKind:h}),f};return a.Logger.prototype.log=function(){return l=this.levels,!this.filters||this.filters.length===0?this.filters=[u]:this.filters[this.filters.length-1]!==u&&(this.filters=this.filters.filter(function(d){return d!==u}),this.filters.push(u)),c.apply(this,arguments)},a},o=function(a){var c=function(p,h){var m;return p.config.npm.levels[h]!=null?m="npm":p.config.syslog.levels[h]!=null?m="syslog":m="unknown",m},l=function(p){e(h,p);function h(m,g){var v=p.call(this,g)||this;return v.winston=m,v}return h.prototype.log=function(m,g){var v=m.message,w=m.level,C=m.meta,b=r(m,["message","level","meta"]);w=typeof Symbol.for=="function"?m[Symbol.for("level")]:w,v=m instanceof Error?m:v;var S=c(this.winston,w);C=C||{};for(var P in b)b.hasOwnProperty(P)&&(C[P]=b[P]);n.channel.publish("winston",{message:v,level:w,levelKind:S,meta:C}),g()},h}(a.Transport);function u(){var p=arguments[0].levels||a.config.npm.levels,h;for(var m in p)p.hasOwnProperty(m)&&(h=h===void 0||p[m]>p[h]?m:h);this.add(new l(a,{level:h}))}var d=a.createLogger;a.createLogger=function(){var p=arguments[0].levels||a.config.npm.levels,h;for(var m in p)p.hasOwnProperty(m)&&(h=h===void 0||p[m]>p[h]?m:h);var g=d.apply(this,arguments);g.add(new l(a,{level:h}));var v=g.configure;return g.configure=function(){v.apply(this,arguments),u.apply(this,arguments)},g};var f=a.configure;return a.configure=function(){f.apply(this,arguments),u.apply(this,arguments)},a.add(new l(a)),a};t.winston3={versionSpecifier:"3.x",patch:o},t.winston2={versionSpecifier:"2.x",patch:i};function s(){n.channel.registerMonkeyPatch("winston",t.winston2),n.channel.registerMonkeyPatch("winston",t.winston3)}t.enable=s}),RX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=t.pgPool=t.pg=t.winston=t.redis=t.mysql=t.mongodb=t.mongodbCore=t.console=t.bunyan=t.azuresdk=void 0;var e=bX();t.azuresdk=e;var r=EX();t.bunyan=r;var n=_X();t.console=n;var i=SX();t.mongodbCore=i;var o=xX();t.mongodb=o;var s=PX();t.mysql=s;var a=kX();t.pgPool=a;var c=IX();t.pg=c;var l=TX();t.redis=l;var u=AX();t.tedious=u;var d=DX();t.winston=d;function f(){r.enable(),n.enable(),i.enable(),o.enable(),s.enable(),c.enable(),a.enable(),l.enable(),d.enable(),e.enable(),u.enable()}t.enable=f}),yb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextPreservation=t.IsInitialized=void 0;var e=gL(),r=zt();t.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n="DiagnosticChannel";if(t.IsInitialized){i=RX(),o=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",s=o.split(","),a={bunyan:i.bunyan,console:i.console,mongodb:i.mongodb,mongodbCore:i.mongodbCore,mysql:i.mysql,redis:i.redis,pg:i.pg,pgPool:i.pgPool,winston:i.winston,azuresdk:i.azuresdk};for(c in a)s.indexOf(c)===-1&&(a[c].enable(),r.info(n,"Subscribed to "+c+" events"));s.length>0&&r.info(n,"Some modules will not be patched",s)}else r.info(n,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var i,o,s,a,c;function l(u){if(t.IsInitialized){var d=St();d.channel.addContextPreservation(u),d.channel.spanContextPropagator=e.AsyncScopeManager}}t.registerContextPreservation=l}),Hu=O((t,e)=>{"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),gn=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(u){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(u[h]=d[h])}return u},r.apply(this,arguments)},n=require("http"),i=require("https"),o=require("url"),s=require("constants"),a=zt(),c=Hu(),l=function(){function u(){}return u.getCookie=function(d,f){var p="";if(d&&d.length&&typeof f=="string")for(var h=d+"=",m=f.split(";"),g=0;g<m.length;g++){var f=m[g];if(f=u.trim(f),f&&f.indexOf(h)===0){p=f.substring(h.length,m[g].length);break}}return p},u.trim=function(d){return typeof d=="string"?d.replace(/^\s+|\s+$/g,""):""},u.int32ArrayToBase64=function(d){var f=function(v,w){return String.fromCharCode(v>>w&255)},p=function(v){return f(v,24)+f(v,16)+f(v,8)+f(v,0)},h=d.map(p).join(""),m=Buffer.from?Buffer.from(h,"binary"):new Buffer(h,"binary"),g=m.toString("base64");return g.substr(0,g.indexOf("="))},u.random32=function(){return 4294967296*Math.random()|0},u.randomu32=function(){return u.random32()+2147483648},u.w3cTraceId=function(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],f="",p,h=0;h<4;h++)p=u.random32(),f+=d[p&15]+d[p>>4&15]+d[p>>8&15]+d[p>>12&15]+d[p>>16&15]+d[p>>20&15]+d[p>>24&15]+d[p>>28&15];var m=d[8+Math.random()*4|0];return f.substr(0,8)+f.substr(9,4)+"4"+f.substr(13,3)+m+f.substr(16,3)+f.substr(19,12)},u.w3cSpanId=function(){return u.w3cTraceId().substring(16)},u.isValidW3CId=function(d){return d.length===32&&d!=="00000000000000000000000000000000"},u.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},u.isError=function(d){return d instanceof Error},u.isPrimitive=function(d){var f=typeof d;return f==="string"||f==="number"||f==="boolean"},u.isDate=function(d){return Object.prototype.toString.call(d)==="[object Date]"},u.msToTimeSpan=function(d){(isNaN(d)||d<0)&&(d=0);var f=(d/1e3%60).toFixed(7).replace(/0{0,4}$/,""),p=""+Math.floor(d/(1e3*60))%60,h=""+Math.floor(d/(1e3*60*60))%24,m=Math.floor(d/(1e3*60*60*24));f=f.indexOf(".")<2?"0"+f:f,p=p.length<2?"0"+p:p,h=h.length<2?"0"+h:h;var g=m>0?m+".":"";return g+h+":"+p+":"+f},u.extractError=function(d){var f=d;return{message:d.message,code:f.code||f.id||""}},u.extractObject=function(d){return d instanceof Error?u.extractError(d):typeof d.toJSON=="function"?d.toJSON():d},u.validateStringMap=function(d){if(typeof d!="object"){a.info("Invalid properties dropped from payload");return}var f={};for(var p in d){var h="",m=d[p],g=typeof m;if(u.isPrimitive(m))h=m.toString();else if(m===null||g==="undefined")h="";else if(g==="function"){a.info("key: "+p+" was function; will not serialize");continue}else{var v=u.isArray(m)?m:u.extractObject(m);try{u.isPrimitive(v)?h=v:h=JSON.stringify(v)}catch(w){h=m.constructor.name.toString()+" (Error: "+w.message+")",a.info("key: "+p+", could not be serialized")}}f[p]=h.substring(0,u.MAX_PROPERTY_LENGTH)}return f},u.canIncludeCorrelationHeader=function(d,f){var p=d&&d.config&&d.config.correlationHeaderExcludedDomains;if(!p||p.length==0||!f)return!0;for(var h=0;h<p.length;h++){var m=new RegExp(p[h].replace(/\./g,".").replace(/\*/g,".*"));if(m.test(o.parse(f).hostname))return!1}return!0},u.getCorrelationContextTarget=function(d,f){var p=d.headers&&d.headers[c.requestContextHeader];if(p)for(var h=p.split(","),m=0;m<h.length;++m){var g=h[m].split("=");if(g.length==2&&g[0]==f)return g[1]}},u.makeRequest=function(d,f,p,h){f&&f.indexOf("//")===0&&(f="https:"+f);var m=o.parse(f),g=r(r({},p),{host:m.hostname,port:m.port,path:m.pathname}),v=void 0;if(m.protocol==="https:"&&(v=d.proxyHttpsUrl||void 0),m.protocol==="http:"&&(v=d.proxyHttpUrl||void 0),v){v.indexOf("//")===0&&(v="http:"+v);var w=o.parse(v);w.protocol==="https:"?(a.info("Proxies that use HTTPS are not supported"),v=void 0):g=r(r({},g),{host:w.hostname,port:w.port||"80",path:f,headers:r(r({},g.headers),{Host:m.hostname})})}var C=m.protocol==="https:"&&!v;return C&&d.httpsAgent!==void 0?g.agent=d.httpsAgent:!C&&d.httpAgent!==void 0?g.agent=d.httpAgent:C&&(g.agent=u.tlsRestrictedAgent),C?i.request(g,h):n.request(g,h)},u.safeIncludeCorrelationHeader=function(d,f,p){var h;if(typeof p=="string")h=p;else if(p instanceof Array)h=p.join(",");else if(p&&typeof p.toString=="function")try{h=p.toString()}catch(m){a.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",m,p)}h?u.addCorrelationIdHeaderFromString(d,f,h):f.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+d.config.correlationId)},u.dumpObj=function(d){var f=Object.prototype.toString.call(d),p="";return f==="[object Error]"?p="{ stack: '"+d.stack+"', message: '"+d.message+"', name: '"+d.name+"'":p=JSON.stringify(d),f+p},u.addCorrelationIdHeaderFromString=function(d,f,p){var h=p.split(","),m=c.requestContextSourceKey+"=",g=h.some(function(v){return v.substring(0,m.length)===m});g||f.setHeader(c.requestContextHeader,p+","+c.requestContextSourceKey+"="+d.config.correlationId)},u.MAX_PROPERTY_LENGTH=8192,u.tlsRestrictedAgent=new i.Agent({keepAlive:!0,maxSockets:25,secureOptions:s.SSL_OP_NO_SSLv2|s.SSL_OP_NO_SSLv3|s.SSL_OP_NO_TLSv1|s.SSL_OP_NO_TLSv1_1}),u}();e.exports=l}),Ac=O((t,e)=>{"use strict";var r=gn(),n=zt(),i=function(){function o(){}return o.queryCorrelationId=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId";if(o.completedLookups.hasOwnProperty(c)){a(o.completedLookups[c]);return}else if(o.pendingLookups[c]){o.pendingLookups[c].push(a);return}o.pendingLookups[c]=[a];var l=function(){if(o.pendingLookups[c]){var u={method:"GET",disableAppInsightsAutoCollection:!0};n.info(o.TAG,u);var d=r.makeRequest(s,c,u,function(f){if(f.statusCode===200){var p="";f.setEncoding("utf-8"),f.on("data",function(h){p+=h}),f.on("end",function(){n.info(o.TAG,p);var h=o.correlationIdPrefix+p;o.completedLookups[c]=h,o.pendingLookups[c]&&o.pendingLookups[c].forEach(function(m){return m(h)}),delete o.pendingLookups[c]})}else f.statusCode>=400&&f.statusCode<500?(o.completedLookups[c]=void 0,delete o.pendingLookups[c]):setTimeout(l,s.correlationIdRetryIntervalMs)});d&&(d.on("error",function(f){n.warn(o.TAG,f)}),d.end())}};setTimeout(l,0)},o.cancelCorrelationIdQuery=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId",l=o.pendingLookups[c];l&&(o.pendingLookups[c]=l.filter(function(u){return u!=a}),o.pendingLookups[c].length==0&&delete o.pendingLookups[c])},o.generateRequestId=function(s){if(s){s=s[0]=="|"?s:"|"+s,s[s.length-1]!=="."&&(s+=".");var a=(o.currentRootId++).toString(16);return o.appendSuffix(s,a,"_")}else return o.generateRootId()},o.getRootId=function(s){var a=s.indexOf(".");a<0&&(a=s.length);var c=s[0]==="|"?1:0;return s.substring(c,a)},o.generateRootId=function(){return"|"+r.w3cTraceId()+"."},o.appendSuffix=function(s,a,c){if(s.length+a.length<o.requestIdMaxLength)return s+a+c;var l=o.requestIdMaxLength-9;if(s.length>l)for(;l>1;--l){var u=s[l-1];if(u==="."||u==="_")break}if(l<=1)return o.generateRootId();for(a=r.randomu32().toString(16);a.length<8;)a="0"+a;return s.substring(0,l)+a+"#"},o.TAG="CorrelationIdManager",o.correlationIdPrefix="cid-v1:",o.w3cEnabled=!0,o.pendingLookups={},o.completedLookups={},o.requestIdMaxLength=1024,o.currentRootId=r.randomu32(),o}();e.exports=i}),cm=O((t,e)=>{"use strict";var r=gn(),n=Ac(),i=function(){function o(s,a){if(this.traceFlag=o.DEFAULT_TRACE_FLAG,this.version=o.DEFAULT_VERSION,s&&typeof s=="string")if(s.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var c=s.trim().split("-"),l=c.length;l>=4?(this.version=c[0],this.traceId=c[1],this.spanId=c[2],this.traceFlag=c[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=o.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),this.version==="00"&&l!==4&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=o.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=o.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=o.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),o.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),o.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(a){this.parentId=a.slice();var u=n.getRootId(a);o.isValidTraceId(u)||(this.legacyRootId=u,u=r.w3cTraceId()),a.indexOf("|")!==-1&&(a=a.substring(1+a.substring(0,a.length-1).lastIndexOf("."),a.length-1)),this.traceId=u,this.spanId=a}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return o.isValidTraceId=function(s){return s.match(/^[0-9a-f]{32}$/)&&s!=="00000000000000000000000000000000"},o.isValidSpanId=function(s){return s.match(/^[0-9a-f]{16}$/)&&s!=="0000000000000000"},o.formatOpenTelemetryTraceFlags=function(s){var a="0"+s.toString(16);return a.substring(a.length-2)},o.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},o.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},o.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},o.DEFAULT_TRACE_FLAG="01",o.DEFAULT_VERSION="00",o}();e.exports=i}),VL=O((t,e)=>{"use strict";var r=function(){function n(i){this.fieldmap=[],!!i&&(this.fieldmap=this.parseHeader(i))}return n.prototype.toString=function(){var i=this.fieldmap;return!i||i.length==0?null:i.join(", ")},n.validateKeyChars=function(i){var o=i.split("@");if(o.length==2){var s=o[0].trim(),a=o[1].trim(),c=Boolean(s.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),l=Boolean(a.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return c&&l}else if(o.length==1)return Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},n.prototype.parseHeader=function(i){var o=[],s={},a=i.split(",");if(a.length>32)return null;for(var c=0,l=a;c<l.length;c++){var u=l[c],d=u.trim();if(d.length!==0){var f=d.split("=");if(f.length!==2||!n.validateKeyChars(f[0])||s[f[0]])return null;s[f[0]]=!0,o.push(d)}}return o},n.strict=!0,n}();e.exports=r}),Ro=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),OX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ro(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),GL=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),NX=O((t,e)=>{"use strict";var r=function(){function n(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return n}();e.exports=r}),LX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=GL(),i=function(o){r(s,o);function s(){return o.call(this)||this}return s}(n);e.exports=i}),WL=O((t,e)=>{"use strict";var r;(function(n){n[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation"})(r||(r={})),e.exports=r}),FX=O((t,e)=>{"use strict";var r=WL(),n=function(){function i(){this.kind=r.Measurement}return i}();e.exports=n}),MX=O((t,e)=>{"use strict";var r=function(){function n(){this.ver=1,this.sampleRate=100,this.tags={}}return n}();e.exports=r}),zL=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ro(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),qX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ro(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.exceptions=[],a.properties={},a.measurements={},a}return s}(n);e.exports=i}),jX=O((t,e)=>{"use strict";var r=function(){function n(){this.hasFullStack=!0,this.parsedStack=[]}return n}();e.exports=r}),$X=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ro(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a}return s}(n);e.exports=i}),UX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ro(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.metrics=[],a.properties={},a}return s}(n);e.exports=i}),BX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=zL(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),HX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ro(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.success=!0,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),VX=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ro(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),GX=O((t,e)=>{"use strict";var r;(function(n){n[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical"})(r||(r={})),e.exports=r}),WX=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),KL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvailabilityData=OX(),t.Base=GL(),t.ContextTagKeys=NX(),t.Data=LX(),t.DataPoint=FX(),t.DataPointType=WL(),t.Domain=Ro(),t.Envelope=MX(),t.EventData=zL(),t.ExceptionData=qX(),t.ExceptionDetails=jX(),t.MessageData=$X(),t.MetricData=UX(),t.PageViewData=BX(),t.RemoteDependencyData=HX(),t.RequestData=VX(),t.SeverityLevel=GX(),t.StackFrame=WX()}),zX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.domainSupportsProperties=t.RemoteDependencyDataConstants=void 0;var e=KL(),r=function(){function i(){}return i.TYPE_HTTP="Http",i.TYPE_AI="Http (tracked component)",i}();t.RemoteDependencyDataConstants=r;function n(i){return"properties"in i||i instanceof e.EventData||i instanceof e.ExceptionData||i instanceof e.MessageData||i instanceof e.MetricData||i instanceof e.PageViewData||i instanceof e.RemoteDependencyData||i instanceof e.RequestData}t.domainSupportsProperties=n}),KX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),YX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),JX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),QX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),XX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),ZX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),eZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),tZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),rZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),nZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),iZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),oZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),sZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryType=t.TelemetryTypeString=t.baseTypeToTelemetryType=t.telemetryTypeToBaseType=void 0;function e(i){switch(i){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}}t.telemetryTypeToBaseType=e;function r(i){switch(i){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}}t.baseTypeToTelemetryType=r,t.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var n;(function(i){i[i.Event=0]="Event",i[i.Exception=1]="Exception",i[i.Trace=2]="Trace",i[i.Metric=3]="Metric",i[i.Request=4]="Request",i[i.Dependency=5]="Dependency",i[i.Availability=6]="Availability",i[i.PageView=7]="PageView"})(n=t.TelemetryType||(t.TelemetryType={}))}),aZ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(KX(),t),r(YX(),t),r(JX(),t),r(QX(),t),r(XX(),t),r(ZX(),t),r(eZ(),t),r(tZ(),t),r(rZ(),t),r(nZ(),t),r(iZ(),t),r(oZ(),t),r(sZ(),t)}),cZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),lZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),uZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),dZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),fZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),pZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),hZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),mZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),gZ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(cZ(),t),r(lZ(),t),r(uZ(),t),r(dZ(),t),r(fZ(),t),r(pZ(),t),r(hZ(),t),r(mZ(),t)}),xr=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(zX(),t),r(KL(),t),r(aZ(),t),r(gZ(),t)}),YL=O((t,e)=>{"use strict";var r=function(){function n(){}return n.prototype.getUrl=function(){return this.url},n.prototype.RequestParser=function(){this.startTime=+new Date},n.prototype._setStatus=function(i,o){var s=+new Date;this.duration=s-this.startTime,this.statusCode=i;var a=this.properties||{};if(o){if(typeof o=="string")a.error=o;else if(o instanceof Error)a.error=o.message;else if(typeof o=="object")for(var c in o)a[c]=o[c]&&o[c].toString&&o[c].toString()}this.properties=a},n.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},n}();e.exports=r}),JL=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var f=function(p,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(m[v]=g[v])},f(p,h)};return function(p,h){f(p,h);function m(){this.constructor=p}p.prototype=h===null?Object.create(h):(m.prototype=h.prototype,new m)}}(),n=require("url"),i=xr(),o=gn(),s=Hu(),a=YL(),c=Ac(),l=VL(),u=cm(),d=function(f){r(p,f);function p(h,m){var g=f.call(this)||this;return h&&(g.method=h.method,g.url=g._getAbsoluteUrl(h),g.startTime=+new Date,g.socketRemoteAddress=h.socket&&h.socket.remoteAddress,g.parseHeaders(h,m),h.connection&&(g.connectionRemoteAddress=h.connection.remoteAddress,g.legacySocketRemoteAddress=h.connection.socket&&h.connection.socket.remoteAddress)),g}return p.prototype.onError=function(h,m){this._setStatus(void 0,h),m&&(this.duration=m)},p.prototype.onResponse=function(h,m){this._setStatus(h.statusCode,void 0),m&&(this.duration=m)},p.prototype.getRequestTelemetry=function(h){var m={id:this.requestId,name:this.method+" "+n.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(h&&h.time?m.time=h.time:this.startTime&&(m.time=new Date(this.startTime)),h){for(var g in h)m[g]||(m[g]=h[g]);if(h.properties)for(var g in h.properties)m.properties[g]=h.properties[g]}return m},p.prototype.getRequestTags=function(h){var m={};for(var g in h)m[g]=h[g];return m[p.keys.locationIp]=h[p.keys.locationIp]||this._getIp(),m[p.keys.sessionId]=h[p.keys.sessionId]||this._getId("ai_session"),m[p.keys.userId]=h[p.keys.userId]||this._getId("ai_user"),m[p.keys.userAuthUserId]=h[p.keys.userAuthUserId]||this._getId("ai_authUser"),m[p.keys.operationName]=this.getOperationName(h),m[p.keys.operationParentId]=this.getOperationParentId(h),m[p.keys.operationId]=this.getOperationId(h),m},p.prototype.getOperationId=function(h){return h[p.keys.operationId]||this.operationId},p.prototype.getOperationParentId=function(h){return h[p.keys.operationParentId]||this.parentId||this.getOperationId(h)},p.prototype.getOperationName=function(h){return h[p.keys.operationName]||this.method+" "+n.parse(this.url).pathname},p.prototype.getRequestId=function(){return this.requestId},p.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},p.prototype.getTraceparent=function(){return this.traceparent},p.prototype.getTracestate=function(){return this.tracestate},p.prototype.getLegacyRootId=function(){return this.legacyRootId},p.prototype._getAbsoluteUrl=function(h){if(!h.headers)return h.url;var m=h.connection?h.connection.encrypted:null,g=n.parse(h.url),v=g.pathname,w=g.search,C=m||h.headers["x-forwarded-proto"]=="https"?"https":"http",b=n.format({protocol:C,host:h.headers.host,pathname:v,search:w});return b},p.prototype._getIp=function(){var h=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,m=function(v){var w=h.exec(v);if(w)return w[0]},g=m(this.rawHeaders["x-forwarded-for"])||m(this.rawHeaders["x-client-ip"])||m(this.rawHeaders["x-real-ip"])||m(this.connectionRemoteAddress)||m(this.socketRemoteAddress)||m(this.legacySocketRemoteAddress);return!g&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(g="127.0.0.1"),g},p.prototype._getId=function(h){var m=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",g=p.parseId(o.getCookie(h,m));return g},p.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},p.prototype.parseHeaders=function(h,m){if(this.rawHeaders=h.headers||h.rawHeaders,this.userAgent=h.headers&&h.headers["user-agent"],this.sourceCorrelationId=o.getCorrelationContextTarget(h,s.requestContextSourceKey),h.headers){var g=h.headers[s.traceStateHeader]?h.headers[s.traceStateHeader].toString():null,v=h.headers[s.traceparentHeader]?h.headers[s.traceparentHeader].toString():null,w=h.headers[s.requestIdHeader]?h.headers[s.requestIdHeader].toString():null,C=h.headers[s.parentIdHeader]?h.headers[s.parentIdHeader].toString():null,b=h.headers[s.rootIdHeader]?h.headers[s.rootIdHeader].toString():null;this.correlationContextHeader=h.headers[s.correlationContextHeader]?h.headers[s.correlationContextHeader].toString():null,c.w3cEnabled&&(v||g)?(this.traceparent=new u(v?v.toString():null),this.tracestate=v&&g&&new l(g?g.toString():null),this.setBackCompatFromThisTraceContext()):w?c.w3cEnabled?(this.traceparent=new u(null,w),this.setBackCompatFromThisTraceContext()):(this.parentId=w,this.requestId=c.generateRequestId(this.parentId),this.operationId=c.getRootId(this.requestId)):c.w3cEnabled?(this.traceparent=new u,this.traceparent.parentId=C,this.traceparent.legacyRootId=b||C,this.setBackCompatFromThisTraceContext()):(this.parentId=C,this.requestId=c.generateRequestId(b||this.parentId),this.correlationContextHeader=null,this.operationId=c.getRootId(this.requestId)),m&&(this.requestId=m,this.operationId=c.getRootId(this.requestId))}},p.parseId=function(h){var m=h.split("|");return m.length>0?m[0]:""},p.keys=new i.ContextTagKeys,p}(a);e.exports=d}),vZ=O((t,e)=>{t=e.exports=Q;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var C=c++;a[C]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var b=c++,S="v?"+a[f]+a[g]+"?"+a[C]+"?";a[b]="^"+S+"$";var P="[v=\\s]*"+a[p]+a[v]+"?"+a[C]+"?",_=c++;a[_]="^"+P+"$";var k=c++;a[k]="((?:<|>)?=?)";var T=c++;a[T]=a[u]+"|x|X|\\*";var A=c++;a[A]=a[l]+"|x|X|\\*";var M=c++;a[M]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[g]+")?"+a[C]+"?)?)?";var H=c++;a[H]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[v]+")?"+a[C]+"?)?)?";var J=c++;a[J]="^"+a[k]+"\\s*"+a[M]+"$";var K=c++;a[K]="^"+a[k]+"\\s*"+a[H]+"$";var oe=c++;a[oe]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var te=c++;a[te]="(?:~>?)";var F=c++;a[F]="(\\s*)"+a[te]+"\\s+",s[F]=new RegExp(a[F],"g");var L="$1~",q=c++;a[q]="^"+a[te]+a[M]+"$";var G=c++;a[G]="^"+a[te]+a[H]+"$";var z=c++;a[z]="(?:\\^)";var ie=c++;a[ie]="(\\s*)"+a[z]+"\\s+",s[ie]=new RegExp(a[ie],"g");var ne="$1^",be=c++;a[be]="^"+a[z]+a[M]+"$";var Pe=c++;a[Pe]="^"+a[z]+a[H]+"$";var Se=c++;a[Se]="^"+a[k]+"\\s*("+P+")$|^$";var De=c++;a[De]="^"+a[k]+"\\s*("+S+")$|^$";var pe=c++;a[pe]="(\\s*)"+a[k]+"\\s*("+P+"|"+a[M]+")",s[pe]=new RegExp(a[pe],"g");var vt="$1$2$3",Pt=c++;a[Pt]="^\\s*("+a[M]+")\\s+-\\s+("+a[M]+")\\s*$";var ye=c++;a[ye]="^\\s*("+a[H]+")\\s+-\\s+("+a[H]+")\\s*$";var fe=c++;for(a[fe]="(<|>)?=?\\s*\\*",Ce=0;Ce<c;Ce++)r(Ce,a[Ce]),s[Ce]||(s[Ce]=new RegExp(a[Ce]));var Ce;t.parse=$e;function $e(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q)return y;if(typeof y!="string"||y.length>n)return null;var x=E.loose?s[_]:s[b];if(!x.test(y))return null;try{return new Q(y,E)}catch{return null}}t.valid=Ko;function Ko(y,E){var x=$e(y,E);return x?x.version:null}t.clean=Yo;function Yo(y,E){var x=$e(y.trim().replace(/^[=v]+/,""),E);return x?x.version:null}t.SemVer=Q;function Q(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q){if(y.loose===E.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Q))return new Q(y,E);r("SemVer",y,E),this.options=E,this.loose=!!E.loose;var x=y.trim().match(E.loose?s[_]:s[b]);if(!x)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(R){if(/^[0-9]+$/.test(R)){var N=+R;if(N>=0&&N<i)return N}return R}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof Q||(y=new Q(y,this.options)),this.compareMain(y)||this.comparePre(y)},Q.prototype.compareMain=function(y){return y instanceof Q||(y=new Q(y,this.options)),at(this.major,y.major)||at(this.minor,y.minor)||at(this.patch,y.patch)},Q.prototype.comparePre=function(y){if(y instanceof Q||(y=new Q(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var E=0;do{var x=this.prerelease[E],R=y.prerelease[E];if(r("prerelease compare",E,x,R),x===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(x===void 0)return-1;if(x!==R)return at(x,R)}while(++E)},Q.prototype.inc=function(y,E){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},t.inc=Jo;function Jo(y,E,x,R){typeof x=="string"&&(R=x,x=void 0);try{return new Q(y,x).inc(E,R).version}catch{return null}}t.diff=Qo;function Qo(y,E){if(gr(y,E))return null;var x=$e(y),R=$e(E),N="";if(x.prerelease.length||R.prerelease.length){N="pre";var j="prerelease"}for(var B in x)if((B==="major"||B==="minor"||B==="patch")&&x[B]!==R[B])return N+B;return j}t.compareIdentifiers=at;var Tr=/^[0-9]+$/;function at(y,E){var x=Tr.test(y),R=Tr.test(E);return x&&R&&(y=+y,E=+E),y===E?0:x&&!R?-1:R&&!x?1:y<E?-1:1}t.rcompareIdentifiers=Gn;function Gn(y,E){return at(E,y)}t.major=cr;function cr(y,E){return new Q(y,E).major}t.minor=zi;function zi(y,E){return new Q(y,E).minor}t.patch=Ki;function Ki(y,E){return new Q(y,E).patch}t.compare=Ve;function Ve(y,E,x){return new Q(y,x).compare(new Q(E,x))}t.compareLoose=Xo;function Xo(y,E){return Ve(y,E,!0)}t.rcompare=Wn;function Wn(y,E,x){return Ve(E,y,x)}t.sort=Yi;function Yi(y,E){return y.sort(function(x,R){return t.compare(x,R,E)})}t.rsort=Ji;function Ji(y,E){return y.sort(function(x,R){return t.rcompare(x,R,E)})}t.gt=bt;function bt(y,E,x){return Ve(y,E,x)>0}t.lt=jt;function jt(y,E,x){return Ve(y,E,x)<0}t.eq=gr;function gr(y,E,x){return Ve(y,E,x)===0}t.neq=zn;function zn(y,E,x){return Ve(y,E,x)!==0}t.gte=Ar;function Ar(y,E,x){return Ve(y,E,x)>=0}t.lte=kt;function kt(y,E,x){return Ve(y,E,x)<=0}t.cmp=It;function It(y,E,x,R){switch(E){case"===":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y===x;case"!==":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y!==x;case"":case"=":case"==":return gr(y,x,R);case"!=":return zn(y,x,R);case">":return bt(y,x,R);case">=":return Ar(y,x,R);case"<":return jt(y,x,R);case"<=":return kt(y,x,R);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=Te;function Te(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Te){if(y.loose===!!E.loose)return y;y=y.value}if(!(this instanceof Te))return new Te(y,E);r("comparator",y,E),this.options=E,this.loose=!!E.loose,this.parse(y),this.semver===Et?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Et={};Te.prototype.parse=function(y){var E=this.options.loose?s[Se]:s[De],x=y.match(E);if(!x)throw new TypeError("Invalid comparator: "+y);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new Q(x[2],this.options.loose):this.semver=Et},Te.prototype.toString=function(){return this.value},Te.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===Et?!0:(typeof y=="string"&&(y=new Q(y,this.options)),It(y,this.operator,this.semver,this.options))},Te.prototype.intersects=function(y,E){if(!(y instanceof Te))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var x;if(this.operator==="")return x=new ae(y.value,E),Jt(this.value,x,E);if(y.operator==="")return x=new ae(this.value,E),Jt(y.semver,x,E);var R=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),j=this.semver.version===y.semver.version,B=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),Z=It(this.semver,"<",y.semver,E)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),X=It(this.semver,">",y.semver,E)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return R||N||j&&B||Z||X},t.Range=ae;function ae(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ae)return y.loose===!!E.loose&&y.includePrerelease===!!E.includePrerelease?y:new ae(y.raw,E);if(y instanceof Te)return new ae(y.value,E);if(!(this instanceof ae))return new ae(y,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ae.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ae.prototype.toString=function(){return this.range},ae.prototype.parseRange=function(y){var E=this.options.loose;y=y.trim();var x=E?s[ye]:s[Pt];y=y.replace(x,is),r("hyphen replace",y),y=y.replace(s[pe],vt),r("comparator trim",y,s[pe]),y=y.replace(s[F],L),y=y.replace(s[ie],ne),y=y.split(/\s+/).join(" ");var R=E?s[Se]:s[De],N=y.split(" ").map(function(j){return En(j,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function(j){return!!j.match(R)})),N=N.map(function(j){return new Te(j,this.options)},this),N},ae.prototype.intersects=function(y,E){if(!(y instanceof ae))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(R){return y.set.some(function(N){return N.every(function(j){return R.intersects(j,E)})})})})},t.toComparators=Qi;function Qi(y,E){return new ae(y,E).set.map(function(x){return x.map(function(R){return R.value}).join(" ").trim().split(" ")})}function En(y,E){return r("comp",y,E),y=es(y,E),r("caret",y),y=Dr(y,E),r("tildes",y),y=rs(y,E),r("xrange",y),y=lr(y,E),r("stars",y),y}function we(y){return!y||y.toLowerCase()==="x"||y==="*"}function Dr(y,E){return y.trim().split(/\s+/).map(function(x){return Zo(x,E)}).join(" ")}function Zo(y,E){var x=E.loose?s[G]:s[q];return y.replace(x,function(R,N,j,B,Z){r("tilde",y,R,N,j,B,Z);var X;return we(N)?X="":we(j)?X=">="+N+".0.0 <"+(+N+1)+".0.0":we(B)?X=">="+N+"."+j+".0 <"+N+"."+(+j+1)+".0":Z?(r("replaceTilde pr",Z),X=">="+N+"."+j+"."+B+"-"+Z+" <"+N+"."+(+j+1)+".0"):X=">="+N+"."+j+"."+B+" <"+N+"."+(+j+1)+".0",r("tilde return",X),X})}function es(y,E){return y.trim().split(/\s+/).map(function(x){return ts(x,E)}).join(" ")}function ts(y,E){r("caret",y,E);var x=E.loose?s[Pe]:s[be];return y.replace(x,function(R,N,j,B,Z){r("caret",y,R,N,j,B,Z);var X;return we(N)?X="":we(j)?X=">="+N+".0.0 <"+(+N+1)+".0.0":we(B)?N==="0"?X=">="+N+"."+j+".0 <"+N+"."+(+j+1)+".0":X=">="+N+"."+j+".0 <"+(+N+1)+".0.0":Z?(r("replaceCaret pr",Z),N==="0"?j==="0"?X=">="+N+"."+j+"."+B+"-"+Z+" <"+N+"."+j+"."+(+B+1):X=">="+N+"."+j+"."+B+"-"+Z+" <"+N+"."+(+j+1)+".0":X=">="+N+"."+j+"."+B+"-"+Z+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?j==="0"?X=">="+N+"."+j+"."+B+" <"+N+"."+j+"."+(+B+1):X=">="+N+"."+j+"."+B+" <"+N+"."+(+j+1)+".0":X=">="+N+"."+j+"."+B+" <"+(+N+1)+".0.0"),r("caret return",X),X})}function rs(y,E){return r("replaceXRanges",y,E),y.split(/\s+/).map(function(x){return ns(x,E)}).join(" ")}function ns(y,E){y=y.trim();var x=E.loose?s[K]:s[J];return y.replace(x,function(R,N,j,B,Z,X){r("xRange",y,R,N,j,B,Z,X);var qe=we(j),Re=qe||we(B),ke=Re||we(Z),_e=ke;return N==="="&&_e&&(N=""),qe?N===">"||N==="<"?R="<0.0.0":R="*":N&&_e?(Re&&(B=0),Z=0,N===">"?(N=">=",Re?(j=+j+1,B=0,Z=0):(B=+B+1,Z=0)):N==="<="&&(N="<",Re?j=+j+1:B=+B+1),R=N+j+"."+B+"."+Z):Re?R=">="+j+".0.0 <"+(+j+1)+".0.0":ke&&(R=">="+j+"."+B+".0 <"+j+"."+(+B+1)+".0"),r("xRange return",R),R})}function lr(y,E){return r("replaceStars",y,E),y.trim().replace(s[fe],"")}function is(y,E,x,R,N,j,B,Z,X,qe,Re,ke,_e){return we(x)?E="":we(R)?E=">="+x+".0.0":we(N)?E=">="+x+"."+R+".0":E=">="+E,we(X)?Z="":we(qe)?Z="<"+(+X+1)+".0.0":we(Re)?Z="<"+X+"."+(+qe+1)+".0":ke?Z="<="+X+"."+qe+"."+Re+"-"+ke:Z="<="+Z,(E+" "+Z).trim()}ae.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new Q(y,this.options));for(var E=0;E<this.set.length;E++)if(os(this.set[E],y,this.options))return!0;return!1};function os(y,E,x){for(var R=0;R<y.length;R++)if(!y[R].test(E))return!1;if(E.prerelease.length&&!x.includePrerelease){for(R=0;R<y.length;R++)if(r(y[R].semver),y[R].semver!==Et&&y[R].semver.prerelease.length>0){var N=y[R].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=Jt;function Jt(y,E,x){try{E=new ae(E,x)}catch{return!1}return E.test(y)}t.maxSatisfying=ss;function ss(y,E,x){var R=null,N=null;try{var j=new ae(E,x)}catch{return null}return y.forEach(function(B){j.test(B)&&(!R||N.compare(B)===-1)&&(R=B,N=new Q(R,x))}),R}t.minSatisfying=as;function as(y,E,x){var R=null,N=null;try{var j=new ae(E,x)}catch{return null}return y.forEach(function(B){j.test(B)&&(!R||N.compare(B)===1)&&(R=B,N=new Q(R,x))}),R}t.minVersion=Wr;function Wr(y,E){y=new ae(y,E);var x=new Q("0.0.0");if(y.test(x)||(x=new Q("0.0.0-0"),y.test(x)))return x;x=null;for(var R=0;R<y.set.length;++R){var N=y.set[R];N.forEach(function(j){var B=new Q(j.semver.version);switch(j.operator){case">":B.prerelease.length===0?B.patch++:B.prerelease.push(0),B.raw=B.format();case"":case">=":(!x||bt(x,B))&&(x=B);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+j.operator)}})}return x&&y.test(x)?x:null}t.validRange=cs;function cs(y,E){try{return new ae(y,E).range||"*"}catch{return null}}t.ltr=ls;function ls(y,E,x){return Rr(y,E,"<",x)}t.gtr=us;function us(y,E,x){return Rr(y,E,">",x)}t.outside=Rr;function Rr(y,E,x,R){y=new Q(y,R),E=new ae(E,R);var N,j,B,Z,X;switch(x){case">":N=bt,j=kt,B=jt,Z=">",X=">=";break;case"<":N=jt,j=Ar,B=bt,Z="<",X="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Jt(y,E,R))return!1;for(var qe=0;qe<E.set.length;++qe){var Re=E.set[qe],ke=null,_e=null;if(Re.forEach(function(Je){Je.semver===Et&&(Je=new Te(">=0.0.0")),ke=ke||Je,_e=_e||Je,N(Je.semver,ke.semver,R)?ke=Je:B(Je.semver,_e.semver,R)&&(_e=Je)}),ke.operator===Z||ke.operator===X||(!_e.operator||_e.operator===Z)&&j(y,_e.semver)||_e.operator===X&&B(y,_e.semver))return!1}return!0}t.prerelease=ds;function ds(y,E){var x=$e(y,E);return x&&x.prerelease.length?x.prerelease:null}t.intersects=zr;function zr(y,E,x){return y=new ae(y,x),E=new ae(E,x),y.intersects(E)}t.coerce=fs;function fs(y){if(y instanceof Q)return y;if(typeof y!="string")return null;var E=y.match(s[oe]);return E==null?null:$e(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),wb=O((t,e)=>{"use strict";function r(u){return typeof u=="function"}var n=console.error.bind(console);function i(u,d,f){var p=!!u[d]&&u.propertyIsEnumerable(d);Object.defineProperty(u,d,{configurable:!0,enumerable:p,writable:!0,value:f})}function o(u){u&&u.logger&&(r(u.logger)?n=u.logger:n("new logger isn't a function, not replacing"))}function s(u,d,f){if(!u||!u[d]){n("no original function "+d+" to wrap");return}if(!f){n("no wrapper function"),n(new Error().stack);return}if(!r(u[d])||!r(f)){n("original object and wrapper must be functions");return}var p=u[d],h=f(p,d);return i(h,"__original",p),i(h,"__unwrap",function(){u[d]===h&&i(u,d,p)}),i(h,"__wrapped",!0),i(u,d,h),h}function a(u,d,f){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to wrap on modules");return}u.forEach(function(p){d.forEach(function(h){s(p,h,f)})})}function c(u,d){if(!u||!u[d]){n("no function to unwrap."),n(new Error().stack);return}if(!u[d].__unwrap)n("no original to unwrap to -- has "+d+" already been unwrapped?");else return u[d].__unwrap()}function l(u,d){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to unwrap on modules");return}u.forEach(function(f){d.forEach(function(p){c(f,p)})})}o.wrap=s,o.massWrap=a,o.unwrap=c,o.massUnwrap=l,e.exports=o}),Cb=O((t,e)=>{"use strict";var r=wb(),n=r.wrap,i=r.unwrap,o="wrap@before";function s(d,f,p){var h=!!d[f]&&d.propertyIsEnumerable(f);Object.defineProperty(d,f,{configurable:!0,enumerable:h,writable:!0,value:p})}function a(d,f){for(var p=f.length,h=0;h<p;h++){var m=f[h],g=d[o];if(typeof g=="function")g(m);else if(Array.isArray(g))for(var v=g.length,w=0;w<v;w++)g[w](m)}}function c(d,f){var p;return p=d._events&&d._events[f],Array.isArray(p)||(p?p=[p]:p=[]),p}function l(d,f,p){var h=c(d,f),m=h.filter(function(g){return p.indexOf(g)===-1});m.length>0&&a(d,m)}function u(d,f){if(d){var p=d;if(typeof d=="function")p=f(d);else if(Array.isArray(d)){p=[];for(var h=0;h<d.length;h++)p[h]=f(d[h])}return p}}e.exports=function(d,f,p){if(!d||!d.on||!d.addListener||!d.removeListener||!d.emit)throw new Error("can only wrap real EEs");if(!f)throw new Error("must have function to run on listener addition");if(!p)throw new Error("must have function to wrap listeners when emitting");function h(g){return function(v,w){var C=c(this,v).slice();try{var b=g.call(this,v,w);return l(this,v,C),b}finally{this.on.__wrapped||n(this,"on",h),this.addListener.__wrapped||n(this,"addListener",h)}}}function m(g){return function(v){if(!this._events||!this._events[v])return g.apply(this,arguments);var w=this._events[v];function C(b){return function(){this._events[v]=w;try{return b.apply(this,arguments)}finally{w=this._events[v],this._events[v]=u(w,p)}}}n(this,"removeListener",C);try{return this._events[v]=u(w,p),g.apply(this,arguments)}finally{i(this,"removeListener"),this._events[v]=w}}}d[o]?typeof d[o]=="function"?s(d,o,[d[o],f]):Array.isArray(d[o])&&d[o].push(f):s(d,o,f),d.__wrapped||(n(d,"addListener",h),n(d,"on",h),n(d,"emit",m),s(d,"__unwrap",function(){i(d,"addListener"),i(d,"on"),i(d,"emit"),delete d[o],delete d.__wrapped}),s(d,"__wrapped",!0))}}),yZ=O((t,e)=>{"use strict";var r=require("util"),n=require("assert"),i=Cb(),o=require("async_hooks"),s="cls@contexts",a="error@context",c=process.env.DEBUG_CLS_HOOKED,l=-1;e.exports={getNamespace:d,createNamespace:f,destroyNamespace:p,reset:h,ERROR_SYMBOL:a};function u(g){this.name=g,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}u.prototype.set=function(g,v){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[g]=v,c){let w=" ".repeat(this._indent<0?0:this._indent);m(w+"CONTEXT-SET KEY:"+g+"="+v+" in ns:"+this.name+" currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return v},u.prototype.get=function(g){if(!this.active){if(c){let v=o.currentId(),w=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${g}=undefined currentUid:${l} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length}`)}return}if(c){let v=o.executionAsyncId(),w=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(C+"CONTEXT-GETTING KEY:"+g+"="+this.active[g]+" ("+this.name+") currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),m(`${C}CONTEXT-GETTING KEY: (${this.name}) ${g}=${this.active[g]} currentUid:${l} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[g]},u.prototype.createContext=function(){let g=Object.create(this.active?this.active:Object.prototype);if(g._ns_name=this.name,g.id=l,c){let v=o.executionAsyncId(),w=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length} context:${r.inspect(g,{showHidden:!0,depth:2,colors:!0})}`)}return g},u.prototype.run=function(g){let v=this.createContext();this.enter(v);try{if(c){let w=o.triggerAsyncId(),C=o.executionAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${w} asyncHooksCurrentId:${C} len:${this._set.length} context:${r.inspect(v)}`)}return g(v),v}catch(w){throw w&&(w[a]=v),w}finally{if(c){let w=o.triggerAsyncId(),C=o.executionAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${w} asyncHooksCurrentId:${C} len:${this._set.length} ${r.inspect(v)}`)}this.exit(v)}},u.prototype.runAndReturn=function(g){let v;return this.run(function(w){v=g(w)}),v},u.prototype.runPromise=function(g){let v=this.createContext();this.enter(v);let w=g(v);if(!w||!w.then||!w.catch)throw new Error("fn must return a promise.");return c&&m("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),w.then(C=>(c&&m("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),C)).catch(C=>{throw C[a]=v,c&&m("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),C})},u.prototype.bind=function(g,v){v||(this.active?v=this.active:v=this.createContext());let w=this;return function(){w.enter(v);try{return g.apply(this,arguments)}catch(C){throw C&&(C[a]=v),C}finally{w.exit(v)}}},u.prototype.enter=function(g){if(n.ok(g,"context must be provided for entering"),c){let v=o.executionAsyncId(),w=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${w} asyncHooksCurrentId:${v} len:${this._set.length} ${r.inspect(g)}`)}this._set.push(this.active),this.active=g},u.prototype.exit=function(g){if(n.ok(g,"context must be provided for exiting"),c){let w=o.executionAsyncId(),C=o.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${C} asyncHooksCurrentId:${w} len:${this._set.length} ${r.inspect(g)}`)}if(this.active===g){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let v=this._set.lastIndexOf(g);v<0?(c&&m("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(g)),n.ok(v>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(g))):(n.ok(v,"can't remove top context"),this._set.splice(v,1))},u.prototype.bindEmitter=function(g){n.ok(g.on&&g.addListener&&g.emit,"can only bind real EEs");let v=this,w="context@"+this.name;function C(S){!S||(S[s]||(S[s]=Object.create(null)),S[s][w]={namespace:v,context:v.active})}function b(S){if(!(S&&S[s]))return S;let P=S,_=S[s];return Object.keys(_).forEach(function(k){let T=_[k];P=T.namespace.bind(P,T.context)}),P}i(g,C,b)},u.prototype.fromException=function(g){return g[a]};function d(g){return process.namespaces[g]}function f(g){n.ok(g,"namespace must be given a name."),c&&m(`NS-CREATING NAMESPACE (${g})`);let v=new u(g);return v.id=l,o.createHook({init(w,C,b,S){if(l=o.executionAsyncId(),v.active){if(v._contexts.set(w,v.active),c){let P=" ".repeat(v._indent<0?0:v._indent);m(`${P}INIT [${C}] (${g}) asyncId:${w} currentUid:${l} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}else if(l===0){let P=o.triggerAsyncId(),_=v._contexts.get(P);if(_){if(v._contexts.set(w,_),c){let k=" ".repeat(v._indent<0?0:v._indent);m(`${k}INIT USING CONTEXT FROM TRIGGERID [${C}] (${g}) asyncId:${w} currentUid:${l} triggerId:${P} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}else if(c){let k=" ".repeat(v._indent<0?0:v._indent);m(`${k}INIT MISSING CONTEXT [${C}] (${g}) asyncId:${w} currentUid:${l} triggerId:${P} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}if(c&&C==="PROMISE"){m(r.inspect(S,{showHidden:!0}));let P=S.parentId,_=" ".repeat(v._indent<0?0:v._indent);m(`${_}INIT RESOURCE-PROMISE [${C}] (${g}) parentId:${P} asyncId:${w} currentUid:${l} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}},before(w){l=o.executionAsyncId();let C;if(C=v._contexts.get(w)||v._contexts.get(l),C){if(c){let b=o.triggerAsyncId(),S=" ".repeat(v._indent<0?0:v._indent);m(`${S}BEFORE (${g}) asyncId:${w} currentUid:${l} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(C)}`),v._indent+=2}v.enter(C)}else if(c){let b=o.triggerAsyncId(),S=" ".repeat(v._indent<0?0:v._indent);m(`${S}BEFORE MISSING CONTEXT (${g}) asyncId:${w} currentUid:${l} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(v._contexts,{showHidden:!0,depth:2,colors:!0})}`),v._indent+=2}},after(w){l=o.executionAsyncId();let C;if(C=v._contexts.get(w)||v._contexts.get(l),C){if(c){let b=o.triggerAsyncId();v._indent-=2;let S=" ".repeat(v._indent<0?0:v._indent);m(`${S}AFTER (${g}) asyncId:${w} currentUid:${l} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(C)}`)}v.exit(C)}else if(c){let b=o.triggerAsyncId();v._indent-=2;let S=" ".repeat(v._indent<0?0:v._indent);m(`${S}AFTER MISSING CONTEXT (${g}) asyncId:${w} currentUid:${l} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(C)}`)}},destroy(w){if(l=o.executionAsyncId(),c){let C=o.triggerAsyncId(),b=" ".repeat(v._indent<0?0:v._indent);m(`${b}DESTROY (${g}) currentUid:${l} asyncId:${w} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(v._contexts.get(l))}`)}v._contexts.delete(w)}}).enable(),process.namespaces[g]=v,v}function p(g){let v=d(g);n.ok(v,`can't delete nonexistent namespace! "`+g+'"'),n.ok(v.id,"don't assign to process.namespaces directly! "+r.inspect(v)),process.namespaces[g]=null}function h(){process.namespaces&&Object.keys(process.namespaces).forEach(function(g){p(g)}),process.namespaces=Object.create(null)}process.namespaces={};function m(...g){c&&process._rawDebug(`${r.format(...g)}`)}}),wZ=O((t,e)=>{"use strict";function r(){}e.exports=function(){let n=this._hooks,i=this._state,o=process.nextTick;process.nextTick=function(){if(!i.enabled)return o.apply(process,arguments);let s=new Array(arguments.length);for(let u=0;u<arguments.length;u++)s[u]=arguments[u];let a=s[0];if(typeof a!="function")throw new TypeError("callback is not a function");let c=new r,l=--i.counter;return n.init.call(c,l,0,null,null),s[0]=function(){n.pre.call(c,l);let u=!0;try{a.apply(this,arguments),u=!1}finally{u&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){n.post.call(c,l,!0),n.destroy.call(null,l)})}n.post.call(c,l,!1),n.destroy.call(null,l)},o.apply(process,s)}}}),CZ=O((t,e)=>{"use strict";function r(){}e.exports=function(){let n=this._hooks,i=this._state,o=global.Promise,s=o.prototype.then;o.prototype.then=u;function a(d,f,p,h){return typeof d!="function"?h?c(p):l(p):function(){n.pre.call(f,p);try{return d.apply(this,arguments)}finally{n.post.call(f,p,!1),n.destroy.call(null,p)}}}function c(d){return function(f){return n.destroy.call(null,d),f}}function l(d){return function(f){throw n.destroy.call(null,d),f}}function u(d,f){if(!i.enabled)return s.call(this,d,f);let p=new r,h=--i.counter;return n.init.call(p,h,0,null,null),s.call(this,a(d,p,h,!0),a(f,p,h,!1))}}}),bZ=O((t,e)=>{"use strict";var r=require("timers");function n(){}function i(){}function o(){}var s=new Map,a=new Map,c=new Map,l=null,u=!1;e.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",n,s,!0),d(this._hooks,this._state,"setInterval","clearInterval",i,a,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",o,c,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate};function d(f,p,h,m,g,v,w){let C=r[h],b=r[m];r[h]=function(){if(!p.enabled)return C.apply(r,arguments);let S=new Array(arguments.length);for(let A=0;A<arguments.length;A++)S[A]=arguments[A];let P=S[0];if(typeof P!="function")throw new TypeError('"callback" argument must be a function');let _=new g,k=--p.counter,T;return f.init.call(_,k,0,null,null),S[0]=function(){l=T,f.pre.call(_,k);let A=!0;try{P.apply(this,arguments),A=!1}finally{A&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){f.post.call(_,k,!0),v.delete(T),f.destroy.call(null,k)})}f.post.call(_,k,!1),l=null,(w||u)&&(u=!1,v.delete(T),f.destroy.call(null,k))},T=C.apply(r,S),v.set(T,k),T},r[m]=function(S){if(l===S&&S!==null)u=!0;else if(v.has(S)){let P=v.get(S);v.delete(S),f.destroy.call(null,P)}b.apply(r,arguments)}}}),QL=O((t,e)=>{e.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),EZ=O((t,e)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,i={nextTick:wZ(),promise:CZ(),timers:bZ()},o=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let u=this.initFns=[],d=this.preFns=[],f=this.postFns=[],p=this.destroyFns=[];this.init=function(h,m,g,v){if(m===n){o.add(h);return}for(let w of u)w(h,this,m,g,v)},this.pre=function(h){if(!o.has(h))for(let m of d)m(h,this)},this.post=function(h,m){if(!o.has(h))for(let g of f)g(h,this,m)},this.destroy=function(h){if(o.has(h)){o.delete(h);return}for(let m of p)m(h)}}a.prototype.add=function(u){u.init&&this.initFns.push(u.init),u.pre&&this.preFns.push(u.pre),u.post&&this.postFns.push(u.post),u.destroy&&this.destroyFns.push(u.destroy)};function c(u,d){let f=u.indexOf(d);f!==-1&&u.splice(f,1)}a.prototype.remove=function(u){u.init&&c(this.initFns,u.init),u.pre&&c(this.preFns,u.pre),u.post&&c(this.postFns,u.post),u.destroy&&c(this.destroyFns,u.destroy)};function l(){this._state=new s,this._hooks=new a,this.version=QL().version,this.providers=r.Providers;for(let u of Object.keys(i))i[u].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}e.exports=l,l.prototype.addHooks=function(u){this._hooks.add(u)},l.prototype.removeHooks=function(u){this._hooks.remove(u)},l.prototype.enable=function(){this._state.enabled=!0,r.enable()},l.prototype.disable=function(){this._state.enabled=!1,r.disable()}}),XL=O((t,e)=>{e.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),_Z=O((t,e)=>{function r(n){try{return Error.prototype.toString.call(n)}catch(i){try{return"<error: "+i+">"}catch{return"<error>"}}}e.exports=function(n,i){var o=[];o.push(r(n));for(var s=0;s<i.length;s++){var a=i[s],c;try{c=a.toString()}catch(l){try{c="<error: "+l+">"}catch{c="<error>"}}o.push("    at "+c)}return o.join(`
`)}}),SZ=O((t,e)=>{var r=_Z();function n(){this.extend=new s,this.filter=new s,this.format=new a,this.version=XL().version}var i=!1;n.prototype.callSite=function d(f){f||(f={}),i=!0;var p={};Error.captureStackTrace(p,d);var h=p.stack;return i=!1,h=h.slice(f.slice||0),f.extend&&(h=this.extend._modify(p,h)),f.filter&&(h=this.filter._modify(p,h)),h};var o=new n;function s(){this._modifiers=[]}s.prototype._modify=function(d,f){for(var p=0,h=this._modifiers.length;p<h;p++)f=this._modifiers[p](d,f);return f},s.prototype.attach=function(d){this._modifiers.push(d)},s.prototype.deattach=function(d){var f=this._modifiers.indexOf(d);return f===-1?!1:(this._modifiers.splice(f,1),!0)};function a(){this._formater=r,this._previous=void 0}a.prototype.replace=function(d){d?this._formater=d:this.restore()},a.prototype.restore=function(){this._formater=r,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&o.format.replace(Error.prepareStackTrace);var c=!1;function l(d,f){if(i)return f;if(c)return r(d,f);var p=f.concat();p=o.extend._modify(d,p),p=o.filter._modify(d,p),p=p.slice(0,Error.stackTraceLimit),Object.isExtensible(d)&&Object.getOwnPropertyDescriptor(d,"callSite")===void 0&&(d.callSite={original:f,mutated:p}),c=!0;var h=o.format._formater(d,p);return c=!1,h}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(d){d===l?o.format._roolback():(o.format._backup(),o.format.replace(d))}});function u(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:u,set:function(d){Object.defineProperty(this,"callSite",{value:d,writable:!0,configurable:!0})},configurable:!0}),e.exports=o}),ZL=O((t,e)=>{if(global._stackChain)if(global._stackChain.version===XL().version)e.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else e.exports=global._stackChain=SZ()}),xZ=O((t,e)=>{"use strict";var r=EZ();if(global._asyncHook)if(global._asyncHook.version===QL().version)e.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else ZL().filter.attach(function(n,i){return i.filter(function(o){let s=o.getFileName();return!(s&&s.slice(0,__dirname.length)===__dirname)})}),e.exports=global._asyncHook=new r}),PZ=O((t,e)=>{"use strict";var r=require("util"),n=require("assert"),i=Cb(),o=xZ(),s="cls@contexts",a="error@context",c=[];for(let b in o.providers)c[o.providers[b]]=b;var l=process.env.DEBUG_CLS_HOOKED,u=-1;e.exports={getNamespace:f,createNamespace:p,destroyNamespace:h,reset:m,ERROR_SYMBOL:a};function d(b){this.name=b,this.active=null,this._set=[],this.id=null,this._contexts=new Map}d.prototype.set=function(b,S){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return l&&g("    SETTING KEY:"+b+"="+S+" in ns:"+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0)),this.active[b]=S,S},d.prototype.get=function(b){if(!this.active){l&&g("    GETTING KEY:"+b+"=undefined "+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0));return}return l&&g("    GETTING KEY:"+b+"="+this.active[b]+" "+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0)),this.active[b]},d.prototype.createContext=function(){l&&g("   CREATING Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let b=Object.create(this.active?this.active:Object.prototype);return b._ns_name=this.name,b.id=u,l&&g("   CREATED Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  context:"+r.inspect(b,!0,2,!0)),b},d.prototype.run=function(b){let S=this.createContext();this.enter(S);try{return l&&g(" BEFORE RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),b(S),S}catch(P){throw P&&(P[a]=S),P}finally{l&&g(" AFTER RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),this.exit(S)}},d.prototype.runAndReturn=function(b){var S;return this.run(function(P){S=b(P)}),S},d.prototype.runPromise=function(b){let S=this.createContext();this.enter(S);let P=b(S);if(!P||!P.then||!P.catch)throw new Error("fn must return a promise.");return l&&g(" BEFORE runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),P.then(_=>(l&&g(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),this.exit(S),_)).catch(_=>{throw _[a]=S,l&&g(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),this.exit(S),_})},d.prototype.bind=function(b,S){S||(this.active?S=this.active:S=this.createContext());let P=this;return function(){P.enter(S);try{return b.apply(this,arguments)}catch(_){throw _&&(_[a]=S),_}finally{P.exit(S)}}},d.prototype.enter=function(b){n.ok(b,"context must be provided for entering"),l&&g("  ENTER "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+r.inspect(b)),this._set.push(this.active),this.active=b},d.prototype.exit=function(b){if(n.ok(b,"context must be provided for exiting"),l&&g("  EXIT "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+r.inspect(b)),this.active===b){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let S=this._set.lastIndexOf(b);S<0?(l&&g("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(b)),n.ok(S>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(b))):(n.ok(S,"can't remove top context"),this._set.splice(S,1))},d.prototype.bindEmitter=function(b){n.ok(b.on&&b.addListener&&b.emit,"can only bind real EEs");let S=this,P="context@"+this.name;function _(T){!T||(T[s]||(T[s]=Object.create(null)),T[s][P]={namespace:S,context:S.active})}function k(T){if(!(T&&T[s]))return T;let A=T,M=T[s];return Object.keys(M).forEach(function(H){let J=M[H];A=J.namespace.bind(A,J.context)}),A}i(b,_,k)},d.prototype.fromException=function(b){return b[a]};function f(b){return process.namespaces[b]}function p(b){n.ok(b,"namespace must be given a name."),l&&g("CREATING NAMESPACE "+b);let S=new d(b);return S.id=u,o.addHooks({init(P,_,k,T,A){u=P,T?(S._contexts.set(P,S._contexts.get(T)),l&&g("PARENTID: "+b+" uid:"+P+" parent:"+T+" provider:"+k)):S._contexts.set(u,S.active),l&&g("INIT "+b+" uid:"+P+" parent:"+T+" provider:"+c[k]+" active:"+r.inspect(S.active,!0))},pre(P,_){u=P;let k=S._contexts.get(P);k?(l&&g(" PRE "+b+" uid:"+P+" handle:"+v(_)+" context:"+r.inspect(k)),S.enter(k)):l&&g(" PRE MISSING CONTEXT "+b+" uid:"+P+" handle:"+v(_))},post(P,_){u=P;let k=S._contexts.get(P);k?(l&&g(" POST "+b+" uid:"+P+" handle:"+v(_)+" context:"+r.inspect(k)),S.exit(k)):l&&g(" POST MISSING CONTEXT "+b+" uid:"+P+" handle:"+v(_))},destroy(P){u=P,l&&g("DESTROY "+b+" uid:"+P+" context:"+r.inspect(S._contexts.get(u))+" active:"+r.inspect(S.active,!0)),S._contexts.delete(P)}}),process.namespaces[b]=S,S}function h(b){let S=f(b);n.ok(S,`can't delete nonexistent namespace! "`+b+'"'),n.ok(S.id,"don't assign to process.namespaces directly! "+r.inspect(S)),process.namespaces[b]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(b){h(b)}),process.namespaces=Object.create(null)}process.namespaces={},o._state&&!o._state.enabled&&o.enable();function g(b){process.env.DEBUG&&process._rawDebug(b)}function v(b){if(!b)return b;if(typeof b=="function")return b.name?b.name:(b.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(b.constructor&&b.constructor.name)return b.constructor.name}if(l){w=ZL();for(C in w.filter._modifiers)w.filter.deattach(C)}var w,C}),kZ=O((t,e)=>{"use strict";var r=vZ();process&&r.gte(process.versions.node,"8.0.0")?e.exports=yZ():e.exports=PZ()}),IZ=O((t,e)=>{t=e.exports=Q;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var C=c++;a[C]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var b=c++,S="v?"+a[f]+a[g]+"?"+a[C]+"?";a[b]="^"+S+"$";var P="[v=\\s]*"+a[p]+a[v]+"?"+a[C]+"?",_=c++;a[_]="^"+P+"$";var k=c++;a[k]="((?:<|>)?=?)";var T=c++;a[T]=a[u]+"|x|X|\\*";var A=c++;a[A]=a[l]+"|x|X|\\*";var M=c++;a[M]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[g]+")?"+a[C]+"?)?)?";var H=c++;a[H]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[v]+")?"+a[C]+"?)?)?";var J=c++;a[J]="^"+a[k]+"\\s*"+a[M]+"$";var K=c++;a[K]="^"+a[k]+"\\s*"+a[H]+"$";var oe=c++;a[oe]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var te=c++;a[te]="(?:~>?)";var F=c++;a[F]="(\\s*)"+a[te]+"\\s+",s[F]=new RegExp(a[F],"g");var L="$1~",q=c++;a[q]="^"+a[te]+a[M]+"$";var G=c++;a[G]="^"+a[te]+a[H]+"$";var z=c++;a[z]="(?:\\^)";var ie=c++;a[ie]="(\\s*)"+a[z]+"\\s+",s[ie]=new RegExp(a[ie],"g");var ne="$1^",be=c++;a[be]="^"+a[z]+a[M]+"$";var Pe=c++;a[Pe]="^"+a[z]+a[H]+"$";var Se=c++;a[Se]="^"+a[k]+"\\s*("+P+")$|^$";var De=c++;a[De]="^"+a[k]+"\\s*("+S+")$|^$";var pe=c++;a[pe]="(\\s*)"+a[k]+"\\s*("+P+"|"+a[M]+")",s[pe]=new RegExp(a[pe],"g");var vt="$1$2$3",Pt=c++;a[Pt]="^\\s*("+a[M]+")\\s+-\\s+("+a[M]+")\\s*$";var ye=c++;a[ye]="^\\s*("+a[H]+")\\s+-\\s+("+a[H]+")\\s*$";var fe=c++;for(a[fe]="(<|>)?=?\\s*\\*",Ce=0;Ce<c;Ce++)r(Ce,a[Ce]),s[Ce]||(s[Ce]=new RegExp(a[Ce]));var Ce;t.parse=$e;function $e(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q)return y;if(typeof y!="string"||y.length>n)return null;var x=E.loose?s[_]:s[b];if(!x.test(y))return null;try{return new Q(y,E)}catch{return null}}t.valid=Ko;function Ko(y,E){var x=$e(y,E);return x?x.version:null}t.clean=Yo;function Yo(y,E){var x=$e(y.trim().replace(/^[=v]+/,""),E);return x?x.version:null}t.SemVer=Q;function Q(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q){if(y.loose===E.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Q))return new Q(y,E);r("SemVer",y,E),this.options=E,this.loose=!!E.loose;var x=y.trim().match(E.loose?s[_]:s[b]);if(!x)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(R){if(/^[0-9]+$/.test(R)){var N=+R;if(N>=0&&N<i)return N}return R}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof Q||(y=new Q(y,this.options)),this.compareMain(y)||this.comparePre(y)},Q.prototype.compareMain=function(y){return y instanceof Q||(y=new Q(y,this.options)),at(this.major,y.major)||at(this.minor,y.minor)||at(this.patch,y.patch)},Q.prototype.comparePre=function(y){if(y instanceof Q||(y=new Q(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var E=0;do{var x=this.prerelease[E],R=y.prerelease[E];if(r("prerelease compare",E,x,R),x===void 0&&R===void 0)return 0;if(R===void 0)return 1;if(x===void 0)return-1;if(x!==R)return at(x,R)}while(++E)},Q.prototype.inc=function(y,E){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},t.inc=Jo;function Jo(y,E,x,R){typeof x=="string"&&(R=x,x=void 0);try{return new Q(y,x).inc(E,R).version}catch{return null}}t.diff=Qo;function Qo(y,E){if(gr(y,E))return null;var x=$e(y),R=$e(E),N="";if(x.prerelease.length||R.prerelease.length){N="pre";var j="prerelease"}for(var B in x)if((B==="major"||B==="minor"||B==="patch")&&x[B]!==R[B])return N+B;return j}t.compareIdentifiers=at;var Tr=/^[0-9]+$/;function at(y,E){var x=Tr.test(y),R=Tr.test(E);return x&&R&&(y=+y,E=+E),y===E?0:x&&!R?-1:R&&!x?1:y<E?-1:1}t.rcompareIdentifiers=Gn;function Gn(y,E){return at(E,y)}t.major=cr;function cr(y,E){return new Q(y,E).major}t.minor=zi;function zi(y,E){return new Q(y,E).minor}t.patch=Ki;function Ki(y,E){return new Q(y,E).patch}t.compare=Ve;function Ve(y,E,x){return new Q(y,x).compare(new Q(E,x))}t.compareLoose=Xo;function Xo(y,E){return Ve(y,E,!0)}t.rcompare=Wn;function Wn(y,E,x){return Ve(E,y,x)}t.sort=Yi;function Yi(y,E){return y.sort(function(x,R){return t.compare(x,R,E)})}t.rsort=Ji;function Ji(y,E){return y.sort(function(x,R){return t.rcompare(x,R,E)})}t.gt=bt;function bt(y,E,x){return Ve(y,E,x)>0}t.lt=jt;function jt(y,E,x){return Ve(y,E,x)<0}t.eq=gr;function gr(y,E,x){return Ve(y,E,x)===0}t.neq=zn;function zn(y,E,x){return Ve(y,E,x)!==0}t.gte=Ar;function Ar(y,E,x){return Ve(y,E,x)>=0}t.lte=kt;function kt(y,E,x){return Ve(y,E,x)<=0}t.cmp=It;function It(y,E,x,R){switch(E){case"===":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y===x;case"!==":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y!==x;case"":case"=":case"==":return gr(y,x,R);case"!=":return zn(y,x,R);case">":return bt(y,x,R);case">=":return Ar(y,x,R);case"<":return jt(y,x,R);case"<=":return kt(y,x,R);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=Te;function Te(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Te){if(y.loose===!!E.loose)return y;y=y.value}if(!(this instanceof Te))return new Te(y,E);r("comparator",y,E),this.options=E,this.loose=!!E.loose,this.parse(y),this.semver===Et?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Et={};Te.prototype.parse=function(y){var E=this.options.loose?s[Se]:s[De],x=y.match(E);if(!x)throw new TypeError("Invalid comparator: "+y);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new Q(x[2],this.options.loose):this.semver=Et},Te.prototype.toString=function(){return this.value},Te.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===Et?!0:(typeof y=="string"&&(y=new Q(y,this.options)),It(y,this.operator,this.semver,this.options))},Te.prototype.intersects=function(y,E){if(!(y instanceof Te))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var x;if(this.operator==="")return x=new ae(y.value,E),Jt(this.value,x,E);if(y.operator==="")return x=new ae(this.value,E),Jt(y.semver,x,E);var R=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),j=this.semver.version===y.semver.version,B=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),Z=It(this.semver,"<",y.semver,E)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),X=It(this.semver,">",y.semver,E)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return R||N||j&&B||Z||X},t.Range=ae;function ae(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ae)return y.loose===!!E.loose&&y.includePrerelease===!!E.includePrerelease?y:new ae(y.raw,E);if(y instanceof Te)return new ae(y.value,E);if(!(this instanceof ae))return new ae(y,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ae.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ae.prototype.toString=function(){return this.range},ae.prototype.parseRange=function(y){var E=this.options.loose;y=y.trim();var x=E?s[ye]:s[Pt];y=y.replace(x,is),r("hyphen replace",y),y=y.replace(s[pe],vt),r("comparator trim",y,s[pe]),y=y.replace(s[F],L),y=y.replace(s[ie],ne),y=y.split(/\s+/).join(" ");var R=E?s[Se]:s[De],N=y.split(" ").map(function(j){return En(j,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function(j){return!!j.match(R)})),N=N.map(function(j){return new Te(j,this.options)},this),N},ae.prototype.intersects=function(y,E){if(!(y instanceof ae))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(R){return y.set.some(function(N){return N.every(function(j){return R.intersects(j,E)})})})})},t.toComparators=Qi;function Qi(y,E){return new ae(y,E).set.map(function(x){return x.map(function(R){return R.value}).join(" ").trim().split(" ")})}function En(y,E){return r("comp",y,E),y=es(y,E),r("caret",y),y=Dr(y,E),r("tildes",y),y=rs(y,E),r("xrange",y),y=lr(y,E),r("stars",y),y}function we(y){return!y||y.toLowerCase()==="x"||y==="*"}function Dr(y,E){return y.trim().split(/\s+/).map(function(x){return Zo(x,E)}).join(" ")}function Zo(y,E){var x=E.loose?s[G]:s[q];return y.replace(x,function(R,N,j,B,Z){r("tilde",y,R,N,j,B,Z);var X;return we(N)?X="":we(j)?X=">="+N+".0.0 <"+(+N+1)+".0.0":we(B)?X=">="+N+"."+j+".0 <"+N+"."+(+j+1)+".0":Z?(r("replaceTilde pr",Z),X=">="+N+"."+j+"."+B+"-"+Z+" <"+N+"."+(+j+1)+".0"):X=">="+N+"."+j+"."+B+" <"+N+"."+(+j+1)+".0",r("tilde return",X),X})}function es(y,E){return y.trim().split(/\s+/).map(function(x){return ts(x,E)}).join(" ")}function ts(y,E){r("caret",y,E);var x=E.loose?s[Pe]:s[be];return y.replace(x,function(R,N,j,B,Z){r("caret",y,R,N,j,B,Z);var X;return we(N)?X="":we(j)?X=">="+N+".0.0 <"+(+N+1)+".0.0":we(B)?N==="0"?X=">="+N+"."+j+".0 <"+N+"."+(+j+1)+".0":X=">="+N+"."+j+".0 <"+(+N+1)+".0.0":Z?(r("replaceCaret pr",Z),N==="0"?j==="0"?X=">="+N+"."+j+"."+B+"-"+Z+" <"+N+"."+j+"."+(+B+1):X=">="+N+"."+j+"."+B+"-"+Z+" <"+N+"."+(+j+1)+".0":X=">="+N+"."+j+"."+B+"-"+Z+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?j==="0"?X=">="+N+"."+j+"."+B+" <"+N+"."+j+"."+(+B+1):X=">="+N+"."+j+"."+B+" <"+N+"."+(+j+1)+".0":X=">="+N+"."+j+"."+B+" <"+(+N+1)+".0.0"),r("caret return",X),X})}function rs(y,E){return r("replaceXRanges",y,E),y.split(/\s+/).map(function(x){return ns(x,E)}).join(" ")}function ns(y,E){y=y.trim();var x=E.loose?s[K]:s[J];return y.replace(x,function(R,N,j,B,Z,X){r("xRange",y,R,N,j,B,Z,X);var qe=we(j),Re=qe||we(B),ke=Re||we(Z),_e=ke;return N==="="&&_e&&(N=""),qe?N===">"||N==="<"?R="<0.0.0":R="*":N&&_e?(Re&&(B=0),Z=0,N===">"?(N=">=",Re?(j=+j+1,B=0,Z=0):(B=+B+1,Z=0)):N==="<="&&(N="<",Re?j=+j+1:B=+B+1),R=N+j+"."+B+"."+Z):Re?R=">="+j+".0.0 <"+(+j+1)+".0.0":ke&&(R=">="+j+"."+B+".0 <"+j+"."+(+B+1)+".0"),r("xRange return",R),R})}function lr(y,E){return r("replaceStars",y,E),y.trim().replace(s[fe],"")}function is(y,E,x,R,N,j,B,Z,X,qe,Re,ke,_e){return we(x)?E="":we(R)?E=">="+x+".0.0":we(N)?E=">="+x+"."+R+".0":E=">="+E,we(X)?Z="":we(qe)?Z="<"+(+X+1)+".0.0":we(Re)?Z="<"+X+"."+(+qe+1)+".0":ke?Z="<="+X+"."+qe+"."+Re+"-"+ke:Z="<="+Z,(E+" "+Z).trim()}ae.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new Q(y,this.options));for(var E=0;E<this.set.length;E++)if(os(this.set[E],y,this.options))return!0;return!1};function os(y,E,x){for(var R=0;R<y.length;R++)if(!y[R].test(E))return!1;if(E.prerelease.length&&!x.includePrerelease){for(R=0;R<y.length;R++)if(r(y[R].semver),y[R].semver!==Et&&y[R].semver.prerelease.length>0){var N=y[R].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=Jt;function Jt(y,E,x){try{E=new ae(E,x)}catch{return!1}return E.test(y)}t.maxSatisfying=ss;function ss(y,E,x){var R=null,N=null;try{var j=new ae(E,x)}catch{return null}return y.forEach(function(B){j.test(B)&&(!R||N.compare(B)===-1)&&(R=B,N=new Q(R,x))}),R}t.minSatisfying=as;function as(y,E,x){var R=null,N=null;try{var j=new ae(E,x)}catch{return null}return y.forEach(function(B){j.test(B)&&(!R||N.compare(B)===1)&&(R=B,N=new Q(R,x))}),R}t.minVersion=Wr;function Wr(y,E){y=new ae(y,E);var x=new Q("0.0.0");if(y.test(x)||(x=new Q("0.0.0-0"),y.test(x)))return x;x=null;for(var R=0;R<y.set.length;++R){var N=y.set[R];N.forEach(function(j){var B=new Q(j.semver.version);switch(j.operator){case">":B.prerelease.length===0?B.patch++:B.prerelease.push(0),B.raw=B.format();case"":case">=":(!x||bt(x,B))&&(x=B);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+j.operator)}})}return x&&y.test(x)?x:null}t.validRange=cs;function cs(y,E){try{return new ae(y,E).range||"*"}catch{return null}}t.ltr=ls;function ls(y,E,x){return Rr(y,E,"<",x)}t.gtr=us;function us(y,E,x){return Rr(y,E,">",x)}t.outside=Rr;function Rr(y,E,x,R){y=new Q(y,R),E=new ae(E,R);var N,j,B,Z,X;switch(x){case">":N=bt,j=kt,B=jt,Z=">",X=">=";break;case"<":N=jt,j=Ar,B=bt,Z="<",X="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Jt(y,E,R))return!1;for(var qe=0;qe<E.set.length;++qe){var Re=E.set[qe],ke=null,_e=null;if(Re.forEach(function(Je){Je.semver===Et&&(Je=new Te(">=0.0.0")),ke=ke||Je,_e=_e||Je,N(Je.semver,ke.semver,R)?ke=Je:B(Je.semver,_e.semver,R)&&(_e=Je)}),ke.operator===Z||ke.operator===X||(!_e.operator||_e.operator===Z)&&j(y,_e.semver)||_e.operator===X&&B(y,_e.semver))return!1}return!0}t.prerelease=ds;function ds(y,E){var x=$e(y,E);return x&&x.prerelease.length?x.prerelease:null}t.intersects=zr;function zr(y,E,x){return y=new ae(y,x),E=new ae(E,x),y.intersects(E)}t.coerce=fs;function fs(y){if(y instanceof Q)return y;if(typeof y!="string")return null;var E=y.match(s[oe]);return E==null?null:$e(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),TZ=O((t,e)=>{var r=wb().wrap,n=1<<0,i=1<<1,o=1<<2,s=1<<3,a=[],c=0,l=!1,u=[],d,f;function p(_,k){var T=_.length,A=k.length,M=[];if(T===0&&A===0)return M;for(var H=0;H<T;H++)M[H]=_[H];if(A===0)return M;for(var J=0;J<A;J++){var K=!0;for(H=0;H<T;H++)if(_[H].uid===k[J].uid){K=!1;break}K&&M.push(k[J])}return M}process._fatalException?(h=!1,d=function(_){var k=a.length;if(h||k===0)return!1;var T=!1;h=!0;for(var A=0;A<k;++A){var M=a[A];if((M.flags&s)!=0){var H=m&&m[M.uid];T=M.error(H,_)||T}}return h=!1,u.length>0&&(a=u.pop()),m=void 0,T&&!l},f=function(_,k,T){var A=[];l=!0;for(var M=0;M<T;++M){var H=k[M];if(A[H.uid]=H.data,(H.flags&n)!=0){var J=H.create(H.data);J!==void 0&&(A[H.uid]=J)}}return l=!1,function(){m=A,u.push(a),a=p(k,a),l=!0;for(var K=0;K<T;++K)(k[K].flags&i)>0&&k[K].before(this,A[k[K].uid]);l=!1;var oe=_.apply(this,arguments);for(l=!0,K=0;K<T;++K)(k[K].flags&o)>0&&k[K].after(this,A[k[K].uid]);return l=!1,a=u.pop(),m=void 0,oe}},r(process,"_fatalException",function(_){return function(k){return d(k)||_(k)}})):(g=!1,d=function(_){if(g)throw _;for(var k=!1,T=a.length,A=0;A<T;++A){var M=a[A];(M.flags&s)!=0&&(k=M.error(null,_)||k)}if(!k&&l)throw _},f=function(_,k,T){var A=[];l=!0;for(var M=0;M<T;++M){var H=k[M];if(A[H.uid]=H.data,(H.flags&n)!=0){var J=H.create(H.data);J!==void 0&&(A[H.uid]=J)}}return l=!1,function(){var K=!1,oe=!1;u.push(a),a=p(k,a),l=!0;for(var te=0;te<T;++te)(k[te].flags&i)>0&&k[te].before(this,A[k[te].uid]);l=!1;var F;try{F=_.apply(this,arguments)}catch(L){K=!0;for(var te=0;te<T;++te)if((a[te].flags&s)!=0)try{oe=a[te].error(A[k[te].uid],L)||oe}catch(G){throw g=!0,G}if(!oe)throw process.removeListener("uncaughtException",d),process._originalNextTick(function(){process.addListener("uncaughtException",d)}),L}finally{if(!K||oe){for(l=!0,te=0;te<T;++te)(k[te].flags&o)>0&&k[te].after(this,A[k[te].uid]);l=!1}a=u.pop()}return F}},process.addListener("uncaughtException",d));var h,m,g;function v(_,k,T){l=!0;for(var A=0;A<T;++A){var M=k[A];M.create&&M.create(M.data)}return l=!1,function(){u.push(a),a=p(k,a);var H=_.apply(this,arguments);return a=u.pop(),H}}function w(_){var k=a.length;if(k===0)return _;for(var T=a.slice(),A=0;A<k;++A)if(T[A].flags>0)return f(_,T,k);return v(_,T,k)}function C(_,k){typeof _.create=="function"&&(this.create=_.create,this.flags|=n),typeof _.before=="function"&&(this.before=_.before,this.flags|=i),typeof _.after=="function"&&(this.after=_.after,this.flags|=o),typeof _.error=="function"&&(this.error=_.error,this.flags|=s),this.uid=++c,this.data=k===void 0?null:k}C.prototype.create=void 0,C.prototype.before=void 0,C.prototype.after=void 0,C.prototype.error=void 0,C.prototype.data=void 0,C.prototype.uid=0,C.prototype.flags=0;function b(_,k){if(typeof _!="object"||!_)throw new TypeError("callbacks argument must be an object");return _ instanceof C?_:new C(_,k)}function S(_,k){var T;_ instanceof C?T=_:T=b(_,k);for(var A=!1,M=0;M<a.length;M++)if(T===a[M]){A=!0;break}return A||a.push(T),T}function P(_){for(var k=0;k<a.length;k++)if(_===a[k]){a.splice(k,1);break}}process.createAsyncListener=b,process.addAsyncListener=S,process.removeAsyncListener=P,e.exports=w}),AZ=O((t,e)=>{"use strict";e.exports=(r,n)=>class extends r{constructor(i){var o,s;super(c);var a=this;try{i.apply(o,s)}catch(l){s[1](l)}return a;function c(l,u){o=this,s=[d,f];function d(p){return n(a,!1),l(p)}function f(p){return n(a,!1),u(p)}}}}}),DZ=O(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var t=wb(),e=IZ(),r=t.wrap,n=t.massWrap,i=TZ(),o=require("util"),s=e.gte(process.version,"6.0.0"),a=e.gte(process.version,"7.0.0"),c=e.gte(process.version,"8.0.0"),l=e.gte(process.version,"11.0.0"),u=require("net");a&&!u._normalizeArgs?u._normalizeArgs=function(F){if(F.length===0)return[{},null];var L=F[0],q={};typeof L=="object"&&L!==null?q=L:te(L)?q.path=L:(q.port=L,F.length>1&&typeof F[1]=="string"&&(q.host=F[1]));var G=F[F.length-1];return typeof G!="function"?[q,null]:[q,G]}:!a&&!u._normalizeConnectArgs&&(u._normalizeConnectArgs=function(F){var L={};function q(z){return(z=Number(z))>=0?z:!1}typeof F[0]=="object"&&F[0]!==null?L=F[0]:typeof F[0]=="string"&&q(F[0])===!1?L.path=F[0]:(L.port=F[0],typeof F[1]=="string"&&(L.host=F[1]));var G=F[F.length-1];return typeof G=="function"?[L,G]:[L]}),"_setUpListenHandle"in u.Server.prototype?r(u.Server.prototype,"_setUpListenHandle",d):r(u.Server.prototype,"_listen2",d);function d(F){return function(){this.on("connection",function(L){L._handle&&(L._handle.onread=i(L._handle.onread))});try{return F.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=i(this._handle.onconnection))}}}function f(F){if(F&&F._handle){var L=F._handle;L._originalOnread||(L._originalOnread=L.onread),L.onread=i(L._originalOnread)}}r(u.Socket.prototype,"connect",function(F){return function(){var L;c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?L=arguments[0]:L=a?u._normalizeArgs(arguments):u._normalizeConnectArgs(arguments),L[1]&&(L[1]=i(L[1]));var q=F.apply(this,L);return f(this),q}});var p=require("http");r(p.Agent.prototype,"addRequest",function(F){return function(L){var q=L.onSocket;return L.onSocket=i(function(G){return f(G),q.apply(this,arguments)}),F.apply(this,arguments)}});var h=require("child_process");function m(F){Array.isArray(F.stdio)&&F.stdio.forEach(function(L){L&&L._handle&&(L._handle.onread=i(L._handle.onread),r(L._handle,"close",K))}),F._handle&&(F._handle.onexit=i(F._handle.onexit))}h.ChildProcess?r(h.ChildProcess.prototype,"spawn",function(F){return function(){var L=F.apply(this,arguments);return m(this),L}}):n(h,["execFile","fork","spawn"],function(F){return function(){var L=F.apply(this,arguments);return m(L),L}}),process._fatalException||(process._originalNextTick=process.nextTick);var g=[];process._nextDomainTick&&g.push("_nextDomainTick"),process._tickDomainCallback&&g.push("_tickDomainCallback"),n(process,g,J),r(process,"nextTick",K);var v=["setTimeout","setInterval"];global.setImmediate&&v.push("setImmediate");var w=require("timers"),C=global.setTimeout===w.setTimeout;n(w,v,K),C&&n(global,v,K);var b=require("dns");n(b,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],J),b.resolveNaptr&&r(b,"resolveNaptr",J);var S=require("fs");n(S,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],J),S.lchown&&r(S,"lchown",J),S.lchmod&&r(S,"lchmod",J),S.ftruncate&&r(S,"ftruncate",J);var P;try{P=require("zlib")}catch{}P&&P.Deflate&&P.Deflate.prototype&&(_=Object.getPrototypeOf(P.Deflate.prototype),_._transform?r(_,"_transform",J):_.write&&_.flush&&_.end&&n(_,["write","flush","end"],J));var _,k;try{k=require("crypto")}catch{}k&&(T=["pbkdf2","randomBytes"],l||T.push("pseudoRandomBytes"),n(k,T,J));var T,A=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";A&&(M=process.addAsyncListener({create:function(){A=!1}}),global.Promise.resolve(!0).then(function(){A=!1}),process.removeAsyncListener(M));var M;A&&H();function H(){var F=global.Promise;function L(ne){if(!(this instanceof L))return F(ne);if(typeof ne!="function")return new F(ne);var be,Pe,Se=new F(De);Se.__proto__=L.prototype;try{ne.apply(be,Pe)}catch(pe){Pe[1](pe)}return Se;function De(pe,vt){be=this,Pe=[Pt,ye];function Pt(fe){return G(Se,!1),pe(fe)}function ye(fe){return G(Se,!1),vt(fe)}}}if(o.inherits(L,F),r(F.prototype,"then",ie),F.prototype.chain&&r(F.prototype,"chain",ie),s)global.Promise=AZ()(F,G);else{var q=["all","race","reject","resolve","accept","defer"];q.forEach(function(ne){typeof F[ne]=="function"&&(L[ne]=F[ne])}),global.Promise=L}function G(ne,be){(!ne.__asl_wrapper||be)&&(ne.__asl_wrapper=i(z))}function z(ne,be,Pe,Se){var De;try{return De=be.call(ne,Pe),{returnVal:De,error:!1}}catch(pe){return{errorVal:pe,error:!0}}finally{De instanceof F?Se.__asl_wrapper=function(){var pe=De.__asl_wrapper||z;return pe.apply(this,arguments)}:G(Se,!0)}}function ie(ne){return function(){var be=this,Pe=ne.apply(be,Array.prototype.map.call(arguments,Se));return Pe.__asl_wrapper=function(De,pe,vt,Pt){return be.__asl_wrapper?(be.__asl_wrapper(De,function(){},null,Pe),Pe.__asl_wrapper(De,pe,vt,Pt)):z(De,pe,vt,Pt)},Pe;function Se(De){return typeof De!="function"?De:i(function(pe){var vt=(be.__asl_wrapper||z)(this,De,pe,Pe);if(vt.error)throw vt.errorVal;return vt.returnVal})}}}}function J(F){var L=function(){var q,G=arguments.length-1;if(typeof arguments[G]=="function"){q=Array(arguments.length);for(var z=0;z<arguments.length-1;z++)q[z]=arguments[z];q[G]=i(arguments[G])}return F.apply(this,q||arguments)};switch(F.length){case 1:return function(q){return arguments.length!==1?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q))};case 2:return function(q,G){return arguments.length!==2?L.apply(this,arguments):(typeof G=="function"&&(G=i(G)),F.call(this,q,G))};case 3:return function(q,G,z){return arguments.length!==3?L.apply(this,arguments):(typeof z=="function"&&(z=i(z)),F.call(this,q,G,z))};case 4:return function(q,G,z,ie){return arguments.length!==4?L.apply(this,arguments):(typeof ie=="function"&&(ie=i(ie)),F.call(this,q,G,z,ie))};case 5:return function(q,G,z,ie,ne){return arguments.length!==5?L.apply(this,arguments):(typeof ne=="function"&&(ne=i(ne)),F.call(this,q,G,z,ie,ne))};case 6:return function(q,G,z,ie,ne,be){return arguments.length!==6?L.apply(this,arguments):(typeof be=="function"&&(be=i(be)),F.call(this,q,G,z,ie,ne,be))};default:return L}}function K(F){var L=function(){var q;if(typeof arguments[0]=="function"){q=Array(arguments.length),q[0]=i(arguments[0]);for(var G=1;G<arguments.length;G++)q[G]=arguments[G]}return F.apply(this,q||arguments)};switch(F.length){case 1:return function(q){return arguments.length!==1?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q))};case 2:return function(q,G){return arguments.length!==2?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q,G))};case 3:return function(q,G,z){return arguments.length!==3?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q,G,z))};case 4:return function(q,G,z,ie){return arguments.length!==4?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q,G,z,ie))};case 5:return function(q,G,z,ie,ne){return arguments.length!==5?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q,G,z,ie,ne))};case 6:return function(q,G,z,ie,ne,be){return arguments.length!==6?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),F.call(this,q,G,z,ie,ne,be))};default:return L}}function oe(F){return(F=Number(F))>=0?F:!1}function te(F){return typeof F=="string"&&oe(F)===!1}}),RZ=O((t,e)=>{"use strict";var r=require("assert"),n=Cb(),i="cls@contexts",o="error@context";process.addAsyncListener||DZ();function s(d){this.name=d,this.active=null,this._set=[],this.id=null}s.prototype.set=function(d,f){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[d]=f,f},s.prototype.get=function(d){if(this.active)return this.active[d]},s.prototype.createContext=function(){return Object.create(this.active)},s.prototype.run=function(d){var f=this.createContext();this.enter(f);try{return d(f),f}catch(p){throw p&&(p[o]=f),p}finally{this.exit(f)}},s.prototype.runAndReturn=function(d){var f;return this.run(function(p){f=d(p)}),f},s.prototype.bind=function(d,f){f||(this.active?f=this.active:f=this.createContext());var p=this;return function(){p.enter(f);try{return d.apply(this,arguments)}catch(h){throw h&&(h[o]=f),h}finally{p.exit(f)}}},s.prototype.enter=function(d){r.ok(d,"context must be provided for entering"),this._set.push(this.active),this.active=d},s.prototype.exit=function(d){if(r.ok(d,"context must be provided for exiting"),this.active===d){r.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var f=this._set.lastIndexOf(d);r.ok(f>=0,"context not currently entered; can't exit"),r.ok(f,"can't remove top context"),this._set.splice(f,1)},s.prototype.bindEmitter=function(d){r.ok(d.on&&d.addListener&&d.emit,"can only bind real EEs");var f=this,p="context@"+this.name;function h(g){!g||(g[i]||(g[i]=Object.create(null)),g[i][p]={namespace:f,context:f.active})}function m(g){if(!(g&&g[i]))return g;var v=g,w=g[i];return Object.keys(w).forEach(function(C){var b=w[C];v=b.namespace.bind(v,b.context)}),v}n(d,h,m)},s.prototype.fromException=function(d){return d[o]};function a(d){return process.namespaces[d]}function c(d){r.ok(d,"namespace must be given a name!");var f=new s(d);return f.id=process.addAsyncListener({create:function(){return f.active},before:function(p,h){h&&f.enter(h)},after:function(p,h){h&&f.exit(h)},error:function(p){p&&f.exit(p)}}),process.namespaces[d]=f,f}function l(d){var f=a(d);r.ok(f,"can't delete nonexistent namespace!"),r.ok(f.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(f.id),process.namespaces[d]=null}function u(){process.namespaces&&Object.keys(process.namespaces).forEach(function(d){l(d)}),process.namespaces=Object.create(null)}process.namespaces||u(),e.exports={getNamespace:a,createNamespace:c,destroyNamespace:l,reset:u}}),Dc=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CorrelationContextManager=void 0;var e=zt(),r=yb(),n=cm(),i=VL(),o=JL(),s=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var l=c.session.get(c.CONTEXT_NAME);return l===void 0?null:l},c.generateContextObject=function(l,u,d,f,p,h){return u=u||l,this.enabled?{operation:{name:d,id:l,parentId:u,traceparent:p,tracestate:h},customProperties:new a(f)}:null},c.spanToContextObject=function(l,u,d){var f=new n;return f.traceId=l.traceId,f.spanId=l.spanId,f.traceFlag=n.formatOpenTelemetryTraceFlags(l.traceFlags)||n.DEFAULT_TRACE_FLAG,f.parentId=u,c.generateContextObject(f.traceId,f.parentId,d,null,f)},c.runWithContext=function(l,u){var d;return c.enabled?c.session.bind(u,(d={},d[c.CONTEXT_NAME]=l,d))():u()},c.wrapEmitter=function(l){c.enabled&&c.session.bindEmitter(l)},c.wrapCallback=function(l,u){var d;return c.enabled?c.session.bind(l,u?(d={},d[c.CONTEXT_NAME]=u,d):void 0):l},c.enable=function(l){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=l,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=kZ():this.cls=RZ()),c.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation(function(u){return c.session.bind(u)})),this.enabled=!0}},c.startOperation=function(l,u){var d=l&&l.traceContext||null,f=l&&l.traceId?l:null,p=l&&l.headers;if(f){var h=new n("00-"+f.traceId+"-"+f.spanId+"-01"),m=new i(f.traceState?f.traceState.serialize():null),g=c.generateContextObject(f.traceId,"|"+f.traceId+"."+f.spanId+".",typeof u=="string"?u:"",void 0,h,m);return g}if(d){var h=new n(d.traceparent),m=new i(d.tracestate),v=typeof u=="object"?new o(u):null,g=c.generateContextObject(h.traceId,h.parentId,typeof u=="string"?u:v.getOperationName({}),v&&v.getCorrelationContextHeader()||void 0,h,m);return g}if(p){var h=new n(p.traceparent?p.traceparent.toString():null),m=new i(p.tracestate?p.tracestate.toString():null),v=new o(l),g=c.generateContextObject(h.traceId,h.parentId,v.getOperationName({}),v.getCorrelationContextHeader(),h,m);return g}return e.warn("startOperation was called with invalid arguments",arguments),null},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var l=process.versions.node.split(".");return parseInt(l[0])>3||parseInt(l[0])>2&&parseInt(l[1])>2},c.shouldUseClsHooked=function(){var l=process.versions.node.split(".");return parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=2},c.canUseClsHooked=function(){var l=process.versions.node.split("."),u=parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=0,d=parseInt(l[0])<8||parseInt(l[0])<=8&&parseInt(l[1])<2,f=parseInt(l[0])>4||parseInt(l[0])>=4&&parseInt(l[1])>=7;return!(u&&d)&&f},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();t.CorrelationContextManager=s;var a=function(){function c(l){this.props=[],this.addHeaderData(l)}return c.prototype.addHeaderData=function(l){var u=l?l.split(", "):[];this.props=u.map(function(d){var f=d.split("=");return{key:f[0],value:f[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(l){return l.key+"="+l.value}).join(", ")},c.prototype.getProperty=function(l){for(var u=0;u<this.props.length;++u){var d=this.props[u];if(d.key===l)return d.value}},c.prototype.setProperty=function(l,u){if(c.bannedCharacters.test(l)||c.bannedCharacters.test(u)){e.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+l+" and value: "+u);return}for(var d=0;d<this.props.length;++d){var f=this.props[d];if(f.key===l){f.value=u;return}}this.props.push({key:l,value:u})},c.bannedCharacters=/[,=]/,c}()}),OZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=xr(),r=St(),n=[],i=function(a){var c=a.data.message;n.forEach(function(l){c instanceof Error?l.trackException({exception:c}):(c.lastIndexOf(`
`)==c.length-1&&(c=c.substring(0,c.length-1)),l.trackTrace({message:c,severity:a.data.stderr?e.SeverityLevel.Warning:e.SeverityLevel.Information}))})};function o(a,c){a?(n.length===0&&r.channel.subscribe("console",i),n.push(c)):(n=n.filter(function(l){return l!=c}),n.length===0&&r.channel.unsubscribe("console",i))}t.enable=o;function s(){r.channel.unsubscribe("console",i),n=[]}t.dispose=s}),NZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=xr(),r=St(),n=[],i={10:e.SeverityLevel.Verbose,20:e.SeverityLevel.Verbose,30:e.SeverityLevel.Information,40:e.SeverityLevel.Warning,50:e.SeverityLevel.Error,60:e.SeverityLevel.Critical},o=function(c){var l=c.data.result;n.forEach(function(u){var d=i[c.data.level];l instanceof Error?u.trackException({exception:l}):u.trackTrace({message:l,severity:d})})};function s(c,l){c?(n.length===0&&r.channel.subscribe("bunyan",o),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&r.channel.unsubscribe("bunyan",o))}t.enable=s;function a(){r.channel.unsubscribe("bunyan",o),n=[]}t.dispose=a}),LZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=xr(),r=St(),n=[],i={syslog:function(c){var l={emerg:e.SeverityLevel.Critical,alert:e.SeverityLevel.Critical,crit:e.SeverityLevel.Critical,error:e.SeverityLevel.Error,warning:e.SeverityLevel.Warning,notice:e.SeverityLevel.Information,info:e.SeverityLevel.Information,debug:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},npm:function(c){var l={error:e.SeverityLevel.Error,warn:e.SeverityLevel.Warning,info:e.SeverityLevel.Information,verbose:e.SeverityLevel.Verbose,debug:e.SeverityLevel.Verbose,silly:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},unknown:function(c){return e.SeverityLevel.Information}},o=function(c){var l=c.data.message;n.forEach(function(u){if(l instanceof Error)u.trackException({exception:l,properties:c.data.meta});else{var d=i[c.data.levelKind](c.data.level);u.trackTrace({message:l,severity:d,properties:c.data.meta})}})};function s(c,l){c?(n.length===0&&r.channel.subscribe("winston",o),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&r.channel.unsubscribe("winston",o))}t.enable=s;function a(){r.channel.unsubscribe("winston",o),n=[]}t.dispose=a}),FZ=O((t,e)=>{"use strict";var r=yb(),n=function(){function i(o){if(i.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=o,i.INSTANCE=this}return i.prototype.enable=function(o,s){r.IsInitialized&&(OZ().enable(o&&s,this._client),NZ().enable(o,this._client),LZ().enable(o,this._client))},i.prototype.isInitialized=function(){return this._isInitialized},i.prototype.dispose=function(){i.INSTANCE=null,this.enable(!1,!1)},i._methodNames=["debug","info","log","warn","error"],i}();e.exports=n}),MZ=O((t,e)=>{"use strict";var r=function(){function n(i){if(n.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");n.INSTANCE=this,this._client=i;var o=process.versions.node.split(".");n._canUseUncaughtExceptionMonitor=parseInt(o[0])>13||parseInt(o[0])===13&&parseInt(o[1])>=7}return n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.enable=function(i){var o=this;if(i){this._isInitialized=!0;var s=this;if(!this._exceptionListenerHandle){var a=function(c,l,u){u===void 0&&(u=new Error(n._FALLBACK_ERROR_MESSAGE)),o._client.trackException({exception:u}),o._client.flush({isAppCrashing:!0}),c&&l&&process.listeners(l).length===1&&(console.error(u),process.exit(1))};n._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=a.bind(this,!0,n.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(n._canUseUncaughtExceptionMonitor?process.removeListener(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n.INSTANCE=null,n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",n.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",n.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",n._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",n._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",n._canUseUncaughtExceptionMonitor=!1,n}();e.exports=r}),Oo=O(t=>{"use strict";var e;Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeatMetricName=t.DependencyTypeName=t.SpanAttribute=t.TelemetryTypeStringToQuickPulseDocumentType=t.TelemetryTypeStringToQuickPulseType=t.QuickPulseType=t.QuickPulseDocumentType=t.PerformanceToQuickPulseCounter=t.MetricId=t.PerformanceCounter=t.QuickPulseCounter=t.DEFAULT_LIVEMETRICS_HOST=t.DEFAULT_LIVEMETRICS_ENDPOINT=t.DEFAULT_BREEZE_ENDPOINT=void 0,t.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var r;(function(o){o.COMMITTED_BYTES="\\Memory\\Committed Bytes",o.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",o.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",o.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",o.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",o.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",o.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",o.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",o.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(r=t.QuickPulseCounter||(t.QuickPulseCounter={}));var n;(function(o){o.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",o.AVAILABLE_BYTES="\\Memory\\Available Bytes",o.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",o.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",o.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",o.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(n=t.PerformanceCounter||(t.PerformanceCounter={}));var i;(function(o){o.REQUESTS_DURATION="requests/duration",o.DEPENDENCIES_DURATION="dependencies/duration",o.EXCEPTIONS_COUNT="exceptions/count",o.TRACES_COUNT="traces/count"})(i=t.MetricId||(t.MetricId={})),t.PerformanceToQuickPulseCounter=(e={},e[n.PROCESSOR_TIME]=r.PROCESSOR_TIME,e[n.REQUEST_RATE]=r.REQUEST_RATE,e[n.REQUEST_DURATION]=r.REQUEST_DURATION,e[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,e[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,e[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,e[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,e[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,e[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,e),t.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},t.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},t.TelemetryTypeStringToQuickPulseType={EventData:t.QuickPulseType.Event,ExceptionData:t.QuickPulseType.Exception,MessageData:t.QuickPulseType.Trace,MetricData:t.QuickPulseType.Metric,RequestData:t.QuickPulseType.Request,RemoteDependencyData:t.QuickPulseType.Dependency,AvailabilityData:t.QuickPulseType.Availability,PageViewData:t.QuickPulseType.PageView},t.TelemetryTypeStringToQuickPulseDocumentType={EventData:t.QuickPulseDocumentType.Event,ExceptionData:t.QuickPulseDocumentType.Exception,MessageData:t.QuickPulseDocumentType.Trace,MetricData:t.QuickPulseDocumentType.Metric,RequestData:t.QuickPulseDocumentType.Request,RemoteDependencyData:t.QuickPulseDocumentType.Dependency,AvailabilityData:t.QuickPulseDocumentType.Availability,PageViewData:t.QuickPulseDocumentType.PageView},t.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},t.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},t.HeartBeatMetricName="HeartBeat"}),bb=O((t,e)=>{"use strict";var r=require("os"),n=Oo(),i=function(){function o(s,a,c){a===void 0&&(a=6e4),c===void 0&&(c=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,o.INSTANCE||(o.INSTANCE=this),this._isInitialized=!1,this._client=s,this._collectionInterval=a,this._enableLiveMetricsCounters=c}return o.prototype.enable=function(s,a){var c=this;this._isEnabled=s,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),s?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:o._totalRequestCount,totalFailedRequestCount:o._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:o._totalDependencyCount,totalFailedDependencyCount:o._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:o._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=a||this._collectionInterval,this._handle=setInterval(function(){return c.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},o.countRequest=function(s,a){var c;if(o.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;o._intervalRequestExecutionTime+=c,a===!1&&o._totalFailedRequestCount++,o._totalRequestCount++}},o.countException=function(){o._totalExceptionCount++},o.countDependency=function(s,a){var c;if(o.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;o._intervalDependencyExecutionTime+=c,a===!1&&o._totalFailedDependencyCount++,o._totalDependencyCount++}},o.prototype.isInitialized=function(){return this._isInitialized},o.isEnabled=function(){return o.INSTANCE&&o.INSTANCE._isEnabled},o.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},o.prototype._trackCpu=function(){var s=r.cpus();if(s&&s.length&&this._lastCpus&&s.length===this._lastCpus.length){for(var a=0,c=0,l=0,u=0,d=0,f=0;!!s&&f<s.length;f++){var p=s[f],h=this._lastCpus[f],m="% cpu("+f+") ",g=p.model,v=p.speed,w=p.times,C=h.times,b=w.user-C.user||0;a+=b;var S=w.sys-C.sys||0;c+=S;var P=w.nice-C.nice||0;l+=P;var _=w.idle-C.idle||0;u+=_;var k=w.irq-C.irq||0;d+=k}var T=void 0;if(typeof process.cpuUsage=="function"){var A=process.cpuUsage(),M=process.hrtime(),H=A.user-this._lastAppCpuUsage.user+(A.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var J=(M[0]-this._lastHrtime[0])*1e6+(M[1]-this._lastHrtime[1])/1e3||0;T=100*H/(J*s.length)}this._lastAppCpuUsage=A,this._lastHrtime=M}var K=a+c+l+u+d||1;this._client.trackMetric({name:n.PerformanceCounter.PROCESSOR_TIME,value:(K-u)/K*100}),this._client.trackMetric({name:n.PerformanceCounter.PROCESS_TIME,value:T||a/K*100})}this._lastCpus=s},o.prototype._trackMemory=function(){var s=r.freemem(),a=process.memoryUsage().rss,c=r.totalmem()-s;this._client.trackMetric({name:n.PerformanceCounter.PRIVATE_BYTES,value:a}),this._client.trackMetric({name:n.PerformanceCounter.AVAILABLE_BYTES,value:s}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.COMMITTED_BYTES,value:c})},o.prototype._trackNetwork=function(){var s=this._lastRequests,a={totalRequestCount:o._totalRequestCount,totalFailedRequestCount:o._totalFailedRequestCount,time:+new Date},c=a.totalRequestCount-s.totalRequestCount||0,l=a.totalFailedRequestCount-s.totalFailedRequestCount||0,u=a.time-s.time,d=u/1e3,f=(o._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/c||0;if(this._lastIntervalRequestExecutionTime=o._intervalRequestExecutionTime,u>0){var p=c/d,h=l/d;this._client.trackMetric({name:n.PerformanceCounter.REQUEST_RATE,value:p}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.PerformanceCounter.REQUEST_DURATION,value:f}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.REQUEST_FAILURE_RATE,value:h})}this._lastRequests=a},o.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastDependencies,a={totalDependencyCount:o._totalDependencyCount,totalFailedDependencyCount:o._totalFailedDependencyCount,time:+new Date},c=a.totalDependencyCount-s.totalDependencyCount||0,l=a.totalFailedDependencyCount-s.totalFailedDependencyCount||0,u=a.time-s.time,d=u/1e3,f=(o._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/c||0;if(this._lastIntervalDependencyExecutionTime=o._intervalDependencyExecutionTime,u>0){var p=c/d,h=l/d;this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_RATE,value:p}),this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:h}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_DURATION,value:f})}this._lastDependencies=a}},o.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastExceptions,a={totalExceptionCount:o._totalExceptionCount,time:+new Date},c=a.totalExceptionCount-s.totalExceptionCount||0,l=a.time-s.time,u=l/1e3;if(l>0){var d=c/u;this._client.trackMetric({name:n.QuickPulseCounter.EXCEPTION_RATE,value:d})}this._lastExceptions=a}},o.prototype.dispose=function(){o.INSTANCE=null,this.enable(!1),this._isInitialized=!1},o._totalRequestCount=0,o._totalFailedRequestCount=0,o._totalDependencyCount=0,o._totalFailedDependencyCount=0,o._totalExceptionCount=0,o._intervalDependencyExecutionTime=0,o._intervalRequestExecutionTime=0,o}();e.exports=i}),qZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregatedMetricCounter=void 0;var e=function(){function r(n){this.dimensions=n,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return r}();t.AggregatedMetricCounter=e}),jZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreaggregatedMetricPropertyNames=void 0,t.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),eF=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(a){for(var c,l=1,u=arguments.length;l<u;l++){c=arguments[l];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r.apply(this,arguments)},n=Oo(),i=qZ(),o=jZ(),s=function(){function a(c,l){l===void 0&&(l=6e4),a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,a._dependencyCountersCollection=[],a._requestCountersCollection=[],a._exceptionCountersCollection=[],a._traceCountersCollection=[],this._client=c,this._collectionInterval=l}return a.prototype.enable=function(c,l){var u=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._collectionInterval=l||this._collectionInterval,this._handle=setInterval(function(){return u.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countException=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._exceptionCountersCollection);l.totalCount++}},a.countTrace=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._traceCountersCollection);l.totalCount++}},a.countRequest=function(c,l){if(a.isEnabled()){var u,d=a._getAggregatedCounter(l,this._requestCountersCollection);if(typeof c=="string")u=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")u=c;else return;d.intervalExecutionTime+=u,d.totalCount++}},a.countDependency=function(c,l){if(a.isEnabled()){var u=a._getAggregatedCounter(l,this._dependencyCountersCollection),d;if(typeof c=="string")d=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")d=c;else return;u.intervalExecutionTime+=d,u.totalCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},a._getAggregatedCounter=function(c,l){for(var u=!1,d=0;d<l.length;d++){if(c===l[d].dimensions)return l[d];if(Object.keys(c).length===Object.keys(l[d].dimensions).length){for(var f in c)if(c[f]!=l[d].dimensions[f]){u=!0;break}if(!u)return l[d];u=!1}}var p=new i.AggregatedMetricCounter(c);return l.push(p),p},a.prototype._trackRequestMetrics=function(){for(var c=0;c<a._requestCountersCollection.length;c++){var l=a._requestCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime,f=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,d>0&&u>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:l.dimensions,value:f,count:u,aggregationInterval:d,metricType:n.MetricId.REQUESTS_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackDependencyMetrics=function(){for(var c=0;c<a._dependencyCountersCollection.length;c++){var l=a._dependencyCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime,f=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,d>0&&u>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:l.dimensions,value:f,count:u,aggregationInterval:d,metricType:n.MetricId.DEPENDENCIES_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackExceptionMetrics=function(){for(var c=0;c<a._exceptionCountersCollection.length;c++){var l=a._exceptionCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:l.dimensions,value:u,count:u,aggregationInterval:d,metricType:n.MetricId.EXCEPTIONS_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackTraceMetrics=function(){for(var c=0;c<a._traceCountersCollection.length;c++){var l=a._traceCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,d=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:l.dimensions,value:u,count:u,aggregationInterval:d,metricType:n.MetricId.TRACES_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackPreAggregatedMetric=function(c){var l={};for(var u in c.dimensions)l[o.PreaggregatedMetricPropertyNames[u]]=c.dimensions[u];l=r(r({},l),{"_MS.MetricId":c.metricType,"_MS.AggregationIntervalMs":String(c.aggregationInterval),"_MS.IsAutocollected":"True"});var d={name:c.name,value:c.value,count:c.count,properties:l,kind:"Aggregation"};this._client.trackMetric(d)},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a}();e.exports=s}),lm=O((t,e)=>{"use strict";var r=require("os"),n=require("fs"),i=require("path"),o=xr(),s=zt(),a=function(){function c(l){this.keys=new o.ContextTagKeys,this.tags={},this._loadApplicationContext(l),this._loadDeviceContext(),this._loadInternalContext()}return c.prototype._loadApplicationContext=function(l){if(l=l||i.resolve(__dirname,"../../../../package.json"),!c.appVersion[l]){c.appVersion[l]="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.appVersion[l]=u.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.applicationVersion]=c.appVersion[l]},c.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=c.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},c.prototype._loadInternalContext=function(){var l=i.resolve(__dirname,"../../package.json");if(!c.sdkVersion){c.sdkVersion="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.sdkVersion=u.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.internalSdkVersion]="node:"+c.sdkVersion},c.DefaultRoleName="Web",c.appVersion={},c.sdkVersion=null,c}();e.exports=a}),$Z=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var u=function(d,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(p[m]=h[m])},u(d,f)};return function(d,f){u(d,f);function p(){this.constructor=d}d.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}(),n=require("url"),i=xr(),o=gn(),s=Hu(),a=YL(),c=Ac(),l=function(u){r(d,u);function d(f,p){var h=u.call(this)||this;return p&&p.method&&f&&(h.method=p.method,h.url=d._getUrlFromRequestOptions(f,p),h.startTime=+new Date),h}return d.prototype.onError=function(f){this._setStatus(void 0,f)},d.prototype.onResponse=function(f){this._setStatus(f.statusCode,void 0),this.correlationId=o.getCorrelationContextTarget(f,s.requestContextTargetKey)},d.prototype.getDependencyTelemetry=function(f,p){var h=n.parse(this.url);h.search=void 0,h.hash=void 0;var m=this.method.toUpperCase()+" "+h.pathname,g=i.RemoteDependencyDataConstants.TYPE_HTTP,v=h.hostname;h.port&&(v+=":"+h.port),this.correlationId?(g=i.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==c.correlationIdPrefix&&(v+=" | "+this.correlationId)):g=i.RemoteDependencyDataConstants.TYPE_HTTP;var w={id:p,name:m,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:g,target:v};if(f&&f.time?w.time=f.time:this.startTime&&(w.time=new Date(this.startTime)),f){for(var C in f)w[C]||(w[C]=f[C]);if(f.properties)for(var C in f.properties)w.properties[C]=f.properties[C]}return w},d._getUrlFromRequestOptions=function(f,p){if(typeof f=="string")if(f.indexOf("http://")===0||f.indexOf("https://")===0)f=n.parse(f);else{var h=n.parse(f);h.host==="443"?f=n.parse("https://"+f):f=n.parse("http://"+f)}else{if(f&&typeof n.URL=="function"&&f instanceof n.URL)return n.format(f);var m=f;f={},m&&Object.keys(m).forEach(function(w){f[w]=m[w]})}if(f.path){var g=n.parse(f.path);f.pathname=g.pathname,f.search=g.search}if(f.host&&f.port){var v=n.parse("http://"+f.host);!v.port&&f.port&&(f.hostname=f.host,delete f.host)}return f.protocol=f.protocol||p.agent&&p.agent.protocol||p.protocol||void 0,f.hostname=f.hostname||"localhost",n.format(f)},d}(a);e.exports=l}),UZ=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.spanToTelemetryContract=void 0;var r=dt(),n=Oo();function i(s){var a=e({},s);return Object.keys(n.SpanAttribute).forEach(function(c){delete a[c]}),a}function o(s){var a="|"+s.spanContext().traceId+"."+s.spanContext().spanId+".",c=Math.round(s._duration[0]*1e3+s._duration[1]/1e6),l=s.attributes["peer.address"]?s.attributes["peer.address"].toString():"",u=s.attributes.component?s.attributes.component.toString():"",d=u.toUpperCase()===n.DependencyTypeName.Http||!!s.attributes[n.SpanAttribute.HttpUrl],f=u.toLowerCase()===n.DependencyTypeName.Grpc;if(d){var p=s.attributes[n.SpanAttribute.HttpMethod]||"GET",h=new URL(s.attributes[n.SpanAttribute.HttpUrl].toString()),m=s.attributes[n.SpanAttribute.HttpHost]||h.host,g=s.attributes[n.SpanAttribute.HttpPort]||h.port||null,v=h.pathname||"/",w=p+" "+v,C=n.DependencyTypeName.Http,b=g?(m+":"+g).toString():m.toString(),S=h.toString(),P=s.attributes[n.SpanAttribute.HttpStatusCode]||s.status.code||0,_=P<400;return{id:a,name:w,dependencyTypeName:C,target:b,data:S,success:_,duration:c,url:S,resultCode:String(P),properties:i(s.attributes)}}else if(f){var p=s.attributes[n.SpanAttribute.GrpcMethod]||"rpc",k=s.attributes[n.SpanAttribute.GrpcService],T=k?p+" "+k:s.name;return{id:a,duration:c,name:T,target:k.toString(),data:k.toString()||T,url:k.toString()||T,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(s.status.code||0),success:s.status.code===0,properties:i(s.attributes)}}else{var A=s.name,M=s.links&&s.links.map(function(H){return{operation_Id:H.context.traceId,id:H.context.spanId}});return{id:a,duration:c,name:A,target:l,data:l||A,url:l||A,dependencyTypeName:s.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:u||s.name,resultCode:String(s.status.code||0),success:s.status.code===0,properties:e(e({},i(s.attributes)),{"_MS.links":M||void 0})}}}t.spanToTelemetryContract=o}),BZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=dt(),r=St(),n=cm(),i=UZ(),o=gL(),s=[],a=function(l){var u=l.data,d=i.spanToTelemetryContract(u),f=u.spanContext(),p=new n;p.traceId=f.traceId,p.spanId=f.spanId,p.traceFlag=n.formatOpenTelemetryTraceFlags(f.traceFlags),p.parentId=u.parentSpanId?"|"+f.traceId+"."+u.parentSpanId+".":null,o.AsyncScopeManager.with(u,function(){s.forEach(function(h){u.kind===e.SpanKind.SERVER?h.trackRequest(d):(u.kind===e.SpanKind.CLIENT||u.kind===e.SpanKind.INTERNAL)&&h.trackDependency(d)})})};t.subscriber=a;function c(l,u){l?(s.length===0&&r.channel.subscribe("azure-coretracing",t.subscriber),s.push(u)):(s=s.filter(function(d){return d!=u}),s.length===0&&r.channel.unsubscribe("azure-coretracing",t.subscriber))}t.enable=c}),HZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=St(),r=[],n=function(o){o.data.event.commandName!=="ismaster"&&r.forEach(function(s){var a=o.data.startedData&&o.data.startedData.databaseName||"Unknown database";s.trackDependency({target:a,data:o.data.event.commandName,name:o.data.event.commandName,duration:o.data.event.duration,success:o.data.succeeded,resultCode:o.data.succeeded?"0":"1",time:o.data.startedData.time,dependencyTypeName:"mongodb"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("mongodb",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("mongodb",t.subscriber))}t.enable=i}),VZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=St(),r=[],n=function(o){r.forEach(function(s){var a=o.data.query||{},c=a.sql||"Unknown query",l=!o.data.err,u=a._connection||{},d=u.config||{},f=d.socketPath?d.socketPath:(d.host||"localhost")+":"+d.port;s.trackDependency({target:f,data:c,name:c,duration:o.data.duration,success:l,resultCode:l?"0":"1",time:o.data.time,dependencyTypeName:"mysql"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("mysql",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("mysql",t.subscriber))}t.enable=i}),GZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=St(),r=[],n=function(o){r.forEach(function(s){o.data.commandObj.command!=="info"&&s.trackDependency({target:o.data.address,name:o.data.commandObj.command,data:o.data.commandObj.command,duration:o.data.duration,success:!o.data.err,resultCode:o.data.err?"1":"0",time:o.data.time,dependencyTypeName:"redis"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("redis",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("redis",t.subscriber))}t.enable=i}),WZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=St(),r=[],n=function(o){r.forEach(function(s){var a=o.data.query,c=a.preparable&&a.preparable.text||a.plan||a.text||"unknown query",l=!o.data.error,u=o.data.database.host+":"+o.data.database.port;s.trackDependency({target:u,data:c,name:c,duration:o.data.duration,success:l,resultCode:l?"0":"1",time:o.data.time,dependencyTypeName:"postgres"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("postgres",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("postgres",t.subscriber))}t.enable=i}),Vu=O((t,e)=>{"use strict";var r=t&&t.__spreadArrays||function(){for(var h=0,m=0,g=arguments.length;m<g;m++)h+=arguments[m].length;for(var v=Array(h),w=0,m=0;m<g;m++)for(var C=arguments[m],b=0,S=C.length;b<S;b++,w++)v[w]=C[b];return v},n=require("http"),i=require("https"),o=zt(),s=gn(),a=Hu(),c=$Z(),l=Dc(),u=Ac(),d=cm(),f=yb(),p=function(){function h(m){if(h.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");h.INSTANCE=this,this._client=m}return h.prototype.enable=function(m){this._isEnabled=m,this._isEnabled&&!this._isInitialized&&this._initialize(),f.IsInitialized&&(BZ().enable(!0,this._client),HZ().enable(m,this._client),VZ().enable(m,this._client),GZ().enable(m,this._client),WZ().enable(m,this._client))},h.prototype.isInitialized=function(){return this._isInitialized},h.prototype._initialize=function(){var m=this;this._isInitialized=!0;var g=n.request,v=i.request,w=function(C,b){var S=!b[h.disableCollectionRequestOption]&&!C[h.alreadyAutoCollectedFlag];b.headers&&b.headers["user-agent"]&&b.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(S=!1),C[h.alreadyAutoCollectedFlag]=!0,C&&b&&S&&(l.CorrelationContextManager.wrapEmitter(C),h.trackRequest(m._client,{options:b,request:C}))};n.request=function(C){for(var b=[],S=1;S<arguments.length;S++)b[S-1]=arguments[S];var P=g.call.apply(g,r([n,C],b));return w(P,C),P},i.request=function(C){for(var b=[],S=1;S<arguments.length;S++)b[S-1]=arguments[S];var P=v.call.apply(v,r([i,C],b));return w(P,C),P},n.get=function(C){for(var b,S=[],P=1;P<arguments.length;P++)S[P-1]=arguments[P];var _=(b=n.request).call.apply(b,r([n,C],S));return _.end(),_},i.get=function(C){for(var b,S=[],P=1;P<arguments.length;P++)S[P-1]=arguments[P];var _=(b=i.request).call.apply(b,r([i,C],S));return _.end(),_}},h.trackRequest=function(m,g){if(!g.options||!g.request||!m){o.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!g.options,!g.request,!m);return}var v=new c(g.options,g.request),w=l.CorrelationContextManager.getCurrentContext(),C,b;if(w&&w.operation&&w.operation.traceparent&&d.isValidTraceId(w.operation.traceparent.traceId))w.operation.traceparent.updateSpanId(),C=w.operation.traceparent.getBackCompatRequestId();else if(u.w3cEnabled){var S=new d;b=S.toString(),C=S.getBackCompatRequestId()}else C=w&&w.operation&&w.operation.parentId+h.requestNumber+++".";if(s.canIncludeCorrelationHeader(m,v.getUrl())&&g.request.getHeader&&g.request.setHeader&&m.config&&m.config.correlationId){var P=g.request.getHeader(a.requestContextHeader);try{s.safeIncludeCorrelationHeader(m,g.request,P)}catch(T){o.warn("Request-Context header could not be set. Correlation of requests may be lost",T)}if(w&&w.operation)try{if(g.request.setHeader(a.requestIdHeader,C),m.config.ignoreLegacyHeaders||(g.request.setHeader(a.parentIdHeader,w.operation.id),g.request.setHeader(a.rootIdHeader,C)),b||w.operation.traceparent)g.request.setHeader(a.traceparentHeader,b||w.operation.traceparent.toString());else if(u.w3cEnabled){var S=new d().toString();g.request.setHeader(a.traceparentHeader,S)}if(w.operation.tracestate){var _=w.operation.tracestate.toString();_&&g.request.setHeader(a.traceStateHeader,_)}var k=w.customProperties.serializeToHeader();k&&g.request.setHeader(a.correlationContextHeader,k)}catch(T){o.warn("Correlation headers could not be set. Correlation of requests may be lost.",T)}}g.request.on&&(g.request.on("response",function(T){v.onResponse(T);var A=v.getDependencyTelemetry(g,C);A.contextObjects=A.contextObjects||{},A.contextObjects["http.RequestOptions"]=g.options,A.contextObjects["http.ClientRequest"]=g.request,A.contextObjects["http.ClientResponse"]=T,m.trackDependency(A)}),g.request.on("error",function(T){v.onError(T);var A=v.getDependencyTelemetry(g,C);A.contextObjects=A.contextObjects||{},A.contextObjects["http.RequestOptions"]=g.options,A.contextObjects["http.ClientRequest"]=g.request,A.contextObjects.Error=T,m.trackDependency(A)}),g.request.on("abort",function(){v.onError(new Error);var T=v.getDependencyTelemetry(g,C);T.contextObjects=T.contextObjects||{},T.contextObjects["http.RequestOptions"]=g.options,T.contextObjects["http.ClientRequest"]=g.request,m.trackDependency(T)}))},h.prototype.dispose=function(){h.INSTANCE=null,this.enable(!1),this._isInitialized=!1},h.disableCollectionRequestOption="disableAppInsightsAutoCollection",h.requestNumber=1,h.alreadyAutoCollectedFlag="_appInsightsAutoCollected",h}();e.exports=p}),zZ=O((t,e)=>{"use strict";var r=require("os"),n=Oo(),i=gn(),o=lm(),s=Vu(),a="http://169.254.169.254/metadata/instance/compute",c="api-version=2017-12-01",l="format=json",u="ENETUNREACH",d=function(){function f(p){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",f.INSTANCE||(f.INSTANCE=this),this._isInitialized=!1,this._client=p}return f.prototype.enable=function(p,h){var m=this;this._isEnabled=p,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),p?this._handle||(this._handle=setInterval(function(){return m.trackHeartBeat(h,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},f.prototype.isInitialized=function(){return this._isInitialized},f.isEnabled=function(){return f.INSTANCE&&f.INSTANCE._isEnabled},f.prototype.trackHeartBeat=function(p,h){var m=this,g=!1,v={},w=o.sdkVersion;v.sdk=w,v.osType=r.type(),process.env.WEBSITE_SITE_NAME?(v.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",v.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",v.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?v.azfunction_appId=process.env.WEBSITE_HOSTNAME:p&&(this._isVM===void 0?(g=!0,this._getAzureComputeMetadata(p,function(){m._isVM&&Object.keys(m._vmData).length>0&&(v.azInst_vmId=m._vmData.vmId||"",v.azInst_subscriptionId=m._vmData.subscriptionId||"",v.azInst_osType=m._vmData.osType||"",m._azInst_vmId=m._vmData.vmId||"",m._azInst_subscriptionId=m._vmData.subscriptionId||"",m._azInst_osType=m._vmData.osType||""),m._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),h()})):this._isVM&&(v.azInst_vmId=this._azInst_vmId,v.azInst_subscriptionId=this._azInst_subscriptionId,v.azInst_osType=this._azInst_osType)),g||(this._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),h())},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1},f.prototype._getAzureComputeMetadata=function(p,h){var m,g=this,v=a+"?"+c+"&"+l,w=(m={method:"GET"},m[s.disableCollectionRequestOption]=!0,m.headers={Metadata:"True"},m),C=i.makeRequest(p,v,w,function(b){if(b.statusCode===200){g._isVM=!0;var S="";b.on("data",function(P){S+=P}),b.on("end",function(){g._vmData=g._isJSON(S)?JSON.parse(S):{},h()})}else h()});C&&(C.on("error",function(b){b&&b.message&&b.message.indexOf(u)>-1&&(g._isVM=!1),h()}),C.end())},f.prototype._isJSON=function(p){try{return JSON.parse(p)&&!!p}catch{return!1}},f}();e.exports=d}),tF=O((t,e)=>{"use strict";var r=require("http"),n=require("https"),i=zt(),o=gn(),s=Hu(),a=JL(),c=Dc(),l=bb(),u=function(){function d(f){if(d.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");d.INSTANCE=this,this._client=f}return d.prototype.enable=function(f){this._isEnabled=f,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},d.prototype.useAutoCorrelation=function(f,p){f&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(p):!f&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=f},d.prototype.isInitialized=function(){return this._isInitialized},d.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},d.prototype._generateCorrelationContext=function(f){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(f.getOperationId(this._client.context.tags),f.getRequestId(),f.getOperationName(this._client.context.tags),f.getCorrelationContextHeader(),f.getTraceparent(),f.getTracestate())},d.prototype._initialize=function(){var f=this;this._isInitialized=!0;var p=function(v){if(v){if(typeof v!="function")throw new Error("onRequest handler must be a function");return function(w,C){c.CorrelationContextManager.wrapEmitter(w),c.CorrelationContextManager.wrapEmitter(C);var b=w&&!w[d.alreadyAutoCollectedFlag];if(w&&b){var S=new a(w),P=f._generateCorrelationContext(S);c.CorrelationContextManager.runWithContext(P,function(){f._isEnabled&&(w[d.alreadyAutoCollectedFlag]=!0,d.trackRequest(f._client,{request:w,response:C},S)),typeof v=="function"&&v(w,C)})}else typeof v=="function"&&v(w,C)}}},h=function(v){var w=v.addListener.bind(v);v.addListener=function(C,b){switch(C){case"request":case"checkContinue":return w(C,p(b));default:return w(C,b)}},v.on=v.addListener},m=r.createServer;r.createServer=function(v,w){if(w&&typeof w=="function"){var C=m(v,p(w));return h(C),C}else{var C=m(p(v));return h(C),C}};var g=n.createServer;n.createServer=function(v,w){var C=g(v,p(w));return h(C),C}},d.trackRequestSync=function(f,p){if(!p.request||!p.response||!f){i.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!p.request,!p.response,!f);return}d.addResponseCorrelationIdHeader(f,p.response);var h=c.CorrelationContextManager.getCurrentContext(),m=new a(p.request,h&&h.operation.parentId);h&&(h.operation.id=m.getOperationId(f.context.tags)||h.operation.id,h.operation.name=m.getOperationName(f.context.tags)||h.operation.name,h.operation.parentId=m.getRequestId()||h.operation.parentId,h.customProperties.addHeaderData(m.getCorrelationContextHeader())),d.endRequest(f,m,p,p.duration,p.error)},d.trackRequest=function(f,p,h){if(!p.request||!p.response||!f){i.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!p.request,!p.response,!f);return}var m=c.CorrelationContextManager.getCurrentContext(),g=h||new a(p.request,m&&m.operation.parentId);o.canIncludeCorrelationHeader(f,g.getUrl())&&d.addResponseCorrelationIdHeader(f,p.response),m&&!h&&(m.operation.id=g.getOperationId(f.context.tags)||m.operation.id,m.operation.name=g.getOperationName(f.context.tags)||m.operation.name,m.operation.parentId=g.getOperationParentId(f.context.tags)||m.operation.parentId,m.customProperties.addHeaderData(g.getCorrelationContextHeader())),p.response.once&&p.response.once("finish",function(){d.endRequest(f,g,p,null,null)}),p.request.on&&p.request.on("error",function(v){d.endRequest(f,g,p,null,v)}),p.request.on&&p.request.on("aborted",function(){var v="The request has been aborted and the network socket has closed.";d.endRequest(f,g,p,null,v)})},d.addResponseCorrelationIdHeader=function(f,p){if(f.config&&f.config.correlationId&&p.getHeader&&p.setHeader&&!p.headersSent){var h=p.getHeader(s.requestContextHeader);o.safeIncludeCorrelationHeader(f,p,h)}},d.endRequest=function(f,p,h,m,g){g?p.onError(g,m):p.onResponse(h.response,m);var v=p.getRequestTelemetry(h);if(v.tagOverrides=p.getRequestTags(f.context.tags),h.tagOverrides)for(var w in h.tagOverrides)v.tagOverrides[w]=h.tagOverrides[w];var C=p.getLegacyRootId();C&&(v.properties.ai_legacyRootId=C),v.contextObjects=v.contextObjects||{},v.contextObjects["http.ServerRequest"]=h.request,v.contextObjects["http.ServerResponse"]=h.response,f.trackRequest(v)},d.prototype.dispose=function(){d.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},d.alreadyAutoCollectedFlag="_appInsightsAutoCollected",d}();e.exports=u}),KZ=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(u){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(u[h]=d[h])}return u},r.apply(this,arguments)},n=require("os"),i=xr(),o=Oo(),s=gn(),a=zt(),c=s.w3cTraceId(),l=function(){function u(){}return u.createQuickPulseEnvelope=function(d,f,p,h){var m=n&&typeof n.hostname=="function"&&n.hostname()||"Unknown",g=h.tags&&h.keys&&h.keys.cloudRoleInstance&&h.tags[h.keys.cloudRoleInstance]||m,v=h.tags&&h.keys&&h.keys.cloudRole&&h.tags[h.keys.cloudRole]||null,w={Documents:f.length>0?f:null,InstrumentationKey:p.instrumentationKey||"",Metrics:d.length>0?d:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:h.tags[h.keys.internalSdkVersion],StreamId:c,MachineName:m,Instance:g,RoleName:v};return w},u.createQuickPulseMetric=function(d){var f;return f={Name:d.name,Value:d.value,Weight:d.count||1},f},u.telemetryEnvelopeToQuickPulseDocument=function(d){switch(d.data.baseType){case i.TelemetryTypeString.Event:return u.createQuickPulseEventDocument(d);case i.TelemetryTypeString.Exception:return u.createQuickPulseExceptionDocument(d);case i.TelemetryTypeString.Trace:return u.createQuickPulseTraceDocument(d);case i.TelemetryTypeString.Dependency:return u.createQuickPulseDependencyDocument(d);case i.TelemetryTypeString.Request:return u.createQuickPulseRequestDocument(d)}return null},u.createQuickPulseEventDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.name,h=r(r({},f),{Name:p});return h},u.createQuickPulseTraceDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.severityLevel||0,h=r(r({},f),{Message:d.data.baseData.message,SeverityLevel:i.SeverityLevel[p]});return h},u.createQuickPulseExceptionDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData.exceptions,h="",m="",g="";p&&p.length>0&&(p[0].parsedStack&&p[0].parsedStack.length>0?p[0].parsedStack.forEach(function(w){h+=w.assembly+`
`}):p[0].stack&&p[0].stack.length>0&&(h=p[0].stack),m=p[0].message,g=p[0].typeName);var v=r(r({},f),{Exception:h,ExceptionMessage:m,ExceptionType:g});return v},u.createQuickPulseRequestDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData,h=r(r({},f),{Name:p.name,Success:p.success,Duration:p.duration,ResponseCode:p.responseCode,OperationName:p.name});return h},u.createQuickPulseDependencyDocument=function(d){var f=u.createQuickPulseDocument(d),p=d.data.baseData,h=r(r({},f),{Name:p.name,Target:p.target,Success:p.success,Duration:p.duration,ResultCode:p.resultCode,CommandName:p.data,OperationName:f.OperationId,DependencyTypeName:p.type});return h},u.createQuickPulseDocument=function(d){var f,p,h,m;d.data.baseType?(p=o.TelemetryTypeStringToQuickPulseType[d.data.baseType],f=o.TelemetryTypeStringToQuickPulseDocumentType[d.data.baseType]):a.warn("Document type invalid; not sending live metric document",d.data.baseType),h=d.tags[u.keys.operationId],m=u.aggregateProperties(d);var g={DocumentType:f,__type:p,OperationId:h,Version:"1.0",Properties:m};return g},u.aggregateProperties=function(d){var f=[],p=d.data.baseData.measurements||{};for(var h in p)if(p.hasOwnProperty(h)){var m=p[h],g={key:h,value:m};f.push(g)}var v=d.data.baseData.properties||{};for(var h in v)if(v.hasOwnProperty(h)){var m=v[h],g={key:h,value:m};f.push(g)}return f},u.keys=new i.ContextTagKeys,u}();e.exports=l}),YZ=O((t,e)=>{"use strict";var r=function(){return(Date.now()+621355968e5)*1e4};e.exports={getTransmissionTime:r}}),JZ=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(d,f,p,h){function m(g){return g instanceof p?g:new p(function(v){v(g)})}return new(p||(p=Promise))(function(g,v){function w(S){try{b(h.next(S))}catch(P){v(P)}}function C(S){try{b(h.throw(S))}catch(P){v(P)}}function b(S){S.done?g(S.value):m(S.value).then(w,C)}b((h=h.apply(d,f||[])).next())})},n=t&&t.__generator||function(d,f){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,m,g,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(b){return function(S){return C([b,S])}}function C(b){if(h)throw new TypeError("Generator is already executing.");for(;p;)try{if(h=1,m&&(g=b[0]&2?m.return:b[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,b[1])).done)return g;switch(m=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return p.label++,{value:b[1],done:!1};case 5:p.label++,m=b[1],b=[0];continue;case 7:b=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){p=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){p.label=b[1];break}if(b[0]===6&&p.label<g[1]){p.label=g[1],g=b;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(b);break}g[2]&&p.ops.pop(),p.trys.pop();continue}b=f.call(d,p)}catch(S){b=[6,S],m=0}finally{h=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},i=require("https"),o=Vu(),s=zt(),a=YZ(),c=gn(),l={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},u=function(){function d(f){this._config=f,this._consecutiveErrors=0}return d.prototype.ping=function(f,p,h){var m=[{name:l.streamId,value:f.StreamId},{name:l.machineName,value:f.MachineName},{name:l.roleName,value:f.RoleName},{name:l.instanceName,value:f.Instance},{name:l.invariantVersion,value:f.InvariantVersion.toString()}];this._submitData(f,p,h,"ping",m)},d.prototype.post=function(f,p,h){return r(this,void 0,void 0,function(){return n(this,function(m){switch(m.label){case 0:return[4,this._submitData([f],p,h,"post")];case 1:return m.sent(),[2]}})})},d.prototype._submitData=function(f,p,h,m,g){return r(this,void 0,void 0,function(){var v,w,C,b,S,P=this;return n(this,function(_){return v=JSON.stringify(f),w=(b={},b[o.disableCollectionRequestOption]=!0,b.host=p&&p.length>0?p:this._config.quickPulseHost,b.method=l.method,b.path="/QuickPulseService.svc/"+m+"?ikey="+this._config.instrumentationKey,b.headers=(S={Expect:"100-continue"},S[l.time]=a.getTransmissionTime(),S["Content-Type"]="application/json",S["Content-Length"]=Buffer.byteLength(v),S),b),g&&g.length>0&&g.forEach(function(k){return w.headers[k.name]=k.value}),this._config.httpsAgent?w.agent=this._config.httpsAgent:w.agent=c.tlsRestrictedAgent,C=i.request(w,function(k){if(k.statusCode==200){var T=k.headers[l.subscribed]==="true",A=k.headers[l.endpointRedirect]?k.headers[l.endpointRedirect].toString():null,M=k.headers[l.pollingIntervalHint]?parseInt(k.headers[l.pollingIntervalHint].toString()):null;P._consecutiveErrors=0,h(T,k,A,M)}else P._onError("StatusCode:"+k.statusCode+" StatusMessage:"+k.statusMessage),h()}),C.on("error",function(k){P._onError(k),h()}),C.write(v),C.end(),[2]})})},d.prototype._onError=function(f){this._consecutiveErrors++;var p="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%d.MAX_QPS_FAILURES_BEFORE_WARN==0?(p="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",s.warn(d.TAG,p,f)):s.info(d.TAG,p,f)},d.TAG="QuickPulseSender",d.MAX_QPS_FAILURES_BEFORE_WARN=25,d}();e.exports=u}),QZ=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(u,d,f,p){function h(m){return m instanceof f?m:new f(function(g){g(m)})}return new(f||(f=Promise))(function(m,g){function v(b){try{C(p.next(b))}catch(S){g(S)}}function w(b){try{C(p.throw(b))}catch(S){g(S)}}function C(b){b.done?m(b.value):h(b.value).then(v,w)}C((p=p.apply(u,d||[])).next())})},n=t&&t.__generator||function(u,d){var f={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},p,h,m,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(C){return function(b){return w([C,b])}}function w(C){if(p)throw new TypeError("Generator is already executing.");for(;f;)try{if(p=1,h&&(m=C[0]&2?h.return:C[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,C[1])).done)return m;switch(h=0,m&&(C=[C[0]&2,m.value]),C[0]){case 0:case 1:m=C;break;case 4:return f.label++,{value:C[1],done:!1};case 5:f.label++,h=C[1],C=[0];continue;case 7:C=f.ops.pop(),f.trys.pop();continue;default:if(m=f.trys,!(m=m.length>0&&m[m.length-1])&&(C[0]===6||C[0]===2)){f=0;continue}if(C[0]===3&&(!m||C[1]>m[0]&&C[1]<m[3])){f.label=C[1];break}if(C[0]===6&&f.label<m[1]){f.label=m[1],m=C;break}if(m&&f.label<m[2]){f.label=m[2],f.ops.push(C);break}m[2]&&f.ops.pop(),f.trys.pop();continue}C=d.call(u,f)}catch(b){C=[6,b],h=0}finally{p=m=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},i=zt(),o=KZ(),s=JZ(),a=Oo(),c=lm(),l=function(){function u(d,f){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=d,this.context=f||new c,this._sender=new s(this.config),this._isEnabled=!1}return u.prototype.addCollector=function(d){this._collectors.push(d)},u.prototype.trackMetric=function(d){this._addMetric(d)},u.prototype.addDocument=function(d){var f=o.telemetryEnvelopeToQuickPulseDocument(d);f&&this._documents.push(f)},u.prototype.enable=function(d){d&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!d&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},u.prototype.enableCollectors=function(d){this._collectors.forEach(function(f){f.enable(d)})},u.prototype._addMetric=function(d){var f=d.value,p=d.count||1,h=a.PerformanceToQuickPulseCounter[d.name];h&&(this._metrics[h]?(this._metrics[h].Value=(this._metrics[h].Value*this._metrics[h].Weight+f*p)/(this._metrics[h].Weight+p),this._metrics[h].Weight+=p):(this._metrics[h]=o.createQuickPulseMetric(d),this._metrics[h].Name=h,this._metrics[h].Weight=1))},u.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},u.prototype._goQuickPulse=function(){return r(this,void 0,void 0,function(){var d,f,p,h,m=this;return n(this,function(g){switch(g.label){case 0:return d=Object.keys(this._metrics).map(function(v){return m._metrics[v]}),f=o.createQuickPulseEnvelope(d,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(f)]:[3,2];case 1:return g.sent(),[3,3];case 2:this._ping(f),g.label=3;case 3:return p=this._pollingIntervalHint>0?this._pollingIntervalHint:u.PING_INTERVAL,h=this._isCollectingData?u.POST_INTERVAL:p,this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,h=u.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(h=u.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),h),this._handle.unref(),[2]}})})},u.prototype._ping=function(d){this._sender.ping(d,this._redirectedHost,this._quickPulseDone.bind(this))},u.prototype._post=function(d){return r(this,void 0,void 0,function(){return n(this,function(f){switch(f.label){case 0:return[4,this._sender.post(d,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return f.sent(),[2]}})})},u.prototype._quickPulseDone=function(d,f,p,h){d!=null?(this._isCollectingData!==d&&(i.info("Live Metrics sending data",d),this.enableCollectors(d)),this._isCollectingData=d,p&&p.length>0&&(this._redirectedHost=p,i.info("Redirecting endpoint to: ",p)),h&&h>0&&(this._pollingIntervalHint=h),f&&f.statusCode<300&&f.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},u.MAX_POST_WAIT_TIME=2e4,u.MAX_PING_WAIT_TIME=6e4,u.FALLBACK_INTERVAL=6e4,u.PING_INTERVAL=5e3,u.POST_INTERVAL=1e3,u}();e.exports=l}),XZ=O((t,e)=>{"use strict";var r=Oo(),n=function(){function i(){}return i.parse=function(o){if(!o)return{};var s=o.split(i._FIELDS_SEPARATOR),a=s.reduce(function(l,u){var d=u.split(i._FIELD_KEY_VALUE_SEPARATOR);if(d.length===2){var f=d[0].toLowerCase(),p=d[1];l[f]=p}return l},{});if(Object.keys(a).length>0){if(a.endpointsuffix){var c=a.location?a.location+".":"";a.ingestionendpoint=a.ingestionendpoint||"https://"+c+"dc."+a.endpointsuffix,a.liveendpoint=a.liveendpoint||"https://"+c+"live."+a.endpointsuffix}a.ingestionendpoint=a.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,a.liveendpoint=a.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return a},i._FIELDS_SEPARATOR=";",i._FIELD_KEY_VALUE_SEPARATOR="=",i}();e.exports=n}),rF=O((t,e)=>{"use strict";var r=Ac(),n=XZ(),i=zt(),o=Oo(),s=require("url"),a=function(){function c(l){var u=this;this.endpointBase=o.DEFAULT_BREEZE_ENDPOINT;var d=process.env[c.ENV_connectionString],f=n.parse(l),p=n.parse(d),h=!f.instrumentationkey&&Object.keys(f).length>0?null:l;this.instrumentationKey=f.instrumentationkey||h||p.instrumentationkey||c._getInstrumentationKey(),c._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(f.ingestionendpoint||p.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(m){return u.correlationId=m},this.proxyHttpUrl=process.env[c.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[c.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=f.ingestionendpoint||p.ingestionendpoint||process.env[c.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=f.liveendpoint||p.liveendpoint||process.env[c.ENV_quickPulseHost]||o.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(c.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(l){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=l,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(l){this._quickPulseHost=l},enumerable:!1,configurable:!0}),c._getInstrumentationKey=function(){var l=process.env[c.ENV_iKey]||process.env[c.ENV_azurePrefix+c.ENV_iKey]||process.env[c.legacy_ENV_iKey]||process.env[c.ENV_azurePrefix+c.legacy_ENV_iKey];if(!l||l=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return l},c._validateInstrumentationKey=function(l){var u="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",d=new RegExp(u);return d.test(l)},c.ENV_azurePrefix="APPSETTING_",c.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",c.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",c.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",c.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",c.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",c.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",c.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",c.ENV_http_proxy="http_proxy",c.ENV_https_proxy="https_proxy",c}();e.exports=a}),ZZ=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoCollectNativePerformance=void 0;var r=rF(),n=lm(),i=zt(),o=function(){function s(a){this._disabledMetrics={},s.INSTANCE&&s.INSTANCE.dispose(),s.INSTANCE=this,this._client=a}return s.isNodeVersionCompatible=function(){var a=process.versions.node.split(".");return parseInt(a[0])>=6},s.prototype.enable=function(a,c,l){var u=this;if(c===void 0&&(c={}),l===void 0&&(l=6e4),!!s.isNodeVersionCompatible()){if(s._metricsAvailable==null&&a&&!this._isInitialized)try{var d=require("applicationinsights-native-metrics");s._emitter=new d,s._metricsAvailable=!0,i.info("Native metrics module successfully loaded!")}catch{s._metricsAvailable=!1;return}this._isEnabled=a,this._disabledMetrics=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&s._emitter?(s._emitter.enable(!0,l),this._handle||(this._handle=setInterval(function(){return u._trackNativeMetrics()},l),this._handle.unref())):s._emitter&&(s._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},s.prototype.dispose=function(){this.enable(!1)},s.parseEnabled=function(a){var c=process.env[r.ENV_nativeMetricsDisableAll],l=process.env[r.ENV_nativeMetricsDisablers];if(c)return{isEnabled:!1,disabledMetrics:{}};if(l){var u=l.split(","),d={};if(u.length>0)for(var f=0,p=u;f<p.length;f++){var h=p[f];d[h]=!0}return typeof a=="object"?{isEnabled:!0,disabledMetrics:e(e({},a),d)}:{isEnabled:a,disabledMetrics:d}}return typeof a=="boolean"?{isEnabled:a,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:a}},s.prototype._trackNativeMetrics=function(){var a=!0;typeof this._isEnabled!="object"&&(a=this._isEnabled),a&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},s.prototype._trackGarbageCollection=function(){var a;if(!this._disabledMetrics.gc){var c=s._emitter.getGCData();for(var l in c){var u=c[l].metrics,d=l+" Garbage Collection Duration",f=Math.sqrt(u.sumSquares/u.count-Math.pow(u.total/u.count,2))||0;this._client.trackMetric({name:d,value:u.total,count:u.count,max:u.max,min:u.min,stdDev:f,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackEventLoop=function(){var a;if(!this._disabledMetrics.loop){var c=s._emitter.getLoopData(),l=c.loopUsage;if(l.count!=0){var u="Event Loop CPU Time",d=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:u,value:l.total,count:l.count,min:l.min,max:l.max,stdDev:d,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackHeapUsage=function(){var a,c,l;if(!this._disabledMetrics.heap){var u=process.memoryUsage(),d=u.heapUsed,f=u.heapTotal,p=u.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:d,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)}),this._client.trackMetric({name:"Memory Total (Heap)",value:f,count:1,tagOverrides:(c={},c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,c)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:p-f,count:1,tagOverrides:(l={},l[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,l)})}},s}();t.AutoCollectNativePerformance=o}),eee=O((t,e)=>{"use strict";var r=zt(),n=function(){function i(o,s,a,c){this._buffer=[],this._lastSend=0,this._isDisabled=o,this._getBatchSize=s,this._getBatchIntervalMs=a,this._sender=c}return i.prototype.setUseDiskRetryCaching=function(o,s,a){this._sender.setDiskRetryMode(o,s,a)},i.prototype.send=function(o){var s=this;if(!this._isDisabled()){if(!o){r.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(o),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){s._timeoutHandle=null,s.triggerSend(!1)},this._getBatchIntervalMs()))}},i.prototype.triggerSend=function(o,s){var a=this._buffer.length<1;a||(o?(this._sender.saveOnCrash(this._buffer),typeof s=="function"&&s("data saved on crash")):this._sender.send(this._buffer,s)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,a&&typeof s=="function"&&s("no data to send")},i}();e.exports=n}),tee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.azureRoleEnvironmentTelemetryProcessor=void 0;function e(r,n){process.env.WEBSITE_SITE_NAME&&(r.tags[n.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}t.azureRoleEnvironmentTelemetryProcessor=e}),ree=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSamplingHashCode=t.samplingTelemetryProcessor=void 0;var e=xr();function r(i,o){var s=i.sampleRate,a=!1;return s==null||s>=100||i.data&&e.TelemetryType.Metric===e.baseTypeToTelemetryType(i.data.baseType)?!0:(o.correlationContext&&o.correlationContext.operation?a=n(o.correlationContext.operation.id)<s:a=Math.random()*100<s,a)}t.samplingTelemetryProcessor=r;function n(i){var o=-2147483648,s=2147483647,a=5381;if(!i)return 0;for(;i.length<8;)i=i+i;for(var c=0;c<i.length;c++)a=((a<<5)+a|0)+i.charCodeAt(c)|0;return a=a<=o?s:Math.abs(a),a/s*100}t.getSamplingHashCode=n}),nee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performanceMetricsTelemetryProcessor=void 0;var e=bb(),r=xr();function n(i,o){switch(o&&o.addDocument(i),i.data.baseType){case r.TelemetryTypeString.Exception:e.countException();break;case r.TelemetryTypeString.Request:var s=i.data.baseData;e.countRequest(s.duration,s.success);break;case r.TelemetryTypeString.Dependency:var a=i.data.baseData;e.countDependency(a.duration,a.success);break}return!0}t.performanceMetricsTelemetryProcessor=n}),iee=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.preAggregatedMetricsTelemetryProcessor=void 0;var r=xr(),n=eF(),i=xr();function o(s,a){if(n.isEnabled())switch(s.data.baseType){case i.TelemetryTypeString.Exception:var c=s.data.baseData;c.properties=e(e({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var l={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole]};n.countException(l);break;case i.TelemetryTypeString.Trace:var u=s.data.baseData;u.properties=e(e({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var d={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[u.severity]};n.countTrace(d);break;case i.TelemetryTypeString.Request:var f=s.data.baseData;f.properties=e(e({},f.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var p={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],requestSuccess:f.success,requestResultCode:f.responseCode};n.countRequest(f.duration,p);break;case i.TelemetryTypeString.Dependency:var h=s.data.baseData;h.properties=e(e({},h.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var m={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],dependencySuccess:h.success,dependencyType:h.type,dependencyTarget:h.target,dependencyResultCode:h.resultCode};n.countDependency(h.duration,m);break}return!0}t.preAggregatedMetricsTelemetryProcessor=o}),oee=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(tee(),t),r(ree(),t),r(nee(),t),r(iee(),t)}),see=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(p,h,m,g){function v(w){return w instanceof m?w:new m(function(C){C(w)})}return new(m||(m=Promise))(function(w,C){function b(_){try{P(g.next(_))}catch(k){C(k)}}function S(_){try{P(g.throw(_))}catch(k){C(k)}}function P(_){_.done?w(_.value):v(_.value).then(b,S)}P((g=g.apply(p,h||[])).next())})},n=t&&t.__generator||function(p,h){var m={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},g,v,w,C;return C={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function b(P){return function(_){return S([P,_])}}function S(P){if(g)throw new TypeError("Generator is already executing.");for(;m;)try{if(g=1,v&&(w=P[0]&2?v.return:P[0]?v.throw||((w=v.return)&&w.call(v),0):v.next)&&!(w=w.call(v,P[1])).done)return w;switch(v=0,w&&(P=[P[0]&2,w.value]),P[0]){case 0:case 1:w=P;break;case 4:return m.label++,{value:P[1],done:!1};case 5:m.label++,v=P[1],P=[0];continue;case 7:P=m.ops.pop(),m.trys.pop();continue;default:if(w=m.trys,!(w=w.length>0&&w[w.length-1])&&(P[0]===6||P[0]===2)){m=0;continue}if(P[0]===3&&(!w||P[1]>w[0]&&P[1]<w[3])){m.label=P[1];break}if(P[0]===6&&m.label<w[1]){m.label=w[1],w=P;break}if(w&&m.label<w[2]){m.label=w[2],m.ops.push(P);break}w[2]&&m.ops.pop(),m.trys.pop();continue}P=h.call(p,m)}catch(_){P=[6,_],v=0}finally{g=w=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},i=require("fs"),o=require("os"),s=require("path"),a=require("zlib"),c=require("child_process"),l=zt(),u=Vu(),d=gn(),f=function(){function p(h,m,g){if(this._redirectedHost=null,this._config=h,this._onSuccess=m,this._onError=g,this._enableDiskRetryMode=!1,this._resendInterval=p.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=p.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=s.join(o.tmpdir(),p.TEMPDIR_PREFIX+this._config.instrumentationKey),!p.OS_PROVIDES_FILE_PROTECTION)if(p.USE_ICACLS){try{p.OS_PROVIDES_FILE_PROTECTION=i.existsSync(p.ICACLS_PATH)}catch{}p.OS_PROVIDES_FILE_PROTECTION||l.warn(p.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else p.OS_PROVIDES_FILE_PROTECTION=!0}return p.prototype.setDiskRetryMode=function(h,m,g){var v=this;this._enableDiskRetryMode=p.OS_PROVIDES_FILE_PROTECTION&&h,typeof m=="number"&&m>=0&&(this._resendInterval=Math.floor(m)),typeof g=="number"&&g>=0&&(this._maxBytesOnDisk=Math.floor(g)),h&&!p.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(p.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){v._fileCleanupTask()},p.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},p.prototype.send=function(h,m){return r(this,void 0,void 0,function(){var g,v,w,C,b=this;return n(this,function(S){return h&&(g=this._redirectedHost||this._config.endpointUrl,v={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},w="",h.forEach(function(P){var _=b._stringify(P);typeof _=="string"&&(w+=_+`
`)}),w.length>0&&(w=w.substring(0,w.length-1)),C=Buffer.from?Buffer.from(w):new Buffer(w),a.gzip(C,function(P,_){var k=_;P?(l.warn(P),k=C,v.headers["Content-Length"]=C.length.toString()):(v.headers["Content-Encoding"]="gzip",v.headers["Content-Length"]=_.length.toString()),l.info(p.TAG,v),v[u.disableCollectionRequestOption]=!0;var T=function(M){M.setEncoding("utf-8");var H="";M.on("data",function(J){H+=J}),M.on("end",function(){if(b._numConsecutiveFailures=0,b._enableDiskRetryMode){if(M.statusCode===200)b._resendTimer||(b._resendTimer=setTimeout(function(){b._resendTimer=null,b._sendFirstFileOnDisk()},b._resendInterval),b._resendTimer.unref());else if(b._isRetriable(M.statusCode))try{var J=JSON.parse(H),K=[];J.errors.forEach(function(te){b._isRetriable(te.statusCode)&&K.push(h[te.index])}),K.length>0&&b._storeToDisk(K)}catch{b._storeToDisk(h)}}if(M.statusCode===307||M.statusCode===308)if(b._numConsecutiveRedirects++,b._numConsecutiveRedirects<10){var oe=M.headers.location?M.headers.location.toString():null;oe&&(b._redirectedHost=oe,b.send(h,m))}else typeof m=="function"&&m("Error sending telemetry because of circular redirects.");else b._numConsecutiveRedirects=0,typeof m=="function"&&m(H),l.info(p.TAG,H),typeof b._onSuccess=="function"&&b._onSuccess(H)})},A=d.makeRequest(b._config,g,v,T);A.on("error",function(M){if(b._numConsecutiveFailures++,!b._enableDiskRetryMode||b._numConsecutiveFailures>0&&b._numConsecutiveFailures%p.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var H="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";b._enableDiskRetryMode&&(H="Ingestion endpoint could not be reached "+b._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(p.TAG,H,d.dumpObj(M))}else{var H="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(p.TAG,H,d.dumpObj(M))}b._onErrorHelper(M),typeof m=="function"&&(M&&m(d.dumpObj(M)),m("Error sending telemetry")),b._enableDiskRetryMode&&b._storeToDisk(h)}),A.write(k),A.end()})),[2]})})},p.prototype.saveOnCrash=function(h){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(h))},p.prototype._isRetriable=function(h){return h===206||h===408||h===429||h===439||h===500||h===503},p.prototype._runICACLS=function(h,m){var g=c.spawn(p.ICACLS_PATH,h,{windowsHide:!0});g.on("error",function(v){return m(v)}),g.on("close",function(v,w){return m(v===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+v+")"))})},p.prototype._runICACLSSync=function(h){if(c.spawnSync){var m=c.spawnSync(p.ICACLS_PATH,h,{windowsHide:!0});if(m.error)throw m.error;if(m.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+m.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},p.prototype._getACLIdentity=function(h){if(p.ACL_IDENTITY)return h(null,p.ACL_IDENTITY);var m=c.spawn(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),g="";m.stdout.on("data",function(v){return g+=v}),m.on("error",function(v){return h(v,null)}),m.on("close",function(v,w){return p.ACL_IDENTITY=g&&g.trim(),h(v===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+v+")"),p.ACL_IDENTITY)})},p.prototype._getACLIdentitySync=function(){if(p.ACL_IDENTITY)return p.ACL_IDENTITY;if(c.spawnSync){var h=c.spawnSync(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(h.error)throw h.error;if(h.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+h.status+")");return p.ACL_IDENTITY=h.stdout&&h.stdout.toString().trim(),p.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},p.prototype._getACLArguments=function(h,m){return[h,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",m+":(OI)(CI)F","/inheritance:r"]},p.prototype._applyACLRules=function(h,m){var g=this;if(!p.USE_ICACLS)return m(null);if(p.ACLED_DIRECTORIES[h]===void 0)p.ACLED_DIRECTORIES[h]=!1,this._getACLIdentity(function(v,w){if(v)return p.ACLED_DIRECTORIES[h]=!1,m(v);g._runICACLS(g._getACLArguments(h,w),function(C){return p.ACLED_DIRECTORIES[h]=!C,m(C)})});else return m(p.ACLED_DIRECTORIES[h]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},p.prototype._applyACLRulesSync=function(h){if(p.USE_ICACLS){if(p.ACLED_DIRECTORIES[h]===void 0){this._runICACLSSync(this._getACLArguments(h,this._getACLIdentitySync())),p.ACLED_DIRECTORIES[h]=!0;return}else if(!p.ACLED_DIRECTORIES[h])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},p.prototype._confirmDirExists=function(h,m){var g=this;i.lstat(h,function(v,w){v&&v.code==="ENOENT"?i.mkdir(h,function(C){C&&C.code!=="EEXIST"?m(C):g._applyACLRules(h,m)}):!v&&w.isDirectory()?g._applyACLRules(h,m):m(v||new Error("Path existed but was not a directory"))})},p.prototype._getShallowDirectorySize=function(h,m){i.readdir(h,function(g,v){if(g)return m(g,-1);var w=null,C=0,b=0;if(v.length===0){m(null,0);return}for(var S=0;S<v.length;S++)i.stat(s.join(h,v[S]),function(P,_){b++,P?w=P:_.isFile()&&(C+=_.size),b===v.length&&(w?m(w,-1):m(w,C))})})},p.prototype._getShallowDirectorySizeSync=function(h){for(var m=i.readdirSync(h),g=0,v=0;v<m.length;v++)g+=i.statSync(s.join(h,m[v])).size;return g},p.prototype._storeToDisk=function(h){var m=this;l.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(g){if(g){l.warn(p.TAG,"Error while checking/creating directory: "+(g&&g.message)),m._onErrorHelper(g);return}m._getShallowDirectorySize(m._tempDir,function(v,w){if(v||w<0){l.warn(p.TAG,"Error while checking directory size: "+(v&&v.message)),m._onErrorHelper(v);return}else if(w>m._maxBytesOnDisk){l.warn(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+w);return}var C=new Date().getTime()+".ai.json",b=s.join(m._tempDir,C);l.info(p.TAG,"saving data to disk at: "+b),i.writeFile(b,m._stringify(h),{mode:384},function(S){return m._onErrorHelper(S)})})})},p.prototype._storeToDiskSync=function(h){try{l.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),i.existsSync(this._tempDir)||i.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var m=this._getShallowDirectorySizeSync(this._tempDir);if(m>this._maxBytesOnDisk){l.info(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+m);return}var g=new Date().getTime()+".ai.json",v=s.join(this._tempDir,g);l.info(p.TAG,"saving data before crash to disk at: "+v),i.writeFileSync(v,h,{mode:384})}catch(w){l.warn(p.TAG,"Error while saving data to disk: "+(w&&w.message)),this._onErrorHelper(w)}},p.prototype._sendFirstFileOnDisk=function(){var h=this;i.exists(this._tempDir,function(m){m&&i.readdir(h._tempDir,function(g,v){if(g)h._onErrorHelper(g);else if(v=v.filter(function(b){return s.basename(b).indexOf(".ai.json")>-1}),v.length>0){var w=v[0],C=s.join(h._tempDir,w);i.readFile(C,function(b,S){b?h._onErrorHelper(b):i.unlink(C,function(P){if(P)h._onErrorHelper(P);else try{var _=JSON.parse(S.toString());h.send(_)}catch(k){l.warn("Failed to read persisted file",k)}})})}})})},p.prototype._onErrorHelper=function(h){typeof this._onError=="function"&&this._onError(h)},p.prototype._stringify=function(h){try{return JSON.stringify(h)}catch(m){l.warn("Failed to serialize payload",m,h)}},p.prototype._fileCleanupTask=function(){var h=this;i.exists(this._tempDir,function(m){m&&i.readdir(h._tempDir,function(g,v){g?h._onErrorHelper(g):(v=v.filter(function(w){return s.basename(w).indexOf(".ai.json")>-1}),v.length>0&&v.forEach(function(w){var C=new Date(parseInt(w.split(".ai.json")[0])),b=new Date(+new Date-p.FILE_RETEMPTION_PERIOD)>C;if(b){var S=s.join(h._tempDir,w);i.unlink(S,function(P){P&&h._onErrorHelper(P)})}}))})})},p.TAG="Sender",p.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",p.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",p.ACLED_DIRECTORIES={},p.ACL_IDENTITY=null,p.WAIT_BETWEEN_RESEND=60*1e3,p.MAX_BYTES_ON_DISK=50*1024*1024,p.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,p.CLEANUP_TIMEOUT=60*60*1e3,p.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,p.TEMPDIR_PREFIX="appInsights-node",p.OS_PROVIDES_FILE_PROTECTION=!1,p.USE_ICACLS=o.type()==="Windows_NT",p}();e.exports=f}),aee=O((t,e)=>{"use strict";var r=xr(),n=gn(),i=Dc(),o=function(){function a(){}return a.createEnvelope=function(c,l,u,d,f){var p=null;switch(l){case r.TelemetryType.Trace:p=a.createTraceData(c);break;case r.TelemetryType.Dependency:p=a.createDependencyData(c);break;case r.TelemetryType.Event:p=a.createEventData(c);break;case r.TelemetryType.Exception:p=a.createExceptionData(c);break;case r.TelemetryType.Request:p=a.createRequestData(c);break;case r.TelemetryType.Metric:p=a.createMetricData(c);break;case r.TelemetryType.Availability:p=a.createAvailabilityData(c);break;case r.TelemetryType.PageView:p=a.createPageViewData(c);break}if(u&&r.domainSupportsProperties(p.baseData)){if(p&&p.baseData)if(!p.baseData.properties)p.baseData.properties=u;else for(var h in u)p.baseData.properties[h]||(p.baseData.properties[h]=u[h]);p.baseData.properties=n.validateStringMap(p.baseData.properties)}var m=f&&f.instrumentationKey||"",g=new r.Envelope;return g.data=p,g.iKey=m,g.name="Microsoft.ApplicationInsights."+m.replace(/-/g,"")+"."+p.baseType.substr(0,p.baseType.length-4),g.tags=this.getTags(d,c.tagOverrides),g.time=new Date().toISOString(),g.ver=1,g.sampleRate=f?f.samplingPercentage:100,l===r.TelemetryType.Metric&&(g.sampleRate=100),g},a.createTraceData=function(c){var l=new r.MessageData;l.message=c.message,l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Information:l.severityLevel=c.severity;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),u.baseData=l,u},a.createDependencyData=function(c){var l=new r.RemoteDependencyData;typeof c.name=="string"&&(l.name=c.name.length>1024?c.name.slice(0,1021)+"...":c.name),l.data=c.data,l.target=c.target,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.type=c.dependencyTypeName,l.properties=c.properties,l.resultCode=c.resultCode?c.resultCode+"":"",c.id?l.id=c.id:l.id=n.w3cTraceId();var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),u.baseData=l,u},a.createEventData=function(c){var l=new r.EventData;l.name=c.name,l.properties=c.properties,l.measurements=c.measurements;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),u.baseData=l,u},a.createExceptionData=function(c){var l=new r.ExceptionData;l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Error:l.severityLevel=c.severity,l.measurements=c.measurements,l.exceptions=[];var u=c.exception.stack,d=new r.ExceptionDetails;d.message=c.exception.message,d.typeName=c.exception.name,d.parsedStack=this.parseStack(u),d.hasFullStack=n.isArray(d.parsedStack)&&d.parsedStack.length>0,l.exceptions.push(d);var f=new r.Data;return f.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),f.baseData=l,f},a.createRequestData=function(c){var l=new r.RequestData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.url=c.url,l.source=c.source,l.duration=n.msToTimeSpan(c.duration),l.responseCode=c.resultCode?c.resultCode+"":"",l.success=c.success,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),u.baseData=l,u},a.createMetricData=function(c){var l=new r.MetricData;l.metrics=[];var u=new r.DataPoint;u.count=isNaN(c.count)?1:c.count,u.kind=r.DataPointType.Aggregation,u.max=isNaN(c.max)?c.value:c.max,u.min=isNaN(c.min)?c.value:c.min,u.name=c.name,u.stdDev=isNaN(c.stdDev)?0:c.stdDev,u.value=c.value,l.metrics.push(u),l.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),d.baseData=l,d},a.createAvailabilityData=function(c){var l=new r.AvailabilityData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.runLocation=c.runLocation,l.message=c.message,l.measurements=c.measurements,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),u.baseData=l,u},a.createPageViewData=function(c){var l=new r.PageViewData;l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.url=c.url,l.measurements=c.measurements,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),u.baseData=l,u},a.getTags=function(c,l){var u=i.CorrelationContextManager.getCurrentContext(),d={};if(c&&c.tags)for(var f in c.tags)d[f]=c.tags[f];if(l)for(var f in l)d[f]=l[f];return u&&(d[c.keys.operationId]=d[c.keys.operationId]||u.operation.id,d[c.keys.operationName]=d[c.keys.operationName]||u.operation.name,d[c.keys.operationParentId]=d[c.keys.operationParentId]||u.operation.parentId),d},a.parseStack=function(c){var l=void 0;if(typeof c=="string"){var u=c.split(`
`);l=[];for(var d=0,f=0,p=0;p<=u.length;p++){var h=u[p];if(s.regex.test(h)){var m=new s(u[p],d++);f+=m.sizeInBytes,l.push(m)}}var g=32*1024;if(f>g)for(var v=0,w=l.length-1,C=0,b=v,S=w;v<w;){var P=l[v].sizeInBytes,_=l[w].sizeInBytes;if(C+=P+_,C>g){var k=S-b+1;l.splice(b,k);break}b=v,S=w,v++,w--}}return l},a}(),s=function(){function a(c,l){this.sizeInBytes=0,this.level=l,this.method="<no_method>",this.assembly=n.trim(c);var u=c.match(a.regex);u&&u.length>=5&&(this.method=n.trim(u[2])||this.method,this.fileName=n.trim(u[4])||"<no_filename>",this.line=parseInt(u[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=a.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return a.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,a.baseSize=58,a}();e.exports=o}),cee=O((t,e)=>{"use strict";var r=require("url"),n=rF(),i=lm(),o=xr(),s=eee(),a=oee(),c=Dc(),l=see(),u=gn(),d=zt(),f=aee(),p=function(){function h(m){this._telemetryProcessors=[],this._enableAzureProperties=!1;var g=new n(m);this.config=g,this.context=new i,this.commonProperties={};var v=new l(this.config);this.channel=new s(function(){return g.disableAppInsights},function(){return g.maxBatchSize},function(){return g.maxBatchIntervalMs},v)}return h.prototype.trackAvailability=function(m){this.track(m,o.TelemetryType.Availability)},h.prototype.trackPageView=function(m){this.track(m,o.TelemetryType.PageView)},h.prototype.trackTrace=function(m){this.track(m,o.TelemetryType.Trace)},h.prototype.trackMetric=function(m){this.track(m,o.TelemetryType.Metric)},h.prototype.trackException=function(m){m&&m.exception&&!u.isError(m.exception)&&(m.exception=new Error(m.exception.toString())),this.track(m,o.TelemetryType.Exception)},h.prototype.trackEvent=function(m){this.track(m,o.TelemetryType.Event)},h.prototype.trackRequest=function(m){this.track(m,o.TelemetryType.Request)},h.prototype.trackDependency=function(m){m&&!m.target&&m.data&&(m.target=r.parse(m.data).host),this.track(m,o.TelemetryType.Dependency)},h.prototype.flush=function(m){this.channel.triggerSend(m?!!m.isAppCrashing:!1,m?m.callback:void 0)},h.prototype.track=function(m,g){if(m&&o.telemetryTypeToBaseType(g)){var v=f.createEnvelope(m,g,this.commonProperties,this.context,this.config);m.time&&(v.time=m.time.toISOString()),this._enableAzureProperties&&a.azureRoleEnvironmentTelemetryProcessor(v,this.context);var w=this.runTelemetryProcessors(v,m.contextObjects);w=w&&a.samplingTelemetryProcessor(v,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),a.preAggregatedMetricsTelemetryProcessor(v,this.context),w&&(a.performanceMetricsTelemetryProcessor(v,this.quickPulseClient),this.channel.send(v))}else d.warn("track() requires telemetry object and telemetryType to be specified.")},h.prototype.setAutoPopulateAzureProperties=function(m){this._enableAzureProperties=m},h.prototype.addTelemetryProcessor=function(m){this._telemetryProcessors.push(m)},h.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},h.prototype.runTelemetryProcessors=function(m,g){var v=!0,w=this._telemetryProcessors.length;if(w===0)return v;g=g||{},g.correlationContext=c.CorrelationContextManager.getCurrentContext();for(var C=0;C<w;++C)try{var b=this._telemetryProcessors[C];if(b&&b.apply(null,[m,g])===!1){v=!1;break}}catch(S){v=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",S,m)}return v&&(m&&m.tags&&(m.tags=u.validateStringMap(m.tags)),m&&m.data&&m.data.baseData&&m.data.baseData.properties&&(m.data.baseData.properties=u.validateStringMap(m.data.baseData.properties))),v},h}();e.exports=p}),lee=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var c=function(l,u){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(d[p]=f[p])},c(l,u)};return function(l,u){c(l,u);function d(){this.constructor=l}l.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}}(),n=cee(),i=tF(),o=Vu(),s=zt(),a=function(c){r(l,c);function l(){return c!==null&&c.apply(this,arguments)||this}return l.prototype.trackNodeHttpRequestSync=function(u){u&&u.request&&u.response&&u.duration?i.trackRequestSync(this,u):s.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},l.prototype.trackNodeHttpRequest=function(u){(u.duration||u.error)&&s.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),u&&u.request&&u.response?i.trackRequest(this,u):s.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},l.prototype.trackNodeHttpDependency=function(u){u&&u.request?o.trackRequest(this,u):s.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},l}(n);e.exports=a}),uee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),dee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.Configuration=t.wrapWithCorrelationContext=t.startOperation=t.getCorrelationContext=t.start=t.setup=t.liveMetricsClient=t.defaultClient=t.DistributedTracingModes=void 0;var e=Dc(),r=FZ(),n=MZ(),i=bb(),o=eF(),s=zZ(),a=Vu(),c=tF(),l=Ac(),u=zt(),d=QZ(),f=ZZ();t.TelemetryClient=lee(),t.Contracts=xr(),t.azureFunctionsTypes=uee();var p;(function(ye){ye[ye.AI=0]="AI",ye[ye.AI_AND_W3C=1]="AI_AND_W3C"})(p=t.DistributedTracingModes||(t.DistributedTracingModes={}));var h=!0,m=!1,g=!0,v=!0,w=!0,C=!1,b=!0,S=!0,P=!0,_=!0,k,T=!1,A=!0,M,H=void 0,J=void 0,K,oe,te,F,L,q,G,z,ie=!1,ne;function be(ye){return t.defaultClient?u.info("The default client is already setup"):(t.defaultClient=new t.TelemetryClient(ye),K=new r(t.defaultClient),oe=new n(t.defaultClient),te=new i(t.defaultClient),F=new o(t.defaultClient),L=new s(t.defaultClient),G=new c(t.defaultClient),z=new a(t.defaultClient),q||(q=new f.AutoCollectNativePerformance(t.defaultClient))),t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(P,H,J),vt}t.setup=be;function Pe(){return t.defaultClient?(ie=!0,K.enable(h,m),oe.enable(g),te.enable(v),F.enable(w),L.enable(C,t.defaultClient.config),q.enable(A,M),G.useAutoCorrelation(_,k),G.enable(b),z.enable(S),t.liveMetricsClient&&T&&t.liveMetricsClient.enable(T)):u.warn("Start cannot be called before setup"),vt}t.start=Pe;function Se(){return _?e.CorrelationContextManager.getCurrentContext():null}t.getCorrelationContext=Se;function De(ye,fe){return e.CorrelationContextManager.startOperation(ye,fe)}t.startOperation=De;function pe(ye,fe){return e.CorrelationContextManager.wrapCallback(ye,fe)}t.wrapWithCorrelationContext=pe;var vt=function(){function ye(){}return ye.setDistributedTracingMode=function(fe){return l.w3cEnabled=fe===p.AI_AND_W3C,ye},ye.setAutoCollectConsole=function(fe,Ce){return Ce===void 0&&(Ce=!1),h=fe,m=Ce,ie&&K.enable(fe,Ce),ye},ye.setAutoCollectExceptions=function(fe){return g=fe,ie&&oe.enable(fe),ye},ye.setAutoCollectPerformance=function(fe,Ce){Ce===void 0&&(Ce=!0),v=fe;var $e=f.AutoCollectNativePerformance.parseEnabled(Ce);return A=$e.isEnabled,M=$e.disabledMetrics,ie&&(te.enable(fe),q.enable($e.isEnabled,$e.disabledMetrics)),ye},ye.setAutoCollectPreAggregatedMetrics=function(fe){return w=fe,ie&&F.enable(fe),ye},ye.setAutoCollectHeartbeat=function(fe){return C=fe,ie&&L.enable(fe,t.defaultClient.config),ye},ye.setAutoCollectRequests=function(fe){return b=fe,ie&&G.enable(fe),ye},ye.setAutoCollectDependencies=function(fe){return S=fe,ie&&z.enable(fe),ye},ye.setAutoDependencyCorrelation=function(fe,Ce){return _=fe,k=Ce,ie&&G.useAutoCorrelation(fe,Ce),ye},ye.setUseDiskRetryCaching=function(fe,Ce,$e){return P=fe,H=Ce,J=$e,t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(fe,Ce,$e),ye},ye.setInternalLogging=function(fe,Ce){return fe===void 0&&(fe=!1),Ce===void 0&&(Ce=!0),u.enableDebug=fe,u.disableWarnings=!Ce,ye},ye.setSendLiveMetrics=function(fe){return fe===void 0&&(fe=!1),t.defaultClient?(!t.liveMetricsClient&&fe?(t.liveMetricsClient=new d(t.defaultClient.config,null),ne=new i(t.liveMetricsClient,1e3,!0),t.liveMetricsClient.addCollector(ne),t.defaultClient.quickPulseClient=t.liveMetricsClient):t.liveMetricsClient&&t.liveMetricsClient.enable(fe),T=fe,ye):(u.warn("Live metrics client cannot be setup without the default client"),ye)},ye.start=Pe,ye}();t.Configuration=vt;function Pt(){l.w3cEnabled=!0,t.defaultClient=null,ie=!1,K&&K.dispose(),oe&&oe.dispose(),te&&te.dispose(),F&&F.dispose(),L&&L.dispose(),q&&q.dispose(),G&&G.dispose(),z&&z.dispose(),t.liveMetricsClient&&(t.liveMetricsClient.enable(!1),T=!1,t.liveMetricsClient=void 0)}t.dispose=Pt});HJ(nF,{default:()=>mee});var Eb=ju(require("os")),Rc=ju(require("vscode")),ht=ju(require("vscode")),_b=ju(require("vscode")),Fn;(function(t){t.ON="on",t.OFF="off"})(Fn||(Fn={}));function um(){let t="telemetry",e="enableTelemetry";return _b.env.isTelemetryEnabled!==void 0?_b.env.isTelemetryEnabled?Fn.ON:Fn.OFF:_b.workspace.getConfiguration(t).get(e)?Fn.ON:Fn.OFF}var fee=class{constructor(t,e,r,n,i){this.extensionId=t,this.extensionVersion=e,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!i,this.updateUserOptStatus(),ht.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(ht.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(ht.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(ht.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let t=um();this.userOptIn=t===Fn.ON,this.errorOptIn=t===Fn.ON,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(t){if(!t)return"none";let e="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(r=>{t.indexOf(`${r}+`)===0&&(e=r)}),e}get extension(){return this._extension===void 0&&(this._extension=ht.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(t,e){if(t===null||typeof t!="object"||typeof e!="function")return t;let r={};for(let n in t)r[n]=e(n,t[n]);return r}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?this.cleanRemoteName(ht.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===ht.ExtensionKind.Workspace||ht.env.uiKind===ht.UIKind.Web):!0}getCommonProperties(){let t=Object.create(null);if(t["common.os"]=this.osShim.platform,t["common.nodeArch"]=this.osShim.architecture,t["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.extensionId,t["common.extversion"]=this.extensionVersion,ht&&ht.env){switch(t["common.vscodemachineid"]=ht.env.machineId,t["common.vscodesessionid"]=ht.env.sessionId,t["common.vscodeversion"]=ht.version,t["common.isnewappinstall"]=ht.env.isNewAppInstall?ht.env.isNewAppInstall.toString():"false",t["common.product"]=ht.env.appHost,ht.env.uiKind){case ht.UIKind.Web:t["common.uikind"]="web";break;case ht.UIKind.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}t["common.remotename"]=this.cleanRemoteName(ht.env.remoteName)}return t}anonymizeFilePaths(t,e){let r;if(t==null)return"";let n=[];ht.env.appRoot!==""&&n.push(new RegExp(ht.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=t;if(e){let o=[];for(let l of n)for(;(r=l.exec(t))&&r;)o.push([r.index,l.lastIndex]);let s=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,a=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(i="";(r=a.exec(t))&&r;)r[0]&&!s.test(r[0])&&o.every(([l,u])=>r.index<l||r.index>=u)&&(i+=t.substring(c,r.index)+"<REDACTED: user-file-path>",c=a.lastIndex);c<t.length&&(i+=t.substr(c))}for(let o of n)i=i.replace(o,"");return i}removePropertiesWithPossibleUserInfo(t){if(typeof t!="object")return;let e=Object.create(null);for(let r of Object.keys(t)){let n=t[r];if(!n)continue;let i=/@[a-zA-Z0-9-.]+/;/(key|token|sig|signature|password|passwd|pwd)[="':\s]/.test(n.toLowerCase())?e[r]="<REDACTED: secret>":i.test(n)?e[r]="<REDACTED: email>":e[r]=n}return e}sendTelemetryEvent(t,e,r){if(this.userOptIn&&t!==""){e=Do(Do({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}sendRawTelemetryEvent(t,e,r){this.userOptIn&&t!==""&&(e=Do(Do({},e),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:e,measurements:r}))}sendTelemetryErrorEvent(t,e,r,n){if(this.errorOptIn&&t!==""){e=Do(Do({},e),this.getCommonProperties());let i=this.cloneAndChange(e,(o,s)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(s,this.firstParty):n===void 0||n.indexOf(o)!==-1?"REDACTED":this.anonymizeFilePaths(s,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(i),measurements:r})}}sendTelemetryException(t,e,r){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&t){e=Do(Do({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));t.stack&&(t.stack=this.anonymizeFilePaths(t.stack,this.firstParty)),this.telemetryAppender.logException(t,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(t=>t.dispose()))}},pee=class{constructor(t,e){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=e,this._key=t,um()!==Fn.OFF&&this.instantiateAppender()}logEvent(t,e){if(!this._telemetryClient){!this._isInstantiated&&um()===Fn.ON&&this._eventQueue.push({eventName:t,data:e});return}this._telemetryClient.logEvent(t,e)}logException(t,e){if(!this._telemetryClient){!this._isInstantiated&&um()!==Fn.OFF&&this._exceptionQueue.push({exception:t,data:e});return}this._telemetryClient.logException(t,e)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:e})=>this.logEvent(t,e)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:e})=>this.logException(t,e)),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._isInstantiated=!0,this._flushQueues()}).catch(t=>{console.error(t)})}},hee=async t=>{let e;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let r=await Promise.resolve().then(()=>ju(dee()));r.defaultClient?(e=new r.TelemetryClient(t),e.channel.setUseDiskRetryCaching(!0)):(r.setup(t).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),e=r.defaultClient),Rc&&Rc.env&&(e.context.tags[e.context.keys.userId]=Rc.env.machineId,e.context.tags[e.context.keys.sessionId]=Rc.env.sessionId,e.context.tags[e.context.keys.cloudRole]=Rc.env.appName,e.context.tags[e.context.keys.cloudRoleInstance]=Rc.env.appName),t&&t.indexOf("AIF-")===0&&(e.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}catch(r){return Promise.reject(r)}return{logEvent:(r,n)=>{e==null||e.trackEvent({name:r,properties:n==null?void 0:n.properties,measurements:n==null?void 0:n.measurements})},logException:(r,n)=>{e==null||e.trackException({exception:r,properties:n==null?void 0:n.properties,measurements:n==null?void 0:n.measurements})},flush:async()=>{e==null||e.flush()}}},mee=class extends fee{constructor(t,e,r,n){let i=new pee(r,hee);r&&r.indexOf("AIF-")===0&&(n=!0);super(t,e,i,{release:Eb.release(),platform:Eb.platform(),architecture:Eb.arch()},n)}}});var Sb=I(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});var dm=require("vscode"),Gu=class{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case Ui.ApplicationVersion:return Gu.trimVersionSuffix(dm.version);case Ui.Build:return dm.env.appName;case Ui.ClientId:return dm.env.machineId;case Ui.ExtensionName:return this.extensionName;case Ui.ExtensionVersion:return Gu.trimVersionSuffix(this.extensionVersion);case Ui.Language:return dm.env.language;case Ui.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(Ui);for(let n of r)e.set(n,this.getFilterValue(n));return e}};ea.VSCodeFilterProvider=Gu;var Ui;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(Ui=ea.Filters||(ea.Filters={}));var gee;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(gee=ea.TargetPopulation||(ea.TargetPopulation={}))});var sF=I(xb=>{"use strict";Object.defineProperty(xb,"__esModule",{value:!0});var oF=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};xb.BaseFeatureProvider=oF});var cF=I(Pb=>{"use strict";Object.defineProperty(Pb,"__esModule",{value:!0});var vee=sF(),aF=class extends vee.BaseFeatureProvider{constructor(e,r){super(e);this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};Pb.FilteredFeatureProvider=aF});var uF=I(kb=>{"use strict";Object.defineProperty(kb,"__esModule",{value:!0});var yee=cF(),lF=class extends yee.FilteredFeatureProvider{constructor(e,r,n){super(r,n);this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let c=e.get(a);r[a]=c}let n=await this.httpClient.get({headers:r});e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(!!a.Parameters)for(let c of Object.keys(a.Parameters)){let l=c+(a.Parameters[c]?"":"cf");s.includes(l)||s.push(l)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};kb.TasApiFeatureProvider=lF});var Ib=I((gbe,dF)=>{"use strict";dF.exports=function(e,r){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(r,i)}}});var hr=I((vbe,hF)=>{"use strict";var wee=Ib(),ta=Object.prototype.toString;function Tb(t){return ta.call(t)==="[object Array]"}function Ab(t){return typeof t=="undefined"}function Cee(t){return t!==null&&!Ab(t)&&t.constructor!==null&&!Ab(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function bee(t){return ta.call(t)==="[object ArrayBuffer]"}function Eee(t){return typeof FormData!="undefined"&&t instanceof FormData}function _ee(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function See(t){return typeof t=="string"}function xee(t){return typeof t=="number"}function fF(t){return t!==null&&typeof t=="object"}function fm(t){if(ta.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Pee(t){return ta.call(t)==="[object Date]"}function kee(t){return ta.call(t)==="[object File]"}function Iee(t){return ta.call(t)==="[object Blob]"}function pF(t){return ta.call(t)==="[object Function]"}function Tee(t){return fF(t)&&pF(t.pipe)}function Aee(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function Dee(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Ree(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Db(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),Tb(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Rb(){var t={};function e(i,o){fm(t[o])&&fm(i)?t[o]=Rb(t[o],i):fm(i)?t[o]=Rb({},i):Tb(i)?t[o]=i.slice():t[o]=i}for(var r=0,n=arguments.length;r<n;r++)Db(arguments[r],e);return t}function Oee(t,e,r){return Db(e,function(i,o){r&&typeof i=="function"?t[o]=wee(i,r):t[o]=i}),t}function Nee(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}hF.exports={isArray:Tb,isArrayBuffer:bee,isBuffer:Cee,isFormData:Eee,isArrayBufferView:_ee,isString:See,isNumber:xee,isObject:fF,isPlainObject:fm,isUndefined:Ab,isDate:Pee,isFile:kee,isBlob:Iee,isFunction:pF,isStream:Tee,isURLSearchParams:Aee,isStandardBrowserEnv:Ree,forEach:Db,merge:Rb,extend:Oee,trim:Dee,stripBOM:Nee}});var pm=I((ybe,gF)=>{"use strict";var Oc=hr();function mF(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}gF.exports=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Oc.isURLSearchParams(r))i=r.toString();else{var o=[];Oc.forEach(r,function(c,l){c===null||typeof c=="undefined"||(Oc.isArray(c)?l=l+"[]":c=[c],Oc.forEach(c,function(d){Oc.isDate(d)?d=d.toISOString():Oc.isObject(d)&&(d=JSON.stringify(d)),o.push(mF(l)+"="+mF(d))}))}),i=o.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var yF=I((wbe,vF)=>{"use strict";var Lee=hr();function hm(){this.handlers=[]}hm.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};hm.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};hm.prototype.forEach=function(e){Lee.forEach(this.handlers,function(n){n!==null&&e(n)})};vF.exports=hm});var CF=I((Cbe,wF)=>{"use strict";var Fee=hr();wF.exports=function(e,r){Fee.forEach(e,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[o])})}});var mm=I((bbe,bF)=>{"use strict";bF.exports=function(e,r,n,i,o){return e.config=r,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var gm=I((Ebe,EF)=>{"use strict";var Mee=mm();EF.exports=function(e,r,n,i,o){var s=new Error(e);return Mee(s,r,n,i,o)}});var Ob=I((_be,_F)=>{"use strict";var qee=gm();_F.exports=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(qee("Request failed with status code "+n.status,n.config,null,n.request,n))}});var xF=I((Sbe,SF)=>{"use strict";var vm=hr();SF.exports=vm.isStandardBrowserEnv()?function(){return{write:function(r,n,i,o,s,a){var c=[];c.push(r+"="+encodeURIComponent(n)),vm.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),vm.isString(o)&&c.push("path="+o),vm.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var kF=I((xbe,PF)=>{"use strict";PF.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var TF=I((Pbe,IF)=>{"use strict";IF.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var Nb=I((kbe,AF)=>{"use strict";var jee=kF(),$ee=TF();AF.exports=function(e,r){return e&&!jee(r)?$ee(e,r):r}});var RF=I((Ibe,DF)=>{"use strict";var Lb=hr(),Uee=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];DF.exports=function(e){var r={},n,i,o;return e&&Lb.forEach(e.split(`
`),function(a){if(o=a.indexOf(":"),n=Lb.trim(a.substr(0,o)).toLowerCase(),i=Lb.trim(a.substr(o+1)),n){if(r[n]&&Uee.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var LF=I((Tbe,NF)=>{"use strict";var OF=hr();NF.exports=OF.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(o){var s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){var a=OF.isString(s)?i(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var Nc=I((Abe,FF)=>{"use strict";function Fb(t){this.message=t}Fb.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Fb.prototype.__CANCEL__=!0;FF.exports=Fb});var qF=I((Dbe,MF)=>{"use strict";var ym=hr(),Bee=Ob(),Hee=xF(),Vee=pm(),Gee=Nb(),Wee=RF(),zee=LF(),Mb=gm(),Kee=Lc(),Yee=Nc();MF.exports=function(e){return new Promise(function(n,i){var o=e.data,s=e.headers,a=e.responseType,c;function l(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}ym.isFormData(o)&&delete s["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(d+":"+f)}var p=Gee(e.baseURL,e.url);u.open(e.method.toUpperCase(),Vee(p,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function h(){if(!!u){var g="getAllResponseHeaders"in u?Wee(u.getAllResponseHeaders()):null,v=!a||a==="text"||a==="json"?u.responseText:u.response,w={data:v,status:u.status,statusText:u.statusText,headers:g,config:e,request:u};Bee(function(b){n(b),l()},function(b){i(b),l()},w),u=null}}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){!u||(i(Mb("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){i(Mb("Network Error",e,null,u)),u=null},u.ontimeout=function(){var v="timeout of "+e.timeout+"ms exceeded",w=e.transitional||Kee.transitional;e.timeoutErrorMessage&&(v=e.timeoutErrorMessage),i(Mb(v,e,w.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},ym.isStandardBrowserEnv()){var m=(e.withCredentials||zee(p))&&e.xsrfCookieName?Hee.read(e.xsrfCookieName):void 0;m&&(s[e.xsrfHeaderName]=m)}"setRequestHeader"in u&&ym.forEach(s,function(v,w){typeof o=="undefined"&&w.toLowerCase()==="content-type"?delete s[w]:u.setRequestHeader(w,v)}),ym.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&a!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(c=function(g){!u||(i(!g||g&&g.type?new Yee("canceled"):g),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c))),o||(o=null),u.send(o)})}});var wm=I((Rbe,jF)=>{jF.exports={version:"0.22.0"}});var GF=I((Obe,VF)=>{"use strict";var Wu=hr(),$F=Ob(),Jee=Nb(),Qee=pm(),Xee=require("http"),Zee=require("https"),ete=Va().http,tte=Va().https,UF=require("url"),rte=require("zlib"),nte=wm().version,Cm=gm(),qb=mm(),ite=Lc(),ote=Nc(),BF=/https:?/;function HF(t,e,r){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=r,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+n}t.beforeRedirect=function(o){o.headers.host=o.host,HF(o,e,o.href)}}VF.exports=function(e){return new Promise(function(n,i){var o;function s(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}var a=function(z){s(),n(z)},c=function(z){s(),i(z)},l=e.data,u=e.headers,d={};if(Object.keys(u).forEach(function(z){d[z.toLowerCase()]=z}),"user-agent"in d?u[d["user-agent"]]||delete u[d["user-agent"]]:u["User-Agent"]="axios/"+nte,l&&!Wu.isStream(l)){if(!Buffer.isBuffer(l))if(Wu.isArrayBuffer(l))l=Buffer.from(new Uint8Array(l));else if(Wu.isString(l))l=Buffer.from(l,"utf-8");else return c(Cm("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));d["content-length"]||(u["Content-Length"]=l.length)}var f=void 0;if(e.auth){var p=e.auth.username||"",h=e.auth.password||"";f=p+":"+h}var m=Jee(e.baseURL,e.url),g=UF.parse(m),v=g.protocol||"http:";if(!f&&g.auth){var w=g.auth.split(":"),C=w[0]||"",b=w[1]||"";f=C+":"+b}f&&d.authorization&&delete u[d.authorization];var S=BF.test(v),P=S?e.httpsAgent:e.httpAgent,_={path:Qee(g.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:u,agent:P,agents:{http:e.httpAgent,https:e.httpsAgent},auth:f};e.socketPath?_.socketPath=e.socketPath:(_.hostname=g.hostname,_.port=g.port);var k=e.proxy;if(!k&&k!==!1){var T=v.slice(0,-1)+"_proxy",A=process.env[T]||process.env[T.toUpperCase()];if(A){var M=UF.parse(A),H=process.env.no_proxy||process.env.NO_PROXY,J=!0;if(H){var K=H.split(",").map(function(z){return z.trim()});J=!K.some(function(z){return z?z==="*"||z[0]==="."&&g.hostname.substr(g.hostname.length-z.length)===z?!0:g.hostname===z:!1})}if(J&&(k={host:M.hostname,port:M.port,protocol:M.protocol},M.auth)){var oe=M.auth.split(":");k.auth={username:oe[0],password:oe[1]}}}}k&&(_.headers.host=g.hostname+(g.port?":"+g.port:""),HF(_,k,v+"//"+g.hostname+(g.port?":"+g.port:"")+_.path));var te,F=S&&(k?BF.test(k.protocol):!0);e.transport?te=e.transport:e.maxRedirects===0?te=F?Zee:Xee:(e.maxRedirects&&(_.maxRedirects=e.maxRedirects),te=F?tte:ete),e.maxBodyLength>-1&&(_.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(_.insecureHTTPParser=e.insecureHTTPParser);var L=te.request(_,function(z){if(!L.aborted){var ie=z,ne=z.req||L;if(z.statusCode!==204&&ne.method!=="HEAD"&&e.decompress!==!1)switch(z.headers["content-encoding"]){case"gzip":case"compress":case"deflate":ie=ie.pipe(rte.createUnzip()),delete z.headers["content-encoding"];break}var be={status:z.statusCode,statusText:z.statusMessage,headers:z.headers,config:e,request:ne};if(e.responseType==="stream")be.data=ie,$F(a,c,be);else{var Pe=[],Se=0;ie.on("data",function(pe){Pe.push(pe),Se+=pe.length,e.maxContentLength>-1&&Se>e.maxContentLength&&(ie.destroy(),c(Cm("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,ne)))}),ie.on("error",function(pe){L.aborted||c(qb(pe,e,null,ne))}),ie.on("end",function(){var pe=Buffer.concat(Pe);e.responseType!=="arraybuffer"&&(pe=pe.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(pe=Wu.stripBOM(pe))),be.data=pe,$F(a,c,be)})}}});if(L.on("error",function(z){L.aborted&&z.code!=="ERR_FR_TOO_MANY_REDIRECTS"||c(qb(z,e,null,L))}),e.timeout){var q=parseInt(e.timeout,10);if(isNaN(q)){c(Cm("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",L));return}L.setTimeout(q,function(){L.abort();var z=e.transitional||ite.transitional;c(Cm("timeout of "+q+"ms exceeded",e,z.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",L))})}(e.cancelToken||e.signal)&&(o=function(G){L.aborted||(L.abort(),c(!G||G&&G.type?new ote("canceled"):G))},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o))),Wu.isStream(l)?l.on("error",function(z){c(qb(z,e,null,L))}).pipe(L):L.end(l)})}});var Lc=I((Nbe,KF)=>{"use strict";var Kt=hr(),WF=CF(),ste=mm(),ate={"Content-Type":"application/x-www-form-urlencoded"};function zF(t,e){!Kt.isUndefined(t)&&Kt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function cte(){var t;return typeof XMLHttpRequest!="undefined"?t=qF():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(t=GF()),t}function lte(t,e,r){if(Kt.isString(t))try{return(e||JSON.parse)(t),Kt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var bm={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:cte(),transformRequest:[function(e,r){return WF(r,"Accept"),WF(r,"Content-Type"),Kt.isFormData(e)||Kt.isArrayBuffer(e)||Kt.isBuffer(e)||Kt.isStream(e)||Kt.isFile(e)||Kt.isBlob(e)?e:Kt.isArrayBufferView(e)?e.buffer:Kt.isURLSearchParams(e)?(zF(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Kt.isObject(e)||r&&r["Content-Type"]==="application/json"?(zF(r,"application/json"),lte(e)):e}],transformResponse:[function(e){var r=this.transitional||bm.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&Kt.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?ste(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Kt.forEach(["delete","get","head"],function(e){bm.headers[e]={}});Kt.forEach(["post","put","patch"],function(e){bm.headers[e]=Kt.merge(ate)});KF.exports=bm});var JF=I((Lbe,YF)=>{"use strict";var ute=hr(),dte=Lc();YF.exports=function(e,r,n){var i=this||dte;return ute.forEach(n,function(s){e=s.call(i,e,r)}),e}});var jb=I((Fbe,QF)=>{"use strict";QF.exports=function(e){return!!(e&&e.__CANCEL__)}});var eM=I((Mbe,ZF)=>{"use strict";var XF=hr(),$b=JF(),fte=jb(),pte=Lc(),hte=Nc();function Ub(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new hte("canceled")}ZF.exports=function(e){Ub(e),e.headers=e.headers||{},e.data=$b.call(e,e.data,e.headers,e.transformRequest),e.headers=XF.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),XF.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||pte.adapter;return r(e).then(function(i){return Ub(e),i.data=$b.call(e,i.data,i.headers,e.transformResponse),i},function(i){return fte(i)||(Ub(e),i&&i.response&&(i.response.data=$b.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var Bb=I((qbe,tM)=>{"use strict";var Hr=hr();tM.exports=function(e,r){r=r||{};var n={};function i(u,d){return Hr.isPlainObject(u)&&Hr.isPlainObject(d)?Hr.merge(u,d):Hr.isPlainObject(d)?Hr.merge({},d):Hr.isArray(d)?d.slice():d}function o(u){if(Hr.isUndefined(r[u])){if(!Hr.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],r[u])}function s(u){if(!Hr.isUndefined(r[u]))return i(void 0,r[u])}function a(u){if(Hr.isUndefined(r[u])){if(!Hr.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,r[u])}function c(u){if(u in r)return i(e[u],r[u]);if(u in e)return i(void 0,e[u])}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Hr.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var f=l[d]||o,p=f(d);Hr.isUndefined(p)&&f!==c||(n[d]=p)}),n}});var iM=I((jbe,nM)=>{"use strict";var mte=wm().version,Hb={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Hb[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var rM={};Hb.transitional=function(e,r,n){function i(o,s){return"[Axios v"+mte+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return function(o,s,a){if(e===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!rM[s]&&(rM[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,s,a):!0}};function gte(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],s=e[o];if(s){var a=t[o],c=a===void 0||s(a,o,t);if(c!==!0)throw new TypeError("option "+o+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+o)}}nM.exports={assertOptions:gte,validators:Hb}});var uM=I(($be,lM)=>{"use strict";var oM=hr(),vte=pm(),sM=yF(),aM=eM(),Em=Bb(),cM=iM(),Fc=cM.validators;function zu(t){this.defaults=t,this.interceptors={request:new sM,response:new sM}}zu.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Em(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&cM.assertOptions(r,{silentJSONParsing:Fc.transitional(Fc.boolean),forcedJSONParsing:Fc.transitional(Fc.boolean),clarifyTimeoutError:Fc.transitional(Fc.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(e)===!1||(i=i&&f.synchronous,n.unshift(f.fulfilled,f.rejected))});var o=[];this.interceptors.response.forEach(function(f){o.push(f.fulfilled,f.rejected)});var s;if(!i){var a=[aM,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(o),s=Promise.resolve(e);a.length;)s=s.then(a.shift(),a.shift());return s}for(var c=e;n.length;){var l=n.shift(),u=n.shift();try{c=l(c)}catch(d){u(d);break}}try{s=aM(c)}catch(d){return Promise.reject(d)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};zu.prototype.getUri=function(e){return e=Em(this.defaults,e),vte(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};oM.forEach(["delete","get","head","options"],function(e){zu.prototype[e]=function(r,n){return this.request(Em(n||{},{method:e,url:r,data:(n||{}).data}))}});oM.forEach(["post","put","patch"],function(e){zu.prototype[e]=function(r,n,i){return this.request(Em(i||{},{method:e,url:r,data:n}))}});lM.exports=zu});var fM=I((Ube,dM)=>{"use strict";var yte=Nc();function Mc(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(!!r._listeners){var i,o=r._listeners.length;for(i=0;i<o;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(s){r.subscribe(s),i=s}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i){r.reason||(r.reason=new yte(i),e(r.reason))})}Mc.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Mc.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Mc.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};Mc.source=function(){var e,r=new Mc(function(i){e=i});return{token:r,cancel:e}};dM.exports=Mc});var hM=I((Bbe,pM)=>{"use strict";pM.exports=function(e){return function(n){return e.apply(null,n)}}});var gM=I((Hbe,mM)=>{"use strict";mM.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var wM=I((Vbe,Vb)=>{"use strict";var vM=hr(),wte=Ib(),_m=uM(),Cte=Bb(),bte=Lc();function yM(t){var e=new _m(t),r=wte(_m.prototype.request,e);return vM.extend(r,_m.prototype,e),vM.extend(r,e),r.create=function(i){return yM(Cte(t,i))},r}var ci=yM(bte);ci.Axios=_m;ci.Cancel=Nc();ci.CancelToken=fM();ci.isCancel=jb();ci.VERSION=wm().version;ci.all=function(e){return Promise.all(e)};ci.spread=hM();ci.isAxiosError=gM();Vb.exports=ci;Vb.exports.default=ci});var bM=I((Gbe,CM)=>{CM.exports=wM()});var _M=I(Gb=>{"use strict";Object.defineProperty(Gb,"__esModule",{value:!0});var Ete=bM(),EM=class{constructor(e){this.endpoint=e}get(e){return Ete.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}};Gb.AxiosHttpClient=EM});var xM=I(Wb=>{"use strict";Object.defineProperty(Wb,"__esModule",{value:!0});var SM=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};Wb.MemoryKeyValueStorage=SM});var kM=I(zb=>{"use strict";Object.defineProperty(zb,"__esModule",{value:!0});var _te=xM(),PM=class{constructor(e,r,n,i,o,s){this.telemetry=e,this.featuresTelemetryPropertyName=r,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=i,this.storageKey=o,this.storage=s,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(s=new _te.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((a,c)=>{this.resolveInitialFetchPromise=a})}get features(){return this._features}set features(e){this._features=e,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));try{let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`),(n=this.features.configs.find(o=>o.Id===e))===null||n===void 0?void 0:n.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};zb.ExperimentationServiceBase=PM});var TM=I(Kb=>{"use strict";Object.defineProperty(Kb,"__esModule",{value:!0});var IM=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};Kb.PollingService=IM});var DM=I(Yb=>{"use strict";Object.defineProperty(Yb,"__esModule",{value:!0});var Ste=kM(),xte=TM(),AM=class extends Ste.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a,c){super(e,i,o,s,a,c);if(this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.featuresTelemetryPropertyName=i,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=s,this.storageKey=a,this.storage=c,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new xte.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};Yb.ExperimentationServiceAutoPolling=AM});var RM=I(Qb=>{"use strict";Object.defineProperty(Qb,"__esModule",{value:!0});var Pte=uF(),kte=_M(),Ite=DM(),Jb=class extends Ite.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.featuresTelemetryPropertyName,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage);this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new Pte.TasApiFeatureProvider(new kte.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};Qb.ExperimentationService=Jb;Jb.REFRESH_RATE_IN_MINUTES=30});var OM=I(Xb=>{"use strict";Object.defineProperty(Xb,"__esModule",{value:!0});var Tte=RM();Xb.ExperimentationService=Tte.ExperimentationService});var LM=I(Zb=>{"use strict";Object.defineProperty(Zb,"__esModule",{value:!0});var NM=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};Zb.MementoKeyValueStorage=NM});var MM=I(eE=>{"use strict";Object.defineProperty(eE,"__esModule",{value:!0});var FM=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};eE.default=FM});var jM=I(Sm=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});var Ate=Sb(),Dte=OM(),tE=require("vscode"),Rte=LM(),Ote=MM(),Nte="https://default.exp-tas.com/vscode/ab",Lte="query-expfeature",Fte="VSCode.ABExp.Features",Mte="abexp.assignmentcontext",qte="VSCode.ABExp.FeatureData",jte=1e3*60*30;function qM(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=tE.workspace.getConfiguration("telemetry");if(!(tE.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):tE.env.isTelemetryEnabled))return new Ote.default;let l=[new Ate.VSCodeFilterProvider(t,e,r),...o],u=new Rte.MementoKeyValueStorage(i);return new Dte.ExperimentationService({filterProviders:l,telemetry:n,storageKey:qte,keyValueStorage:u,featuresTelemetryPropertyName:Fte,assignmentContextTelemetryPropertyName:Mte,telemetryEventName:Lte,endpoint:Nte,refetchInterval:jte})}Sm.getExperimentationService=qM;async function $te(t,e,r,n,i,...o){let s=qM(t,e,r,n,i,...o);return await s.initializePromise,s}Sm.getExperimentationServiceAsync=$te});var UM=I(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});var $M=jM();Ku.getExperimentationService=$M.getExperimentationService;Ku.getExperimentationServiceAsync=$M.getExperimentationServiceAsync;var Ute=Sb();Ku.TargetPopulation=Ute.TargetPopulation});var Ke=I(qt=>{"use strict";var mE=Symbol.for("yaml.alias"),fq=Symbol.for("yaml.document"),Nm=Symbol.for("yaml.map"),pq=Symbol.for("yaml.pair"),gE=Symbol.for("yaml.scalar"),Lm=Symbol.for("yaml.seq"),pi=Symbol.for("yaml.node.type"),fre=t=>!!t&&typeof t=="object"&&t[pi]===mE,pre=t=>!!t&&typeof t=="object"&&t[pi]===fq,hre=t=>!!t&&typeof t=="object"&&t[pi]===Nm,mre=t=>!!t&&typeof t=="object"&&t[pi]===pq,hq=t=>!!t&&typeof t=="object"&&t[pi]===gE,gre=t=>!!t&&typeof t=="object"&&t[pi]===Lm;function mq(t){if(t&&typeof t=="object")switch(t[pi]){case Nm:case Lm:return!0}return!1}function vre(t){if(t&&typeof t=="object")switch(t[pi]){case mE:case Nm:case gE:case Lm:return!0}return!1}var yre=t=>(hq(t)||mq(t))&&!!t.anchor,gq=class{constructor(e){Object.defineProperty(this,pi,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}};qt.ALIAS=mE;qt.DOC=fq;qt.MAP=Nm;qt.NODE_TYPE=pi;qt.NodeBase=gq;qt.PAIR=pq;qt.SCALAR=gE;qt.SEQ=Lm;qt.hasAnchor=yre;qt.isAlias=fre;qt.isCollection=mq;qt.isDocument=pre;qt.isMap=hre;qt.isNode=vre;qt.isPair=mre;qt.isScalar=hq;qt.isSeq=gre});var od=I(vq=>{"use strict";var Pr=Ke(),ia=Symbol("break visit"),wre=Symbol("skip children"),id=Symbol("remove node");function Fm(t,e){typeof e=="object"&&(e.Collection||e.Node||e.Value)&&(e=Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e)),Pr.isDocument(t)?Uc(null,t.contents,e,Object.freeze([t]))===id&&(t.contents=null):Uc(null,t,e,Object.freeze([]))}Fm.BREAK=ia;Fm.SKIP=wre;Fm.REMOVE=id;function Uc(t,e,r,n){let i;if(typeof r=="function"?i=r(t,e,n):Pr.isMap(e)?r.Map&&(i=r.Map(t,e,n)):Pr.isSeq(e)?r.Seq&&(i=r.Seq(t,e,n)):Pr.isPair(e)?r.Pair&&(i=r.Pair(t,e,n)):Pr.isScalar(e)?r.Scalar&&(i=r.Scalar(t,e,n)):Pr.isAlias(e)&&r.Alias&&(i=r.Alias(t,e,n)),Pr.isNode(i)||Pr.isPair(i)){let o=n[n.length-1];if(Pr.isCollection(o))o.items[t]=i;else if(Pr.isPair(o))t==="key"?o.key=i:o.value=i;else if(Pr.isDocument(o))o.contents=i;else{let s=Pr.isAlias(o)?"alias":"scalar";throw new Error(`Cannot replace node with ${s} parent`)}return Uc(t,i,r,n)}if(typeof i!="symbol"){if(Pr.isCollection(e)){n=Object.freeze(n.concat(e));for(let o=0;o<e.items.length;++o){let s=Uc(o,e.items[o],r,n);if(typeof s=="number")o=s-1;else{if(s===ia)return ia;s===id&&(e.items.splice(o,1),o-=1)}}}else if(Pr.isPair(e)){n=Object.freeze(n.concat(e));let o=Uc("key",e.key,r,n);if(o===ia)return ia;o===id&&(e.key=null);let s=Uc("value",e.value,r,n);if(s===ia)return ia;s===id&&(e.value=null)}}return i}vq.visit=Fm});var vE=I(wq=>{"use strict";var yq=Ke(),Cre=od(),bre={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Ere=t=>t.replace(/[!,[\]{}]/g,e=>bre[e]),Vr=class{constructor(e,r){this.marker=null,this.yaml=Object.assign({},Vr.defaultYaml,e),this.tags=Object.assign({},Vr.defaultTags,r)}clone(){let e=new Vr(this.yaml,this.tags);return e.marker=this.marker,e}atDocument(){let e=new Vr(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Vr.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Vr.defaultTags);break}return e}add(e,r){this.atNextDocument&&(this.yaml={explicit:Vr.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Vr.defaultTags),this.atNextDocument=!1);let n=e.trim().split(/[ \t]+/),i=n.shift();switch(i){case"%TAG":{if(n.length!==2&&(r(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;let[o,s]=n;return this.tags[o]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length<1)return r(0,"%YAML directive should contain exactly one part"),!1;let[o]=n;return o==="1.1"||o==="1.2"?(this.yaml.version=o,!0):(r(6,`Unsupported YAML version ${o}`,!0),!1)}default:return r(0,`Unknown directive ${i}`,!0),!1}}tagName(e,r){if(e==="!")return"!";if(e[0]!=="!")return r(`Not a valid tag: ${e}`),null;if(e[1]==="<"){let s=e.slice(2,-1);return s==="!"||s==="!!"?(r(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&r("Verbatim tags must end with a >"),s)}let[,n,i]=e.match(/^(.*!)([^!]*)$/);i||r(`The ${e} tag has no suffix`);let o=this.tags[n];return o?o+decodeURIComponent(i):n==="!"?e:(r(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[r,n]of Object.entries(this.tags))if(e.startsWith(n))return r+Ere(e.substring(n.length));return e[0]==="!"?e:`!<${e}>`}toString(e){let r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags),i;if(e&&n.length>0&&yq.isNode(e.contents)){let o={};Cre.visit(e.contents,(s,a)=>{yq.isNode(a)&&a.tag&&(o[a.tag]=!0)}),i=Object.keys(o)}else i=[];for(let[o,s]of n)o==="!!"&&s==="tag:yaml.org,2002:"||(!e||i.some(a=>a.startsWith(s)))&&r.push(`%TAG ${o} ${s}`);return r.join(`
`)}};Vr.defaultYaml={explicit:!1,version:"1.2"};Vr.defaultTags={"!!":"tag:yaml.org,2002:"};wq.Directives=Vr});var Mm=I(sd=>{"use strict";var Cq=Ke(),_re=od();function Sre(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){let r=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(r)}return!0}function bq(t){let e=new Set;return _re.visit(t,{Value(r,n){n.anchor&&e.add(n.anchor)}}),e}function Eq(t,e){for(let r=1;;++r){let n=`${t}${r}`;if(!e.has(n))return n}}function xre(t,e){let r=[],n=new Map,i=null;return{onAnchor(o){r.push(o),i||(i=bq(t));let s=Eq(e,i);return i.add(s),s},setAnchors(){for(let o of r){let s=n.get(o);if(typeof s=="object"&&s.anchor&&(Cq.isScalar(s.node)||Cq.isCollection(s.node)))s.node.anchor=s.anchor;else{let a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=o,a}}},sourceObjects:n}}sd.anchorIsValid=Sre;sd.anchorNames=bq;sd.createNodeAnchors=xre;sd.findNewAnchor=Eq});var cd=I(xq=>{"use strict";var Pre=Mm(),_q=od(),ad=Ke(),Sq=class extends ad.NodeBase{constructor(e){super(ad.ALIAS);this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let r;return _q.visit(e,{Node:(n,i)=>{if(i===this)return _q.visit.BREAK;i.anchor===this.source&&(r=i)}}),r}toJSON(e,r){if(!r)return{source:this.source};let{anchors:n,doc:i,maxAliasCount:o}=r,s=this.resolve(i);if(!s){let c=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(c)}let a=n.get(s);if(!a||a.res===void 0){let c="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(c)}if(o>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=qm(i,s,n)),a.count*a.aliasCount>o)){let c="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(c)}return a.res}toString(e,r,n){let i=`*${this.source}`;if(e){if(Pre.anchorIsValid(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let o=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(o)}if(e.implicitKey)return`${i} `}return i}};function qm(t,e,r){if(ad.isAlias(e)){let n=e.resolve(t),i=r&&n&&r.get(n);return i?i.count*i.aliasCount:0}else if(ad.isCollection(e)){let n=0;for(let i of e.items){let o=qm(t,i,r);o>n&&(n=o)}return n}else if(ad.isPair(e)){let n=qm(t,e.key,r),i=qm(t,e.value,r);return Math.max(n,i)}return 1}xq.Alias=Sq});var Bc=I(kq=>{"use strict";var kre=Ke();function Pq(t,e,r){if(Array.isArray(t))return t.map((n,i)=>Pq(n,String(i),r));if(t&&typeof t.toJSON=="function"){if(!r||!kre.hasAnchor(t))return t.toJSON(e,r);let n={aliasCount:0,count:1,res:void 0};r.anchors.set(t,n),r.onCreate=o=>{n.res=o,delete r.onCreate};let i=t.toJSON(e,r);return r.onCreate&&r.onCreate(i),i}return typeof t=="bigint"&&!(r&&r.keep)?Number(t):t}kq.toJS=Pq});var xt=I(yE=>{"use strict";var Iq=Ke(),Ire=Bc(),Tre=t=>!t||typeof t!="function"&&typeof t!="object",oa=class extends Iq.NodeBase{constructor(e){super(Iq.SCALAR);this.value=e}toJSON(e,r){return r&&r.keep?this.value:Ire.toJS(this.value,e,r)}toString(){return String(this.value)}};oa.BLOCK_FOLDED="BLOCK_FOLDED";oa.BLOCK_LITERAL="BLOCK_LITERAL";oa.PLAIN="PLAIN";oa.QUOTE_DOUBLE="QUOTE_DOUBLE";oa.QUOTE_SINGLE="QUOTE_SINGLE";yE.Scalar=oa;yE.isScalarValue=Tre});var ld=I(Aq=>{"use strict";var Are=cd(),sa=Ke(),Tq=xt(),Dre="tag:yaml.org,2002:";function Rre(t,e,r){if(e){let n=r.filter(o=>o.tag===e),i=n.find(o=>!o.format)||n[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return r.find(n=>n.identify&&n.identify(t)&&!n.format)}function Ore(t,e,r){var n,i;if(sa.isDocument(t)&&(t=t.contents),sa.isNode(t))return t;if(sa.isPair(t)){let p=(i=(n=r.schema[sa.MAP]).createNode)===null||i===void 0?void 0:i.call(n,r.schema,null,r);return p.items.push(t),p}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt=="function"&&t instanceof BigInt)&&(t=t.valueOf());let{aliasDuplicateObjects:o,onAnchor:s,onTagObj:a,schema:c,sourceObjects:l}=r,u;if(o&&t&&typeof t=="object"){if(u=l.get(t),u)return u.anchor||(u.anchor=s(t)),new Are.Alias(u.anchor);u={anchor:null,node:null},l.set(t,u)}e&&e.startsWith("!!")&&(e=Dre+e.slice(2));let d=Rre(t,e,c.tags);if(!d){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){let p=new Tq.Scalar(t);return u&&(u.node=p),p}d=t instanceof Map?c[sa.MAP]:Symbol.iterator in Object(t)?c[sa.SEQ]:c[sa.MAP]}a&&(a(d),delete r.onTagObj);let f=(d==null?void 0:d.createNode)?d.createNode(r.schema,t,r):new Tq.Scalar(t);return e&&(f.tag=e),u&&(u.node=f),f}Aq.createNode=Ore});var ud=I(jm=>{"use strict";var Nre=ld(),jn=Ke();function wE(t,e,r){let n=r;for(let i=e.length-1;i>=0;--i){let o=e[i];if(typeof o=="number"&&Number.isInteger(o)&&o>=0){let s=[];s[o]=n,n=s}else n=new Map([[o,n]])}return Nre.createNode(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}var Dq=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done,CE=class extends jn.NodeBase{constructor(e,r){super(e);Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}clone(e){let r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(r.schema=e),r.items=r.items.map(n=>jn.isNode(n)||jn.isPair(n)?n.clone(e):n),this.range&&(r.range=this.range.slice()),r}addIn(e,r){if(Dq(e))this.add(r);else{let[n,...i]=e,o=this.get(n,!0);if(jn.isCollection(o))o.addIn(i,r);else if(o===void 0&&this.schema)this.set(n,wE(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}deleteIn(e){let[r,...n]=e;if(n.length===0)return this.delete(r);let i=this.get(r,!0);if(jn.isCollection(i))return i.deleteIn(n);throw new Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}getIn(e,r){let[n,...i]=e,o=this.get(n,!0);return i.length===0?!r&&jn.isScalar(o)?o.value:o:jn.isCollection(o)?o.getIn(i,r):void 0}hasAllNullValues(e){return this.items.every(r=>{if(!jn.isPair(r))return!1;let n=r.value;return n==null||e&&jn.isScalar(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){let[r,...n]=e;if(n.length===0)return this.has(r);let i=this.get(r,!0);return jn.isCollection(i)?i.hasIn(n):!1}setIn(e,r){let[n,...i]=e;if(i.length===0)this.set(n,r);else{let o=this.get(n,!0);if(jn.isCollection(o))o.setIn(i,r);else if(o===void 0&&this.schema)this.set(n,wE(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}};CE.maxFlowStringSingleLineLength=60;jm.Collection=CE;jm.collectionFromPath=wE;jm.isEmptyPath=Dq});var dd=I($m=>{"use strict";var Lre=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Rq(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}var Fre=(t,e,r)=>r.includes(`
`)?`
`+Rq(r,e):(t.endsWith(" ")?"":" ")+r;$m.indentComment=Rq;$m.lineComment=Fre;$m.stringifyComment=Lre});var Nq=I(fd=>{"use strict";var Mre="flow",bE="block",Um="quoted";function qre(t,e,r="flow",{indentAtStart:n,lineWidth:i=80,minContentWidth:o=20,onFold:s,onOverflow:a}={}){if(!i||i<0)return t;let c=Math.max(1+o,1+i-e.length);if(t.length<=c)return t;let l=[],u={},d=i-e.length;typeof n=="number"&&(n>i-Math.max(2,o)?l.push(0):d=i-n);let f,p,h=!1,m=-1,g=-1,v=-1;r===bE&&(m=Oq(t,m),m!==-1&&(d=m+c));for(let C;C=t[m+=1];){if(r===Um&&C==="\\"){switch(g=m,t[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}v=m}if(C===`
`)r===bE&&(m=Oq(t,m)),d=m+c,f=void 0;else{if(C===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){let b=t[m+1];b&&b!==" "&&b!==`
`&&b!=="	"&&(f=m)}if(m>=d)if(f)l.push(f),d=f+c,f=void 0;else if(r===Um){for(;p===" "||p==="	";)p=C,C=t[m+=1],h=!0;let b=m>v+1?m-2:g-1;if(u[b])return t;l.push(b),u[b]=!0,d=b+c,f=void 0}else h=!0}p=C}if(h&&a&&a(),l.length===0)return t;s&&s();let w=t.slice(0,l[0]);for(let C=0;C<l.length;++C){let b=l[C],S=l[C+1]||t.length;b===0?w=`
${e}${t.slice(0,S)}`:(r===Um&&u[b]&&(w+=`${t[b]}\\`),w+=`
${e}${t.slice(b+1,S)}`)}return w}function Oq(t,e){let r=t[e+1];for(;r===" "||r==="	";){do r=t[e+=1];while(r&&r!==`
`);r=t[e+1]}return e}fd.FOLD_BLOCK=bE;fd.FOLD_FLOW=Mre;fd.FOLD_QUOTED=Um;fd.foldFlowLines=qre});var md=I(Lq=>{"use strict";var hi=xt(),Mo=Nq(),Bm=t=>({indentAtStart:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Hm=t=>/^(%|---|\.\.\.)/m.test(t);function jre(t,e,r){if(!e||e<0)return!1;let n=e-r,i=t.length;if(i<=n)return!1;for(let o=0,s=0;o<i;++o)if(t[o]===`
`){if(o-s>n)return!0;if(s=o+1,i-s<=n)return!1}return!0}function pd(t,e){let r=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return r;let{implicitKey:n}=e,i=e.options.doubleQuotedMinMultiLineLength,o=e.indent||(Hm(t)?"  ":""),s="",a=0;for(let c=0,l=r[c];l;l=r[++c])if(l===" "&&r[c+1]==="\\"&&r[c+2]==="n"&&(s+=r.slice(a,c)+"\\ ",c+=1,a=c,l="\\"),l==="\\")switch(r[c+1]){case"u":{s+=r.slice(a,c);let u=r.substr(c+2,4);switch(u){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:u.substr(0,2)==="00"?s+="\\x"+u.substr(2):s+=r.substr(c,6)}c+=5,a=c+1}break;case"n":if(n||r[c+2]==='"'||r.length<i)c+=1;else{for(s+=r.slice(a,c)+`

`;r[c+2]==="\\"&&r[c+3]==="n"&&r[c+4]!=='"';)s+=`
`,c+=2;s+=o,r[c+2]===" "&&(s+="\\"),c+=1,a=c+1}break;default:c+=1}return s=a?s+r.slice(a):r,n?s:Mo.foldFlowLines(s,o,Mo.FOLD_QUOTED,Bm(e))}function EE(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return pd(t,e);let r=e.indent||(Hm(t)?"  ":""),n="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return e.implicitKey?n:Mo.foldFlowLines(n,r,Mo.FOLD_FLOW,Bm(e))}function hd(t,e){let{singleQuote:r}=e.options,n;if(r===!1)n=pd;else{let i=t.includes('"'),o=t.includes("'");i&&!o?n=EE:o&&!i?n=pd:n=r?EE:pd}return n(t,e)}function Vm({comment:t,type:e,value:r},n,i,o){let{blockQuote:s,commentString:a,lineWidth:c}=n.options;if(!s||/\n[\t ]+$/.test(r)||/^\s*$/.test(r))return hd(r,n);let l=n.indent||(n.forceBlockIndent||Hm(r)?"  ":""),u=s==="literal"?!0:s==="folded"||e===hi.Scalar.BLOCK_FOLDED?!1:e===hi.Scalar.BLOCK_LITERAL?!0:!jre(r,c,l.length);if(!r)return u?`|
`:`>
`;let d,f;for(f=r.length;f>0;--f){let P=r[f-1];if(P!==`
`&&P!=="	"&&P!==" ")break}let p=r.substring(f),h=p.indexOf(`
`);h===-1?d="-":r===p||h!==p.length-1?(d="+",o&&o()):d="",p&&(r=r.slice(0,-p.length),p[p.length-1]===`
`&&(p=p.slice(0,-1)),p=p.replace(/\n+(?!\n|$)/g,`$&${l}`));let m=!1,g,v=-1;for(g=0;g<r.length;++g){let P=r[g];if(P===" ")m=!0;else if(P===`
`)v=g;else break}let w=r.substring(0,v<g?v+1:g);w&&(r=r.substring(w.length),w=w.replace(/\n+/g,`$&${l}`));let b=(u?"|":">")+(m?l?"2":"1":"")+d;if(t&&(b+=" "+a(t.replace(/ ?[\r\n]+/g," ")),i&&i()),u)return r=r.replace(/\n+/g,`$&${l}`),`${b}
${l}${w}${r}${p}`;r=r.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`);let S=Mo.foldFlowLines(`${w}${r}${p}`,l,Mo.FOLD_BLOCK,Bm(n));return`${b}
${l}${S}`}function $re(t,e,r,n){let{type:i,value:o}=t,{actualString:s,implicitKey:a,indent:c,inFlow:l}=e;if(a&&/[\n[\]{},]/.test(o)||l&&/[[\]{},]/.test(o))return hd(o,e);if(!o||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return a||l||o.indexOf(`
`)===-1?hd(o,e):Vm(t,e,r,n);if(!a&&!l&&i!==hi.Scalar.PLAIN&&o.indexOf(`
`)!==-1)return Vm(t,e,r,n);if(c===""&&Hm(o))return e.forceBlockIndent=!0,Vm(t,e,r,n);let u=o.replace(/\n+/g,`$&
${c}`);if(s){let d=h=>{var m;return h.default&&h.tag!=="tag:yaml.org,2002:str"&&((m=h.test)===null||m===void 0?void 0:m.test(u))},{compat:f,tags:p}=e.doc.schema;if(p.some(d)||(f==null?void 0:f.some(d)))return hd(o,e)}return a?u:Mo.foldFlowLines(u,c,Mo.FOLD_FLOW,Bm(e))}function Ure(t,e,r,n){let{implicitKey:i,inFlow:o}=e,s=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)}),{type:a}=t;a!==hi.Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=hi.Scalar.QUOTE_DOUBLE);let c=u=>{switch(u){case hi.Scalar.BLOCK_FOLDED:case hi.Scalar.BLOCK_LITERAL:return i||o?hd(s.value,e):Vm(s,e,r,n);case hi.Scalar.QUOTE_DOUBLE:return pd(s.value,e);case hi.Scalar.QUOTE_SINGLE:return EE(s.value,e);case hi.Scalar.PLAIN:return $re(s,e,r,n);default:return null}},l=c(a);if(l===null){let{defaultKeyType:u,defaultStringType:d}=e.options,f=i&&u||d;if(l=c(f),l===null)throw new Error(`Unsupported default string type ${f}`)}return l}Lq.stringifyString=Ure});var Hc=I(_E=>{"use strict";var Bre=Mm(),qo=Ke(),Hre=dd(),Vre=md();function Gre(t,e){let r=Object.assign({blockQuote:!0,commentString:Hre.stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e),n;switch(r.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:t,indent:"",indentStep:typeof r.indent=="number"?" ".repeat(r.indent):"  ",inFlow:n,options:r}}function Wre(t,e){if(e.tag){let i=t.filter(o=>o.tag===e.tag);if(i.length>0)return i.find(o=>o.format===e.format)||i[0]}let r,n;if(qo.isScalar(e)){n=e.value;let i=t.filter(o=>o.identify&&o.identify(n));r=i.find(o=>o.format===e.format)||i.find(o=>!o.format)}else n=e,r=t.find(i=>i.nodeClass&&n instanceof i.nodeClass);if(!r){let i=n&&n.constructor?n.constructor.name:typeof n;throw new Error(`Tag not resolved for ${i} value`)}return r}function zre(t,e,{anchors:r,doc:n}){if(!n.directives)return"";let i=[],o=(qo.isScalar(t)||qo.isCollection(t))&&t.anchor;o&&Bre.anchorIsValid(o)&&(r.add(o),i.push(`&${o}`));let s=t.tag||(e.default?null:e.tag);return s&&i.push(n.directives.tagString(s)),i.join(" ")}function Kre(t,e,r,n){var i;if(qo.isPair(t))return t.toString(e,r,n);if(qo.isAlias(t)){if(e.doc.directives)return t.toString(e);if((i=e.resolvedAliases)===null||i===void 0?void 0:i.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let o,s=qo.isNode(t)?t:e.doc.createNode(t,{onTagObj:l=>o=l});o||(o=Wre(e.doc.schema.tags,s));let a=zre(s,o,e);a.length>0&&(e.indentAtStart=(e.indentAtStart||0)+a.length+1);let c=typeof o.stringify=="function"?o.stringify(s,e,r,n):qo.isScalar(s)?Vre.stringifyString(s,e,r,n):s.toString(e,r,n);return a?qo.isScalar(s)||c[0]==="{"||c[0]==="["?`${a} ${c}`:`${a}
${e.indent}${c}`:c}_E.createStringifyContext=Gre;_E.stringify=Kre});var jq=I(qq=>{"use strict";var jo=Ke(),Fq=xt(),Mq=Hc(),gd=dd();function Yre({key:t,value:e},r,n,i){let{allNullValues:o,doc:s,indent:a,indentStep:c,options:{commentString:l,indentSeq:u,simpleKeys:d}}=r,f=jo.isNode(t)&&t.comment||null;if(d){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(jo.isCollection(t)){let P="With simple keys, collection cannot be used as a key value";throw new Error(P)}}let p=!d&&(!t||f&&e==null&&!r.inFlow||jo.isCollection(t)||(jo.isScalar(t)?t.type===Fq.Scalar.BLOCK_FOLDED||t.type===Fq.Scalar.BLOCK_LITERAL:typeof t=="object"));r=Object.assign({},r,{allNullValues:!1,implicitKey:!p&&(d||!o),indent:a+c});let h=!1,m=!1,g=Mq.stringify(t,r,()=>h=!0,()=>m=!0);if(!p&&!r.inFlow&&g.length>1024){if(d)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(r.inFlow){if(o||e==null)return h&&n&&n(),p?`? ${g}`:g}else if(o&&!d||e==null&&p)return g=`? ${g}`,f&&!h?g+=gd.lineComment(g,r.indent,l(f)):m&&i&&i(),g;h&&(f=null),p?(f&&(g+=gd.lineComment(g,r.indent,l(f))),g=`? ${g}
${a}:`):(g=`${g}:`,f&&(g+=gd.lineComment(g,r.indent,l(f))));let v="",w=null;if(jo.isNode(e)){if(e.spaceBefore&&(v=`
`),e.commentBefore){let P=l(e.commentBefore);v+=`
${gd.indentComment(P,r.indent)}`}w=e.comment}else e&&typeof e=="object"&&(e=s.createNode(e));r.implicitKey=!1,!p&&!f&&jo.isScalar(e)&&(r.indentAtStart=g.length+1),m=!1,!u&&c.length>=2&&!r.inFlow&&!p&&jo.isSeq(e)&&!e.flow&&!e.tag&&!e.anchor&&(r.indent=r.indent.substr(2));let C=!1,b=Mq.stringify(e,r,()=>C=!0,()=>m=!0),S=" ";return v||f?S=b===""&&!r.inFlow?v:`${v}
${r.indent}`:!p&&jo.isCollection(e)?(!(b[0]==="["||b[0]==="{")||b.includes(`
`))&&(S=`
${r.indent}`):(b===""||b[0]===`
`)&&(S=""),g+=S+b,r.inFlow?C&&n&&n():w&&!C?g+=gd.lineComment(g,r.indent,l(w)):m&&i&&i(),g}qq.stringifyPair=Yre});var xE=I(SE=>{"use strict";function Jre(t,...e){t==="debug"&&console.log(...e)}function Qre(t,e){(t==="debug"||t==="warn")&&(typeof process!="undefined"&&process.emitWarning?process.emitWarning(e):console.warn(e))}SE.debug=Jre;SE.warn=Qre});var IE=I(Uq=>{"use strict";var Xre=xE(),Zre=Hc(),Vc=Ke(),ene=xt(),PE=Bc(),$q="<<";function tne(t,e,{key:r,value:n}){if(t&&t.doc.schema.merge&&rne(r))if(n=Vc.isAlias(n)?n.resolve(t.doc):n,Vc.isSeq(n))for(let i of n.items)kE(t,e,i);else if(Array.isArray(n))for(let i of n)kE(t,e,i);else kE(t,e,n);else{let i=PE.toJS(r,"",t);if(e instanceof Map)e.set(i,PE.toJS(n,i,t));else if(e instanceof Set)e.add(i);else{let o=nne(r,i,t),s=PE.toJS(n,o,t);o in e?Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0}):e[o]=s}}return e}var rne=t=>t===$q||Vc.isScalar(t)&&t.value===$q&&(!t.type||t.type===ene.Scalar.PLAIN);function kE(t,e,r){let n=t&&Vc.isAlias(r)?r.resolve(t.doc):r;if(!Vc.isMap(n))throw new Error("Merge sources must be maps or map aliases");let i=n.toJSON(null,t,Map);for(let[o,s]of i)e instanceof Map?e.has(o)||e.set(o,s):e instanceof Set?e.add(o):Object.prototype.hasOwnProperty.call(e,o)||Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0});return e}function nne(t,e,r){if(e===null)return"";if(typeof e!="object")return String(e);if(Vc.isNode(t)&&r&&r.doc){let n=Zre.createStringifyContext(r.doc,{});n.anchors=new Set;for(let o of r.anchors.keys())n.anchors.add(o.anchor);n.inFlow=!0,n.inStringifyKey=!0;let i=t.toString(n);if(!r.mapKeyWarned){let o=JSON.stringify(i);o.length>40&&(o=o.substring(0,36)+'..."'),Xre.warn(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${o}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return i}return JSON.stringify(e)}Uq.addPairToJSMap=tne});var Gi=I(TE=>{"use strict";var Bq=ld(),ine=jq(),one=IE(),Gm=Ke();function sne(t,e,r){let n=Bq.createNode(t,void 0,r),i=Bq.createNode(e,void 0,r);return new vd(n,i)}var vd=class{constructor(e,r=null){Object.defineProperty(this,Gm.NODE_TYPE,{value:Gm.PAIR}),this.key=e,this.value=r}clone(e){let{key:r,value:n}=this;return Gm.isNode(r)&&(r=r.clone(e)),Gm.isNode(n)&&(n=n.clone(e)),new vd(r,n)}toJSON(e,r){let n=r&&r.mapAsMap?new Map:{};return one.addPairToJSMap(r,n,this)}toString(e,r,n){return e&&e.doc?ine.stringifyPair(this,e,r,n):JSON.stringify(this)}};TE.Pair=vd;TE.createPair=sne});var Wm=I(Hq=>{"use strict";var ane={intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"};Hq.defaultOptions=ane});var AE=I(Gq=>{"use strict";var cne=ud(),aa=Ke(),Vq=Hc(),yd=dd();function lne(t,e,r){var n;return(((n=e.inFlow)!==null&&n!==void 0?n:t.flow)?dne:une)(t,e,r)}function une({comment:t,items:e},r,{blockItemPrefix:n,flowChars:i,itemIndent:o,onChompKeep:s,onComment:a}){let{indent:c,options:{commentString:l}}=r,u=Object.assign({},r,{indent:o,type:null}),d=!1,f=[];for(let h=0;h<e.length;++h){let m=e[h],g=null;if(aa.isNode(m))!d&&m.spaceBefore&&f.push(""),zm(r,f,m.commentBefore,d),m.comment&&(g=m.comment);else if(aa.isPair(m)){let w=aa.isNode(m.key)?m.key:null;w&&(!d&&w.spaceBefore&&f.push(""),zm(r,f,w.commentBefore,d))}d=!1;let v=Vq.stringify(m,u,()=>g=null,()=>d=!0);g&&(v+=yd.lineComment(v,o,l(g))),d&&g&&(d=!1),f.push(n+v)}let p;if(f.length===0)p=i.start+i.end;else{p=f[0];for(let h=1;h<f.length;++h){let m=f[h];p+=m?`
${c}${m}`:`
`}}return t?(p+=`
`+yd.indentComment(l(t),c),a&&a()):d&&s&&s(),p}function dne({comment:t,items:e},r,{flowChars:n,itemIndent:i,onComment:o}){let{indent:s,indentStep:a,options:{commentString:c}}=r;i+=a;let l=Object.assign({},r,{indent:i,inFlow:!0,type:null}),u=!1,d=0,f=[];for(let g=0;g<e.length;++g){let v=e[g],w=null;if(aa.isNode(v))v.spaceBefore&&f.push(""),zm(r,f,v.commentBefore,!1),v.comment&&(w=v.comment);else if(aa.isPair(v)){let b=aa.isNode(v.key)?v.key:null;b&&(b.spaceBefore&&f.push(""),zm(r,f,b.commentBefore,!1),b.comment&&(u=!0));let S=aa.isNode(v.value)?v.value:null;S?(S.comment&&(w=S.comment),S.commentBefore&&(u=!0)):v.value==null&&b&&b.comment&&(w=b.comment)}w&&(u=!0);let C=Vq.stringify(v,l,()=>w=null);g<e.length-1&&(C+=","),w&&(C+=yd.lineComment(C,i,c(w))),!u&&(f.length>d||C.includes(`
`))&&(u=!0),f.push(C),d=f.length}let p,{start:h,end:m}=n;if(f.length===0)p=h+m;else if(u||(u=f.reduce((v,w)=>v+w.length+2,2)>cne.Collection.maxFlowStringSingleLineLength),u){p=h;for(let g of f)p+=g?`
${a}${s}${g}`:`
`;p+=`
${s}${m}`}else p=`${h} ${f.join(" ")} ${m}`;return t&&(p+=yd.lineComment(p,c(t),s),o&&o()),p}function zm({indent:t,options:{commentString:e}},r,n,i){if(n&&i&&(n=n.replace(/^\n+/,"")),n){let o=yd.indentComment(e(n),t);r.push(o.trimStart())}}Gq.stringifyCollection=lne});var ca=I(RE=>{"use strict";var fne=AE(),pne=IE(),hne=ud(),$o=Ke(),DE=Gi(),mne=xt();function wd(t,e){let r=$o.isScalar(e)?e.value:e;for(let n of t)if($o.isPair(n)&&(n.key===e||n.key===r||$o.isScalar(n.key)&&n.key.value===r))return n}var Wq=class extends hne.Collection{constructor(e){super($o.MAP,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,r){let n;$o.isPair(e)?n=e:!e||typeof e!="object"||!("key"in e)?n=new DE.Pair(e,e.value):n=new DE.Pair(e.key,e.value);let i=wd(this.items,n.key),o=this.schema&&this.schema.sortMapEntries;if(i){if(!r)throw new Error(`Key ${n.key} already set`);$o.isScalar(i.value)&&mne.isScalarValue(n.value)?i.value.value=n.value:i.value=n.value}else if(o){let s=this.items.findIndex(a=>o(n,a)<0);s===-1?this.items.push(n):this.items.splice(s,0,n)}else this.items.push(n)}delete(e){let r=wd(this.items,e);return r?this.items.splice(this.items.indexOf(r),1).length>0:!1}get(e,r){let n=wd(this.items,e),i=n&&n.value;return!r&&$o.isScalar(i)?i.value:i}has(e){return!!wd(this.items,e)}set(e,r){this.add(new DE.Pair(e,r),!0)}toJSON(e,r,n){let i=n?new n:r&&r.mapAsMap?new Map:{};r&&r.onCreate&&r.onCreate(i);for(let o of this.items)pne.addPairToJSMap(r,i,o);return i}toString(e,r,n){if(!e)return JSON.stringify(this);for(let i of this.items)if(!$o.isPair(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),fne.stringifyCollection(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:r})}};RE.YAMLMap=Wq;RE.findPair=wd});var Gc=I(Kq=>{"use strict";var gne=Ke(),vne=Gi(),zq=ca();function yne(t,e,r){let{keepUndefined:n,replacer:i}=r,o=new zq.YAMLMap(t),s=(a,c)=>{if(typeof i=="function")c=i.call(e,a,c);else if(Array.isArray(i)&&!i.includes(a))return;(c!==void 0||n)&&o.items.push(vne.createPair(a,c,r))};if(e instanceof Map)for(let[a,c]of e)s(a,c);else if(e&&typeof e=="object")for(let a of Object.keys(e))s(a,e[a]);return typeof t.sortMapEntries=="function"&&o.items.sort(t.sortMapEntries),o}var wne={collection:"map",createNode:yne,default:!0,nodeClass:zq.YAMLMap,tag:"tag:yaml.org,2002:map",resolve(t,e){return gne.isMap(t)||e("Expected a mapping for this tag"),t}};Kq.map=wne});var la=I(Jq=>{"use strict";var Cne=AE(),bne=ud(),Km=Ke(),Ene=xt(),_ne=Bc(),Yq=class extends bne.Collection{constructor(e){super(Km.SEQ,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){let r=Ym(e);return typeof r!="number"?!1:this.items.splice(r,1).length>0}get(e,r){let n=Ym(e);if(typeof n!="number")return;let i=this.items[n];return!r&&Km.isScalar(i)?i.value:i}has(e){let r=Ym(e);return typeof r=="number"&&r<this.items.length}set(e,r){let n=Ym(e);if(typeof n!="number")throw new Error(`Expected a valid index, not ${e}.`);let i=this.items[n];Km.isScalar(i)&&Ene.isScalarValue(r)?i.value=r:this.items[n]=r}toJSON(e,r){let n=[];r&&r.onCreate&&r.onCreate(n);let i=0;for(let o of this.items)n.push(_ne.toJS(o,String(i++),r));return n}toString(e,r,n){return e?Cne.stringifyCollection(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:r}):JSON.stringify(this)}};function Ym(t){let e=Km.isScalar(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}Jq.YAMLSeq=Yq});var Wc=I(Xq=>{"use strict";var Sne=ld(),xne=Ke(),Qq=la();function Pne(t,e,r){let{replacer:n}=r,i=new Qq.YAMLSeq(t);if(e&&Symbol.iterator in Object(e)){let o=0;for(let s of e){if(typeof n=="function"){let a=e instanceof Set?s:String(o++);s=n.call(e,a,s)}i.items.push(Sne.createNode(s,void 0,r))}}return i}var kne={collection:"seq",createNode:Pne,default:!0,nodeClass:Qq.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(t,e){return xne.isSeq(t)||e("Expected a sequence for this tag"),t}};Xq.seq=kne});var Cd=I(Zq=>{"use strict";var Ine=md(),Tne={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,r,n){return e=Object.assign({actualString:!0},e),Ine.stringifyString(t,e,r,n)}};Zq.string=Tne});var Jm=I(rj=>{"use strict";var ej=xt(),tj={identify:t=>t==null,createNode:()=>new ej.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new ej.Scalar(null),stringify:({source:t},e)=>t&&tj.test.test(t)?t:e.options.nullStr};rj.nullTag=tj});var OE=I(ij=>{"use strict";var Ane=xt(),nj={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new Ane.Scalar(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},r){if(t&&nj.test.test(t)){let n=t[0]==="t"||t[0]==="T";if(e===n)return t}return e?r.options.trueStr:r.options.falseStr}};ij.boolTag=nj});var zc=I(oj=>{"use strict";function Dne({format:t,minFractionDigits:e,tag:r,value:n}){if(typeof n=="bigint")return String(n);let i=typeof n=="number"?n:Number(n);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(n);if(!t&&e&&(!r||r==="tag:yaml.org,2002:float")&&/^\d/.test(o)){let s=o.indexOf(".");s<0&&(s=o.length,o+=".");let a=e-(o.length-s-1);for(;a-- >0;)o+="0"}return o}oj.stringifyNumber=Dne});var LE=I(Qm=>{"use strict";var Rne=xt(),NE=zc(),One={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:NE.stringifyNumber},Nne={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():NE.stringifyNumber(t)}},Lne={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){let e=new Rne.Scalar(parseFloat(t)),r=t.indexOf(".");return r!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-r-1),e},stringify:NE.stringifyNumber};Qm.float=Lne;Qm.floatExp=Nne;Qm.floatNaN=One});var ME=I(Zm=>{"use strict";var sj=zc(),Xm=t=>typeof t=="bigint"||Number.isInteger(t),FE=(t,e,r,{intAsBigInt:n})=>n?BigInt(t):parseInt(t.substring(e),r);function aj(t,e,r){let{value:n}=t;return Xm(n)&&n>=0?r+n.toString(e):sj.stringifyNumber(t)}var Fne={identify:t=>Xm(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,r)=>FE(t,2,8,r),stringify:t=>aj(t,8,"0o")},Mne={identify:Xm,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,r)=>FE(t,0,10,r),stringify:sj.stringifyNumber},qne={identify:t=>Xm(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,r)=>FE(t,2,16,r),stringify:t=>aj(t,16,"0x")};Zm.int=Mne;Zm.intHex=qne;Zm.intOct=Fne});var lj=I(cj=>{"use strict";var jne=Gc(),$ne=Jm(),Une=Wc(),Bne=Cd(),Hne=OE(),qE=LE(),jE=ME(),Vne=[jne.map,Une.seq,Bne.string,$ne.nullTag,Hne.boolTag,jE.intOct,jE.int,jE.intHex,qE.floatNaN,qE.floatExp,qE.float];cj.schema=Vne});var fj=I(dj=>{"use strict";var Gne=xt(),Wne=Gc(),zne=Wc();function uj(t){return typeof t=="bigint"||Number.isInteger(t)}var eg=({value:t})=>JSON.stringify(t),Kne=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:eg},{identify:t=>t==null,createNode:()=>new Gne.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:eg},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:eg},{identify:uj,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:r})=>r?BigInt(t):parseInt(t,10),stringify:({value:t})=>uj(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:eg}],Yne={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},Jne=[Wne.map,zne.seq].concat(Kne,Yne);dj.schema=Jne});var UE=I(pj=>{"use strict";var $E=xt(),Qne=md(),Xne={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof Buffer=="function")return Buffer.from(t,"base64");if(typeof atob=="function"){let r=atob(t.replace(/[\n\r]/g,"")),n=new Uint8Array(r.length);for(let i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:r},n,i,o){let s=r,a;if(typeof Buffer=="function")a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else if(typeof btoa=="function"){let c="";for(let l=0;l<s.length;++l)c+=String.fromCharCode(s[l]);a=btoa(c)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=$E.Scalar.BLOCK_LITERAL),e!==$E.Scalar.QUOTE_DOUBLE){let c=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),l=Math.ceil(a.length/c),u=new Array(l);for(let d=0,f=0;d<l;++d,f+=c)u[d]=a.substr(f,c);a=u.join(e===$E.Scalar.BLOCK_LITERAL?`
`:" ")}return Qne.stringifyString({comment:t,type:e,value:a},n,i,o)}};pj.binary=Xne});var ng=I(rg=>{"use strict";var tg=Ke(),BE=Gi(),Zne=xt(),eie=la();function hj(t,e){if(tg.isSeq(t))for(let r=0;r<t.items.length;++r){let n=t.items[r];if(!tg.isPair(n)){if(tg.isMap(n)){n.items.length>1&&e("Each pair must have its own sequence indicator");let i=n.items[0]||new BE.Pair(new Zne.Scalar(null));if(n.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${n.commentBefore}
${i.key.commentBefore}`:n.commentBefore),n.comment){let o=i.value||i.key;o.comment=o.comment?`${n.comment}
${o.comment}`:n.comment}n=i}t.items[r]=tg.isPair(n)?n:new BE.Pair(n)}}else e("Expected a sequence for this tag");return t}function mj(t,e,r){let{replacer:n}=r,i=new eie.YAMLSeq(t);i.tag="tag:yaml.org,2002:pairs";let o=0;if(e&&Symbol.iterator in Object(e))for(let s of e){typeof n=="function"&&(s=n.call(e,String(o++),s));let a,c;if(Array.isArray(s))if(s.length===2)a=s[0],c=s[1];else throw new TypeError(`Expected [key, value] tuple: ${s}`);else if(s&&s instanceof Object){let l=Object.keys(s);if(l.length===1)a=l[0],c=s[a];else throw new TypeError(`Expected { key: value } tuple: ${s}`)}else a=s;i.items.push(BE.createPair(a,c,r))}return i}var tie={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:hj,createNode:mj};rg.createPairs=mj;rg.pairs=tie;rg.resolvePairs=hj});var GE=I(VE=>{"use strict";var rie=la(),HE=Bc(),gj=Ke(),bd=ca(),vj=ng(),Uo=class extends rie.YAMLSeq{constructor(){super();this.add=bd.YAMLMap.prototype.add.bind(this),this.delete=bd.YAMLMap.prototype.delete.bind(this),this.get=bd.YAMLMap.prototype.get.bind(this),this.has=bd.YAMLMap.prototype.has.bind(this),this.set=bd.YAMLMap.prototype.set.bind(this),this.tag=Uo.tag}toJSON(e,r){if(!r)return super.toJSON(e);let n=new Map;r&&r.onCreate&&r.onCreate(n);for(let i of this.items){let o,s;if(gj.isPair(i)?(o=HE.toJS(i.key,"",r),s=HE.toJS(i.value,o,r)):o=HE.toJS(i,"",r),n.has(o))throw new Error("Ordered maps must not include duplicate keys");n.set(o,s)}return n}};Uo.tag="tag:yaml.org,2002:omap";var nie={collection:"seq",identify:t=>t instanceof Map,nodeClass:Uo,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){let r=vj.resolvePairs(t,e),n=[];for(let{key:i}of r.items)gj.isScalar(i)&&(n.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):n.push(i.value));return Object.assign(new Uo,r)},createNode(t,e,r){let n=vj.createPairs(t,e,r),i=new Uo;return i.items=n.items,i}};VE.YAMLOMap=Uo;VE.omap=nie});var Ej=I(WE=>{"use strict";var yj=xt();function wj({value:t,source:e},r){return e&&(t?Cj:bj).test.test(e)?e:t?r.options.trueStr:r.options.falseStr}var Cj={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new yj.Scalar(!0),stringify:wj},bj={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new yj.Scalar(!1),stringify:wj};WE.falseTag=bj;WE.trueTag=Cj});var _j=I(ig=>{"use strict";var iie=xt(),zE=zc(),oie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:zE.stringifyNumber},sie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():zE.stringifyNumber(t)}},aie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){let e=new iie.Scalar(parseFloat(t.replace(/_/g,""))),r=t.indexOf(".");if(r!==-1){let n=t.substring(r+1).replace(/_/g,"");n[n.length-1]==="0"&&(e.minFractionDigits=n.length)}return e},stringify:zE.stringifyNumber};ig.float=aie;ig.floatExp=sie;ig.floatNaN=oie});var xj=I(_d=>{"use strict";var Sj=zc(),Ed=t=>typeof t=="bigint"||Number.isInteger(t);function og(t,e,r,{intAsBigInt:n}){let i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),n){switch(r){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}let s=BigInt(t);return i==="-"?BigInt(-1)*s:s}let o=parseInt(t,r);return i==="-"?-1*o:o}function KE(t,e,r){let{value:n}=t;if(Ed(n)){let i=n.toString(e);return n<0?"-"+r+i.substr(1):r+i}return Sj.stringifyNumber(t)}var cie={identify:Ed,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,r)=>og(t,2,2,r),stringify:t=>KE(t,2,"0b")},lie={identify:Ed,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,r)=>og(t,1,8,r),stringify:t=>KE(t,8,"0")},uie={identify:Ed,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,r)=>og(t,0,10,r),stringify:Sj.stringifyNumber},die={identify:Ed,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,r)=>og(t,2,16,r),stringify:t=>KE(t,16,"0x")};_d.int=uie;_d.intBin=cie;_d.intHex=die;_d.intOct=lie});var JE=I(YE=>{"use strict";var sg=Ke(),ag=Gi(),cg=ca(),Bo=class extends cg.YAMLMap{constructor(e){super(e);this.tag=Bo.tag}add(e){let r;sg.isPair(e)?r=e:typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?r=new ag.Pair(e.key,null):r=new ag.Pair(e,null),cg.findPair(this.items,r.key)||this.items.push(r)}get(e,r){let n=cg.findPair(this.items,e);return!r&&sg.isPair(n)?sg.isScalar(n.key)?n.key.value:n.key:n}set(e,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);let n=cg.findPair(this.items,e);n&&!r?this.items.splice(this.items.indexOf(n),1):!n&&r&&this.items.push(new ag.Pair(e))}toJSON(e,r){return super.toJSON(e,r,Set)}toString(e,r,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),r,n);throw new Error("Set items must all have null values")}};Bo.tag="tag:yaml.org,2002:set";var fie={collection:"map",identify:t=>t instanceof Set,nodeClass:Bo,default:!1,tag:"tag:yaml.org,2002:set",resolve(t,e){if(sg.isMap(t)){if(t.hasAllNullValues(!0))return Object.assign(new Bo,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t},createNode(t,e,r){let{replacer:n}=r,i=new Bo(t);if(e&&Symbol.iterator in Object(e))for(let o of e)typeof n=="function"&&(o=n.call(e,o,o)),i.items.push(ag.createPair(o,null,r));return i}};YE.YAMLSet=Bo;YE.set=fie});var XE=I(lg=>{"use strict";var pie=zc();function QE(t,e){let r=t[0],n=r==="-"||r==="+"?t.substring(1):t,i=s=>e?BigInt(s):Number(s),o=n.replace(/_/g,"").split(":").reduce((s,a)=>s*i(60)+i(a),i(0));return r==="-"?i(-1)*o:o}function Pj(t){let{value:e}=t,r=s=>s;if(typeof e=="bigint")r=s=>BigInt(s);else if(isNaN(e)||!isFinite(e))return pie.stringifyNumber(t);let n="";e<0&&(n="-",e*=r(-1));let i=r(60),o=[e%i];return e<60?o.unshift(0):(e=(e-o[0])/i,o.unshift(e%i),e>=60&&(e=(e-o[0])/i,o.unshift(e))),n+o.map(s=>s<10?"0"+String(s):String(s)).join(":").replace(/000000\d*$/,"")}var hie={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:r})=>QE(t,r),stringify:Pj},mie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>QE(t,!1),stringify:Pj},kj={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){let e=t.match(kj.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,r,n,i,o,s,a]=e.map(Number),c=e[7]?Number((e[7]+"00").substr(1,3)):0,l=Date.UTC(r,n-1,i,o||0,s||0,a||0,c),u=e[8];if(u&&u!=="Z"){let d=QE(u,!1);Math.abs(d)<30&&(d*=60),l-=6e4*d}return new Date(l)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};lg.floatTime=mie;lg.intTime=hie;lg.timestamp=kj});var Aj=I(Tj=>{"use strict";var gie=Gc(),vie=Jm(),yie=Wc(),wie=Cd(),Cie=UE(),Ij=Ej(),ZE=_j(),ug=xj(),bie=GE(),Eie=ng(),_ie=JE(),e0=XE(),Sie=[gie.map,yie.seq,wie.string,vie.nullTag,Ij.trueTag,Ij.falseTag,ug.intBin,ug.intOct,ug.int,ug.intHex,ZE.floatNaN,ZE.floatExp,ZE.float,Cie.binary,bie.omap,Eie.pairs,_ie.set,e0.intTime,e0.floatTime,e0.timestamp];Tj.schema=Sie});var $j=I(n0=>{"use strict";var Dj=Gc(),xie=Jm(),Rj=Wc(),Pie=Cd(),kie=OE(),t0=LE(),r0=ME(),Iie=lj(),Tie=fj(),Oj=UE(),Nj=GE(),Lj=ng(),Fj=Aj(),Mj=JE(),dg=XE(),qj=new Map([["core",Iie.schema],["failsafe",[Dj.map,Rj.seq,Pie.string]],["json",Tie.schema],["yaml11",Fj.schema],["yaml-1.1",Fj.schema]]),jj={binary:Oj.binary,bool:kie.boolTag,float:t0.float,floatExp:t0.floatExp,floatNaN:t0.floatNaN,floatTime:dg.floatTime,int:r0.int,intHex:r0.intHex,intOct:r0.intOct,intTime:dg.intTime,map:Dj.map,null:xie.nullTag,omap:Nj.omap,pairs:Lj.pairs,seq:Rj.seq,set:Mj.set,timestamp:dg.timestamp},Aie={"tag:yaml.org,2002:binary":Oj.binary,"tag:yaml.org,2002:omap":Nj.omap,"tag:yaml.org,2002:pairs":Lj.pairs,"tag:yaml.org,2002:set":Mj.set,"tag:yaml.org,2002:timestamp":dg.timestamp};function Die(t,e){let r=qj.get(e);if(!r)if(Array.isArray(t))r=[];else{let n=Array.from(qj.keys()).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${n} or define customTags array`)}if(Array.isArray(t))for(let n of t)r=r.concat(n);else typeof t=="function"&&(r=t(r.slice()));return r.map(n=>{if(typeof n!="string")return n;let i=jj[n];if(i)return i;let o=Object.keys(jj).map(s=>JSON.stringify(s)).join(", ");throw new Error(`Unknown custom tag "${n}"; use one of ${o}`)})}n0.coreKnownTags=Aie;n0.getTags=Die});var o0=I(Uj=>{"use strict";var i0=Ke(),Rie=Gc(),Oie=Wc(),Nie=Cd(),fg=$j(),Lie=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,pg=class{constructor({compat:e,customTags:r,merge:n,resolveKnownTags:i,schema:o,sortMapEntries:s,toStringDefaults:a}){this.compat=Array.isArray(e)?fg.getTags(e,"compat"):e?fg.getTags(null,e):null,this.merge=!!n,this.name=typeof o=="string"&&o||"core",this.knownTags=i?fg.coreKnownTags:{},this.tags=fg.getTags(r,this.name),this.toStringOptions=a||null,Object.defineProperty(this,i0.MAP,{value:Rie.map}),Object.defineProperty(this,i0.SCALAR,{value:Nie.string}),Object.defineProperty(this,i0.SEQ,{value:Oie.seq}),this.sortMapEntries=s===!0?Lie:s||null}clone(){let e=Object.create(pg.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};Uj.Schema=pg});var Hj=I(Bj=>{"use strict";var Fie=Ke(),s0=Hc(),hg=dd();function Mie(t,e){let r=[],n=e.directives===!0;if(e.directives!==!1&&t.directives){let l=t.directives.toString(t);l?(r.push(l),n=!0):t.directives.marker&&(n=!0)}n&&r.push("---");let i=s0.createStringifyContext(t,e),{commentString:o}=i.options;if(t.commentBefore){r.length!==1&&r.unshift("");let l=o(t.commentBefore);r.unshift(hg.indentComment(l,""))}let s=!1,a=null;if(t.contents){if(Fie.isNode(t.contents)){if(t.contents.spaceBefore&&n&&r.push(""),t.contents.commentBefore){let d=o(t.contents.commentBefore);r.push(hg.indentComment(d,""))}i.forceBlockIndent=!!t.comment,a=t.contents.comment}let l=a?void 0:()=>s=!0,u=s0.stringify(t.contents,i,()=>a=null,l);a&&(u+=hg.lineComment(u,"",o(a))),(u[0]==="|"||u[0]===">")&&r[r.length-1]==="---"?r[r.length-1]=`--- ${u}`:r.push(u)}else r.push(s0.stringify(t.contents,i));let c=t.comment;return c&&s&&(c=c.replace(/^\n+/,"")),c&&((!s||a)&&r[r.length-1]!==""&&r.push(""),r.push(hg.indentComment(o(c),""))),r.join(`
`)+`
`}Bj.stringifyDocument=Mie});var Gj=I(Vj=>{"use strict";function Sd(t,e,r,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let i=0,o=n.length;i<o;++i){let s=n[i],a=Sd(t,n,String(i),s);a===void 0?delete n[i]:a!==s&&(n[i]=a)}else if(n instanceof Map)for(let i of Array.from(n.keys())){let o=n.get(i),s=Sd(t,n,i,o);s===void 0?n.delete(i):s!==o&&n.set(i,s)}else if(n instanceof Set)for(let i of Array.from(n)){let o=Sd(t,n,i,i);o===void 0?n.delete(i):o!==i&&(n.delete(i),n.add(o))}else for(let[i,o]of Object.entries(n)){let s=Sd(t,n,i,o);s===void 0?delete n[i]:s!==o&&(n[i]=s)}return t.call(e,r,n)}Vj.applyReviver=Sd});var xd=I(Wj=>{"use strict";var qie=cd(),Kc=ud(),vn=Ke(),jie=Gi(),$ie=Bc(),Uie=Wm(),Bie=o0(),Hie=Hc(),Vie=Hj(),a0=Mm(),Gie=Gj(),Wie=ld(),c0=vE(),mg=class{constructor(e,r,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,vn.NODE_TYPE,{value:vn.DOC});let i=null;typeof r=="function"||Array.isArray(r)?i=r:n===void 0&&r&&(n=r,r=void 0);let o=Object.assign({},Uie.defaultOptions,n);this.options=o;let{version:s}=o;(n==null?void 0:n.directives)?(this.directives=n.directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new c0.Directives({version:s}),this.setSchema(s,n),e===void 0?this.contents=null:this.contents=this.createNode(e,i,n)}clone(){let e=Object.create(mg.prototype,{[vn.NODE_TYPE]:{value:vn.DOC}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=vn.isNode(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Yc(this.contents)&&this.contents.add(e)}addIn(e,r){Yc(this.contents)&&this.contents.addIn(e,r)}createAlias(e,r){if(!e.anchor){let n=a0.anchorNames(this);e.anchor=!r||n.has(r)?a0.findNewAnchor(r||"a",n):r}return new qie.Alias(e.anchor)}createNode(e,r,n){let i;if(typeof r=="function")e=r.call({"":e},"",e),i=r;else if(Array.isArray(r)){let g=w=>typeof w=="number"||w instanceof String||w instanceof Number,v=r.filter(g).map(String);v.length>0&&(r=r.concat(v)),i=r}else n===void 0&&r&&(n=r,r=void 0);let{aliasDuplicateObjects:o,anchorPrefix:s,flow:a,keepUndefined:c,onTagObj:l,tag:u}=n||{},{onAnchor:d,setAnchors:f,sourceObjects:p}=a0.createNodeAnchors(this,s||"a"),h={aliasDuplicateObjects:o!=null?o:!0,keepUndefined:c!=null?c:!1,onAnchor:d,onTagObj:l,replacer:i,schema:this.schema,sourceObjects:p},m=Wie.createNode(e,u,h);return a&&vn.isCollection(m)&&(m.flow=!0),f(),m}createPair(e,r,n={}){let i=this.createNode(e,null,n),o=this.createNode(r,null,n);return new jie.Pair(i,o)}delete(e){return Yc(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Kc.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):Yc(this.contents)?this.contents.deleteIn(e):!1}get(e,r){return vn.isCollection(this.contents)?this.contents.get(e,r):void 0}getIn(e,r){return Kc.isEmptyPath(e)?!r&&vn.isScalar(this.contents)?this.contents.value:this.contents:vn.isCollection(this.contents)?this.contents.getIn(e,r):void 0}has(e){return vn.isCollection(this.contents)?this.contents.has(e):!1}hasIn(e){return Kc.isEmptyPath(e)?this.contents!==void 0:vn.isCollection(this.contents)?this.contents.hasIn(e):!1}set(e,r){this.contents==null?this.contents=Kc.collectionFromPath(this.schema,[e],r):Yc(this.contents)&&this.contents.set(e,r)}setIn(e,r){Kc.isEmptyPath(e)?this.contents=r:this.contents==null?this.contents=Kc.collectionFromPath(this.schema,Array.from(e),r):Yc(this.contents)&&this.contents.setIn(e,r)}setSchema(e,r={}){typeof e=="number"&&(e=String(e));let n;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new c0.Directives({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":this.directives?this.directives.yaml.version="1.2":this.directives=new c0.Directives({version:"1.2"}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{let i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(r.schema instanceof Object)this.schema=r.schema;else if(n)this.schema=new Bie.Schema(Object.assign(n,r));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:r,mapAsMap:n,maxAliasCount:i,onAnchor:o,reviver:s}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100,stringify:Hie.stringify},c=$ie.toJS(this.contents,r||"",a);if(typeof o=="function")for(let{count:l,res:u}of a.anchors.values())o(u,l);return typeof s=="function"?Gie.applyReviver(s,{"":c},"",c):c}toJSON(e,r){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:r})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){let r=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${r}`)}return Vie.stringifyDocument(this,e)}};function Yc(t){if(vn.isCollection(t))return!0;throw new Error("Expected a YAML collection as document contents")}Wj.Document=mg});var kd=I(Pd=>{"use strict";var gg=class extends Error{constructor(e,r,n,i){super();this.name=e,this.code=n,this.message=i,this.pos=r}},zj=class extends gg{constructor(e,r,n){super("YAMLParseError",e,r,n)}},Kj=class extends gg{constructor(e,r,n){super("YAMLWarning",e,r,n)}},zie=(t,e)=>r=>{if(r.pos[0]===-1)return;r.linePos=r.pos.map(a=>e.linePos(a));let{line:n,col:i}=r.linePos[0];r.message+=` at line ${n}, column ${i}`;let o=i-1,s=t.substring(e.lineStarts[n-1],e.lineStarts[n]).replace(/[\n\r]+$/,"");if(o>=60&&s.length>80){let a=Math.min(o-39,s.length-79);s="\u2026"+s.substring(a),o-=a-1}if(s.length>80&&(s=s.substring(0,79)+"\u2026"),n>1&&/^ *$/.test(s.substring(0,o))){let a=t.substring(e.lineStarts[n-2],e.lineStarts[n-1]);a.length>80&&(a=a.substring(0,79)+`\u2026
`),s=a+s}if(/[^ ]/.test(s)){let a=1,c=r.linePos[1];c&&c.line===n&&c.col>i&&(a=Math.min(c.col-i,80-o));let l=" ".repeat(o)+"^".repeat(a);r.message+=`:

${s}
${l}
`}};Pd.YAMLError=gg;Pd.YAMLParseError=zj;Pd.YAMLWarning=Kj;Pd.prettifyError=zie});var Id=I(Yj=>{"use strict";function Kie(t,{flow:e,indicator:r,next:n,offset:i,onError:o,startOnNewline:s}){let a=!1,c=s,l=s,u="",d="",f=!1,p=!1,h=null,m=null,g=null,v=null,w=null;for(let S of t)switch(p&&(S.type!=="space"&&S.type!=="newline"&&S.type!=="comma"&&o(S.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),S.type){case"space":!e&&c&&r!=="doc-start"&&S.source[0]==="	"&&o(S,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{l||o(S,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let P=S.source.substring(1)||" ";u?u+=d+P:u=P,d="",c=!1;break}case"newline":c?u?u+=S.source:a=!0:d+=S.source,c=!0,f=!0,l=!0;break;case"anchor":h&&o(S,"MULTIPLE_ANCHORS","A node can have at most one anchor"),h=S,w===null&&(w=S.offset),c=!1,l=!1,p=!0;break;case"tag":{m&&o(S,"MULTIPLE_TAGS","A node can have at most one tag"),m=S,w===null&&(w=S.offset),c=!1,l=!1,p=!0;break}case r:(h||m)&&o(S,"BAD_PROP_ORDER",`Anchors and tags must be after the ${S.source} indicator`),v&&o(S,"UNEXPECTED_TOKEN",`Unexpected ${S.source} in ${e||"collection"}`),v=S,c=!1,l=!1;break;case"comma":if(e){g&&o(S,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),g=S,c=!1,l=!1;break}default:o(S,"UNEXPECTED_TOKEN",`Unexpected ${S.type} token`),c=!1,l=!1}let C=t[t.length-1],b=C?C.offset+C.source.length:i;return p&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&o(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:g,found:v,spaceBefore:a,comment:u,hasNewline:f,anchor:h,tag:m,end:b,start:w!=null?w:b}}Yj.resolveProps=Kie});var vg=I(Jj=>{"use strict";function l0(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(let e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(let e of t.items){for(let r of e.start)if(r.type==="newline")return!0;if(e.sep){for(let r of e.sep)if(r.type==="newline")return!0}if(l0(e.key)||l0(e.value))return!0}return!1;default:return!0}}Jj.containsNewline=l0});var u0=I(Qj=>{"use strict";var Yie=vg();function Jie(t,e,r){if((e==null?void 0:e.type)==="flow-collection"){let n=e.end[0];n.indent===t&&(n.source==="]"||n.source==="}")&&Yie.containsNewline(e)&&r(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}Qj.flowIndentCheck=Jie});var d0=I(Zj=>{"use strict";var Xj=Ke();function Qie(t,e,r){let{uniqueKeys:n}=t.options;if(n===!1)return!1;let i=typeof n=="function"?n:(o,s)=>o===s||Xj.isScalar(o)&&Xj.isScalar(s)&&o.value===s.value&&!(o.value==="<<"&&t.schema.merge);return e.some(o=>i(o.key,r))}Zj.mapIncludes=Qie});var o$=I(i$=>{"use strict";var e$=Gi(),Xie=ca(),t$=Id(),Zie=vg(),r$=u0(),eoe=d0(),n$="All mapping items must start at the same column";function toe({composeNode:t,composeEmptyNode:e},r,n,i){var o;let s=new Xie.YAMLMap(r.schema);r.atRoot&&(r.atRoot=!1);let a=n.offset;for(let c of n.items){let{start:l,key:u,sep:d,value:f}=c,p=t$.resolveProps(l,{indicator:"explicit-key-ind",next:u||(d==null?void 0:d[0]),offset:a,onError:i,startOnNewline:!0}),h=!p.found;if(h){if(u&&(u.type==="block-seq"?i(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in u&&u.indent!==n.indent&&i(a,"BAD_INDENT",n$)),!p.anchor&&!p.tag&&!d){p.comment&&(s.comment?s.comment+=`
`+p.comment:s.comment=p.comment);continue}}else((o=p.found)===null||o===void 0?void 0:o.indent)!==n.indent&&i(a,"BAD_INDENT",n$);h&&Zie.containsNewline(u)&&i(u,"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line");let m=p.end,g=u?t(r,u,p,i):e(r,m,l,null,p,i);r.schema.compat&&r$.flowIndentCheck(n.indent,u,i),eoe.mapIncludes(r,s.items,g)&&i(m,"DUPLICATE_KEY","Map keys must be unique");let v=t$.resolveProps(d||[],{indicator:"map-value-ind",next:f,offset:g.range[2],onError:i,startOnNewline:!u||u.type==="block-scalar"});if(a=v.end,v.found){h&&((f==null?void 0:f.type)==="block-map"&&!v.hasNewline&&i(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&p.start<v.found.offset-1024&&i(g.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let w=f?t(r,f,v,i):e(r,a,d,null,v,i);r.schema.compat&&r$.flowIndentCheck(n.indent,f,i),a=w.range[2];let C=new e$.Pair(g,w);r.options.keepSourceTokens&&(C.srcToken=c),s.items.push(C)}else{h&&i(g.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),v.comment&&(g.comment?g.comment+=`
`+v.comment:g.comment=v.comment);let w=new e$.Pair(g);r.options.keepSourceTokens&&(w.srcToken=c),s.items.push(w)}}return s.range=[n.offset,a,a],s}i$.resolveBlockMap=toe});var a$=I(s$=>{"use strict";var roe=la(),noe=Id(),ioe=u0();function ooe({composeNode:t,composeEmptyNode:e},r,n,i){let o=new roe.YAMLSeq(r.schema);r.atRoot&&(r.atRoot=!1);let s=n.offset;for(let{start:a,value:c}of n.items){let l=noe.resolveProps(a,{indicator:"seq-item-ind",next:c,offset:s,onError:i,startOnNewline:!0});if(s=l.end,!l.found)if(l.anchor||l.tag||c)c&&c.type==="block-seq"?i(s,"BAD_INDENT","All sequence items must start at the same column"):i(s,"MISSING_CHAR","Sequence item without - indicator");else{l.comment&&(o.comment=l.comment);continue}let u=c?t(r,c,l,i):e(r,s,a,null,l,i);r.schema.compat&&ioe.flowIndentCheck(n.indent,c,i),s=u.range[2],o.items.push(u)}return o.range=[n.offset,s,s],o}s$.resolveBlockSeq=ooe});var Jc=I(c$=>{"use strict";function soe(t,e,r,n){let i="";if(t){let o=!1,s="";for(let a of t){let{source:c,type:l}=a;switch(l){case"space":o=!0;break;case"comment":{r&&!o&&n(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let u=c.substring(1)||" ";i?i+=s+u:i=u,s="";break}case"newline":i&&(s+=c),o=!0;break;default:n(a,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}e+=c.length}}return{comment:i,offset:e}}c$.resolveEnd=soe});var f$=I(d$=>{"use strict";var aoe=Ke(),coe=Gi(),l$=ca(),loe=la(),uoe=Jc(),u$=Id(),doe=vg(),foe=d0(),f0="Block collections are not allowed within flow collections",p0=t=>t&&(t.type==="block-map"||t.type==="block-seq");function poe({composeNode:t,composeEmptyNode:e},r,n,i){let o=n.start.source==="{",s=o?"flow map":"flow sequence",a=o?new l$.YAMLMap(r.schema):new loe.YAMLSeq(r.schema);a.flow=!0;let c=r.atRoot;c&&(r.atRoot=!1);let l=n.offset+n.start.source.length;for(let h=0;h<n.items.length;++h){let m=n.items[h],{start:g,key:v,sep:w,value:C}=m,b=u$.resolveProps(g,{flow:s,indicator:"explicit-key-ind",next:v||(w==null?void 0:w[0]),offset:l,onError:i,startOnNewline:!1});if(!b.found){if(!b.anchor&&!b.tag&&!w&&!C){h===0&&b.comma?i(b.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):h<n.items.length-1&&i(b.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),b.comment&&(a.comment?a.comment+=`
`+b.comment:a.comment=b.comment),l=b.end;continue}!o&&r.options.strict&&doe.containsNewline(v)&&i(v,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(h===0)b.comma&&i(b.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(b.comma||i(b.start,"MISSING_CHAR",`Missing , between ${s} items`),b.comment){let S="";e:for(let P of g)switch(P.type){case"comma":case"space":break;case"comment":S=P.source.substring(1);break e;default:break e}if(S){let P=a.items[a.items.length-1];aoe.isPair(P)&&(P=P.value||P.key),P.comment?P.comment+=`
`+S:P.comment=S,b.comment=b.comment.substring(S.length+1)}}if(!o&&!w&&!b.found){let S=C?t(r,C,b,i):e(r,b.end,w,null,b,i);a.items.push(S),l=S.range[2],p0(C)&&i(S.range,"BLOCK_IN_FLOW",f0)}else{let S=b.end,P=v?t(r,v,b,i):e(r,S,g,null,b,i);p0(v)&&i(P.range,"BLOCK_IN_FLOW",f0);let _=u$.resolveProps(w||[],{flow:s,indicator:"map-value-ind",next:C,offset:P.range[2],onError:i,startOnNewline:!1});if(_.found){if(!o&&!b.found&&r.options.strict){if(w)for(let A of w){if(A===_.found)break;if(A.type==="newline"){i(A,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}b.start<_.found.offset-1024&&i(_.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else C&&("source"in C&&C.source&&C.source[0]===":"?i(C,"MISSING_CHAR",`Missing space after : in ${s}`):i(_.start,"MISSING_CHAR",`Missing , or : between ${s} items`));let k=C?t(r,C,_,i):_.found?e(r,_.end,w,null,_,i):null;k?p0(C)&&i(k.range,"BLOCK_IN_FLOW",f0):_.comment&&(P.comment?P.comment+=`
`+_.comment:P.comment=_.comment);let T=new coe.Pair(P,k);if(r.options.keepSourceTokens&&(T.srcToken=m),o){let A=a;foe.mapIncludes(r,A.items,P)&&i(S,"DUPLICATE_KEY","Map keys must be unique"),A.items.push(T)}else{let A=new l$.YAMLMap(r.schema);A.flow=!0,A.items.push(T),a.items.push(A)}l=k?k.range[2]:_.end}}let u=o?"}":"]",[d,...f]=n.end,p=l;if(d&&d.source===u)p=d.offset+d.source.length;else{let h=s[0].toUpperCase()+s.substring(1),m=c?`${h} must end with a ${u}`:`${h} in block collection must be sufficiently indented and end with a ${u}`;i(l,c?"MISSING_CHAR":"BAD_INDENT",m),d&&d.source.length!==1&&f.unshift(d)}if(f.length>0){let h=uoe.resolveEnd(f,p,r.options.strict,i);h.comment&&(a.comment?a.comment+=`
`+h.comment:a.comment=h.comment),a.range=[n.offset,p,h.offset]}else a.range=[n.offset,p,p];return a}d$.resolveFlowCollection=poe});var m$=I(h$=>{"use strict";var p$=Ke(),hoe=xt(),moe=o$(),goe=a$(),voe=f$();function yoe(t,e,r,n,i){let o;switch(r.type){case"block-map":{o=moe.resolveBlockMap(t,e,r,i);break}case"block-seq":{o=goe.resolveBlockSeq(t,e,r,i);break}case"flow-collection":{o=voe.resolveFlowCollection(t,e,r,i);break}}if(!n)return o;let s=e.directives.tagName(n.source,f=>i(n,"TAG_RESOLVE_FAILED",f));if(!s)return o;let a=o.constructor;if(s==="!"||s===a.tagName)return o.tag=a.tagName,o;let c=p$.isMap(o)?"map":"seq",l=e.schema.tags.find(f=>f.collection===c&&f.tag===s);if(!l){let f=e.schema.knownTags[s];if(f&&f.collection===c)e.schema.tags.push(Object.assign({},f,{default:!1})),l=f;else return i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,!0),o.tag=s,o}let u=l.resolve(o,f=>i(n,"TAG_RESOLVE_FAILED",f),e.options),d=p$.isNode(u)?u:new hoe.Scalar(u);return d.range=o.range,d.tag=s,(l==null?void 0:l.format)&&(d.format=l.format),d}h$.composeCollection=yoe});var m0=I(g$=>{"use strict";var h0=xt();function woe(t,e,r){let n=t.offset,i=Coe(t,e,r);if(!i)return{value:"",type:null,comment:"",range:[n,n,n]};let o=i.mode===">"?h0.Scalar.BLOCK_FOLDED:h0.Scalar.BLOCK_LITERAL,s=t.source?boe(t.source):[],a=s.length;for(let m=s.length-1;m>=0;--m){let g=s[m][1];if(g===""||g==="\r")a=m;else break}if(!t.source||a===0){let m=i.chomp==="+"?`
`.repeat(Math.max(0,s.length-1)):"",g=n+i.length;return t.source&&(g+=t.source.length),{value:m,type:o,comment:i.comment,range:[n,g,g]}}let c=t.indent+i.indent,l=t.offset+i.length,u=0;for(let m=0;m<a;++m){let[g,v]=s[m];if(v===""||v==="\r")i.indent===0&&g.length>c&&(c=g.length);else{if(g.length<c){let w="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";r(l+g.length,"MISSING_CHAR",w)}i.indent===0&&(c=g.length),u=m;break}l+=g.length+v.length+1}let d="",f="",p=!1;for(let m=0;m<u;++m)d+=s[m][0].slice(c)+`
`;for(let m=u;m<a;++m){let[g,v]=s[m];l+=g.length+v.length+1;let w=v[v.length-1]==="\r";if(w&&(v=v.slice(0,-1)),v&&g.length<c){let b=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;r(l-v.length-(w?2:1),"BAD_INDENT",b),g=""}o===h0.Scalar.BLOCK_LITERAL?(d+=f+g.slice(c)+v,f=`
`):g.length>c||v[0]==="	"?(f===" "?f=`
`:!p&&f===`
`&&(f=`

`),d+=f+g.slice(c)+v,f=`
`,p=!0):v===""?f===`
`?d+=`
`:f=`
`:(d+=f+v,f=" ",p=!1)}switch(i.chomp){case"-":break;case"+":for(let m=a;m<s.length;++m)d+=`
`+s[m][0].slice(c);d[d.length-1]!==`
`&&(d+=`
`);break;default:d+=`
`}let h=n+i.length+t.source.length;return{value:d,type:o,comment:i.comment,range:[n,h,h]}}function Coe({offset:t,props:e},r,n){if(e[0].type!=="block-scalar-header")return n(e[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:i}=e[0],o=i[0],s=0,a="",c=-1;for(let f=1;f<i.length;++f){let p=i[f];if(!a&&(p==="-"||p==="+"))a=p;else{let h=Number(p);!s&&h?s=h:c===-1&&(c=t+f)}}c!==-1&&n(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let l=!1,u="",d=i.length;for(let f=1;f<e.length;++f){let p=e[f];switch(p.type){case"space":l=!0;case"newline":d+=p.source.length;break;case"comment":r&&!l&&n(p,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),d+=p.source.length,u=p.source.substring(1);break;case"error":n(p,"UNEXPECTED_TOKEN",p.message),d+=p.source.length;break;default:{let h=`Unexpected token in block scalar header: ${p.type}`;n(p,"UNEXPECTED_TOKEN",h);let m=p.source;m&&typeof m=="string"&&(d+=m.length)}}}return{mode:o,indent:s,chomp:a,comment:u,length:d}}function boe(t){let e=t.split(/\n( *)/),r=e[0],n=r.match(/^( *)/),o=[n&&n[1]?[n[1],r.slice(n[1].length)]:["",r]];for(let s=1;s<e.length;s+=2)o.push([e[s],e[s+1]]);return o}g$.resolveBlockScalar=woe});var v0=I(y$=>{"use strict";var g0=xt(),Eoe=Jc();function _oe(t,e,r){let{offset:n,type:i,source:o,end:s}=t,a,c,l=(f,p,h)=>r(n+f,p,h);switch(i){case"scalar":a=g0.Scalar.PLAIN,c=Soe(o,l);break;case"single-quoted-scalar":a=g0.Scalar.QUOTE_SINGLE,c=xoe(o,l);break;case"double-quoted-scalar":a=g0.Scalar.QUOTE_DOUBLE,c=Poe(o,l);break;default:return r(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[n,n+o.length,n+o.length]}}let u=n+o.length,d=Eoe.resolveEnd(s,u,e,r);return{value:c,type:a,comment:d.comment,range:[n,u,d.offset]}}function Soe(t,e){let r="";switch(t[0]){case"	":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":{r=`block scalar indicator ${t[0]}`;break}case"@":case"`":{r=`reserved character ${t[0]}`;break}}return r&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${r}`),v$(t)}function xoe(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),v$(t.slice(1,-1)).replace(/''/g,"'")}function v$(t){let e,r;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),r=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=e.exec(t);if(!n)return t;let i=n[1],o=" ",s=e.lastIndex;for(r.lastIndex=s;n=r.exec(t);)n[1]===""?o===`
`?i+=o:o=`
`:(i+=o+n[1],o=" "),s=r.lastIndex;let a=/[ \t]*(.*)/sy;return a.lastIndex=s,n=a.exec(t),i+o+(n&&n[1]||"")}function Poe(t,e){let r="";for(let n=1;n<t.length-1;++n){let i=t[n];if(!(i==="\r"&&t[n+1]===`
`))if(i===`
`){let{fold:o,offset:s}=koe(t,n);r+=o,n=s}else if(i==="\\"){let o=t[++n],s=Ioe[o];if(s)r+=s;else if(o===`
`)for(o=t[n+1];o===" "||o==="	";)o=t[++n+1];else if(o==="\r"&&t[n+1]===`
`)for(o=t[++n+1];o===" "||o==="	";)o=t[++n+1];else if(o==="x"||o==="u"||o==="U"){let a={x:2,u:4,U:8}[o];r+=Toe(t,n+1,a,e),n+=a}else{let a=t.substr(n-1,2);e(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),r+=a}}else if(i===" "||i==="	"){let o=n,s=t[n+1];for(;s===" "||s==="	";)s=t[++n+1];s!==`
`&&!(s==="\r"&&t[n+2]===`
`)&&(r+=n>o?t.slice(o,n+1):i)}else r+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),r}function koe(t,e){let r="",n=t[e+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&t[e+2]!==`
`);)n===`
`&&(r+=`
`),e+=1,n=t[e+1];return r||(r=" "),{fold:r,offset:e}}var Ioe={"0":"\0",a:"\x07",b:"\b",e:"",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Toe(t,e,r,n){let i=t.substr(e,r),s=i.length===r&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(s)){let a=t.substr(e-2,r+2);return n(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(s)}y$.resolveFlowScalar=_oe});var b$=I(C$=>{"use strict";var Qc=Ke(),w$=xt(),Aoe=m0(),Doe=v0();function Roe(t,e,r,n){let{value:i,type:o,comment:s,range:a}=e.type==="block-scalar"?Aoe.resolveBlockScalar(e,t.options.strict,n):Doe.resolveFlowScalar(e,t.options.strict,n),c=r?t.directives.tagName(r.source,d=>n(r,"TAG_RESOLVE_FAILED",d)):null,l=r&&c?Ooe(t.schema,i,c,r,n):e.type==="scalar"?Noe(t,i,e,n):t.schema[Qc.SCALAR],u;try{let d=l.resolve(i,f=>n(r||e,"TAG_RESOLVE_FAILED",f),t.options);u=Qc.isScalar(d)?d:new w$.Scalar(d)}catch(d){let f=d instanceof Error?d.message:String(d);n(r||e,"TAG_RESOLVE_FAILED",f),u=new w$.Scalar(i)}return u.range=a,u.source=i,o&&(u.type=o),c&&(u.tag=c),l.format&&(u.format=l.format),s&&(u.comment=s),u}function Ooe(t,e,r,n,i){var o;if(r==="!")return t[Qc.SCALAR];let s=[];for(let c of t.tags)if(!c.collection&&c.tag===r)if(c.default&&c.test)s.push(c);else return c;for(let c of s)if((o=c.test)===null||o===void 0?void 0:o.test(e))return c;let a=t.knownTags[r];return a&&!a.collection?(t.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,r!=="tag:yaml.org,2002:str"),t[Qc.SCALAR])}function Noe({directives:t,schema:e},r,n,i){let o=e.tags.find(s=>{var a;return s.default&&((a=s.test)===null||a===void 0?void 0:a.test(r))})||e[Qc.SCALAR];if(e.compat){let s=e.compat.find(a=>{var c;return a.default&&((c=a.test)===null||c===void 0?void 0:c.test(r))})||e[Qc.SCALAR];if(o.tag!==s.tag){let a=t.tagString(o.tag),c=t.tagString(s.tag),l=`Value may be parsed as either ${a} or ${c}`;i(n,"TAG_RESOLVE_FAILED",l,!0)}}return o}C$.composeScalar=Roe});var _$=I(E$=>{"use strict";function Loe(t,e,r){if(e){r===null&&(r=e.length);for(let n=r-1;n>=0;--n){let i=e[n];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++n];(i==null?void 0:i.type)==="space";)t+=i.source.length,i=e[++n];break}}return t}E$.emptyScalarPosition=Loe});var k$=I(y0=>{"use strict";var Foe=cd(),Moe=m$(),S$=b$(),qoe=Jc(),joe=_$(),$oe={composeNode:x$,composeEmptyNode:P$};function x$(t,e,r,n){let{spaceBefore:i,comment:o,anchor:s,tag:a}=r,c;switch(e.type){case"alias":c=Uoe(t,e,n),(s||a)&&n(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=S$.composeScalar(t,e,a,n),s&&(c.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=Moe.composeCollection($oe,t,e,a,n),s&&(c.anchor=s.source.substring(1));break;default:throw console.log(e),new Error(`Unsupporten token type: ${e.type}`)}return s&&c.anchor===""&&n(s,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(c.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?c.comment=o:c.commentBefore=o),t.options.keepSourceTokens&&(c.srcToken=e),c}function P$(t,e,r,n,{spaceBefore:i,comment:o,anchor:s,tag:a},c){let l={type:"scalar",offset:joe.emptyScalarPosition(e,r,n),indent:-1,source:""},u=S$.composeScalar(t,l,a,c);return s&&(u.anchor=s.source.substring(1),u.anchor===""&&c(s,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(u.spaceBefore=!0),o&&(u.comment=o),u}function Uoe({options:t},{offset:e,source:r,end:n},i){let o=new Foe.Alias(r.substring(1));o.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string");let s=e+r.length,a=qoe.resolveEnd(n,s,t.strict,i);return o.range=[e,s,a.offset],a.comment&&(o.comment=a.comment),o}y0.composeEmptyNode=P$;y0.composeNode=x$});var A$=I(T$=>{"use strict";var Boe=xd(),I$=k$(),Hoe=Jc(),Voe=Id();function Goe(t,e,{offset:r,start:n,value:i,end:o},s){let a=Object.assign({directives:e},t),c=new Boe.Document(void 0,a),l={atRoot:!0,directives:c.directives,options:c.options,schema:c.schema},u=Voe.resolveProps(n,{indicator:"doc-start",next:i||(o==null?void 0:o[0]),offset:r,onError:s,startOnNewline:!0});u.found&&(c.directives.marker=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!u.hasNewline&&s(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=i?I$.composeNode(l,i,u,s):I$.composeEmptyNode(l,u.end,n,null,u,s);let d=c.contents.range[2],f=Hoe.resolveEnd(o,d,!1,s);return f.comment&&(c.comment=f.comment),c.range=[r,d,f.offset],c}T$.composeDoc=Goe});var w0=I(N$=>{"use strict";var Woe=vE(),zoe=xd(),Td=kd(),D$=Ke(),Koe=Wm(),Yoe=A$(),Joe=Jc();function Ad(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];let{offset:e,source:r}=t;return[e,e+(typeof r=="string"?r.length:1)]}function R$(t){var e;let r="",n=!1,i=!1;for(let o=0;o<t.length;++o){let s=t[o];switch(s[0]){case"#":r+=(r===""?"":i?`

`:`
`)+(s.substring(1)||" "),n=!0,i=!1;break;case"%":((e=t[o+1])===null||e===void 0?void 0:e[0])!=="#"&&(o+=1),n=!1;break;default:n||(i=!0),n=!1}}return{comment:r,afterEmptyLine:i}}var O$=class{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(r,n,i,o)=>{let s=Ad(r);o?this.warnings.push(new Td.YAMLWarning(s,n,i)):this.errors.push(new Td.YAMLParseError(s,n,i))},this.directives=new Woe.Directives({version:e.version||Koe.defaultOptions.version}),this.options=e}decorate(e,r){let{comment:n,afterEmptyLine:i}=R$(this.prelude);if(n){let o=e.contents;if(r)e.comment=e.comment?`${e.comment}
${n}`:n;else if(i||e.directives.marker||!o)e.commentBefore=n;else if(D$.isCollection(o)&&!o.flow&&o.items.length>0){let s=o.items[0];D$.isPair(s)&&(s=s.key);let a=s.commentBefore;s.commentBefore=a?`${n}
${a}`:n}else{let s=o.commentBefore;o.commentBefore=s?`${n}
${s}`:n}}r?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:R$(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,r=!1,n=-1){for(let i of e)yield*this.next(i);yield*this.end(r,n)}*next(e){switch(process.env.LOG_STREAM&&console.dir(e,{depth:null}),e.type){case"directive":this.directives.add(e.source,(r,n,i)=>{let o=Ad(e);o[0]+=r,this.onError(o,"BAD_DIRECTIVE",n,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let r=Yoe.composeDoc(this.options,this.directives,e,this.onError);this.atDirectives&&!r.directives.marker&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),this.decorate(r,!1),this.doc&&(yield this.doc),this.doc=r,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let r=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new Td.YAMLParseError(Ad(e),"UNEXPECTED_TOKEN",r);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){let n="Unexpected doc-end without preceding document";this.errors.push(new Td.YAMLParseError(Ad(e),"UNEXPECTED_TOKEN",n));break}let r=Joe.resolveEnd(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),r.comment){let n=this.doc.comment;this.doc.comment=n?`${n}
${r.comment}`:r.comment}this.doc.range[2]=r.offset;break}default:this.errors.push(new Td.YAMLParseError(Ad(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,r=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let n=Object.assign({directives:this.directives},this.options),i=new zoe.Document(void 0,n);this.atDirectives&&this.onError(r,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,r,r],this.decorate(i,!1),yield i}}};N$.Composer=O$});var M$=I(yg=>{"use strict";var Qoe=m0(),Xoe=v0(),Zoe=kd(),L$=md();function ese(t,e=!0,r){if(t){let n=(i,o,s)=>{let a=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(r)r(a,o,s);else throw new Zoe.YAMLParseError([a,a+1],o,s)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Xoe.resolveFlowScalar(t,e,n);case"block-scalar":return Qoe.resolveBlockScalar(t,e,n)}}return null}function tse(t,e){var r;let{implicitKey:n=!1,indent:i,inFlow:o=!1,offset:s=-1,type:a="PLAIN"}=e,c=L$.stringifyString({type:a,value:t},{implicitKey:n,indent:i>0?" ".repeat(i):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}}),l=(r=e.end)!==null&&r!==void 0?r:[{type:"newline",offset:-1,indent:i,source:`
`}];switch(c[0]){case"|":case">":{let u=c.indexOf(`
`),d=c.substring(0,u),f=c.substring(u+1)+`
`,p=[{type:"block-scalar-header",offset:s,indent:i,source:d}];return F$(p,l)||p.push({type:"newline",offset:-1,indent:i,source:`
`}),{type:"block-scalar",offset:s,indent:i,props:p,source:f}}case'"':return{type:"double-quoted-scalar",offset:s,indent:i,source:c,end:l};case"'":return{type:"single-quoted-scalar",offset:s,indent:i,source:c,end:l};default:return{type:"scalar",offset:s,indent:i,source:c,end:l}}}function rse(t,e,r={}){let{afterKey:n=!1,implicitKey:i=!1,inFlow:o=!1,type:s}=r,a="indent"in t?t.indent:null;if(n&&typeof a=="number"&&(a+=2),!s)switch(t.type){case"single-quoted-scalar":s="QUOTE_SINGLE";break;case"double-quoted-scalar":s="QUOTE_DOUBLE";break;case"block-scalar":{let l=t.props[0];if(l.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s=l.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:s="PLAIN"}let c=L$.stringifyString({type:s,value:e},{implicitKey:i||a===null,indent:a!==null&&a>0?" ".repeat(a):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}});switch(c[0]){case"|":case">":nse(t,c);break;case'"':C0(t,c,"double-quoted-scalar");break;case"'":C0(t,c,"single-quoted-scalar");break;default:C0(t,c,"scalar")}}function nse(t,e){let r=e.indexOf(`
`),n=e.substring(0,r),i=e.substring(r+1)+`
`;if(t.type==="block-scalar"){let o=t.props[0];if(o.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o.source=n,t.source=i}else{let{offset:o}=t,s="indent"in t?t.indent:-1,a=[{type:"block-scalar-header",offset:o,indent:s,source:n}];F$(a,"end"in t?t.end:void 0)||a.push({type:"newline",offset:-1,indent:s,source:`
`});for(let c of Object.keys(t))c!=="type"&&c!=="offset"&&delete t[c];Object.assign(t,{type:"block-scalar",indent:s,props:a,source:i})}}function F$(t,e){if(e)for(let r of e)switch(r.type){case"space":case"comment":t.push(r);break;case"newline":return t.push(r),!0}return!1}function C0(t,e,r){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=r,t.source=e;break;case"block-scalar":{let n=t.props.slice(1),i=e.length;t.props[0].type==="block-scalar-header"&&(i-=t.props[0].source.length);for(let o of n)o.offset+=i;delete t.props,Object.assign(t,{type:r,source:e,end:n});break}case"block-map":case"block-seq":{let n=t.offset+e.length,i={type:"newline",offset:n,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:r,source:e,end:[i]});break}default:{let n="indent"in t?t.indent:-1,i="end"in t&&Array.isArray(t.end)?t.end.filter(o=>o.type==="space"||o.type==="comment"||o.type==="newline"):[];for(let o of Object.keys(t))o!=="type"&&o!=="offset"&&delete t[o];Object.assign(t,{type:r,indent:n,source:e,end:i})}}}yg.createScalarToken=tse;yg.resolveAsScalar=ese;yg.setScalarValue=rse});var j$=I(q$=>{"use strict";var ise=t=>"type"in t?wg(t):Cg(t);function wg(t){switch(t.type){case"block-scalar":{let e="";for(let r of t.props)e+=wg(r);return e+t.source}case"block-map":case"block-seq":{let e="";for(let r of t.items)e+=Cg(r);return e}case"flow-collection":{let e=t.start.source;for(let r of t.items)e+=Cg(r);for(let r of t.end)e+=r.source;return e}case"document":{let e=Cg(t);if(t.end)for(let r of t.end)e+=r.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(let r of t.end)e+=r.source;return e}}}function Cg({start:t,key:e,sep:r,value:n}){let i="";for(let o of t)i+=o.source;if(e&&(i+=wg(e)),r)for(let o of r)i+=o.source;return n&&(i+=wg(n)),i}q$.stringify=ise});var H$=I(B$=>{"use strict";var b0=Symbol("break visit"),ose=Symbol("skip children"),$$=Symbol("remove item");function ua(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),U$(Object.freeze([]),t,e)}ua.BREAK=b0;ua.SKIP=ose;ua.REMOVE=$$;ua.itemAtPath=(t,e)=>{let r=t;for(let[n,i]of e){let o=r&&r[n];if(o&&"items"in o)r=o.items[i];else return}return r};ua.parentCollection=(t,e)=>{let r=ua.itemAtPath(t,e.slice(0,-1)),n=e[e.length-1][0],i=r&&r[n];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function U$(t,e,r){let n=r(e,t);if(typeof n=="symbol")return n;for(let i of["key","value"]){let o=e[i];if(o&&"items"in o){for(let s=0;s<o.items.length;++s){let a=U$(Object.freeze(t.concat([[i,s]])),o.items[s],r);if(typeof a=="number")s=a-1;else{if(a===b0)return b0;a===$$&&(o.items.splice(s,1),s-=1)}}typeof n=="function"&&i==="key"&&(n=n(e,t))}}return typeof n=="function"?n(e,t):n}B$.visit=ua});var bg=I(kr=>{"use strict";var E0=M$(),sse=j$(),ase=H$(),_0="\uFEFF",S0="",x0="",P0="",cse=t=>!!t&&"items"in t,lse=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function use(t){switch(t){case _0:return"<BOM>";case S0:return"<DOC>";case x0:return"<FLOW_END>";case P0:return"<SCALAR>";default:return JSON.stringify(t)}}function dse(t){switch(t){case _0:return"byte-order-mark";case S0:return"doc-mode";case x0:return"flow-error-end";case P0:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}kr.createScalarToken=E0.createScalarToken;kr.resolveAsScalar=E0.resolveAsScalar;kr.setScalarValue=E0.setScalarValue;kr.stringify=sse.stringify;kr.visit=ase.visit;kr.BOM=_0;kr.DOCUMENT=S0;kr.FLOW_END=x0;kr.SCALAR=P0;kr.isCollection=cse;kr.isScalar=lse;kr.prettyToken=use;kr.tokenType=dse});var I0=I(z$=>{"use strict";var Dd=bg();function yn(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var V$="0123456789ABCDEFabcdef".split(""),fse="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),G$=",[]{}".split(""),pse=` ,[]{}
\r	`.split(""),k0=t=>!t||pse.includes(t),W$=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,r=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!r;let n=this.next||"stream";for(;n&&(r||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,r=this.buffer[e];for(;r===" "||r==="	";)r=this.buffer[++e];return!r||r==="#"||r===`
`?!0:r==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let r=this.buffer[e];if(this.indentNext>0){let n=0;for(;r===" ";)r=this.buffer[++n+e];if(r==="\r"){let i=this.buffer[n+e+1];if(i===`
`||!i&&!this.atEnd)return e+n+1}return r===`
`||n>=this.indentNext||!r&&!this.atEnd?e+n:-1}if(r==="-"||r==="."){let n=this.buffer.substr(e,3);if((n==="---"||n==="...")&&yn(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===Dd.BOM&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let r=e.length,n=e.indexOf("#");if(n!==-1){let o=e[n-1];(o===" "||o==="	")&&(r=n-1)}for(;;){let o=e[r-1];if(o===" "||o==="	")r-=1;else break}let i=(yield*this.pushCount(r))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){let r=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-r),yield*this.pushNewline(),"stream"}return yield Dd.DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let r=this.peek(3);if(r==="---"&&yn(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(r==="..."&&yn(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!yn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[e,r]=this.peek(2);if(!r&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&yn(r)){let n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let e=this.getLine();if(e===null)return this.setNext("doc");let r=yield*this.pushIndicators();switch(e[r]){case"#":yield*this.pushCount(e.length-r);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(k0),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return r+=yield*this.parseBlockScalarHeader(),r+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-r),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,r,n=-1;do e=yield*this.pushNewline(),r=yield*this.pushSpaces(!0),e>0&&(this.indentValue=n=r);while(e+r>0);let i=this.getLine();if(i===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext&&i[0]!=="#"||n===0&&(i.startsWith("---")||i.startsWith("..."))&&yn(i[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield Dd.FLOW_END,yield*this.parseLineStart();let o=0;for(;i[o]===",";)o+=yield*this.pushCount(1),o+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(o+=yield*this.pushIndicators(),i[o]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-o),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(k0),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let s=this.charAt(1);if(this.flowKey||yn(s)||s===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let e=this.charAt(0),r=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;r!==-1&&this.buffer[r+1]==="'";)r=this.buffer.indexOf("'",r+2);else for(;r!==-1;){let o=0;for(;this.buffer[r-1-o]==="\\";)o+=1;if(o%2==0)break;r=this.buffer.indexOf('"',r+1)}let n=this.buffer.substring(0,r),i=n.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){let o=this.continueScalar(i+1);if(o===-1)break;i=n.indexOf(`
`,o)}i!==-1&&(r=i-(n[i-1]==="\r"?2:1))}if(r===-1){if(!this.atEnd)return this.setNext("quoted-scalar");r=this.buffer.length}return yield*this.pushToIndex(r+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let r=this.buffer[++e];if(r==="+")this.blockScalarKeep=!0;else if(r>"0"&&r<="9")this.blockScalarIndent=Number(r)-1;else if(r!=="-")break}return yield*this.pushUntil(r=>yn(r)||r==="#")}*parseBlockScalar(){let e=this.pos-1,r=0,n;e:for(let i=this.pos;n=this.buffer[i];++i)switch(n){case" ":r+=1;break;case`
`:e=i,r=0;break;case"\r":{let o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=r:this.indentNext+=this.blockScalarIndent;do{let i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];for(o==="\r"&&(o=this.buffer[--i]);o===" "||o==="	";)o=this.buffer[--i];if(o===`
`&&i>=this.pos)e=i;else break}while(!0);return yield Dd.SCALAR,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let e=this.flowLevel>0,r=this.pos-1,n=this.pos-1,i;for(;i=this.buffer[++n];)if(i===":"){let o=this.buffer[n+1];if(yn(o)||e&&o===",")break;r=n}else if(yn(i)){let o=this.buffer[n+1];if(i==="\r"&&(o===`
`?(n+=1,i=`
`,o=this.buffer[n+1]):r=n),o==="#"||e&&G$.includes(o))break;if(i===`
`){let s=this.continueScalar(n+1);if(s===-1)break;n=Math.max(n,s-2)}}else{if(e&&G$.includes(i))break;r=n}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield Dd.SCALAR,yield*this.pushToIndex(r+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,r){let n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(r&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(k0))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case":":case"?":case"-":if(yn(this.charAt(1)))return this.flowLevel===0?this.indentNext=this.indentValue+1:this.flowKey&&(this.flowKey=!1),(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,r=this.buffer[e];for(;!yn(r)&&r!==">";)r=this.buffer[++e];return yield*this.pushToIndex(r===">"?e+1:e,!1)}else{let e=this.pos+1,r=this.buffer[e];for(;r;)if(fse.includes(r))r=this.buffer[++e];else if(r==="%"&&V$.includes(this.buffer[e+1])&&V$.includes(this.buffer[e+2]))r=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){let e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let r=this.pos-1,n;do n=this.buffer[++r];while(n===" "||e&&n==="	");let i=r-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=r),i}*pushUntil(e){let r=this.pos,n=this.buffer[r];for(;!e(n);)n=this.buffer[++r];return yield*this.pushToIndex(r,!1)}};z$.Lexer=W$});var T0=I(Y$=>{"use strict";var K$=class{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let r=0,n=this.lineStarts.length;for(;r<n;){let o=r+n>>1;this.lineStarts[o]<e?r=o+1:n=o}if(this.lineStarts[r]===e)return{line:r+1,col:1};if(r===0)return{line:0,col:e};let i=this.lineStarts[r-1];return{line:r,col:e-i+1}}}};Y$.LineCounter=K$});var D0=I(eU=>{"use strict";var J$=bg(),hse=I0();function mi(t,e){for(let r=0;r<t.length;++r)if(t[r].type===e)return!0;return!1}function A0(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return!0}return!1}function Q$(t){switch(t==null?void 0:t.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Eg(t){switch(t.type){case"document":return t.start;case"block-map":{let e=t.items[t.items.length-1];return e.sep||e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Rd(t){var e;if(t.length===0)return[];let r=t.length;e:for(;--r>=0;)switch(t[r].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((e=t[++r])===null||e===void 0?void 0:e.type)==="space";);return t.splice(r,t.length)}function X$(t){if(t.start.type==="flow-seq-start")for(let e of t.items)e.sep&&!e.value&&!mi(e.start,"explicit-key-ind")&&!mi(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,Q$(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}var Z$=class{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new hse.Lexer,this.onNewLine=e}*parse(e,r=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let n of this.lexer.lex(e,r))yield*this.next(n);r||(yield*this.end())}*next(e){if(this.source=e,process.env.LOG_TOKENS&&console.log("|",J$.prettyToken(e)),this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}let r=J$.tokenType(e);if(r)if(r==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=r,yield*this.step(),r){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{let n=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){let r=e||this.stack.pop();if(r)if(this.stack.length===0)yield r;else{let n=this.peek(1);switch(r.type==="block-scalar"?r.indent="indent"in n?n.indent:0:r.type==="flow-collection"&&n.type==="document"&&(r.indent=0),r.type==="flow-collection"&&X$(r),n.type){case"document":n.value=r;break;case"block-scalar":n.props.push(r);break;case"block-map":{let i=n.items[n.items.length-1];if(i.value){n.items.push({start:[],key:r,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=r;else{Object.assign(i,{key:r,sep:[]}),this.onKeyLine=!mi(i.start,"explicit-key-ind");return}break}case"block-seq":{let i=n.items[n.items.length-1];i.value?n.items.push({start:[],value:r}):i.value=r;break}case"flow-collection":{let i=n.items[n.items.length-1];!i||i.value?n.items.push({start:[],key:r,sep:[]}):i.sep?i.value=r:Object.assign(i,{key:r,sep:[]});return}default:yield*this.pop(),yield*this.pop(r)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(r.type==="block-map"||r.type==="block-seq")){let i=r.items[r.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&!A0(i.start)&&(r.indent===0||i.start.every(o=>o.type!=="comment"||o.indent<r.indent))&&(n.type==="document"?n.end=i.start:n.items.push({start:i.start}),r.items.splice(-1,1))}}else{let n="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:n}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{A0(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let r=this.startBlockValue(e);r?this.stack.push(r):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){let r=Eg(this.peek(2)),n=Rd(r),i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];let o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var r;let n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){let i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)===null||r===void 0?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let i=!this.onKeyLine&&this.indent===e.indent&&(n.sep||A0(n.start));switch(this.type){case"anchor":case"tag":i||n.value?(e.items.push({start:[this.sourceToken]}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!mi(n.start,"explicit-key-ind")?n.start.push(this.sourceToken):i||n.value?e.items.push({start:[this.sourceToken]}):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(!n.sep)Object.assign(n,{key:null,sep:[this.sourceToken]});else if(n.value||i&&!mi(n.start,"explicit-key-ind"))e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(mi(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]});else if(mi(n.start,"explicit-key-ind")&&Q$(n.key)&&!mi(n.sep,"newline")){let o=Rd(n.start),s=n.key,a=n.sep;a.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:s,sep:a}]})}else n.sep.push(this.sourceToken);this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);i||n.value?(e.items.push({start:[],key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{let o=this.startBlockValue(e);if(o){i&&o.type!=="block-seq"&&mi(n.start,"explicit-key-ind")&&e.items.push({start:[]}),this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var r;let n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){let i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)===null||r===void 0?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||mi(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){let i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){let r=e.items[e.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n&&n.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!r||r.sep?e.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return;case"map-value-ind":!r||r.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!r||r.value?e.items.push({start:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let i=this.flowScalar(this.type);!r||r.value?e.items.push({start:[],key:i,sep:[]}):r.sep?this.stack.push(i):Object.assign(r,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{let n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){let i=Eg(n),o=Rd(i);X$(e);let s=e.end.splice(1,e.end.length);s.push(this.sourceToken);let a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:o,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let r=Eg(e),n=Rd(r);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n}]}}case"map-value-ind":{this.onKeyLine=!0;let r=Eg(e),n=Rd(r);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,r){return this.type!=="comment"||this.indent<=r?!1:e.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};eU.Parser=Z$});var oU=I(Nd=>{"use strict";var tU=w0(),mse=xd(),Od=kd(),gse=xE(),vse=T0(),rU=D0();function nU(t){let e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new vse.LineCounter||null,prettyErrors:e}}function yse(t,e={}){let{lineCounter:r,prettyErrors:n}=nU(e),i=new rU.Parser(r==null?void 0:r.addNewLine),o=new tU.Composer(e),s=Array.from(o.compose(i.parse(t)));if(n&&r)for(let a of s)a.errors.forEach(Od.prettifyError(t,r)),a.warnings.forEach(Od.prettifyError(t,r));return s.length>0?s:Object.assign([],{empty:!0},o.streamInfo())}function iU(t,e={}){let{lineCounter:r,prettyErrors:n}=nU(e),i=new rU.Parser(r==null?void 0:r.addNewLine),o=new tU.Composer(e),s=null;for(let a of o.compose(i.parse(t),!0,t.length))if(!s)s=a;else if(s.options.logLevel!=="silent"){s.errors.push(new Od.YAMLParseError(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&r&&(s.errors.forEach(Od.prettifyError(t,r)),s.warnings.forEach(Od.prettifyError(t,r))),s}function wse(t,e,r){let n;typeof e=="function"?n=e:r===void 0&&e&&typeof e=="object"&&(r=e);let i=iU(t,r);if(!i)return null;if(i.warnings.forEach(o=>gse.warn(i.options.logLevel,o)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:n},r))}function Cse(t,e,r){let n=null;if(typeof e=="function"||Array.isArray(e)?n=e:r===void 0&&e&&(r=e),typeof r=="string"&&(r=r.length),typeof r=="number"){let i=Math.round(r);r=i<1?void 0:i>8?{indent:8}:{indent:i}}if(t===void 0){let{keepUndefined:i}=r||e||{};if(!i)return}return new mse.Document(t,n,r).toString(r)}Nd.parse=wse;Nd.parseAllDocuments=yse;Nd.parseDocument=iU;Nd.stringify=Cse});var sU=I(Ye=>{"use strict";var bse=w0(),Ese=xd(),_se=o0(),R0=kd(),Sse=cd(),Ho=Ke(),xse=Gi(),Pse=xt(),kse=ca(),Ise=la(),Tse=Wm(),Ase=bg(),Dse=I0(),Rse=T0(),Ose=D0(),_g=oU(),Nse=od();Ye.Composer=bse.Composer;Ye.Document=Ese.Document;Ye.Schema=_se.Schema;Ye.YAMLError=R0.YAMLError;Ye.YAMLParseError=R0.YAMLParseError;Ye.YAMLWarning=R0.YAMLWarning;Ye.Alias=Sse.Alias;Ye.isAlias=Ho.isAlias;Ye.isCollection=Ho.isCollection;Ye.isDocument=Ho.isDocument;Ye.isMap=Ho.isMap;Ye.isNode=Ho.isNode;Ye.isPair=Ho.isPair;Ye.isScalar=Ho.isScalar;Ye.isSeq=Ho.isSeq;Ye.Pair=xse.Pair;Ye.Scalar=Pse.Scalar;Ye.YAMLMap=kse.YAMLMap;Ye.YAMLSeq=Ise.YAMLSeq;Ye.defaultOptions=Tse.defaultOptions;Ye.CST=Ase;Ye.Lexer=Dse.Lexer;Ye.LineCounter=Rse.LineCounter;Ye.Parser=Ose.Parser;Ye.parse=_g.parse;Ye.parseAllDocuments=_g.parseAllDocuments;Ye.parseDocument=_g.parseDocument;Ye.stringify=_g.stringify;Ye.visit=Nse.visit});var aU=I((o_e,Lse)=>{Lse.exports={Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",amp:"&",AMP:"&",andand:"\u2A55",And:"\u2A53",and:"\u2227",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angmsd:"\u2221",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",apacir:"\u2A6F",ap:"\u2248",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250C",boxdR:"\u2552",boxDr:"\u2553",boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252C",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxul:"\u2518",boxuL:"\u255B",boxUl:"\u255C",boxUL:"\u255D",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255A",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253C",boxvH:"\u256A",boxVh:"\u256B",boxVH:"\u256C",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251C",boxvR:"\u255E",boxVr:"\u255F",boxVR:"\u2560",bprime:"\u2035",breve:"\u02D8",Breve:"\u02D8",brvbar:"\xA6",bscr:"\u{1D4B7}",Bscr:"\u212C",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsolb:"\u29C5",bsol:"\\",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",cap:"\u2229",Cap:"\u22D2",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",centerdot:"\xB7",CenterDot:"\xB7",cfr:"\u{1D520}",Cfr:"\u212D",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25CB",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",conint:"\u222E",Conint:"\u222F",ContourIntegral:"\u222E",copf:"\u{1D554}",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\xA9",COPY:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",cross:"\u2717",Cross:"\u2A2F",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",cupbrcap:"\u2A48",cupcap:"\u2A46",CupCap:"\u224D",cup:"\u222A",Cup:"\u22D3",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",dagger:"\u2020",Dagger:"\u2021",daleth:"\u2138",darr:"\u2193",Darr:"\u21A1",dArr:"\u21D3",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21CA",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",diamond:"\u22C4",Diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",Downarrow:"\u21D3",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21BD",DownRightTeeVector:"\u295F",DownRightVectorBar:"\u2957",DownRightVector:"\u21C1",DownTeeArrow:"\u21A7",DownTee:"\u22A4",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",Ecirc:"\xCA",ecirc:"\xEA",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",escr:"\u212F",Escr:"\u2130",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",forall:"\u2200",ForAll:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",fscr:"\u{1D4BB}",Fscr:"\u2131",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",gescc:"\u2AA9",ges:"\u2A7E",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",gg:"\u226B",Gg:"\u22D9",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2AA5",gl:"\u2277",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gnE:"\u2269",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gt:">",GT:">",Gt:"\u226B",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",harrcir:"\u2948",harr:"\u2194",hArr:"\u21D4",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",Hfr:"\u210C",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",hopf:"\u{1D559}",Hopf:"\u210D",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\u{1D4BD}",Hscr:"\u210B",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",ifr:"\u{1D526}",Ifr:"\u2111",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",incare:"\u2105",in:"\u2208",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",intcal:"\u22BA",int:"\u222B",Int:"\u222C",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",iscr:"\u{1D4BE}",Iscr:"\u2110",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",lang:"\u27E8",Lang:"\u27EA",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",larrb:"\u21E4",larrbfs:"\u291F",larr:"\u2190",Larr:"\u219E",lArr:"\u21D0",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",latail:"\u2919",lAtail:"\u291B",lat:"\u2AAB",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lBarr:"\u290E",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27E8",LeftArrowBar:"\u21E4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21D0",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21C3",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTeeArrow:"\u21A4",LeftTee:"\u22A3",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangleBar:"\u29CF",LeftTriangle:"\u22B2",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21BF",LeftVectorBar:"\u2952",LeftVector:"\u21BC",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",lescc:"\u2AA8",les:"\u2A7D",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21C7",ll:"\u226A",Ll:"\u22D8",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoustache:"\u23B0",lmoust:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lnE:"\u2268",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",longleftarrow:"\u27F5",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftrightarrow:"\u27F7",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longmapsto:"\u27FC",longrightarrow:"\u27F6",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",Lscr:"\u2112",lsh:"\u21B0",Lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",lt:"<",LT:"<",Lt:"\u226A",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midast:"*",midcir:"\u2AF0",mid:"\u2223",middot:"\xB7",minusb:"\u229F",minus:"\u2212",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",mscr:"\u{1D4C2}",Mscr:"\u2133",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266E",naturals:"\u2115",natur:"\u266E",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21D7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nharr:"\u21AE",nhArr:"\u21CE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlarr:"\u219A",nlArr:"\u21CD",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219A",nLeftarrow:"\u21CD",nleftrightarrow:"\u21AE",nLeftrightarrow:"\u21CE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nopf:"\u{1D55F}",Nopf:"\u2115",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangle:"\u22EA",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangle:"\u22EB",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",nprec:"\u2280",npreceq:"\u2AAF\u0338",npre:"\u2AAF\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219B",nrArr:"\u21CF",nrarrw:"\u219D\u0338",nrightarrow:"\u219B",nRightarrow:"\u21CF",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvDash:"\u22AD",nVdash:"\u22AE",nVDash:"\u22AF",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21D6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",Ocirc:"\xD4",ocirc:"\xF4",ocir:"\u229A",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",orarr:"\u21BB",Or:"\u2A54",or:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",otimesas:"\u2A36",Otimes:"\u2A37",otimes:"\u2297",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",para:"\xB6",parallel:"\u2225",par:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plus:"+",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",popf:"\u{1D561}",Popf:"\u2119",pound:"\xA3",prap:"\u2AB7",Pr:"\u2ABB",pr:"\u227A",prcue:"\u227C",precapprox:"\u2AB7",prec:"\u227A",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",pre:"\u2AAF",prE:"\u2AB3",precsim:"\u227E",prime:"\u2032",Prime:"\u2033",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportional:"\u221D",Proportion:"\u2237",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",qopf:"\u{1D562}",Qopf:"\u211A",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",quot:'"',QUOT:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",rang:"\u27E9",Rang:"\u27EB",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21A0",rArr:"\u21D2",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",ratail:"\u291A",rAtail:"\u291C",ratio:"\u2236",rationals:"\u211A",rbarr:"\u290D",rBarr:"\u290F",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",Re:"\u211C",rect:"\u25AD",reg:"\xAE",REG:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",rfr:"\u{1D52F}",Rfr:"\u211C",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrowBar:"\u21E5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21D2",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVectorBar:"\u2955",RightDownVector:"\u21C2",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTeeArrow:"\u21A6",RightTee:"\u22A2",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangleBar:"\u29D0",RightTriangle:"\u22B3",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVectorBar:"\u2954",RightUpVector:"\u21BE",RightVectorBar:"\u2953",RightVector:"\u21C0",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoustache:"\u23B1",rmoust:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",ropf:"\u{1D563}",Ropf:"\u211D",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",rscr:"\u{1D4C7}",Rscr:"\u211B",rsh:"\u21B1",Rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2ABC",sc:"\u227B",sccue:"\u227D",sce:"\u2AB0",scE:"\u2AB4",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdotb:"\u22A1",sdot:"\u22C5",sdote:"\u2A66",searhk:"\u2925",searr:"\u2198",seArr:"\u21D8",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",solbar:"\u233F",solb:"\u29C4",sol:"/",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25A1",Square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squ:"\u25A1",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",sub:"\u2282",Sub:"\u22D0",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subset:"\u2282",Subset:"\u22D0",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succapprox:"\u2AB8",succ:"\u227B",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",sum:"\u2211",Sum:"\u2211",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",sup:"\u2283",Sup:"\u22D1",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",supset:"\u2283",Supset:"\u22D1",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21D9",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",tilde:"\u02DC",Tilde:"\u223C",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2A31",timesb:"\u22A0",times:"\xD7",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",topbot:"\u2336",topcir:"\u2AF1",top:"\u22A4",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",uarr:"\u2191",Uarr:"\u219F",uArr:"\u21D1",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21D1",UpArrowDownArrow:"\u21C5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21D5",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",upsi:"\u03C5",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTeeArrow:"\u21A5",UpTee:"\u22A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",varr:"\u2195",vArr:"\u21D5",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",vBar:"\u2AE8",Vbar:"\u2AEB",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22A2",vDash:"\u22A8",Vdash:"\u22A9",VDash:"\u22AB",Vdashl:"\u2AE6",veebar:"\u22BB",vee:"\u2228",Vee:"\u22C1",veeeq:"\u225A",vellip:"\u22EE",verbar:"|",Verbar:"\u2016",vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",wedge:"\u2227",Wedge:"\u22C0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xharr:"\u27F7",xhArr:"\u27FA",Xi:"\u039E",xi:"\u03BE",xlarr:"\u27F5",xlArr:"\u27F8",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrarr:"\u27F6",xrArr:"\u27F9",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",yuml:"\xFF",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",zfr:"\u{1D537}",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",Zopf:"\u2124",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"}});var O0=I((s_e,cU)=>{"use strict";cU.exports=aU()});var Sg=I((a_e,lU)=>{lU.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/});var fU=I((c_e,dU)=>{"use strict";var uU={};function Fse(t){var e,r,n=uU[t];if(n)return n;for(n=uU[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),/^[0-9a-z]$/i.test(r)?n.push(r):n.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)n[t.charCodeAt(e)]=t[e];return n}function xg(t,e,r){var n,i,o,s,a,c="";for(typeof e!="string"&&(r=e,e=xg.defaultChars),typeof r=="undefined"&&(r=!0),a=Fse(e),n=0,i=t.length;n<i;n++){if(o=t.charCodeAt(n),r&&o===37&&n+2<i&&/^[0-9a-f]{2}$/i.test(t.slice(n+1,n+3))){c+=t.slice(n,n+3),n+=2;continue}if(o<128){c+=a[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&n+1<i&&(s=t.charCodeAt(n+1),s>=56320&&s<=57343)){c+=encodeURIComponent(t[n]+t[n+1]),n++;continue}c+="%EF%BF%BD";continue}c+=encodeURIComponent(t[n])}return c}xg.defaultChars=";/?:@&=+$,-_.!~*'()#";xg.componentChars="-_.!~*'()";dU.exports=xg});var mU=I((l_e,hU)=>{"use strict";var pU={};function Mse(t){var e,r,n=pU[t];if(n)return n;for(n=pU[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),n.push(r);for(e=0;e<t.length;e++)r=t.charCodeAt(e),n[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2);return n}function Pg(t,e){var r;return typeof e!="string"&&(e=Pg.defaultChars),r=Mse(e),t.replace(/(%[a-f0-9]{2})+/gi,function(n){var i,o,s,a,c,l,u,d="";for(i=0,o=n.length;i<o;i+=3){if(s=parseInt(n.slice(i+1,i+3),16),s<128){d+=r[s];continue}if((s&224)==192&&i+3<o&&(a=parseInt(n.slice(i+4,i+6),16),(a&192)==128)){u=s<<6&1984|a&63,u<128?d+="\uFFFD\uFFFD":d+=String.fromCharCode(u),i+=3;continue}if((s&240)==224&&i+6<o&&(a=parseInt(n.slice(i+4,i+6),16),c=parseInt(n.slice(i+7,i+9),16),(a&192)==128&&(c&192)==128)){u=s<<12&61440|a<<6&4032|c&63,u<2048||u>=55296&&u<=57343?d+="\uFFFD\uFFFD\uFFFD":d+=String.fromCharCode(u),i+=6;continue}if((s&248)==240&&i+9<o&&(a=parseInt(n.slice(i+4,i+6),16),c=parseInt(n.slice(i+7,i+9),16),l=parseInt(n.slice(i+10,i+12),16),(a&192)==128&&(c&192)==128&&(l&192)==128)){u=s<<18&1835008|a<<12&258048|c<<6&4032|l&63,u<65536||u>1114111?d+="\uFFFD\uFFFD\uFFFD\uFFFD":(u-=65536,d+=String.fromCharCode(55296+(u>>10),56320+(u&1023))),i+=9;continue}d+="\uFFFD"}return d})}Pg.defaultChars=";/?:@&=+$,#";Pg.componentChars="";hU.exports=Pg});var vU=I((u_e,gU)=>{"use strict";gU.exports=function(e){var r="";return r+=e.protocol||"",r+=e.slashes?"//":"",r+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?r+="["+e.hostname+"]":r+=e.hostname||"",r+=e.port?":"+e.port:"",r+=e.pathname||"",r+=e.search||"",r+=e.hash||"",r}});var SU=I((d_e,_U)=>{"use strict";function kg(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var qse=/^([a-z0-9.+-]+:)/i,jse=/:[0-9]*$/,$se=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Use=["<",">",'"',"`"," ","\r",`
`,"	"],Bse=["{","}","|","\\","^","`"].concat(Use),Hse=["'"].concat(Bse),yU=["%","/","?",";","#"].concat(Hse),wU=["/","?","#"],Vse=255,CU=/^[+a-z0-9A-Z_-]{0,63}$/,Gse=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,bU={javascript:!0,"javascript:":!0},EU={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Wse(t,e){if(t&&t instanceof kg)return t;var r=new kg;return r.parse(t,e),r}kg.prototype.parse=function(t,e){var r,n,i,o,s,a=t;if(a=a.trim(),!e&&t.split("#").length===1){var c=$se.exec(a);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}var l=qse.exec(a);if(l&&(l=l[0],i=l.toLowerCase(),this.protocol=l,a=a.substr(l.length)),(e||l||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=a.substr(0,2)==="//",s&&!(l&&bU[l])&&(a=a.substr(2),this.slashes=!0)),!bU[l]&&(s||l&&!EU[l])){var u=-1;for(r=0;r<wU.length;r++)o=a.indexOf(wU[r]),o!==-1&&(u===-1||o<u)&&(u=o);var d,f;for(u===-1?f=a.lastIndexOf("@"):f=a.lastIndexOf("@",u),f!==-1&&(d=a.slice(0,f),a=a.slice(f+1),this.auth=d),u=-1,r=0;r<yU.length;r++)o=a.indexOf(yU[r]),o!==-1&&(u===-1||o<u)&&(u=o);u===-1&&(u=a.length),a[u-1]===":"&&u--;var p=a.slice(0,u);a=a.slice(u),this.parseHost(p),this.hostname=this.hostname||"";var h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){var m=this.hostname.split(/\./);for(r=0,n=m.length;r<n;r++){var g=m[r];if(!!g&&!g.match(CU)){for(var v="",w=0,C=g.length;w<C;w++)g.charCodeAt(w)>127?v+="x":v+=g[w];if(!v.match(CU)){var b=m.slice(0,r),S=m.slice(r+1),P=g.match(Gse);P&&(b.push(P[1]),S.unshift(P[2])),S.length&&(a=S.join(".")+a),this.hostname=b.join(".");break}}}}this.hostname.length>Vse&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var _=a.indexOf("#");_!==-1&&(this.hash=a.substr(_),a=a.slice(0,_));var k=a.indexOf("?");return k!==-1&&(this.search=a.substr(k),a=a.slice(0,k)),a&&(this.pathname=a),EU[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this};kg.prototype.parseHost=function(t){var e=jse.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};_U.exports=Wse});var N0=I((f_e,Ld)=>{"use strict";Ld.exports.encode=fU();Ld.exports.decode=mU();Ld.exports.format=vU();Ld.exports.parse=SU()});var L0=I((p_e,xU)=>{xU.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/});var F0=I((h_e,PU)=>{PU.exports=/[\0-\x1F\x7F-\x9F]/});var IU=I((m_e,kU)=>{kU.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/});var M0=I((g_e,TU)=>{TU.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/});var AU=I(Xc=>{"use strict";Xc.Any=L0();Xc.Cc=F0();Xc.Cf=IU();Xc.P=Sg();Xc.Z=M0()});var We=I(Ot=>{"use strict";function zse(t){return Object.prototype.toString.call(t)}function Kse(t){return zse(t)==="[object String]"}var Yse=Object.prototype.hasOwnProperty;function DU(t,e){return Yse.call(t,e)}function Jse(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){if(!!r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(n){t[n]=r[n]})}}),t}function Qse(t,e,r){return[].concat(t.slice(0,e),r,t.slice(e+1))}function RU(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)==65535||(t&65535)==65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function OU(t){if(t>65535){t-=65536;var e=55296+(t>>10),r=56320+(t&1023);return String.fromCharCode(e,r)}return String.fromCharCode(t)}var NU=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,Xse=/&([a-z#][a-z0-9]{1,31});/gi,Zse=new RegExp(NU.source+"|"+Xse.source,"gi"),eae=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,LU=O0();function tae(t,e){var r=0;return DU(LU,e)?LU[e]:e.charCodeAt(0)===35&&eae.test(e)&&(r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10),RU(r))?OU(r):t}function rae(t){return t.indexOf("\\")<0?t:t.replace(NU,"$1")}function nae(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(Zse,function(e,r,n){return r||tae(e,n)})}var iae=/[&<>"]/,oae=/[&<>"]/g,sae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function aae(t){return sae[t]}function cae(t){return iae.test(t)?t.replace(oae,aae):t}var lae=/[.?*+^$[\]\\(){}|-]/g;function uae(t){return t.replace(lae,"\\$&")}function dae(t){switch(t){case 9:case 32:return!0}return!1}function fae(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var pae=Sg();function hae(t){return pae.test(t)}function mae(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function gae(t){return t=t.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(t=t.replace(//g,"\xDF")),t.toLowerCase().toUpperCase()}Ot.lib={};Ot.lib.mdurl=N0();Ot.lib.ucmicro=AU();Ot.assign=Jse;Ot.isString=Kse;Ot.has=DU;Ot.unescapeMd=rae;Ot.unescapeAll=nae;Ot.isValidEntityCode=RU;Ot.fromCodePoint=OU;Ot.escapeHtml=cae;Ot.arrayReplaceAt=Qse;Ot.isSpace=dae;Ot.isWhiteSpace=fae;Ot.isMdAsciiPunct=mae;Ot.isPunctChar=hae;Ot.escapeRE=uae;Ot.normalizeReference=gae});var MU=I((w_e,FU)=>{"use strict";FU.exports=function(e,r,n){var i,o,s,a,c=-1,l=e.posMax,u=e.pos;for(e.pos=r+1,i=1;e.pos<l;){if(s=e.src.charCodeAt(e.pos),s===93&&(i--,i===0)){o=!0;break}if(a=e.pos,e.md.inline.skipToken(e),s===91){if(a===e.pos-1)i++;else if(n)return e.pos=u,-1}}return o&&(c=e.pos),e.pos=u,c}});var $U=I((C_e,jU)=>{"use strict";var qU=We().unescapeAll;jU.exports=function(e,r,n){var i,o,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(r)===60){for(r++;r<n;){if(i=e.charCodeAt(r),i===10||i===60)return c;if(i===62)return c.pos=r+1,c.str=qU(e.slice(a+1,r)),c.ok=!0,c;if(i===92&&r+1<n){r+=2;continue}r++}return c}for(o=0;r<n&&(i=e.charCodeAt(r),!(i===32||i<32||i===127));){if(i===92&&r+1<n){if(e.charCodeAt(r+1)===32)break;r+=2;continue}if(i===40&&(o++,o>32))return c;if(i===41){if(o===0)break;o--}r++}return a===r||o!==0||(c.str=qU(e.slice(a,r)),c.lines=s,c.pos=r,c.ok=!0),c}});var BU=I((b_e,UU)=>{"use strict";var vae=We().unescapeAll;UU.exports=function(e,r,n){var i,o,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(r>=n||(o=e.charCodeAt(r),o!==34&&o!==39&&o!==40))return c;for(r++,o===40&&(o=41);r<n;){if(i=e.charCodeAt(r),i===o)return c.pos=r+1,c.lines=s,c.str=vae(e.slice(a+1,r)),c.ok=!0,c;if(i===40&&o===41)return c;i===10?s++:i===92&&r+1<n&&(r++,e.charCodeAt(r)===10&&s++),r++}return c}});var HU=I(Ig=>{"use strict";Ig.parseLinkLabel=MU();Ig.parseLinkDestination=$U();Ig.parseLinkTitle=BU()});var GU=I((__e,VU)=>{"use strict";var yae=We().assign,wae=We().unescapeAll,da=We().escapeHtml,gi={};gi.code_inline=function(t,e,r,n,i){var o=t[e];return"<code"+i.renderAttrs(o)+">"+da(t[e].content)+"</code>"};gi.code_block=function(t,e,r,n,i){var o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+da(t[e].content)+`</code></pre>
`};gi.fence=function(t,e,r,n,i){var o=t[e],s=o.info?wae(o.info).trim():"",a="",c="",l,u,d,f,p;return s&&(d=s.split(/(\s+)/g),a=d[0],c=d.slice(2).join("")),r.highlight?l=r.highlight(o.content,a,c)||da(o.content):l=da(o.content),l.indexOf("<pre")===0?l+`
`:s?(u=o.attrIndex("class"),f=o.attrs?o.attrs.slice():[],u<0?f.push(["class",r.langPrefix+a]):(f[u]=f[u].slice(),f[u][1]+=" "+r.langPrefix+a),p={attrs:f},"<pre><code"+i.renderAttrs(p)+">"+l+`</code></pre>
`):"<pre><code"+i.renderAttrs(o)+">"+l+`</code></pre>
`};gi.image=function(t,e,r,n,i){var o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,r,n),i.renderToken(t,e,r)};gi.hardbreak=function(t,e,r){return r.xhtmlOut?`<br />
`:`<br>
`};gi.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};gi.text=function(t,e){return da(t[e].content)};gi.html_block=function(t,e){return t[e].content};gi.html_inline=function(t,e){return t[e].content};function Zc(){this.rules=yae({},gi)}Zc.prototype.renderAttrs=function(e){var r,n,i;if(!e.attrs)return"";for(i="",r=0,n=e.attrs.length;r<n;r++)i+=" "+da(e.attrs[r][0])+'="'+da(e.attrs[r][1])+'"';return i};Zc.prototype.renderToken=function(e,r,n){var i,o="",s=!1,a=e[r];return a.hidden?"":(a.block&&a.nesting!==-1&&r&&e[r-1].hidden&&(o+=`
`),o+=(a.nesting===-1?"</":"<")+a.tag,o+=this.renderAttrs(a),a.nesting===0&&n.xhtmlOut&&(o+=" /"),a.block&&(s=!0,a.nesting===1&&r+1<e.length&&(i=e[r+1],(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===a.tag)&&(s=!1))),o+=s?`>
`:">",o)};Zc.prototype.renderInline=function(t,e,r){for(var n,i="",o=this.rules,s=0,a=t.length;s<a;s++)n=t[s].type,typeof o[n]!="undefined"?i+=o[n](t,s,e,r,this):i+=this.renderToken(t,s,e);return i};Zc.prototype.renderInlineAsText=function(t,e,r){for(var n="",i=0,o=t.length;i<o;i++)t[i].type==="text"?n+=t[i].content:t[i].type==="image"?n+=this.renderInlineAsText(t[i].children,e,r):t[i].type==="softbreak"&&(n+=`
`);return n};Zc.prototype.render=function(t,e,r){var n,i,o,s="",a=this.rules;for(n=0,i=t.length;n<i;n++)o=t[n].type,o==="inline"?s+=this.renderInline(t[n].children,e,r):typeof a[o]!="undefined"?s+=a[t[n].type](t,n,e,r,this):s+=this.renderToken(t,n,e,r);return s};VU.exports=Zc});var Tg=I((S_e,WU)=>{"use strict";function $n(){this.__rules__=[],this.__cache__=null}$n.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};$n.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(r){!r.enabled||r.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),t.__cache__={},e.forEach(function(r){t.__cache__[r]=[],t.__rules__.forEach(function(n){!n.enabled||r&&n.alt.indexOf(r)<0||t.__cache__[r].push(n.fn)})})};$n.prototype.at=function(t,e,r){var n=this.__find__(t),i=r||{};if(n===-1)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=i.alt||[],this.__cache__=null};$n.prototype.before=function(t,e,r,n){var i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};$n.prototype.after=function(t,e,r,n){var i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};$n.prototype.push=function(t,e,r){var n=r||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};$n.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!0,r.push(n)},this),this.__cache__=null,r};$n.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(t,e)};$n.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!1,r.push(n)},this),this.__cache__=null,r};$n.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};WU.exports=$n});var KU=I((x_e,zU)=>{"use strict";var Cae=/\r\n?|\n/g,bae=/\0/g;zU.exports=function(e){var r;r=e.src.replace(Cae,`
`),r=r.replace(bae,"\uFFFD"),e.src=r}});var JU=I((P_e,YU)=>{"use strict";YU.exports=function(e){var r;e.inlineMode?(r=new e.Token("inline","",0),r.content=e.src,r.map=[0,1],r.children=[],e.tokens.push(r)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}});var XU=I((k_e,QU)=>{"use strict";QU.exports=function(e){var r=e.tokens,n,i,o;for(i=0,o=r.length;i<o;i++)n=r[i],n.type==="inline"&&e.md.inline.parse(n.content,e.md,e.env,n.children)}});var e2=I((I_e,ZU)=>{"use strict";var Eae=We().arrayReplaceAt;function _ae(t){return/^<a[>\s]/i.test(t)}function Sae(t){return/^<\/a\s*>/i.test(t)}ZU.exports=function(e){var r,n,i,o,s,a,c,l,u,d,f,p,h,m,g,v,w=e.tokens,C;if(!!e.md.options.linkify){for(n=0,i=w.length;n<i;n++)if(!(w[n].type!=="inline"||!e.md.linkify.pretest(w[n].content)))for(o=w[n].children,h=0,r=o.length-1;r>=0;r--){if(a=o[r],a.type==="link_close"){for(r--;o[r].level!==a.level&&o[r].type!=="link_open";)r--;continue}if(a.type==="html_inline"&&(_ae(a.content)&&h>0&&h--,Sae(a.content)&&h++),!(h>0)&&a.type==="text"&&e.md.linkify.test(a.content)){for(u=a.content,C=e.md.linkify.match(u),c=[],p=a.level,f=0,l=0;l<C.length;l++)m=C[l].url,g=e.md.normalizeLink(m),!!e.md.validateLink(g)&&(v=C[l].text,C[l].schema?C[l].schema==="mailto:"&&!/^mailto:/i.test(v)?v=e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=e.md.normalizeLinkText(v):v=e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,""),d=C[l].index,d>f&&(s=new e.Token("text","",0),s.content=u.slice(f,d),s.level=p,c.push(s)),s=new e.Token("link_open","a",1),s.attrs=[["href",g]],s.level=p++,s.markup="linkify",s.info="auto",c.push(s),s=new e.Token("text","",0),s.content=v,s.level=p,c.push(s),s=new e.Token("link_close","a",-1),s.level=--p,s.markup="linkify",s.info="auto",c.push(s),f=C[l].lastIndex);f<u.length&&(s=new e.Token("text","",0),s.content=u.slice(f),s.level=p,c.push(s)),w[n].children=o=Eae(o,r,c)}}}}});var n2=I((T_e,r2)=>{"use strict";var t2=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,xae=/\((c|tm|r|p)\)/i,Pae=/\((c|tm|r|p)\)/ig,kae={c:"\xA9",r:"\xAE",p:"\xA7",tm:"\u2122"};function Iae(t,e){return kae[e.toLowerCase()]}function Tae(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&(r.content=r.content.replace(Pae,Iae)),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}function Aae(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&t2.test(r.content)&&(r.content=r.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}r2.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type==="inline"&&(xae.test(e.tokens[r].content)&&Tae(e.tokens[r].children),t2.test(e.tokens[r].content)&&Aae(e.tokens[r].children))}});var u2=I((A_e,l2)=>{"use strict";var i2=We().isWhiteSpace,o2=We().isPunctChar,s2=We().isMdAsciiPunct,Dae=/['"]/,a2=/['"]/g,c2="\u2019";function Ag(t,e,r){return t.substr(0,e)+r+t.substr(e+1)}function Rae(t,e){var r,n,i,o,s,a,c,l,u,d,f,p,h,m,g,v,w,C,b,S,P;for(b=[],r=0;r<t.length;r++){for(n=t[r],c=t[r].level,w=b.length-1;w>=0&&!(b[w].level<=c);w--);if(b.length=w+1,n.type!=="text")continue;i=n.content,s=0,a=i.length;e:for(;s<a&&(a2.lastIndex=s,o=a2.exec(i),!!o);){if(g=v=!0,s=o.index+1,C=o[0]==="'",u=32,o.index-1>=0)u=i.charCodeAt(o.index-1);else for(w=r-1;w>=0&&!(t[w].type==="softbreak"||t[w].type==="hardbreak");w--)if(!!t[w].content){u=t[w].content.charCodeAt(t[w].content.length-1);break}if(d=32,s<a)d=i.charCodeAt(s);else for(w=r+1;w<t.length&&!(t[w].type==="softbreak"||t[w].type==="hardbreak");w++)if(!!t[w].content){d=t[w].content.charCodeAt(0);break}if(f=s2(u)||o2(String.fromCharCode(u)),p=s2(d)||o2(String.fromCharCode(d)),h=i2(u),m=i2(d),m?g=!1:p&&(h||f||(g=!1)),h?v=!1:f&&(m||p||(v=!1)),d===34&&o[0]==='"'&&u>=48&&u<=57&&(v=g=!1),g&&v&&(g=f,v=p),!g&&!v){C&&(n.content=Ag(n.content,o.index,c2));continue}if(v){for(w=b.length-1;w>=0&&(l=b[w],!(b[w].level<c));w--)if(l.single===C&&b[w].level===c){l=b[w],C?(S=e.md.options.quotes[2],P=e.md.options.quotes[3]):(S=e.md.options.quotes[0],P=e.md.options.quotes[1]),n.content=Ag(n.content,o.index,P),t[l.token].content=Ag(t[l.token].content,l.pos,S),s+=P.length-1,l.token===r&&(s+=S.length-1),i=n.content,a=i.length,b.length=w;continue e}}g?b.push({token:r,pos:o.index,single:C,level:c}):v&&C&&(n.content=Ag(n.content,o.index,c2))}}}l2.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type!=="inline"||!Dae.test(e.tokens[r].content)||Rae(e.tokens[r].children,e)}});var Dg=I((D_e,d2)=>{"use strict";function el(t,e,r){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}el.prototype.attrIndex=function(e){var r,n,i;if(!this.attrs)return-1;for(r=this.attrs,n=0,i=r.length;n<i;n++)if(r[n][0]===e)return n;return-1};el.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};el.prototype.attrSet=function(e,r){var n=this.attrIndex(e),i=[e,r];n<0?this.attrPush(i):this.attrs[n]=i};el.prototype.attrGet=function(e){var r=this.attrIndex(e),n=null;return r>=0&&(n=this.attrs[r][1]),n};el.prototype.attrJoin=function(e,r){var n=this.attrIndex(e);n<0?this.attrPush([e,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};d2.exports=el});var h2=I((R_e,p2)=>{"use strict";var Oae=Dg();function f2(t,e,r){this.src=t,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=e}f2.prototype.Token=Oae;p2.exports=f2});var g2=I((O_e,m2)=>{"use strict";var Nae=Tg(),q0=[["normalize",KU()],["block",JU()],["inline",XU()],["linkify",e2()],["replacements",n2()],["smartquotes",u2()]];function j0(){this.ruler=new Nae;for(var t=0;t<q0.length;t++)this.ruler.push(q0[t][0],q0[t][1])}j0.prototype.process=function(t){var e,r,n;for(n=this.ruler.getRules(""),e=0,r=n.length;e<r;e++)n[e](t)};j0.prototype.State=h2();m2.exports=j0});var w2=I((N_e,y2)=>{"use strict";var $0=We().isSpace;function U0(t,e){var r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.substr(r,n-r)}function v2(t){var e=[],r=0,n=t.length,i,o=!1,s=0,a="";for(i=t.charCodeAt(r);r<n;)i===124&&(o?(a+=t.substring(s,r-1),s=r):(e.push(a+t.substring(s,r)),a="",s=r+1)),o=i===92,r++,i=t.charCodeAt(r);return e.push(a+t.substring(s)),e}y2.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,w,C,b,S,P;if(r+2>n||(u=r+1,e.sCount[u]<e.blkIndent)||e.sCount[u]-e.blkIndent>=4||(a=e.bMarks[u]+e.tShift[u],a>=e.eMarks[u])||(S=e.src.charCodeAt(a++),S!==124&&S!==45&&S!==58)||a>=e.eMarks[u]||(P=e.src.charCodeAt(a++),P!==124&&P!==45&&P!==58&&!$0(P))||S===45&&$0(P))return!1;for(;a<e.eMarks[u];){if(o=e.src.charCodeAt(a),o!==124&&o!==45&&o!==58&&!$0(o))return!1;a++}for(s=U0(e,r+1),d=s.split("|"),h=[],c=0;c<d.length;c++){if(m=d[c].trim(),!m){if(c===0||c===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(m))return!1;m.charCodeAt(m.length-1)===58?h.push(m.charCodeAt(0)===58?"center":"right"):m.charCodeAt(0)===58?h.push("left"):h.push("")}if(s=U0(e,r).trim(),s.indexOf("|")===-1||e.sCount[r]-e.blkIndent>=4||(d=v2(s),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),f=d.length,f===0||f!==h.length))return!1;if(i)return!0;for(w=e.parentType,e.parentType="table",b=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),p.map=g=[r,0],p=e.push("thead_open","thead",1),p.map=[r,r+1],p=e.push("tr_open","tr",1),p.map=[r,r+1],c=0;c<d.length;c++)p=e.push("th_open","th",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=d[c].trim(),p.children=[],p=e.push("th_close","th",-1);for(p=e.push("tr_close","tr",-1),p=e.push("thead_close","thead",-1),u=r+2;u<n&&!(e.sCount[u]<e.blkIndent);u++){for(C=!1,c=0,l=b.length;c<l;c++)if(b[c](e,u,n,!0)){C=!0;break}if(C||(s=U0(e,u).trim(),!s)||e.sCount[u]-e.blkIndent>=4)break;for(d=v2(s),d.length&&d[0]===""&&d.shift(),d.length&&d[d.length-1]===""&&d.pop(),u===r+2&&(p=e.push("tbody_open","tbody",1),p.map=v=[r+2,0]),p=e.push("tr_open","tr",1),p.map=[u,u+1],c=0;c<f;c++)p=e.push("td_open","td",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=d[c]?d[c].trim():"",p.children=[],p=e.push("td_close","td",-1);p=e.push("tr_close","tr",-1)}return v&&(p=e.push("tbody_close","tbody",-1),v[1]=u),p=e.push("table_close","table",-1),g[1]=u,e.parentType=w,e.line=u,!0}});var b2=I((L_e,C2)=>{"use strict";C2.exports=function(e,r,n){var i,o,s;if(e.sCount[r]-e.blkIndent<4)return!1;for(o=i=r+1;i<n;){if(e.isEmpty(i)){i++;continue}if(e.sCount[i]-e.blkIndent>=4){i++,o=i;continue}break}return e.line=o,s=e.push("code_block","code",0),s.content=e.getLines(r,o,4+e.blkIndent,!1)+`
`,s.map=[r,e.line],!0}});var _2=I((F_e,E2)=>{"use strict";E2.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f=!1,p=e.bMarks[r]+e.tShift[r],h=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||p+3>h||(o=e.src.charCodeAt(p),o!==126&&o!==96)||(l=p,p=e.skipChars(p,o),s=p-l,s<3)||(d=e.src.slice(l,p),a=e.src.slice(p,h),o===96&&a.indexOf(String.fromCharCode(o))>=0))return!1;if(i)return!0;for(c=r;c++,!(c>=n||(p=l=e.bMarks[c]+e.tShift[c],h=e.eMarks[c],p<h&&e.sCount[c]<e.blkIndent));)if(e.src.charCodeAt(p)===o&&!(e.sCount[c]-e.blkIndent>=4)&&(p=e.skipChars(p,o),!(p-l<s)&&(p=e.skipSpaces(p),!(p<h)))){f=!0;break}return s=e.sCount[r],e.line=c+(f?1:0),u=e.push("fence","code",0),u.info=a,u.content=e.getLines(r+1,c,s,!0),u.markup=d,u.map=[r,e.line],!0}});var P2=I((M_e,x2)=>{"use strict";var S2=We().isSpace;x2.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,w,C,b,S,P,_,k,T=e.lineMax,A=e.bMarks[r]+e.tShift[r],M=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(A++)!==62)return!1;if(i)return!0;for(c=p=e.sCount[r]+1,e.src.charCodeAt(A)===32?(A++,c++,p++,o=!1,b=!0):e.src.charCodeAt(A)===9?(b=!0,(e.bsCount[r]+p)%4==3?(A++,c++,p++,o=!1):o=!0):b=!1,h=[e.bMarks[r]],e.bMarks[r]=A;A<M&&(s=e.src.charCodeAt(A),S2(s));){s===9?p+=4-(p+e.bsCount[r]+(o?1:0))%4:p++;A++}for(m=[e.bsCount[r]],e.bsCount[r]=e.sCount[r]+1+(b?1:0),u=A>=M,w=[e.sCount[r]],e.sCount[r]=p-c,C=[e.tShift[r]],e.tShift[r]=A-e.bMarks[r],P=e.md.block.ruler.getRules("blockquote"),v=e.parentType,e.parentType="blockquote",f=r+1;f<n&&(k=e.sCount[f]<e.blkIndent,A=e.bMarks[f]+e.tShift[f],M=e.eMarks[f],!(A>=M));f++){if(e.src.charCodeAt(A++)===62&&!k){for(c=p=e.sCount[f]+1,e.src.charCodeAt(A)===32?(A++,c++,p++,o=!1,b=!0):e.src.charCodeAt(A)===9?(b=!0,(e.bsCount[f]+p)%4==3?(A++,c++,p++,o=!1):o=!0):b=!1,h.push(e.bMarks[f]),e.bMarks[f]=A;A<M&&(s=e.src.charCodeAt(A),S2(s));){s===9?p+=4-(p+e.bsCount[f]+(o?1:0))%4:p++;A++}u=A>=M,m.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(b?1:0),w.push(e.sCount[f]),e.sCount[f]=p-c,C.push(e.tShift[f]),e.tShift[f]=A-e.bMarks[f];continue}if(u)break;for(S=!1,a=0,l=P.length;a<l;a++)if(P[a](e,f,n,!0)){S=!0;break}if(S){e.lineMax=f,e.blkIndent!==0&&(h.push(e.bMarks[f]),m.push(e.bsCount[f]),C.push(e.tShift[f]),w.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}h.push(e.bMarks[f]),m.push(e.bsCount[f]),C.push(e.tShift[f]),w.push(e.sCount[f]),e.sCount[f]=-1}for(g=e.blkIndent,e.blkIndent=0,_=e.push("blockquote_open","blockquote",1),_.markup=">",_.map=d=[r,0],e.md.block.tokenize(e,r,f),_=e.push("blockquote_close","blockquote",-1),_.markup=">",e.lineMax=T,e.parentType=v,d[1]=e.line,a=0;a<C.length;a++)e.bMarks[a+r]=h[a],e.tShift[a+r]=C[a],e.sCount[a+r]=w[a],e.bsCount[a+r]=m[a];return e.blkIndent=g,!0}});var I2=I((q_e,k2)=>{"use strict";var Lae=We().isSpace;k2.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(o=e.src.charCodeAt(l++),o!==42&&o!==45&&o!==95))return!1;for(s=1;l<u;){if(a=e.src.charCodeAt(l++),a!==o&&!Lae(a))return!1;a===o&&s++}return s<3?!1:(i||(e.line=r+1,c=e.push("hr","hr",0),c.map=[r,e.line],c.markup=Array(s+1).join(String.fromCharCode(o))),!0)}});var O2=I((j_e,R2)=>{"use strict";var T2=We().isSpace;function A2(t,e){var r,n,i,o;return n=t.bMarks[e]+t.tShift[e],i=t.eMarks[e],r=t.src.charCodeAt(n++),r!==42&&r!==45&&r!==43||n<i&&(o=t.src.charCodeAt(n),!T2(o))?-1:n}function D2(t,e){var r,n=t.bMarks[e]+t.tShift[e],i=n,o=t.eMarks[e];if(i+1>=o||(r=t.src.charCodeAt(i++),r<48||r>57))return-1;for(;;){if(i>=o)return-1;if(r=t.src.charCodeAt(i++),r>=48&&r<=57){if(i-n>=10)return-1;continue}if(r===41||r===46)break;return-1}return i<o&&(r=t.src.charCodeAt(i),!T2(r))?-1:i}function Fae(t,e){var r,n,i=t.level+2;for(r=e+2,n=t.tokens.length-2;r<n;r++)t.tokens[r].level===i&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}R2.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,w,C,b,S,P,_,k,T,A,M,H,J,K,oe,te,F=!1,L=!0;if(e.sCount[r]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[r]-e.listIndent>=4&&e.sCount[r]<e.blkIndent)return!1;if(i&&e.parentType==="paragraph"&&e.sCount[r]>=e.blkIndent&&(F=!0),(M=D2(e,r))>=0){if(d=!0,J=e.bMarks[r]+e.tShift[r],v=Number(e.src.slice(J,M-1)),F&&v!==1)return!1}else if((M=A2(e,r))>=0)d=!1;else return!1;if(F&&e.skipSpaces(M)>=e.eMarks[r])return!1;if(g=e.src.charCodeAt(M-1),i)return!0;for(m=e.tokens.length,d?(te=e.push("ordered_list_open","ol",1),v!==1&&(te.attrs=[["start",v]])):te=e.push("bullet_list_open","ul",1),te.map=h=[r,0],te.markup=String.fromCharCode(g),C=r,H=!1,oe=e.md.block.ruler.getRules("list"),P=e.parentType,e.parentType="list";C<n;){for(A=M,w=e.eMarks[C],u=b=e.sCount[C]+M-(e.bMarks[r]+e.tShift[r]);A<w;){if(o=e.src.charCodeAt(A),o===9)b+=4-(b+e.bsCount[C])%4;else if(o===32)b++;else break;A++}if(s=A,s>=w?l=1:l=b-u,l>4&&(l=1),c=u+l,te=e.push("list_item_open","li",1),te.markup=String.fromCharCode(g),te.map=f=[r,0],d&&(te.info=e.src.slice(J,M-1)),T=e.tight,k=e.tShift[r],_=e.sCount[r],S=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=c,e.tight=!0,e.tShift[r]=s-e.bMarks[r],e.sCount[r]=b,s>=w&&e.isEmpty(r+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,r,n,!0),(!e.tight||H)&&(L=!1),H=e.line-r>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=S,e.tShift[r]=k,e.sCount[r]=_,e.tight=T,te=e.push("list_item_close","li",-1),te.markup=String.fromCharCode(g),C=r=e.line,f[1]=C,s=e.bMarks[r],C>=n||e.sCount[C]<e.blkIndent||e.sCount[r]-e.blkIndent>=4)break;for(K=!1,a=0,p=oe.length;a<p;a++)if(oe[a](e,C,n,!0)){K=!0;break}if(K)break;if(d){if(M=D2(e,C),M<0)break;J=e.bMarks[C]+e.tShift[C]}else if(M=A2(e,C),M<0)break;if(g!==e.src.charCodeAt(M-1))break}return d?te=e.push("ordered_list_close","ol",-1):te=e.push("bullet_list_close","ul",-1),te.markup=String.fromCharCode(g),h[1]=C,e.line=C,e.parentType=P,L&&Fae(e,m),!0}});var L2=I(($_e,N2)=>{"use strict";var Mae=We().normalizeReference,Rg=We().isSpace;N2.exports=function(e,r,n,i){var o,s,a,c,l,u,d,f,p,h,m,g,v,w,C,b,S=0,P=e.bMarks[r]+e.tShift[r],_=e.eMarks[r],k=r+1;if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(P)!==91)return!1;for(;++P<_;)if(e.src.charCodeAt(P)===93&&e.src.charCodeAt(P-1)!==92){if(P+1===_||e.src.charCodeAt(P+1)!==58)return!1;break}for(c=e.lineMax,C=e.md.block.ruler.getRules("reference"),h=e.parentType,e.parentType="reference";k<c&&!e.isEmpty(k);k++)if(!(e.sCount[k]-e.blkIndent>3)&&!(e.sCount[k]<0)){for(w=!1,u=0,d=C.length;u<d;u++)if(C[u](e,k,c,!0)){w=!0;break}if(w)break}for(v=e.getLines(r,k,e.blkIndent,!1).trim(),_=v.length,P=1;P<_;P++){if(o=v.charCodeAt(P),o===91)return!1;if(o===93){p=P;break}else o===10?S++:o===92&&(P++,P<_&&v.charCodeAt(P)===10&&S++)}if(p<0||v.charCodeAt(p+1)!==58)return!1;for(P=p+2;P<_;P++)if(o=v.charCodeAt(P),o===10)S++;else if(!Rg(o))break;if(m=e.md.helpers.parseLinkDestination(v,P,_),!m.ok||(l=e.md.normalizeLink(m.str),!e.md.validateLink(l)))return!1;for(P=m.pos,S+=m.lines,s=P,a=S,g=P;P<_;P++)if(o=v.charCodeAt(P),o===10)S++;else if(!Rg(o))break;for(m=e.md.helpers.parseLinkTitle(v,P,_),P<_&&g!==P&&m.ok?(b=m.str,P=m.pos,S+=m.lines):(b="",P=s,S=a);P<_&&(o=v.charCodeAt(P),!!Rg(o));)P++;if(P<_&&v.charCodeAt(P)!==10&&b)for(b="",P=s,S=a;P<_&&(o=v.charCodeAt(P),!!Rg(o));)P++;return P<_&&v.charCodeAt(P)!==10||(f=Mae(v.slice(1,p)),!f)?!1:(i||(typeof e.env.references=="undefined"&&(e.env.references={}),typeof e.env.references[f]=="undefined"&&(e.env.references[f]={title:b,href:l}),e.parentType=h,e.line=r+S+1),!0)}});var M2=I((U_e,F2)=>{"use strict";F2.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]});var H0=I((B_e,B0)=>{"use strict";var qae="[a-zA-Z_:][a-zA-Z0-9:._-]*",jae="[^\"'=<>`\\x00-\\x20]+",$ae="'[^']*'",Uae='"[^"]*"',Bae="(?:"+jae+"|"+$ae+"|"+Uae+")",Hae="(?:\\s+"+qae+"(?:\\s*=\\s*"+Bae+")?)",q2="<[A-Za-z][A-Za-z0-9\\-]*"+Hae+"*\\s*\\/?>",j2="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Vae="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",Gae="<[?][\\s\\S]*?[?]>",Wae="<![A-Z]+\\s+[^>]*>",zae="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Kae=new RegExp("^(?:"+q2+"|"+j2+"|"+Vae+"|"+Gae+"|"+Wae+"|"+zae+")"),Yae=new RegExp("^(?:"+q2+"|"+j2+")");B0.exports.HTML_TAG_RE=Kae;B0.exports.HTML_OPEN_CLOSE_TAG_RE=Yae});var U2=I((H_e,$2)=>{"use strict";var Jae=M2(),Qae=H0().HTML_OPEN_CLOSE_TAG_RE,tl=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Jae.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Qae.source+"\\s*$"),/^$/,!1]];$2.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(l)!==60)return!1;for(c=e.src.slice(l,u),o=0;o<tl.length&&!tl[o][0].test(c);o++);if(o===tl.length)return!1;if(i)return tl[o][2];if(s=r+1,!tl[o][1].test(c)){for(;s<n&&!(e.sCount[s]<e.blkIndent);s++)if(l=e.bMarks[s]+e.tShift[s],u=e.eMarks[s],c=e.src.slice(l,u),tl[o][1].test(c)){c.length!==0&&s++;break}}return e.line=s,a=e.push("html_block","",0),a.map=[r,s],a.content=e.getLines(r,s,e.blkIndent,!0),!0}});var V2=I((V_e,H2)=>{"use strict";var B2=We().isSpace;H2.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(o=e.src.charCodeAt(l),o!==35||l>=u))return!1;for(s=1,o=e.src.charCodeAt(++l);o===35&&l<u&&s<=6;)s++,o=e.src.charCodeAt(++l);return s>6||l<u&&!B2(o)?!1:(i||(u=e.skipSpacesBack(u,l),a=e.skipCharsBack(u,35,l),a>l&&B2(e.src.charCodeAt(a-1))&&(u=a),e.line=r+1,c=e.push("heading_open","h"+String(s),1),c.markup="########".slice(0,s),c.map=[r,e.line],c=e.push("inline","",0),c.content=e.src.slice(l,u).trim(),c.map=[r,e.line],c.children=[],c=e.push("heading_close","h"+String(s),-1),c.markup="########".slice(0,s)),!0)}});var W2=I((G_e,G2)=>{"use strict";G2.exports=function(e,r,n){var i,o,s,a,c,l,u,d,f,p=r+1,h,m=e.md.block.ruler.getRules("paragraph");if(e.sCount[r]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(l=e.bMarks[p]+e.tShift[p],u=e.eMarks[p],l<u&&(f=e.src.charCodeAt(l),(f===45||f===61)&&(l=e.skipChars(l,f),l=e.skipSpaces(l),l>=u)))){d=f===61?1:2;break}if(!(e.sCount[p]<0)){for(o=!1,s=0,a=m.length;s<a;s++)if(m[s](e,p,n,!0)){o=!0;break}if(o)break}}return d?(i=e.getLines(r,p,e.blkIndent,!1).trim(),e.line=p+1,c=e.push("heading_open","h"+String(d),1),c.markup=String.fromCharCode(f),c.map=[r,e.line],c=e.push("inline","",0),c.content=i,c.map=[r,e.line-1],c.children=[],c=e.push("heading_close","h"+String(d),-1),c.markup=String.fromCharCode(f),e.parentType=h,!0):!1}});var K2=I((W_e,z2)=>{"use strict";z2.exports=function(e,r){var n,i,o,s,a,c,l=r+1,u=e.md.block.ruler.getRules("paragraph"),d=e.lineMax;for(c=e.parentType,e.parentType="paragraph";l<d&&!e.isEmpty(l);l++)if(!(e.sCount[l]-e.blkIndent>3)&&!(e.sCount[l]<0)){for(i=!1,o=0,s=u.length;o<s;o++)if(u[o](e,l,d,!0)){i=!0;break}if(i)break}return n=e.getLines(r,l,e.blkIndent,!1).trim(),e.line=l,a=e.push("paragraph_open","p",1),a.map=[r,e.line],a=e.push("inline","",0),a.content=n,a.map=[r,e.line],a.children=[],a=e.push("paragraph_close","p",-1),e.parentType=c,!0}});var Q2=I((z_e,J2)=>{"use strict";var Y2=Dg(),Og=We().isSpace;function vi(t,e,r,n){var i,o,s,a,c,l,u,d;for(this.src=t,this.md=e,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",o=this.src,d=!1,s=a=l=u=0,c=o.length;a<c;a++){if(i=o.charCodeAt(a),!d)if(Og(i)){l++,i===9?u+=4-u%4:u++;continue}else d=!0;(i===10||a===c-1)&&(i!==10&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(l),this.sCount.push(u),this.bsCount.push(0),d=!1,l=0,u=0,s=a+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}vi.prototype.push=function(t,e,r){var n=new Y2(t,e,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};vi.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};vi.prototype.skipEmptyLines=function(e){for(var r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};vi.prototype.skipSpaces=function(e){for(var r,n=this.src.length;e<n&&(r=this.src.charCodeAt(e),!!Og(r));e++);return e};vi.prototype.skipSpacesBack=function(e,r){if(e<=r)return e;for(;e>r;)if(!Og(this.src.charCodeAt(--e)))return e+1;return e};vi.prototype.skipChars=function(e,r){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===r;e++);return e};vi.prototype.skipCharsBack=function(e,r,n){if(e<=n)return e;for(;e>n;)if(r!==this.src.charCodeAt(--e))return e+1;return e};vi.prototype.getLines=function(e,r,n,i){var o,s,a,c,l,u,d,f=e;if(e>=r)return"";for(u=new Array(r-e),o=0;f<r;f++,o++){for(s=0,d=c=this.bMarks[f],f+1<r||i?l=this.eMarks[f]+1:l=this.eMarks[f];c<l&&s<n;){if(a=this.src.charCodeAt(c),Og(a))a===9?s+=4-(s+this.bsCount[f])%4:s++;else if(c-d<this.tShift[f])s++;else break;c++}s>n?u[o]=new Array(s-n+1).join(" ")+this.src.slice(c,l):u[o]=this.src.slice(c,l)}return u.join("")};vi.prototype.Token=Y2;J2.exports=vi});var Z2=I((K_e,X2)=>{"use strict";var Xae=Tg(),Ng=[["table",w2(),["paragraph","reference"]],["code",b2()],["fence",_2(),["paragraph","reference","blockquote","list"]],["blockquote",P2(),["paragraph","reference","blockquote","list"]],["hr",I2(),["paragraph","reference","blockquote","list"]],["list",O2(),["paragraph","reference","blockquote"]],["reference",L2()],["html_block",U2(),["paragraph","reference","blockquote"]],["heading",V2(),["paragraph","reference","blockquote"]],["lheading",W2()],["paragraph",K2()]];function Lg(){this.ruler=new Xae;for(var t=0;t<Ng.length;t++)this.ruler.push(Ng[t][0],Ng[t][1],{alt:(Ng[t][2]||[]).slice()})}Lg.prototype.tokenize=function(t,e,r){for(var n,i,o=this.ruler.getRules(""),s=o.length,a=e,c=!1,l=t.md.options.maxNesting;a<r&&(t.line=a=t.skipEmptyLines(a),!(a>=r||t.sCount[a]<t.blkIndent));){if(t.level>=l){t.line=r;break}for(i=0;i<s&&(n=o[i](t,a,r,!1),!n);i++);t.tight=!c,t.isEmpty(t.line-1)&&(c=!0),a=t.line,a<r&&t.isEmpty(a)&&(c=!0,a++,t.line=a)}};Lg.prototype.parse=function(t,e,r,n){var i;!t||(i=new this.State(t,e,r,n),this.tokenize(i,i.line,i.lineMax))};Lg.prototype.State=Q2();X2.exports=Lg});var tB=I((Y_e,eB)=>{"use strict";function Zae(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}eB.exports=function(e,r){for(var n=e.pos;n<e.posMax&&!Zae(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(r||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}});var nB=I((J_e,rB)=>{"use strict";var ece=We().isSpace;rB.exports=function(e,r){var n,i,o,s=e.pos;if(e.src.charCodeAt(s)!==10)return!1;if(n=e.pending.length-1,i=e.posMax,!r)if(n>=0&&e.pending.charCodeAt(n)===32)if(n>=1&&e.pending.charCodeAt(n-1)===32){for(o=n-1;o>=1&&e.pending.charCodeAt(o-1)===32;)o--;e.pending=e.pending.slice(0,o),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(s++;s<i&&ece(e.src.charCodeAt(s));)s++;return e.pos=s,!0}});var oB=I((Q_e,iB)=>{"use strict";var tce=We().isSpace,V0=[];for(G0=0;G0<256;G0++)V0.push(0);var G0;"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){V0[t.charCodeAt(0)]=1});iB.exports=function(e,r){var n,i=e.pos,o=e.posMax;if(e.src.charCodeAt(i)!==92)return!1;if(i++,i<o){if(n=e.src.charCodeAt(i),n<256&&V0[n]!==0)return r||(e.pending+=e.src[i]),e.pos+=2,!0;if(n===10){for(r||e.push("hardbreak","br",0),i++;i<o&&(n=e.src.charCodeAt(i),!!tce(n));)i++;return e.pos=i,!0}}return r||(e.pending+="\\"),e.pos++,!0}});var aB=I((X_e,sB)=>{"use strict";sB.exports=function(e,r){var n,i,o,s,a,c,l,u,d=e.pos,f=e.src.charCodeAt(d);if(f!==96)return!1;for(n=d,d++,i=e.posMax;d<i&&e.src.charCodeAt(d)===96;)d++;if(o=e.src.slice(n,d),l=o.length,e.backticksScanned&&(e.backticks[l]||0)<=n)return r||(e.pending+=o),e.pos+=l,!0;for(a=c=d;(a=e.src.indexOf("`",c))!==-1;){for(c=a+1;c<i&&e.src.charCodeAt(c)===96;)c++;if(u=c-a,u===l)return r||(s=e.push("code_inline","code",0),s.markup=o,s.content=e.src.slice(d,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=c,!0;e.backticks[u]=a}return e.backticksScanned=!0,r||(e.pending+=o),e.pos+=l,!0}});var z0=I((Z_e,W0)=>{"use strict";W0.exports.tokenize=function(e,r){var n,i,o,s,a,c=e.pos,l=e.src.charCodeAt(c);if(r||l!==126||(i=e.scanDelims(e.pos,!0),s=i.length,a=String.fromCharCode(l),s<2))return!1;for(s%2&&(o=e.push("text","",0),o.content=a,s--),n=0;n<s;n+=2)o=e.push("text","",0),o.content=a+a,e.delimiters.push({marker:l,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function cB(t,e){var r,n,i,o,s,a=[],c=e.length;for(r=0;r<c;r++)i=e[r],i.marker===126&&i.end!==-1&&(o=e[i.end],s=t.tokens[i.token],s.type="s_open",s.tag="s",s.nesting=1,s.markup="~~",s.content="",s=t.tokens[o.token],s.type="s_close",s.tag="s",s.nesting=-1,s.markup="~~",s.content="",t.tokens[o.token-1].type==="text"&&t.tokens[o.token-1].content==="~"&&a.push(o.token-1));for(;a.length;){for(r=a.pop(),n=r+1;n<t.tokens.length&&t.tokens[n].type==="s_close";)n++;n--,r!==n&&(s=t.tokens[n],t.tokens[n]=t.tokens[r],t.tokens[r]=s)}}W0.exports.postProcess=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(cB(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&cB(e,n[r].delimiters)}});var Y0=I((eSe,K0)=>{"use strict";K0.exports.tokenize=function(e,r){var n,i,o,s=e.pos,a=e.src.charCodeAt(s);if(r||a!==95&&a!==42)return!1;for(i=e.scanDelims(e.pos,a===42),n=0;n<i.length;n++)o=e.push("text","",0),o.content=String.fromCharCode(a),e.delimiters.push({marker:a,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function lB(t,e){var r,n,i,o,s,a,c=e.length;for(r=c-1;r>=0;r--)n=e[r],!(n.marker!==95&&n.marker!==42)&&n.end!==-1&&(i=e[n.end],a=r>0&&e[r-1].end===n.end+1&&e[r-1].marker===n.marker&&e[r-1].token===n.token-1&&e[n.end+1].token===i.token+1,s=String.fromCharCode(n.marker),o=t.tokens[n.token],o.type=a?"strong_open":"em_open",o.tag=a?"strong":"em",o.nesting=1,o.markup=a?s+s:s,o.content="",o=t.tokens[i.token],o.type=a?"strong_close":"em_close",o.tag=a?"strong":"em",o.nesting=-1,o.markup=a?s+s:s,o.content="",a&&(t.tokens[e[r-1].token].content="",t.tokens[e[n.end+1].token].content="",r--))}K0.exports.postProcess=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(lB(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&lB(e,n[r].delimiters)}});var dB=I((tSe,uB)=>{"use strict";var rce=We().normalizeReference,J0=We().isSpace;uB.exports=function(e,r){var n,i,o,s,a,c,l,u,d,f="",p="",h=e.pos,m=e.posMax,g=e.pos,v=!0;if(e.src.charCodeAt(e.pos)!==91||(a=e.pos+1,s=e.md.helpers.parseLinkLabel(e,e.pos,!0),s<0))return!1;if(c=s+1,c<m&&e.src.charCodeAt(c)===40){for(v=!1,c++;c<m&&(i=e.src.charCodeAt(c),!(!J0(i)&&i!==10));c++);if(c>=m)return!1;if(g=c,l=e.md.helpers.parseLinkDestination(e.src,c,e.posMax),l.ok){for(f=e.md.normalizeLink(l.str),e.md.validateLink(f)?c=l.pos:f="",g=c;c<m&&(i=e.src.charCodeAt(c),!(!J0(i)&&i!==10));c++);if(l=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<m&&g!==c&&l.ok)for(p=l.str,c=l.pos;c<m&&(i=e.src.charCodeAt(c),!(!J0(i)&&i!==10));c++);}(c>=m||e.src.charCodeAt(c)!==41)&&(v=!0),c++}if(v){if(typeof e.env.references=="undefined")return!1;if(c<m&&e.src.charCodeAt(c)===91?(g=c+1,c=e.md.helpers.parseLinkLabel(e,c),c>=0?o=e.src.slice(g,c++):c=s+1):c=s+1,o||(o=e.src.slice(a,s)),u=e.env.references[rce(o)],!u)return e.pos=h,!1;f=u.href,p=u.title}return r||(e.pos=a,e.posMax=s,d=e.push("link_open","a",1),d.attrs=n=[["href",f]],p&&n.push(["title",p]),e.md.inline.tokenize(e),d=e.push("link_close","a",-1)),e.pos=c,e.posMax=m,!0}});var pB=I((rSe,fB)=>{"use strict";var nce=We().normalizeReference,Q0=We().isSpace;fB.exports=function(e,r){var n,i,o,s,a,c,l,u,d,f,p,h,m,g="",v=e.pos,w=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(c=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),a<0))return!1;if(l=a+1,l<w&&e.src.charCodeAt(l)===40){for(l++;l<w&&(i=e.src.charCodeAt(l),!(!Q0(i)&&i!==10));l++);if(l>=w)return!1;for(m=l,d=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),d.ok&&(g=e.md.normalizeLink(d.str),e.md.validateLink(g)?l=d.pos:g=""),m=l;l<w&&(i=e.src.charCodeAt(l),!(!Q0(i)&&i!==10));l++);if(d=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<w&&m!==l&&d.ok)for(f=d.str,l=d.pos;l<w&&(i=e.src.charCodeAt(l),!(!Q0(i)&&i!==10));l++);else f="";if(l>=w||e.src.charCodeAt(l)!==41)return e.pos=v,!1;l++}else{if(typeof e.env.references=="undefined")return!1;if(l<w&&e.src.charCodeAt(l)===91?(m=l+1,l=e.md.helpers.parseLinkLabel(e,l),l>=0?s=e.src.slice(m,l++):l=a+1):l=a+1,s||(s=e.src.slice(c,a)),u=e.env.references[nce(s)],!u)return e.pos=v,!1;g=u.href,f=u.title}return r||(o=e.src.slice(c,a),e.md.inline.parse(o,e.md,e.env,h=[]),p=e.push("image","img",0),p.attrs=n=[["src",g],["alt",""]],p.children=h,p.content=o,f&&n.push(["title",f])),e.pos=l,e.posMax=w,!0}});var mB=I((nSe,hB)=>{"use strict";var ice=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,oce=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;hB.exports=function(e,r){var n,i,o,s,a,c,l=e.pos;if(e.src.charCodeAt(l)!==60)return!1;for(a=e.pos,c=e.posMax;;){if(++l>=c||(s=e.src.charCodeAt(l),s===60))return!1;if(s===62)break}return n=e.src.slice(a+1,l),oce.test(n)?(i=e.md.normalizeLink(n),e.md.validateLink(i)?(r||(o=e.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=e.push("text","",0),o.content=e.md.normalizeLinkText(n),o=e.push("link_close","a",-1),o.markup="autolink",o.info="auto"),e.pos+=n.length+2,!0):!1):ice.test(n)?(i=e.md.normalizeLink("mailto:"+n),e.md.validateLink(i)?(r||(o=e.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=e.push("text","",0),o.content=e.md.normalizeLinkText(n),o=e.push("link_close","a",-1),o.markup="autolink",o.info="auto"),e.pos+=n.length+2,!0):!1):!1}});var vB=I((iSe,gB)=>{"use strict";var sce=H0().HTML_TAG_RE;function ace(t){var e=t|32;return e>=97&&e<=122}gB.exports=function(e,r){var n,i,o,s,a=e.pos;return!e.md.options.html||(o=e.posMax,e.src.charCodeAt(a)!==60||a+2>=o)||(n=e.src.charCodeAt(a+1),n!==33&&n!==63&&n!==47&&!ace(n))||(i=e.src.slice(a).match(sce),!i)?!1:(r||(s=e.push("html_inline","",0),s.content=e.src.slice(a,a+i[0].length)),e.pos+=i[0].length,!0)}});var bB=I((oSe,CB)=>{"use strict";var yB=O0(),cce=We().has,lce=We().isValidEntityCode,wB=We().fromCodePoint,uce=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,dce=/^&([a-z][a-z0-9]{1,31});/i;CB.exports=function(e,r){var n,i,o,s=e.pos,a=e.posMax;if(e.src.charCodeAt(s)!==38)return!1;if(s+1<a){if(n=e.src.charCodeAt(s+1),n===35){if(o=e.src.slice(s).match(uce),o)return r||(i=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),e.pending+=lce(i)?wB(i):wB(65533)),e.pos+=o[0].length,!0}else if(o=e.src.slice(s).match(dce),o&&cce(yB,o[1]))return r||(e.pending+=yB[o[1]]),e.pos+=o[0].length,!0}return r||(e.pending+="&"),e.pos++,!0}});var SB=I((sSe,_B)=>{"use strict";function EB(t,e){var r,n,i,o,s,a,c,l,u={},d=e.length;if(!!d){var f=0,p=-2,h=[];for(r=0;r<d;r++)if(i=e[r],h.push(0),(e[f].marker!==i.marker||p!==i.token-1)&&(f=r),p=i.token,i.length=i.length||0,!!i.close){for(u.hasOwnProperty(i.marker)||(u[i.marker]=[-1,-1,-1,-1,-1,-1]),s=u[i.marker][(i.open?3:0)+i.length%3],n=f-h[f]-1,a=n;n>s;n-=h[n]+1)if(o=e[n],o.marker===i.marker&&o.open&&o.end<0&&(c=!1,(o.close||i.open)&&(o.length+i.length)%3==0&&(o.length%3!=0||i.length%3!=0)&&(c=!0),!c)){l=n>0&&!e[n-1].open?h[n-1]+1:0,h[r]=r-n+l,h[n]=l,i.open=!1,o.end=r,o.close=!1,a=-1,p=-2;break}a!==-1&&(u[i.marker][(i.open?3:0)+(i.length||0)%3]=a)}}}_B.exports=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(EB(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&EB(e,n[r].delimiters)}});var PB=I((aSe,xB)=>{"use strict";xB.exports=function(e){var r,n,i=0,o=e.tokens,s=e.tokens.length;for(r=n=0;r<s;r++)o[r].nesting<0&&i--,o[r].level=i,o[r].nesting>0&&i++,o[r].type==="text"&&r+1<s&&o[r+1].type==="text"?o[r+1].content=o[r].content+o[r+1].content:(r!==n&&(o[n]=o[r]),n++);r!==n&&(o.length=n)}});var DB=I((cSe,AB)=>{"use strict";var X0=Dg(),kB=We().isWhiteSpace,IB=We().isPunctChar,TB=We().isMdAsciiPunct;function Fd(t,e,r,n){this.src=t,this.env=r,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}Fd.prototype.pushPending=function(){var t=new X0("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};Fd.prototype.push=function(t,e,r){this.pending&&this.pushPending();var n=new X0(t,e,r),i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n};Fd.prototype.scanDelims=function(t,e){var r=t,n,i,o,s,a,c,l,u,d,f=!0,p=!0,h=this.posMax,m=this.src.charCodeAt(t);for(n=t>0?this.src.charCodeAt(t-1):32;r<h&&this.src.charCodeAt(r)===m;)r++;return o=r-t,i=r<h?this.src.charCodeAt(r):32,l=TB(n)||IB(String.fromCharCode(n)),d=TB(i)||IB(String.fromCharCode(i)),c=kB(n),u=kB(i),u?f=!1:d&&(c||l||(f=!1)),c?p=!1:l&&(u||d||(p=!1)),e?(s=f,a=p):(s=f&&(!p||l),a=p&&(!f||d)),{can_open:s,can_close:a,length:o}};Fd.prototype.Token=X0;AB.exports=Fd});var NB=I((lSe,OB)=>{"use strict";var RB=Tg(),Z0=[["text",tB()],["newline",nB()],["escape",oB()],["backticks",aB()],["strikethrough",z0().tokenize],["emphasis",Y0().tokenize],["link",dB()],["image",pB()],["autolink",mB()],["html_inline",vB()],["entity",bB()]],e_=[["balance_pairs",SB()],["strikethrough",z0().postProcess],["emphasis",Y0().postProcess],["text_collapse",PB()]];function Md(){var t;for(this.ruler=new RB,t=0;t<Z0.length;t++)this.ruler.push(Z0[t][0],Z0[t][1]);for(this.ruler2=new RB,t=0;t<e_.length;t++)this.ruler2.push(e_[t][0],e_[t][1])}Md.prototype.skipToken=function(t){var e,r,n=t.pos,i=this.ruler.getRules(""),o=i.length,s=t.md.options.maxNesting,a=t.cache;if(typeof a[n]!="undefined"){t.pos=a[n];return}if(t.level<s)for(r=0;r<o&&(t.level++,e=i[r](t,!0),t.level--,!e);r++);else t.pos=t.posMax;e||t.pos++,a[n]=t.pos};Md.prototype.tokenize=function(t){for(var e,r,n=this.ruler.getRules(""),i=n.length,o=t.posMax,s=t.md.options.maxNesting;t.pos<o;){if(t.level<s)for(r=0;r<i&&(e=n[r](t,!1),!e);r++);if(e){if(t.pos>=o)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};Md.prototype.parse=function(t,e,r,n){var i,o,s,a=new this.State(t,e,r,n);for(this.tokenize(a),o=this.ruler2.getRules(""),s=o.length,i=0;i<s;i++)o[i](a)};Md.prototype.State=DB();OB.exports=Md});var FB=I((uSe,LB)=>{"use strict";LB.exports=function(t){var e={};e.src_Any=L0().source,e.src_Cc=F0().source,e.src_Z=M0().source,e.src_P=Sg().source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var r="[><\uFF5C]";return e.src_pseudo_letter="(?:(?!"+r+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+r+"|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!+(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}});var BB=I((dSe,UB)=>{"use strict";function t_(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){!r||Object.keys(r).forEach(function(n){t[n]=r[n]})}),t}function Fg(t){return Object.prototype.toString.call(t)}function fce(t){return Fg(t)==="[object String]"}function pce(t){return Fg(t)==="[object Object]"}function hce(t){return Fg(t)==="[object RegExp]"}function MB(t){return Fg(t)==="[object Function]"}function mce(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var qB={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function gce(t){return Object.keys(t||{}).reduce(function(e,r){return e||qB.hasOwnProperty(r)},!1)}var vce={"http:":{validate:function(t,e,r){var n=t.slice(e);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,r){var n=t.slice(e);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,r){var n=t.slice(e);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},yce="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",wce="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function Cce(t){t.__index__=-1,t.__text_cache__=""}function bce(t){return function(e,r){var n=e.slice(r);return t.test(n)?n.match(t)[0].length:0}}function jB(){return function(t,e){e.normalize(t)}}function Mg(t){var e=t.re=FB()(t.__opts__),r=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||r.push(yce),r.push(e.src_xn),e.src_tlds=r.join("|");function n(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");var i=[];t.__compiled__={};function o(a,c){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+c)}Object.keys(t.__schemas__).forEach(function(a){var c=t.__schemas__[a];if(c!==null){var l={validate:null,link:null};if(t.__compiled__[a]=l,pce(c)){hce(c.validate)?l.validate=bce(c.validate):MB(c.validate)?l.validate=c.validate:o(a,c),MB(c.normalize)?l.normalize=c.normalize:c.normalize?o(a,c):l.normalize=jB();return}if(fce(c)){i.push(a);return}o(a,c)}}),i.forEach(function(a){!t.__compiled__[t.__schemas__[a]]||(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:jB()};var s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(mce).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),Cce(t)}function Ece(t,e){var r=t.__index__,n=t.__last_index__,i=t.__text_cache__.slice(r,n);this.schema=t.__schema__.toLowerCase(),this.index=r+e,this.lastIndex=n+e,this.raw=i,this.text=i,this.url=i}function $B(t,e){var r=new Ece(t,e);return t.__compiled__[r.schema].normalize(r,t),r}function wn(t,e){if(!(this instanceof wn))return new wn(t,e);e||gce(t)&&(e=t,t={}),this.__opts__=t_({},qB,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=t_({},vce,t),this.__compiled__={},this.__tlds__=wce,this.__tlds_replaced__=!1,this.re={},Mg(this)}wn.prototype.add=function(e,r){return this.__schemas__[e]=r,Mg(this),this};wn.prototype.set=function(e){return this.__opts__=t_(this.__opts__,e),this};wn.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var r,n,i,o,s,a,c,l,u;if(this.re.schema_test.test(e)){for(c=this.re.schema_search,c.lastIndex=0;(r=c.exec(e))!==null;)if(o=this.testSchemaAt(e,r[2],c.lastIndex),o){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=n.index+n[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};wn.prototype.pretest=function(e){return this.re.pretest.test(e)};wn.prototype.testSchemaAt=function(e,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(e,n,this):0};wn.prototype.match=function(e){var r=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push($B(this,r)),r=this.__last_index__);for(var i=r?e.slice(r):e;this.test(i);)n.push($B(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};wn.prototype.tlds=function(e,r){return e=Array.isArray(e)?e:[e],r?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,i,o){return n!==o[i-1]}).reverse(),Mg(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Mg(this),this)};wn.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};wn.prototype.onCompile=function(){};UB.exports=wn});var VB=I((fSe,HB)=>{"use strict";HB.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}});var WB=I((pSe,GB)=>{"use strict";GB.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}});var KB=I((hSe,zB)=>{"use strict";zB.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}});var XB=I((mSe,QB)=>{"use strict";var qd=We(),_ce=HU(),Sce=GU(),xce=g2(),Pce=Z2(),kce=NB(),Ice=BB(),fa=N0(),YB=require("punycode"),Tce={default:VB(),zero:WB(),commonmark:KB()},Ace=/^(vbscript|javascript|file|data):/,Dce=/^data:image\/(gif|png|jpeg|webp);/;function Rce(t){var e=t.trim().toLowerCase();return Ace.test(e)?!!Dce.test(e):!0}var JB=["http:","https:","mailto:"];function Oce(t){var e=fa.parse(t,!0);if(e.hostname&&(!e.protocol||JB.indexOf(e.protocol)>=0))try{e.hostname=YB.toASCII(e.hostname)}catch{}return fa.encode(fa.format(e))}function Nce(t){var e=fa.parse(t,!0);if(e.hostname&&(!e.protocol||JB.indexOf(e.protocol)>=0))try{e.hostname=YB.toUnicode(e.hostname)}catch{}return fa.decode(fa.format(e),fa.decode.defaultChars+"%")}function Cn(t,e){if(!(this instanceof Cn))return new Cn(t,e);e||qd.isString(t)||(e=t||{},t="default"),this.inline=new kce,this.block=new Pce,this.core=new xce,this.renderer=new Sce,this.linkify=new Ice,this.validateLink=Rce,this.normalizeLink=Oce,this.normalizeLinkText=Nce,this.utils=qd,this.helpers=qd.assign({},_ce),this.options={},this.configure(t),e&&this.set(e)}Cn.prototype.set=function(t){return qd.assign(this.options,t),this};Cn.prototype.configure=function(t){var e=this,r;if(qd.isString(t)&&(r=t,t=Tce[r],!t))throw new Error('Wrong `markdown-it` preset "'+r+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};Cn.prototype.enable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.enable(t,!0))},this),r=r.concat(this.inline.ruler2.enable(t,!0));var n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};Cn.prototype.disable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.disable(t,!0))},this),r=r.concat(this.inline.ruler2.disable(t,!0));var n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};Cn.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};Cn.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");var r=new this.core.State(t,this,e);return this.core.process(r),r.tokens};Cn.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};Cn.prototype.parseInline=function(t,e){var r=new this.core.State(t,this,e);return r.inlineMode=!0,this.core.process(r),r.tokens};Cn.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};QB.exports=Cn});var eH=I((gSe,ZB)=>{"use strict";ZB.exports=XB()});var bV=I((Rke,Mle)=>{Mle.exports={name:"remote-containers",displayName:"Remote - Containers",description:"Open any folder or repository inside a Docker container and take advantage of Visual Studio Code's full feature set.",version:"0.231.0",preview:!0,publisher:"ms-vscode-remote",icon:"resources/remote-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.64.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"Opening a folder in a container requires workspace trust."},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","development container"],aiKey:"AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217",activationEvents:["onStartupFinished","onCommand:remote-containers.reopenInContainer","onCommand:remote-containers.rebuildAndReopenInContainer","onCommand:remote-containers.rebuildNoCacheAndReopenInContainer","onCommand:remote-containers.reopenLocally","onCommand:remote-containers.reopenInWSL","onCommand:remote-containers.reopenInSSH","onCommand:remote-containers.openFolder","onCommand:remote-containers.openRepositoryInVolume","onCommand:remote-containers.openRepositoryInUniqueVolume","onCommand:remote-containers.openRepositoryFromRemoteHub","onCommand:remote-containers.openPullRequestInVolume","onCommand:remote-containers.inspectVolume","onCommand:remote-containers.inspectVolumeFromViewlet","onCommand:remote-containers.inspectInBasicDevContainer","onCommand:remote-containers.cloneInVolumeFromViewlet","onCommand:remote-containers.pruneVolumes","onCommand:remote-containers.openWorkspace","onCommand:remote-containers.attachToRunningContainer","onCommand:remote-containers.attachToRunningContainerFromViewlet","onCommand:remote-containers.attachToK8sContainerFromViewlet","onCommand:remote-containers.checkoutPRInVolume","onCommand:remote-containers.rebuildContainer","onCommand:remote-containers.rebuildContainerNoCache","onCommand:remote-containers.createDevContainerFile","onCommand:remote-containers.openDevContainerFile","onCommand:remote-containers.openAttachDevContainerFile","onCommand:remote-containers.settings","onCommand:remote-containers.getHelp","onCommand:remote-containers.getStarted","onCommand:remote-containers.trySample","onCommand:remote-containers.reportIssue","onCommand:remote-containers.provideFeedback","onCommand:remote-containers.revealLogTerminal","onCommand:remote-containers.openLogFile","onCommand:remote-containers.openLastLogFile","onCommand:remote-containers.addExtensionToConfig","onCommand:remote-containers.showReopenInContainerNotificationReset","onCommand:remote-containers.showRecoveryContainerNotificationReset","onCommand:remote-containers.labelPortAndUpdateConfig","onCommand:remote-containers.installDocker","onCommand:remote-containers.installUserCLI","onCommand:remote-containers.configureContainerFeatures","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onDebugResolve:extensionHost","onView:targetsContainers"],main:"./dist/extension/extension",enabledApiProposals:["resolvers","workspaceTrust","terminalDimensions","contribViewsRemote"],contributes:{virtualWorkspaces:{menus:{continueOn:[{command:"remote-containers.openRepositoryFromRemoteHub",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders"}]}},languages:[{id:"jsonc",filenames:["devcontainer-features.json"]}],jsonValidation:[{fileMatch:"devcontainer-features.json",url:"./schemas/devcontainer-features.schema.json"}],configuration:{title:"Remote - Containers",properties:{"remote.containers.defaultExtensions":{scope:"application",type:"array",description:"Configures the list of extensions to always install while creating a container.",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"Expected format '${publisher}.${name}'. Example: 'vscode.csharp'."}},"remote.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["Perfect consistency.","The host\u2019s view is authoritative.","The container\u2019s view is authoritative."],description:"The consistency level used for the workspace mount (existing containers must be rebuilt to take effect).",default:"cached"},"remote.containers.cacheVolume":{scope:"application",type:"boolean",description:"Controls whether a Docker volume should be used to cache the VS Code server and extensions. Currently only applies to single container and not Docker Compose configurations.",default:!0},"remote.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"Controls whether the Git configuration (`~/.gitconfig`) should be copied into the container. This is done after installing any `#dotfiles.repository#` and will not overwrite an existing Git configuration file.",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["Write to system config (`/etc/gitconfig`, requires root access).","Write to user config (`~/.gitconfig`).","Do not set a credential helper."],description:"Where to write the configuration for the Git credential helper.",default:"global"},"remote.containers.logLevel":{scope:"application",type:"string",description:"The log level for the extension.",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",type:"string",description:"Docker (or Podman) executable name or path.",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",type:"string",description:"Docker Compose executable name or path.",default:"docker-compose"},"remote.containers.executeInWSL":{scope:"application",type:"boolean",description:"Controls whether CLI commands should always be executed in WSL. The default is to only execute in WSL for workspace folders in WSL. This setting has no effect on other platforms than Windows.",default:!1},"remote.containers.executeInWSLDistro":{scope:"application",type:"string",markdownDescription:"WSL distro to use when not reopening a WSL folder. The default is to use the default WSL distro (see `wsl -l`). This setting has no effect when `#remote.containers.executeInWSL#` is not enabled or on other platforms than Windows."},"dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository."},"dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository. Defaults to run the first file of `install.sh`, `install`, `bootstrap.sh`, `bootstrap`, `setup.sh` and `setup` found in the dotfiles repository's root folder."},"dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to. Defaults to `~/dotfiles`.",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository for DevContainers. This overrides the common setting for the dotfiles repository."},"remote.containers.dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository for DevContainers. This overrides the common setting for the dotfiles install command."},"remote.containers.dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to for DevContainers. This overrides the common setting for the dotfiles target path."},"remote.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"List of additional paths to search for [repository configurations](https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers).",default:[],items:{type:"string"}}}},commands:[{command:"remote-containers.reopenInContainer",title:"Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildAndReopenInContainer",title:"Rebuild and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"Rebuild Without Cache and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.reopenLocally",title:"Reopen Folder Locally",category:"Remote-Containers"},{command:"remote-containers.reopenInWSL",title:"Reopen Folder in WSL",category:"Remote-Containers"},{command:"remote-containers.reopenInSSH",title:"Reopen Folder in SSH",category:"Remote-Containers"},{command:"remote-containers.openFolder",title:"Open Folder in Container...",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.startAndOpenFolder",title:"Open Folder in Container",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openRepositoryInVolume",title:"Clone Repository in Named Container Volume...",category:"Remote-Containers"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"Clone Repository in Container Volume...",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openRepositoryFromRemoteHub",title:"Clone Repository in a Container Volume",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openPullRequestInVolume",title:"Clone GitHub Pull Request in Container Volume...",category:"Remote-Containers"},{command:"remote-containers.inspectVolume",title:"Explore a Volume in a Development Container...",category:"Remote-Containers"},{command:"remote-containers.openWorkspace",title:"Open Workspace in Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainer",title:"Attach to Running Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.inspectVolumeFromViewlet",title:"Explore in a Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"Clone into existing Volume",category:"Remote-Containers"},{command:"remote-containers.pruneVolumes",title:"Remove Unused Volumes...",category:"Remote-Containers",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"Refresh",category:"Remote-Containers",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.rebuildContainer",title:"Rebuild Container",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"Rebuild Container Without Cache",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"Add Development Container Configuration Files...",category:"Remote-Containers"},{command:"remote-containers.settings",title:"Settings for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getHelp",title:"Help for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getStarted",title:"Getting Started with Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.trySample",title:"Try a Development Container Sample...",category:"Remote-Containers"},{command:"remote-containers.reportIssue",title:"Report Issue with Remote-Containers...",category:"Remote-Containers"},{command:"remote-containers.provideFeedback",title:"Provide Feedback",category:"Remote-Containers"},{command:"remote-containers.openDevContainerFile",title:"Open Container Configuration File",category:"Remote-Containers",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"Open Named Container Configuration File",category:"Remote-Containers"},{command:"remote-containers.openAttachDevContainerFile",title:"Open Attached Container Configuration File...",category:"Remote-Containers"},{command:"remote-containers.revealLogTerminal",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.openLogFile",title:"Show All Logs...",category:"Remote-Containers Developer"},{command:"remote-containers.openLastLogFile",title:"Show Previous Log",category:"Remote-Containers"},{command:"remote-containers.attachToContainer",title:"Attach to Container",category:"Remote-Containers",icon:{light:"resources/light/empty-window.svg",dark:"resources/dark/empty-window.svg"}},{command:"remote-containers.attachToContainerNewWindow",title:"Attach in New Window",category:"Remote-Containers"},{command:"remote-containers.stopContainer",title:"Stop Container",category:"Remote-Containers"},{command:"remote-containers.startContainer",title:"Start Container",category:"Remote-Containers",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"Remove Container",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"Remove Recent Folder",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"Show Details",category:"Remote-Containers"},{command:"remote-containers.explorerTargetsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"Inspect",category:"Remote-Containers"},{command:"remote-containers.inspectInBasicDevContainer",title:"Explore in Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolume",title:"Clone Repository in Volume",category:"Remote-Containers"},{command:"remote-containers.removeVolume",title:"Remove",category:"Remote-Containers"},{command:"remote-containers.newContainer",title:"New Container",category:"Remote-Containers",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.addExtensionToConfig",title:"Add to devcontainer.json",category:"Remote-Containers"},{command:"remote-containers.checkoutPRInVolume",title:"Checkout Pull Request in Dev Container",category:"Remote-Containers"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"Reset Don't Show Reopen Notification",category:"Remote-Containers"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"Reset Don't Show Recovery Container Notification",category:"Remote-Containers"},{command:"remote-containers.labelPortAndUpdateConfig",title:"Set Label and Update devcontainer.json",category:"Remote-Containers",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"Install Docker",category:"Remote-Containers"},{command:"remote-containers.installUserCLI",title:"Install devcontainer CLI",category:"Remote-Containers"},{command:"remote-containers.configureContainerFeatures",title:"Configure Container Features...",category:"Remote-Containers"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenLocally",when:"canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH"},{command:"remote-containers.openFolder",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openWorkspace",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainer",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHub",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.rebuildContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.getStarted",when:"false"},{command:"remote-containers.trySample",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.attachToContainer",when:"false"},{command:"remote-containers.attachToContainerNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.startAndOpenFolder",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@4",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@4",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@5",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@5",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@7",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@7",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@8",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@8",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_1_actions@1",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_1_actions@1",when:"canReopenInSSH"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_1_actions@2",when:"canReopenLocally"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_1_actions@3",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_1_actions@4",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.revealLogTerminal",group:"remote_30_dev-container_1_actions@5",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_1_actions@6",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_1_actions@8",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_1_actions@9",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.settings",group:"remote_30_dev-container_9_help@1",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.reportIssue",group:"remote_30_dev-container_9_help@2",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.getHelp",group:"remote_30_dev-container_9_help@4",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainer",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"view == dockerContainers && viewItem =~ /^runningContainer$/i && vscode-docker:aciContext != true",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"view == dockerVolumes && viewItem == volume && vscode-docker:aciContext != true",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"remoteName =~ /^(wsl)?$/ && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@2"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"inline@1"},{command:"remote-containers.attachToContainerNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^(active|running)(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@2"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Dev Container"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Container"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Exec"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Kubernetes"}}],views:{remote:[{id:"targetsContainers",name:"Containers",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container"]},{id:"detailsContainers",name:"Details (Containers)",when:"remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"DevVolumes",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"Get started with containers by [installing Docker](command:remote-containers.installDocker) or by visiting the [help view](command:~remote.helpPanel.focus). [Refresh](command:remote-containers.explorerTargetsRefresh) after installation and startup."},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"[Refresh](command:remote-containers.explorerTargetsRefresh) to provide SSH credentials."},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can [reopen the current folder in a container](command:remote-containers.reopenInContainer), or open another folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can open an existing folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:`If there's a repository you want to work with you can clone that directly in a container volume.
[Clone Repository in Container Volume](command:remote-containers.openRepositoryInUniqueVolume)
`}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",feedback:"https://aka.ms/vscode-remote/containers/provide-feedback",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container"]}},scripts:{"vscode:prepublish":"npm-run-all clean definitions compile-prod dev-containers-user-cli-prepare",compile:"npm-run-all clean-dist definitions compile-dev",watch:"npm-run-all clean-dist definitions compile-watch",precommit:"node build/hygiene.js",package:"vsce package --yarn",definitions:"npm-run-all definitions-clean definitions-copy",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --ext .ts ./src ./test","compile-prod":"node esbuild.js --production","compile-dev":"node esbuild.js","compile-watch":"node esbuild.js --watch","type-check":"npm-run-all clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npm-run-all clean-built tsc-b-w","tsc-b-w":"tsc -b -w","definitions-clean":"rimraf dist/node_modules/vscode-dev-containers","definitions-copy":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dist',"dev-containers-cli-publish":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npm-run-all clean dev-containers-cli-compile dev-containers-cli-copy-module dev-containers-cli-copy-definitions","dev-containers-cli-compile":"npm-run-all compile-prod","dev-containers-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-cli',"dev-containers-cli-copy-definitions":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dev-containers-cli/dist',"dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npm-run-all dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npm-run-all dev-containers-user-cli-copy-module dev-containers-user-cli-copy-definitions","dev-containers-user-cli-clean-prepare":"npm-run-all clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-copy-definitions":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dev-containers-user-cli/dist',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npm-run-all clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts","test-container-features":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/src/container-features/**/*.test.ts","test-container-features-offline":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/src/container-features/**/*.offline.test.ts","test-container-features-online":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/src/container-features/**/*.online.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},devDependencies:{"@types/chai":"^4.3.0","@types/follow-redirects":"^1.13.1","@types/js-yaml":"^4.0.5","@types/markdown-it":"^12.2.3","@types/minimist":"^1.2.2","@types/mocha":"^9.1.0","@types/node":"^16.11.7","@types/pull-stream":"^3.6.2","@types/semver":"^7.3.9","@types/shell-quote":"^1.7.1","@types/stats-lite":"^2.2.0","@types/tar":"^6.1.1","@types/uuid":"^8.3.4","@types/vscode":"^1.63.1","@types/yargs":"^17.0.8","@typescript-eslint/eslint-plugin":"^4.31.2","@typescript-eslint/parser":"^4.31.2",ajv:"^8.9.0",chai:"^4.3.4",copyfiles:"^2.4.1",esbuild:"^0.13.14",eslint:"^7.32.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^7.0.0",husky:"^7.0.4",jsonc:"^2.0.0",mocha:"^9.2.1","mocha-junit-reporter":"^2.0.2","npm-run-all":"^4.1.5","p-all":"^4.0.0",rimraf:"^3.0.2","ts-node":"^10.4.0",typescript:"^4.5.5","typescript-formatter":"^7.2.2",vinyl:"^2.2.1","vinyl-fs":"^3.0.3",vsce:"^2.6.7"},dependencies:{applicationinsights:"^2.2.0","find-process":"^1.4.7","follow-redirects":"^1.14.8","js-yaml":"^4.1.0","jsonc-parser":"^3.0.0","markdown-it":"^12.3.2",minimist:"^1.2.5",muxrpc:"^6.5.4","node-pty":"^0.10.1","pull-pushable":"^2.2.0","pull-stream":"^3.6.14","pull-stream-to-stream":"^2.0.0",semver:"^7.3.5","shell-quote":"^1.7.3","stats-lite":"^2.2.0","stream-to-pull-stream":"^1.7.3",tar:"^6.1.11",uuid:"^8.3.2","vscode-dev-containers":"https://github.com/microsoft/vscode-dev-containers/releases/download/v0.231.0/vscode-dev-containers-0.231.0.tgz","vscode-extension-telemetry":"^0.4.5","vscode-tas-client":"^0.1.27","vscode-uri":"^3.0.3",yaml:"^2.0.0-10",yargs:"~17.0.1"}}});y3(exports,{activate:()=>qle,attachToContainer:()=>Qg,deactivate:()=>Ble});var U=Y(require("vscode")),EV=Y(require("os")),ev=Y(require("fs")),Nt=Y(require("path")),_V=Y(require("querystring"));var ft=Y(require("fs")),wi=Y(require("util"));function pt(t){return new Promise(e=>ft.stat(t,(r,n)=>e(!r&&n.isFile())))}function fl(t){return new Promise(e=>ft.stat(t,(r,n)=>e(!r&&n.isDirectory())))}var Oe=(0,wi.promisify)(ft.readFile),ya=(0,wi.promisify)(ft.writeFile),due=(0,wi.promisify)(ft.appendFile),Ci=(0,wi.promisify)(ft.rename),Yr=(0,wi.promisify)(ft.readdir),V_=(0,wi.promisify)(ft.unlink),vr=t=>new Promise((e,r)=>ft.mkdir(t,{recursive:!0},n=>n?r(n):e())),pv=(0,wi.promisify)(ft.rmdir),G_=(t,e=!1,r=!1)=>new Promise((n,i)=>ft.rm(t,{recursive:e,force:r},o=>o?i(o):n())),fue=(0,wi.promisify)(ft.copyFile),pl;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(pl||(pl={}));var Me=Y(require("vscode")),y_=Y(require("path"));var Nn=Y(require("path")),OJ=Y(require("crypto")),eL=Y(Rl());var ei=Y(uk()),bde=ei.default.v1,Ede=ei.default.v3,qr=ei.default.v4,_de=ei.default.v5,Sde=ei.default.NIL,xde=ei.default.version,Pde=ei.default.validate,kde=ei.default.stringify,Ide=ei.default.parse;var fk=Y(require("os")),Ll=Y(require("fs")),pk=Y(require("path"));async function dk(t,e){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:await e,package:await t}}var ce;(function(a){a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off"})(ce||(ce={}));var By={info:3,debug:2,trace:1},Qz=Object.keys(By).reduce((t,e)=>(t[By[e]]=e,t),[]);function hk(t){return By[t]||3}function $a(t){return Qz[t]||3}var it={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},fo=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function mk(t,e){let r=!!e;return{event:n=>{r&&(r=!1,t.forEach(i=>i.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(i=>i.event(n))}}}function gk(t,e){let r=e4(t);return{event(n){let i=Zz(n,e());i&&r.write(i)},join:r.join}}function vk(t,e,r){return{event(n){let i=Xz(n,e(),r.getTime());i&&t(i)}}}function er(t,e=2){return{event:t.event,write(r,n=e){t.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=e){t.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=e){let i=Date.now();return t.event({type:"start",level:n,timestamp:i,text:r}),i},stop(r,n,i=e){t.event({type:"stop",level:i,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function Xz(t,e,r){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${Fl(Ck,`${t.timestamp-r} ms`)}] ${sp(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${Fl(i4,`[${t.timestamp-r} ms] Start`)}: ${sp(t.text)}`:`[${Fl(Ck,`${t.timestamp-r} ms`)}] Start: ${sp(t.text)}`;case"stop":return 1>=e?`${Fl(n4,`[${t.timestamp-r} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${sp(t.text)}`:void 0;default:throw yk(t)}}function sp(t){return s4(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function Zz(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${Hy(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${Hy(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${Hy(t.text)}`:void 0;default:throw yk(t)}}function Hy(t){return t.replace(fo,"").replace(/(\r?\n)?$/,fk.EOL)}function yk(t){return new Error(`Unknown log event type: ${t.type}`)}function e4(t){let e=[],r=!1,n,i;function o(){r=!1,i&&!e.length&&(n=void 0,i(),i=void 0)}function s(a,c=!1){if(a&&e.push(a),!c&&!r&&e.length){r=!0;let l=e.join("");e.length=0,Ll.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?Ll.mkdir(pk.dirname(t),{recursive:!0},d=>{d?(o(),console.error(d)):Ll.appendFile(t,l,f=>{o(),f&&console.error(f),s()})}):(o(),console.error(u))),o(),s()})}}return{write:s,join:()=>n||(r?n=new Promise(a=>i=a):Promise.resolve())}}var t4="38;2;143;99;79",wk="38;2;99;143;79",r4="38;2;86;156;214",n4=t4,i4=wk,Ck=wk,o4=r4;function Fl(t,e){return e.split(`
`).map(r=>`[1m[${t}m${r}[39m[22m`).join(`
`)}function s4(t){let e,r=0,n=[];for(fo.lastIndex=0;e=fo.exec(t);)n.push(bk(t.substring(r,e.index))),n.push(e[0]),r=fo.lastIndex;return n.push(bk(t.substr(r))),n.join("")}function bk(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,r,n=0,i=[];for(;r=e.exec(t);)i.push(t.substring(n,r.index)),i.push(Fl(o4,r[0])),n=e.lastIndex;return i.push(t.substr(n)),i.join("")}function Ne(t){return t.split(/\r?\n/).map(e=>`[1m[31m${e}[39m[22m`).join(`\r
`)+`\r
`}function Vy(t){return t.split(/\r?\n/).map(e=>`[1m[33m${e}[39m[22m`).join(`\r
`)+`\r
`}var ge=class extends Error{constructor(e){super(e.originalError&&e.originalError.message||e.description);this.manageContainer=!1;this.actions=[];this.data={};var r;Object.assign(this,e),((r=this.originalError)==null?void 0:r.stack)&&(this.stack=this.originalError.stack)}};var he=Y(require("path")),Zp=Y(require("fs")),JD=Y(Va()),Qw=Y(require("string_decoder")),eh=Y(Rl());"use strict";function ql(t,e){e===void 0&&(e=!1);var r=t.length,n=0,i="",o=0,s=16,a=0,c=0,l=0,u=0,d=0;function f(C,b){for(var S=0,P=0;S<C||!b;){var _=t.charCodeAt(n);if(_>=48&&_<=57)P=P*16+_-48;else if(_>=65&&_<=70)P=P*16+_-65+10;else if(_>=97&&_<=102)P=P*16+_-97+10;else break;n++,S++}return S<C&&(P=-1),P}function p(C){n=C,i="",o=0,s=16,d=0}function h(){var C=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&Ga(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&Ga(t.charCodeAt(n)))for(n++;n<t.length&&Ga(t.charCodeAt(n));)n++;else return d=3,t.substring(C,n);var b=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&Ga(t.charCodeAt(n))){for(n++;n<t.length&&Ga(t.charCodeAt(n));)n++;b=n}else d=3;return t.substring(C,b)}function m(){for(var C="",b=n;;){if(n>=r){C+=t.substring(b,n),d=2;break}var S=t.charCodeAt(n);if(S===34){C+=t.substring(b,n),n++;break}if(S===92){if(C+=t.substring(b,n),n++,n>=r){d=2;break}var P=t.charCodeAt(n++);switch(P){case 34:C+='"';break;case 92:C+="\\";break;case 47:C+="/";break;case 98:C+="\b";break;case 102:C+="\f";break;case 110:C+=`
`;break;case 114:C+="\r";break;case 116:C+="	";break;case 117:var _=f(4,!0);_>=0?C+=String.fromCharCode(_):d=4;break;default:d=5}b=n;continue}if(S>=0&&S<=31)if(jl(S)){C+=t.substring(b,n),d=2;break}else d=6;n++}return C}function g(){if(i="",d=0,o=n,c=a,u=l,n>=r)return o=r,s=17;var C=t.charCodeAt(n);if(Xy(C)){do n++,i+=String.fromCharCode(C),C=t.charCodeAt(n);while(Xy(C));return s=15}if(jl(C))return n++,i+=String.fromCharCode(C),C===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,l=n,s=14;switch(C){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,i=m(),s=10;case 47:var b=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!jl(t.charCodeAt(n));)n++;return i=t.substring(b,n),s=12}if(t.charCodeAt(n+1)===42){n+=2;for(var S=r-1,P=!1;n<S;){var _=t.charCodeAt(n);if(_===42&&t.charCodeAt(n+1)===47){n+=2,P=!0;break}n++,jl(_)&&(_===13&&t.charCodeAt(n)===10&&n++,a++,l=n)}return P||(n++,d=1),i=t.substring(b,n),s=13}return i+=String.fromCharCode(C),n++,s=16;case 45:if(i+=String.fromCharCode(C),n++,n===r||!Ga(t.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=h(),s=11;default:for(;n<r&&v(C);)n++,C=t.charCodeAt(n);if(o!==n){switch(i=t.substring(o,n),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(C),n++,s=16}}function v(C){if(Xy(C)||jl(C))return!1;switch(C){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function w(){var C;do C=g();while(C>=12&&C<=15);return C}return{setPosition:p,getPosition:function(){return n},scan:e?w:g,getToken:function(){return s},getTokenValue:function(){return i},getTokenOffset:function(){return o},getTokenLength:function(){return n-o},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return o-u},getTokenError:function(){return d}}}function Xy(t){return t===32||t===9||t===11||t===12||t===160||t===5760||t>=8192&&t<=8203||t===8239||t===8287||t===12288||t===65279}function jl(t){return t===10||t===13||t===8232||t===8233}function Ga(t){return t>=48&&t<=57}"use strict";function Zy(t,e,r){var n,i,o,s,a;if(e){for(s=e.offset,a=s+e.length,o=s;o>0&&!$l(t,o-1);)o--;for(var c=a;c<t.length&&!$l(t,c);)c++;i=t.substring(o,c),n=j4(i,r)}else i=t,n=0,o=0,s=0,a=t.length;var l=$4(r,t),u=!1,d=0,f;r.insertSpaces?f=ew(" ",r.tabSize||4):f="	";var p=ql(i,!1),h=!1;function m(){return l+ew(f,n+d)}function g(){var H=p.scan();for(u=!1;H===15||H===14;)u=u||H===14,H=p.scan();return h=H===16||p.getTokenError()!==0,H}var v=[];function w(H,J,K){!h&&(!e||J<a&&K>s)&&t.substring(J,K)!==H&&v.push({offset:J,length:K-J,content:H})}var C=g();if(C!==17){var b=p.getTokenOffset()+o,S=ew(f,n);w(S,o,b)}for(;C!==17;){for(var P=p.getTokenOffset()+p.getTokenLength()+o,_=g(),k="",T=!1;!u&&(_===12||_===13);){var A=p.getTokenOffset()+o;w(" ",P,A),P=p.getTokenOffset()+p.getTokenLength()+o,T=_===12,k=T?m():"",_=g()}if(_===2)C!==1&&(d--,k=m());else if(_===4)C!==3&&(d--,k=m());else{switch(C){case 3:case 1:d++,k=m();break;case 5:case 12:k=m();break;case 13:u?k=m():T||(k=" ");break;case 6:T||(k=" ");break;case 10:if(_===6){T||(k="");break}case 7:case 8:case 9:case 11:case 2:case 4:_===12||_===13?T||(k=" "):_!==5&&_!==17&&(h=!0);break;case 16:h=!0;break}u&&(_===12||_===13)&&(k=m())}_===17&&(k=r.insertFinalNewline?l:"");var M=p.getTokenOffset()+o;w(k,P,M),C=_}return v}function ew(t,e){for(var r="",n=0;n<e;n++)r+=t;return r}function j4(t,e){for(var r=0,n=0,i=e.tabSize||4;r<t.length;){var o=t.charAt(r);if(o===" ")n++;else if(o==="	")n+=i;else break;r++}return Math.floor(n/i)}function $4(t,e){for(var r=0;r<e.length;r++){var n=e.charAt(r);if(n==="\r")return r+1<e.length&&e.charAt(r+1)===`
`?`\r
`:"\r";if(n===`
`)return`
`}return t&&t.eol||`
`}function $l(t,e){return`\r
`.indexOf(t.charAt(e))!==-1}"use strict";var Ul;(function(t){t.DEFAULT={allowTrailingComma:!1}})(Ul||(Ul={}));function Bk(t,e){var r=[],n=new Object,i=void 0,o={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,l,u,d){o.value=c,o.offset=l,o.length=u,o.type=d,o.colonOffset=void 0,i=o}try{mp(t,{onObjectBegin:function(c,l){if(e<=c)throw n;i=void 0,s=e>c,r.push("")},onObjectProperty:function(c,l,u){if(e<l||(a(c,l,u,"property"),r[r.length-1]=c,e<=l+u))throw n},onObjectEnd:function(c,l){if(e<=c)throw n;i=void 0,r.pop()},onArrayBegin:function(c,l){if(e<=c)throw n;i=void 0,r.push(0)},onArrayEnd:function(c,l){if(e<=c)throw n;i=void 0,r.pop()},onLiteralValue:function(c,l,u){if(e<l||(a(c,l,u,Vk(c)),e<=l+u))throw n},onSeparator:function(c,l,u){if(e<=l)throw n;if(c===":"&&i&&i.type==="property")i.colonOffset=l,s=!1,i=void 0;else if(c===","){var d=r[r.length-1];typeof d=="number"?r[r.length-1]=d+1:(s=!0,r[r.length-1]=""),i=void 0}}})}catch(c){if(c!==n)throw c}return{path:r,previousNode:i,isAtPropertyKey:s,matches:function(c){for(var l=0,u=0;l<c.length&&u<r.length;u++)if(c[l]===r[u]||c[l]==="*")l++;else if(c[l]!=="**")return!1;return l===c.length}}}function Hk(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=Ul.DEFAULT);var n=null,i=[],o=[];function s(c){Array.isArray(i)?i.push(c):n!==null&&(i[n]=c)}var a={onObjectBegin:function(){var c={};s(c),o.push(i),i=c,n=null},onObjectProperty:function(c){n=c},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var c=[];s(c),o.push(i),i=c,n=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(c,l,u){e.push({error:c,offset:l,length:u})}};return mp(t,a,r),i[0]}function pp(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=Ul.DEFAULT);var n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(c){n.type==="property"&&(n.length=c-n.offset,n=n.parent)}function o(c){return n.children.push(c),c}var s={onObjectBegin:function(c){n=o({type:"object",offset:c,length:-1,parent:n,children:[]})},onObjectProperty:function(c,l,u){n=o({type:"property",offset:l,length:-1,parent:n,children:[]}),n.children.push({type:"string",value:c,offset:l,length:u,parent:n})},onObjectEnd:function(c,l){i(c+l),n.length=c+l-n.offset,n=n.parent,i(c+l)},onArrayBegin:function(c,l){n=o({type:"array",offset:c,length:-1,parent:n,children:[]})},onArrayEnd:function(c,l){n.length=c+l-n.offset,n=n.parent,i(c+l)},onLiteralValue:function(c,l,u){o({type:Vk(c),offset:l,length:u,parent:n,value:c}),i(l+u)},onSeparator:function(c,l,u){n.type==="property"&&(c===":"?n.colonOffset=l:c===","&&i(l))},onError:function(c,l,u){e.push({error:c,offset:l,length:u})}};mp(t,s,r);var a=n.children[0];return a&&delete a.parent,a}function Bl(t,e){if(!!t){for(var r=t,n=0,i=e;n<i.length;n++){var o=i[n];if(typeof o=="string"){if(r.type!=="object"||!Array.isArray(r.children))return;for(var s=!1,a=0,c=r.children;a<c.length;a++){var l=c[a];if(Array.isArray(l.children)&&l.children[0].value===o){r=l.children[1],s=!0;break}}if(!s)return}else{var u=o;if(r.type!=="array"||u<0||!Array.isArray(r.children)||u>=r.children.length)return;r=r.children[u]}}return r}}function hp(t){switch(t.type){case"array":return t.children.map(hp);case"object":for(var e=Object.create(null),r=0,n=t.children;r<n.length;r++){var i=n[r],o=i.children[1];o&&(e[i.children[0].value]=hp(o))}return e;case"null":case"string":case"number":case"boolean":return t.value;default:return}}function mp(t,e,r){r===void 0&&(r=Ul.DEFAULT);var n=ql(t,!1);function i(T){return T?function(){return T(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}function o(T){return T?function(A){return T(A,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}var s=i(e.onObjectBegin),a=o(e.onObjectProperty),c=i(e.onObjectEnd),l=i(e.onArrayBegin),u=i(e.onArrayEnd),d=o(e.onLiteralValue),f=o(e.onSeparator),p=i(e.onComment),h=o(e.onError),m=r&&r.disallowComments,g=r&&r.allowTrailingComma;function v(){for(;;){var T=n.scan();switch(n.getTokenError()){case 4:w(14);break;case 5:w(15);break;case 3:w(13);break;case 1:m||w(11);break;case 2:w(12);break;case 6:w(16);break}switch(T){case 12:case 13:m?w(10):p();break;case 16:w(1);break;case 15:case 14:break;default:return T}}}function w(T,A,M){if(A===void 0&&(A=[]),M===void 0&&(M=[]),h(T),A.length+M.length>0)for(var H=n.getToken();H!==17;){if(A.indexOf(H)!==-1){v();break}else if(M.indexOf(H)!==-1)break;H=v()}}function C(T){var A=n.getTokenValue();return T?d(A):a(A),v(),!0}function b(){switch(n.getToken()){case 11:var T=n.getTokenValue(),A=Number(T);isNaN(A)&&(w(2),A=0),d(A);break;case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return v(),!0}function S(){return n.getToken()!==10?(w(3,[],[2,5]),!1):(C(!1),n.getToken()===6?(f(":"),v(),k()||w(4,[],[2,5])):w(5,[],[2,5]),!0)}function P(){s(),v();for(var T=!1;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(T||w(4,[],[]),f(","),v(),n.getToken()===2&&g)break}else T&&w(6,[],[]);S()||w(4,[],[2,5]),T=!0}return c(),n.getToken()!==2?w(7,[2],[]):v(),!0}function _(){l(),v();for(var T=!1;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(T||w(4,[],[]),f(","),v(),n.getToken()===4&&g)break}else T&&w(6,[],[]);k()||w(4,[],[4,5]),T=!0}return u(),n.getToken()!==4?w(8,[4],[]):v(),!0}function k(){switch(n.getToken()){case 3:return _();case 1:return P();case 10:return C(!0);default:return b()}}return v(),n.getToken()===17?r.allowEmptyContent?!0:(w(4,[],[]),!1):k()?(n.getToken()!==17&&w(9,[],[]),!0):(w(4,[],[]),!1)}function Vk(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(t){if(Array.isArray(t))return"array"}else return"null";return"object"}default:return"null"}}"use strict";function Gk(t,e,r,n){for(var i,o=e.slice(),s=[],a=pp(t,s),c=void 0,l=void 0;o.length>0&&(l=o.pop(),c=Bl(a,o),c===void 0&&r!==void 0);)typeof l=="string"?r=(i={},i[l]=r,i):r=[r];if(c)if(c.type==="object"&&typeof l=="string"&&Array.isArray(c.children)){var u=Bl(c,[l]);if(u!==void 0)if(r===void 0){if(!u.parent)throw new Error("Malformed AST");var d=c.children.indexOf(u.parent),f=void 0,p=u.parent.offset+u.parent.length;if(d>0){var h=c.children[d-1];f=h.offset+h.length}else if(f=c.offset+1,c.children.length>1){var m=c.children[1];p=m.offset}return As(t,{offset:f,length:p-f,content:""},n)}else return As(t,{offset:u.offset,length:u.length,content:JSON.stringify(r)},n);else{if(r===void 0)return[];var g=JSON.stringify(l)+": "+JSON.stringify(r),v=n.getInsertionIndex?n.getInsertionIndex(c.children.map(function(T){return T.children[0].value})):c.children.length,w=void 0;if(v>0){var h=c.children[v-1];w={offset:h.offset+h.length,length:0,content:","+g}}else c.children.length===0?w={offset:c.offset+1,length:0,content:g}:w={offset:c.offset+1,length:0,content:g+","};return As(t,w,n)}}else if(c.type==="array"&&typeof l=="number"&&Array.isArray(c.children)){var C=l;if(C===-1){var g=""+JSON.stringify(r),w=void 0;if(c.children.length===0)w={offset:c.offset+1,length:0,content:g};else{var h=c.children[c.children.length-1];w={offset:h.offset+h.length,length:0,content:","+g}}return As(t,w,n)}else if(r===void 0&&c.children.length>=0){var b=l,S=c.children[b],w=void 0;if(c.children.length===1)w={offset:c.offset+1,length:c.length-2,content:""};else if(c.children.length-1===b){var h=c.children[b-1],P=h.offset+h.length,_=c.offset+c.length;w={offset:P,length:_-2-P,content:""}}else w={offset:S.offset,length:c.children[b+1].offset-S.offset,content:""};return As(t,w,n)}else if(r!==void 0){var w=void 0,g=""+JSON.stringify(r);if(!n.isArrayInsertion&&c.children.length>l){var k=c.children[l];w={offset:k.offset,length:k.length,content:g}}else if(c.children.length===0||l===0)w={offset:c.offset+1,length:0,content:c.children.length===0?g:g+","};else{var v=l>c.children.length?c.children.length:l,h=c.children[v-1];w={offset:h.offset+h.length,length:0,content:","+g}}return As(t,w,n)}else throw new Error("Can not "+(r===void 0?"remove":n.isArrayInsertion?"insert":"modify")+" Array index "+C+" as length is not sufficient")}else throw new Error("Can not add "+(typeof l!="number"?"index":"property")+" to parent of type "+c.type);else{if(r===void 0)throw new Error("Can not delete in empty document");return As(t,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(r)},n)}}function As(t,e,r){if(!r.formattingOptions)return[e];var n=gp(t,e),i=e.offset,o=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;i>0&&!$l(n,i-1);)i--;for(;o<n.length&&!$l(n,o);)o++}for(var s=Zy(n,{offset:i,length:o-i},r.formattingOptions),a=s.length-1;a>=0;a--){var c=s[a];n=gp(n,c),i=Math.min(i,c.offset),o=Math.max(o,c.offset+c.length),o+=c.content.length-c.length}var l=t.length-(n.length-o)-i;return[{offset:i,length:l,content:n.substring(i,o)}]}function gp(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}"use strict";var Wk=Bk,Xe=Hk,vp=pp,po=Bl;var yp=hp;function yt(t,e,r,n){return Gk(t,e,r,n)}function Bt(t,e){for(var r=e.length-1;r>=0;r--)t=gp(t,e[r]);return t}var QD=Y(require("crypto")),XD=Y(require("util"));var $9=Y(require("path")),Bw=Y(require("string_decoder"));var Vt=Y(require("path")),bD=Y(require("fs")),rc=Y(require("child_process")),$w=Y(require("string_decoder"));var pD=Y(require("path"));var zk;zk=(()=>{"use strict";var t={470:n=>{function i(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function o(a,c){for(var l,u="",d=0,f=-1,p=0,h=0;h<=a.length;++h){if(h<a.length)l=a.charCodeAt(h);else{if(l===47)break;l=47}if(l===47){if(!(f===h-1||p===1))if(f!==h-1&&p===2){if(u.length<2||d!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var m=u.lastIndexOf("/");if(m!==u.length-1){m===-1?(u="",d=0):d=(u=u.slice(0,m)).length-1-u.lastIndexOf("/"),f=h,p=0;continue}}else if(u.length===2||u.length===1){u="",d=0,f=h,p=0;continue}}c&&(u.length>0?u+="/..":u="..",d=2)}else u.length>0?u+="/"+a.slice(f+1,h):u=a.slice(f+1,h),d=h-f-1;f=h,p=0}else l===46&&p!==-1?++p:p=-1}return u}var s={resolve:function(){for(var a,c="",l=!1,u=arguments.length-1;u>=-1&&!l;u--){var d;u>=0?d=arguments[u]:(a===void 0&&(a=process.cwd()),d=a),i(d),d.length!==0&&(c=d+"/"+c,l=d.charCodeAt(0)===47)}return c=o(c,!l),l?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(a){if(i(a),a.length===0)return".";var c=a.charCodeAt(0)===47,l=a.charCodeAt(a.length-1)===47;return(a=o(a,!c)).length!==0||c||(a="."),a.length>0&&l&&(a+="/"),c?"/"+a:a},isAbsolute:function(a){return i(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,c=0;c<arguments.length;++c){var l=arguments[c];i(l),l.length>0&&(a===void 0?a=l:a+="/"+l)}return a===void 0?".":s.normalize(a)},relative:function(a,c){if(i(a),i(c),a===c||(a=s.resolve(a))===(c=s.resolve(c)))return"";for(var l=1;l<a.length&&a.charCodeAt(l)===47;++l);for(var u=a.length,d=u-l,f=1;f<c.length&&c.charCodeAt(f)===47;++f);for(var p=c.length-f,h=d<p?d:p,m=-1,g=0;g<=h;++g){if(g===h){if(p>h){if(c.charCodeAt(f+g)===47)return c.slice(f+g+1);if(g===0)return c.slice(f+g)}else d>h&&(a.charCodeAt(l+g)===47?m=g:g===0&&(m=0));break}var v=a.charCodeAt(l+g);if(v!==c.charCodeAt(f+g))break;v===47&&(m=g)}var w="";for(g=l+m+1;g<=u;++g)g!==u&&a.charCodeAt(g)!==47||(w.length===0?w+="..":w+="/..");return w.length>0?w+c.slice(f+m):(f+=m,c.charCodeAt(f)===47&&++f,c.slice(f))},_makeLong:function(a){return a},dirname:function(a){if(i(a),a.length===0)return".";for(var c=a.charCodeAt(0),l=c===47,u=-1,d=!0,f=a.length-1;f>=1;--f)if((c=a.charCodeAt(f))===47){if(!d){u=f;break}}else d=!1;return u===-1?l?"/":".":l&&u===1?"//":a.slice(0,u)},basename:function(a,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');i(a);var l,u=0,d=-1,f=!0;if(c!==void 0&&c.length>0&&c.length<=a.length){if(c.length===a.length&&c===a)return"";var p=c.length-1,h=-1;for(l=a.length-1;l>=0;--l){var m=a.charCodeAt(l);if(m===47){if(!f){u=l+1;break}}else h===-1&&(f=!1,h=l+1),p>=0&&(m===c.charCodeAt(p)?--p==-1&&(d=l):(p=-1,d=h))}return u===d?d=h:d===-1&&(d=a.length),a.slice(u,d)}for(l=a.length-1;l>=0;--l)if(a.charCodeAt(l)===47){if(!f){u=l+1;break}}else d===-1&&(f=!1,d=l+1);return d===-1?"":a.slice(u,d)},extname:function(a){i(a);for(var c=-1,l=0,u=-1,d=!0,f=0,p=a.length-1;p>=0;--p){var h=a.charCodeAt(p);if(h!==47)u===-1&&(d=!1,u=p+1),h===46?c===-1?c=p:f!==1&&(f=1):c!==-1&&(f=-1);else if(!d){l=p+1;break}}return c===-1||u===-1||f===0||f===1&&c===u-1&&c===l+1?"":a.slice(c,u)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(c,l){var u=l.dir||l.root,d=l.base||(l.name||"")+(l.ext||"");return u?u===l.root?u+d:u+"/"+d:d}(0,a)},parse:function(a){i(a);var c={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return c;var l,u=a.charCodeAt(0),d=u===47;d?(c.root="/",l=1):l=0;for(var f=-1,p=0,h=-1,m=!0,g=a.length-1,v=0;g>=l;--g)if((u=a.charCodeAt(g))!==47)h===-1&&(m=!1,h=g+1),u===46?f===-1?f=g:v!==1&&(v=1):f!==-1&&(v=-1);else if(!m){p=g+1;break}return f===-1||h===-1||v===0||v===1&&f===h-1&&f===p+1?h!==-1&&(c.base=c.name=p===0&&d?a.slice(1,h):a.slice(p,h)):(p===0&&d?(c.name=a.slice(1,f),c.base=a.slice(1,h)):(c.name=a.slice(p,f),c.base=a.slice(p,h)),c.ext=a.slice(f,h)),p>0?c.dir=a.slice(0,p-1):d&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,n.exports=s},447:(n,i,o)=>{var s;if(o.r(i),o.d(i,{URI:()=>w,Utils:()=>J}),typeof process=="object")s=process.platform==="win32";else if(typeof navigator=="object"){var a=navigator.userAgent;s=a.indexOf("Windows")>=0}var c,l,u=(c=function(F,L){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,G){q.__proto__=G}||function(q,G){for(var z in G)Object.prototype.hasOwnProperty.call(G,z)&&(q[z]=G[z])})(F,L)},function(F,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function q(){this.constructor=F}c(F,L),F.prototype=L===null?Object.create(L):(q.prototype=L.prototype,new q)}),d=/^\w[\w\d+.-]*$/,f=/^\//,p=/^\/\//;function h(F,L){if(!F.scheme&&L)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(F.authority,'", path: "').concat(F.path,'", query: "').concat(F.query,'", fragment: "').concat(F.fragment,'"}'));if(F.scheme&&!d.test(F.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(F.path){if(F.authority){if(!f.test(F.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(F.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var m="",g="/",v=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,w=function(){function F(L,q,G,z,ie,ne){ne===void 0&&(ne=!1),typeof L=="object"?(this.scheme=L.scheme||m,this.authority=L.authority||m,this.path=L.path||m,this.query=L.query||m,this.fragment=L.fragment||m):(this.scheme=function(be,Pe){return be||Pe?be:"file"}(L,ne),this.authority=q||m,this.path=function(be,Pe){switch(be){case"https":case"http":case"file":Pe?Pe[0]!==g&&(Pe=g+Pe):Pe=g}return Pe}(this.scheme,G||m),this.query=z||m,this.fragment=ie||m,h(this,ne))}return F.isUri=function(L){return L instanceof F||!!L&&typeof L.authority=="string"&&typeof L.fragment=="string"&&typeof L.path=="string"&&typeof L.query=="string"&&typeof L.scheme=="string"&&typeof L.fsPath=="string"&&typeof L.with=="function"&&typeof L.toString=="function"},Object.defineProperty(F.prototype,"fsPath",{get:function(){return k(this,!1)},enumerable:!1,configurable:!0}),F.prototype.with=function(L){if(!L)return this;var q=L.scheme,G=L.authority,z=L.path,ie=L.query,ne=L.fragment;return q===void 0?q=this.scheme:q===null&&(q=m),G===void 0?G=this.authority:G===null&&(G=m),z===void 0?z=this.path:z===null&&(z=m),ie===void 0?ie=this.query:ie===null&&(ie=m),ne===void 0?ne=this.fragment:ne===null&&(ne=m),q===this.scheme&&G===this.authority&&z===this.path&&ie===this.query&&ne===this.fragment?this:new b(q,G,z,ie,ne)},F.parse=function(L,q){q===void 0&&(q=!1);var G=v.exec(L);return G?new b(G[2]||m,H(G[4]||m),H(G[5]||m),H(G[7]||m),H(G[9]||m),q):new b(m,m,m,m,m)},F.file=function(L){var q=m;if(s&&(L=L.replace(/\\/g,g)),L[0]===g&&L[1]===g){var G=L.indexOf(g,2);G===-1?(q=L.substring(2),L=g):(q=L.substring(2,G),L=L.substring(G)||g)}return new b("file",q,L,m,m)},F.from=function(L){var q=new b(L.scheme,L.authority,L.path,L.query,L.fragment);return h(q,!0),q},F.prototype.toString=function(L){return L===void 0&&(L=!1),T(this,L)},F.prototype.toJSON=function(){return this},F.revive=function(L){if(L){if(L instanceof F)return L;var q=new b(L);return q._formatted=L.external,q._fsPath=L._sep===C?L.fsPath:null,q}return L},F}(),C=s?1:void 0,b=function(F){function L(){var q=F!==null&&F.apply(this,arguments)||this;return q._formatted=null,q._fsPath=null,q}return u(L,F),Object.defineProperty(L.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=k(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),L.prototype.toString=function(q){return q===void 0&&(q=!1),q?T(this,!0):(this._formatted||(this._formatted=T(this,!1)),this._formatted)},L.prototype.toJSON=function(){var q={$mid:1};return this._fsPath&&(q.fsPath=this._fsPath,q._sep=C),this._formatted&&(q.external=this._formatted),this.path&&(q.path=this.path),this.scheme&&(q.scheme=this.scheme),this.authority&&(q.authority=this.authority),this.query&&(q.query=this.query),this.fragment&&(q.fragment=this.fragment),q},L}(w),S=((l={})[58]="%3A",l[47]="%2F",l[63]="%3F",l[35]="%23",l[91]="%5B",l[93]="%5D",l[64]="%40",l[33]="%21",l[36]="%24",l[38]="%26",l[39]="%27",l[40]="%28",l[41]="%29",l[42]="%2A",l[43]="%2B",l[44]="%2C",l[59]="%3B",l[61]="%3D",l[32]="%20",l);function P(F,L){for(var q=void 0,G=-1,z=0;z<F.length;z++){var ie=F.charCodeAt(z);if(ie>=97&&ie<=122||ie>=65&&ie<=90||ie>=48&&ie<=57||ie===45||ie===46||ie===95||ie===126||L&&ie===47)G!==-1&&(q+=encodeURIComponent(F.substring(G,z)),G=-1),q!==void 0&&(q+=F.charAt(z));else{q===void 0&&(q=F.substr(0,z));var ne=S[ie];ne!==void 0?(G!==-1&&(q+=encodeURIComponent(F.substring(G,z)),G=-1),q+=ne):G===-1&&(G=z)}}return G!==-1&&(q+=encodeURIComponent(F.substring(G))),q!==void 0?q:F}function _(F){for(var L=void 0,q=0;q<F.length;q++){var G=F.charCodeAt(q);G===35||G===63?(L===void 0&&(L=F.substr(0,q)),L+=S[G]):L!==void 0&&(L+=F[q])}return L!==void 0?L:F}function k(F,L){var q;return q=F.authority&&F.path.length>1&&F.scheme==="file"?"//".concat(F.authority).concat(F.path):F.path.charCodeAt(0)===47&&(F.path.charCodeAt(1)>=65&&F.path.charCodeAt(1)<=90||F.path.charCodeAt(1)>=97&&F.path.charCodeAt(1)<=122)&&F.path.charCodeAt(2)===58?L?F.path.substr(1):F.path[1].toLowerCase()+F.path.substr(2):F.path,s&&(q=q.replace(/\//g,"\\")),q}function T(F,L){var q=L?_:P,G="",z=F.scheme,ie=F.authority,ne=F.path,be=F.query,Pe=F.fragment;if(z&&(G+=z,G+=":"),(ie||z==="file")&&(G+=g,G+=g),ie){var Se=ie.indexOf("@");if(Se!==-1){var De=ie.substr(0,Se);ie=ie.substr(Se+1),(Se=De.indexOf(":"))===-1?G+=q(De,!1):(G+=q(De.substr(0,Se),!1),G+=":",G+=q(De.substr(Se+1),!1)),G+="@"}(Se=(ie=ie.toLowerCase()).indexOf(":"))===-1?G+=q(ie,!1):(G+=q(ie.substr(0,Se),!1),G+=ie.substr(Se))}if(ne){if(ne.length>=3&&ne.charCodeAt(0)===47&&ne.charCodeAt(2)===58)(pe=ne.charCodeAt(1))>=65&&pe<=90&&(ne="/".concat(String.fromCharCode(pe+32),":").concat(ne.substr(3)));else if(ne.length>=2&&ne.charCodeAt(1)===58){var pe;(pe=ne.charCodeAt(0))>=65&&pe<=90&&(ne="".concat(String.fromCharCode(pe+32),":").concat(ne.substr(2)))}G+=q(ne,!0)}return be&&(G+="?",G+=q(be,!1)),Pe&&(G+="#",G+=L?Pe:P(Pe,!1)),G}function A(F){try{return decodeURIComponent(F)}catch{return F.length>3?F.substr(0,3)+A(F.substr(3)):F}}var M=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function H(F){return F.match(M)?F.replace(M,function(L){return A(L)}):F}var J,K=o(470),oe=function(F,L,q){if(q||arguments.length===2)for(var G,z=0,ie=L.length;z<ie;z++)!G&&z in L||(G||(G=Array.prototype.slice.call(L,0,z)),G[z]=L[z]);return F.concat(G||Array.prototype.slice.call(L))},te=K.posix||K;(function(F){F.joinPath=function(L){for(var q=[],G=1;G<arguments.length;G++)q[G-1]=arguments[G];return L.with({path:te.join.apply(te,oe([L.path],q,!1))})},F.resolvePath=function(L){for(var q=[],G=1;G<arguments.length;G++)q[G-1]=arguments[G];var z=L.path||"/";return L.with({path:te.resolve.apply(te,oe([z],q,!1))})},F.dirname=function(L){var q=te.dirname(L.path);return q.length===1&&q.charCodeAt(0)===46?L:L.with({path:q})},F.basename=function(L){return te.basename(L.path)},F.extname=function(L){return te.extname(L.path)}})(J||(J={}))}},e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var o in i)r.o(i,o)&&!r.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:i[o]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(447)})();var{URI:Ee,Utils:rn}=zk;var Kk=Y(require("path"));function Ge(t,e){if(Hl(e)){let r=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:r,configFolderPath:r}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function Hl(t){return Kk.extname(t)===".code-workspace"}async function wp(t,e){if(!!e.isWorkspaceFile)try{let r=e.rootFolderPath,n=(await t.readFile(e.workspaceOrFolderPath)).toString(),o=Xe(n).folders;if(o&&o.length>0){for(let s of o){let a=s.path,c;if(a){if(t.path.isAbsolute(a))return`Workspace contains an absolute folder path '${a}'.`;c=t.path.resolve(r,a)}else{let l=s.uri;return l?Ee.parse(l).scheme!=="file"?`Workspace contains folder '${l}' not on the local file system.`:`Workspace contains an absolute folder path '${l}'.`:"Workspace contains a folder that defines neither a path nor a URI."}if(!U4(t,c,r))return`Folder '${c}' is not a subfolder of shared root folder '${r}'.`}return}return"Workspace does not define any folders"}catch(r){return`Problems loading workspace file ${e.workspaceOrFolderPath}: ${r&&(r.message||r.toString())}`}}function U4(t,e,r){return e===r?!0:!e||!r||r.length>e.length||e.length>r.length&&e.charAt(r.length)!==t.path.sep?!1:B4(t.platform,r,e.substr(0,r.length))}function B4(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var Ur=Y(require("path")),Mp=Y(Rl()),aD=Y(require("crypto")),qp=Y(_p()),cD=Y(require("util")),lD=Y(require("string_decoder"));var Vl=Y(require("path"));async function sw(t,e,r){let n=await QI(t,"agent-extra-socket",r);if(!n)return;let i=await aw(e,"agent-socket");if(!i)return;let o=await aw(e,"homedir");try{let{stdout:a}=await e.exec(`ls '${o}/private-keys-v1.d' 2>/dev/null`);if(a.trim())return}catch{}let s=(async()=>{await e.exec(`mkdir -p -m 700 '${Vl.posix.dirname(i)}'`);let a=await QI(t,"homedir",r),c=await aw(e,"homedir");a&&c&&(await Ka({cliHost:t},{shellServer:e},t.path.join(a,"pubring.kbx"),Vl.posix.join(c,"pubring.kbx"),"gpg"),await Ka({cliHost:t},{shellServer:e},t.path.join(a,"pubring.gpg"),Vl.posix.join(c,"pubring.gpg"),"gpg"),await Ka({cliHost:t},{shellServer:e},t.path.join(a,"trustdb.gpg"),Vl.posix.join(c,"trustdb.gpg"),"gpg")),await p6(t,r)})();return{cliHost:t,remoteGpgSocket:i,localGpgSocket:n,ready:s}}async function QI(t,e,r){try{let{stdout:n}=await xe({exec:t.exec,cmd:"gpgconf",args:["--list-dir",e],output:r,print:!0}),i=n.toString().trim();if(i.indexOf(`
`)!==-1){let o=new RegExp(`^${e}:(.*)$`,"m").exec(i);o&&(i=o[1])}return t.platform==="win32"&&/^\/.\//.test(i)&&(i=`${i.charAt(1)}:${i.substr(2).replace(/\//g,"\\")}`),i}catch{return}}async function aw(t,e){try{let{stdout:r}=await t.exec(`gpgconf --list-dir ${e}`),n=r.trim();if(n.indexOf(`
`)!==-1){let i=new RegExp(`^${e}:(.*)$`,"m").exec(n);if(i)return i[1]}return n}catch{return}}async function p6(t,e){try{await xe({exec:t.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:e})}catch{}}async function cw(t,e,r){if(!("exec"in t)){for(let n=e,i="";n!==i;i=n,n=t.path.dirname(n))if(await t.isFile(t.path.join(n,".git","config")))return n;return}try{let{stdout:n}=await xe({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:r}),i=n.toString().trim();return t.path.resolve(e,i)}catch{return}}async function lw(t,e,r){try{return await xe({exec:t.exec,cmd:"git",args:["ls-remote",e],cwd:".",output:r}),!0}catch{return!1}}async function uw({exec:t},e,r){try{let{stdout:n,stderr:i}=await xe({exec:t,cmd:"git",args:["credential",e],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(r),output:it});return{stdout:n.toString(),stderr:i.toString(),code:0}}catch(n){if(!(n&&n.stdout&&n.stderr))throw n;let{stdout:i,stderr:o,code:s}=n;return{stdout:i.toString(),stderr:o.toString(),code:s||0}}}async function XI(t,e,r){if(!("exec"in t)){let i=await cw(t,e.rootFolderPath,r);if(!i)return;try{return(await t.readFile(t.path.join(i,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(o){if((o==null?void 0:o.code)!=="ENOENT")throw o;return[]}}let n;try{let{stdout:i}=await xe({exec:t.exec,cmd:"git",args:["remote","-v"],cwd:e.rootFolderPath,output:r});n=i.toString()}catch{return}return Array.from(new Set(h6(/^[^\s]+\s+([^\s]+)/gm,n,1)))}function h6(t,e,r){return{[Symbol.iterator]:function*(){let n;for(;n=t.exec(e);)yield n[r],t.lastIndex===n.index&&t.lastIndex++}}}async function ZI(t,e,r){return await m6(t,e,r)||g6(t,e,r)}async function m6(t,e,r){try{let{stdout:n}=await xe({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e.rootFolderPath,output:r});return!!n.toString().trim()}catch{return}}async function g6(t,e,r){let n=await v6(t,e,r);if(!!n)try{let{stdout:i}=await xe({exec:t.exec,cmd:"git",args:["log",`${n}..HEAD`],cwd:e.rootFolderPath,output:r});return!!i.toString().trim()}catch{return}}async function v6(t,e,r){try{let{stdout:n}=await xe({exec:t.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:e.rootFolderPath,output:r});return n.toString().trim()}catch{return}}async function Sp(t,e,r,n,i,o){let{extensionPath:s}=t;if(await e.isFolder(e.path.join(r,".git")))return{gitClone:void 0,gitUnshallow:void 0};await e.mkdirp(r);let a=n.tokenEnvVar?se(V({},n.env),{GIT_ASKPASS:e.path.join(s,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[n.tokenEnvVar]}):n.env,c=[];n.fullClone||c.push("--depth","1"),n.branch&&c.push("--branch",n.branch),n.recurseSubmodules&&c.push("--recurse-submodules");let l=ho({ptyExec:e.ptyExec,cmd:"git",args:["clone",...c,n.url,"."],cwd:r,env:a,output:er(i,ce.Info)}),u=n.fullClone?l:(async()=>(await l,await ho({ptyExec:e.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:r,env:a,output:o}),ho({ptyExec:e.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:r,env:a,output:o})))();return{gitClone:l,gitUnshallow:u}}var mo=Y(require("stream"));async function eT(t,e){let{stdout:r}=await t.exec(`cat /proc/${e}/environ`,{logOutput:!1});return r.split("\0").map(n=>{let i=n.indexOf("=");return i!==-1?[n.slice(0,i),n.slice(i+1)]:[]}).reduce((n,[i,o])=>(i&&(n[i]=o),n),{})}async function dw(t){let e='for pid in `cd /proc && ls -d [0-9]*`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "\n" " " ; echo ; xargs -0 < /proc/$pid/environ ; xargs -0 < /proc/$pid/cmdline ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null',{stdout:r}=await t.exec(e,{logOutput:!1}),n=6,i=r.split(`
---
`),o=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,l,u,d,f])=>{let p=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:p[1],pgrp:p[2],cwd:c,mntNS:l,cmd:f,env:d.split(" ").reduce((h,m)=>{let g=m.indexOf("=");return g!==-1&&(h[m.substr(0,g)]=m.substr(g+1)),h},{})}}),mntNS:o}}function tT(t){let e={};return t.forEach(r=>e[r.pid]={process:r,childProcesses:[]}),t.filter(r=>r.ppid).forEach(r=>{var n;return(n=e[r.ppid])==null?void 0:n.childProcesses.push(e[r.pid])}),e}function fw(t,e="  ",r="  "){return`${r}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(n=>fw(n,e,r+e))}`}var pw=Y(require("events")),xp=class{constructor(){this.nodeEmitter=new pw.EventEmitter;this.event=e=>(this.nodeEmitter.on("event",e),{dispose:()=>{this.nodeEmitter.off("event",e)}})}fire(e){this.nodeEmitter.emit("event",e)}dispose(){this.nodeEmitter.removeAllListeners()}},hw=class{constructor(){this.nodeEmitter=new pw.EventEmitter;this.event=e=>{let r=n=>n.results.push(e(n.data));return this.nodeEmitter.on("event",r),{dispose:()=>{this.nodeEmitter.off("event",r)}}}}fire(e){let r=[];return this.nodeEmitter.emit("event",{data:e,results:r}),r}dispose(){this.nodeEmitter.removeAllListeners()}};var x9=ZA(),uD=kw(),Tw=iD(),P9=sD();async function Jl(t,e){var S,P,_,k;let{cliHost:r,output:n}=t,i="Launching Remote-Containers helper.",o=n.start(i);if(Ti)return n.stop(i,o),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let s=r.type==="local",a=s?r:await $p(process.cwd(),t.loadNativeModule,n),l=(await(0,cD.promisify)(aD.randomBytes)(20)).toString("hex"),u={},d=fD(t.cliHost)||fD(a),f=d?Ur.posix.join(((S=e.env)==null?void 0:S.TMPDIR)||"/tmp",`vscode-ssh-auth-${l}.sock`):void 0;d?(u[f]=d,n.write(`ssh-agent: SSH_AUTH_SOCK in container (${f}) forwarded to ${d.cliHost!==a?"remote":"local"} host (${d.socketPath}).`)):n.write("ssh-agent: SSH_AUTH_SOCK not set on host.");let p=await sw(r,e.shellServer,n)||(s?void 0:await sw(a,e.shellServer,n));p&&(u[p.remoteGpgSocket]={cliHost:p.cliHost,socketPath:p.localGpgSocket});let h=Ur.posix.join(((P=e.env)==null?void 0:P.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${l}.sock`),m=Ur.posix.join(((_=e.env)==null?void 0:_.TMPDIR)||"/tmp",`vscode-remote-containers-server-${l}.js`),g=Ur.posix.join(((k=e.env)==null?void 0:k.TMPDIR)||"/tmp",`vscode-remote-containers-${l}.js`),v=dD(t,e,"Container",void 0,!1,!1,m,g,u,h,a),w=v.then(T=>T.ready),C=v.then(T=>T.mrpcExec),b=v.then(T=>T.mrpcPtyExec);return w.catch(console.error),t.onAdoptProcess(T=>D9(e.shellServer,h,f,T).catch(console.error)),n.stop(i,o),{remoteContainersCLI:g,remoteEnv:f?{SSH_AUTH_SOCK:f,REMOTE_CONTAINERS_IPC:h}:{REMOTE_CONTAINERS_IPC:h},mrpcExec:C,mrpcPtyExec:b,ready:w,reconnect:()=>v.then(T=>T.reconnect())}}async function Ql(t,e,r,n,i){let{passwdUser:o,nodeExecutable:s,mrpcExec:a,mrpcPtyExec:c,setBaseEnv:l,connect:u,reconnect:d,terminate:f}=await dD(t,{remoteExec:e,platform:i},"Host",r,!0,n,void 0);return{passwdUser:o,nodeExecutable:s,exec:a,ptyExec:c,setBaseEnv:l,connect:u,reconnect:d,terminate:f}}async function dD(t,{remoteExec:e,platform:r,nodeExecutable:n},i,o,s,a,c,l,u,d,f){let{product:p,output:h}=t,m=l&&Oe(Ur.join(t.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),g=Oe(Ur.join(t.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),v=await Ai(e,h,void 0,r,i),w=s?await Rw(v,await Dw(v)):void 0,C=!0;if(!n||!c){let _=(await v.exec({posix:"echo ~",win32:"echo $env:userprofile"})).stdout.trim().split(`
`)[0],k=v.path.join(_,".vscode-remote-containers");n||(n=await R9(t,v,k,_,p,a)),c||(c=v.path.join(k,"dist",`vscode-remote-containers-server-${t.package.version}.js`),await Xl(v,c)?C=!1:await v.exec(`mkdir -p '${v.path.dirname(c)}'`))}if(l){let _=`EOF-${l}`;await v.exec(`cat <<'${_}' >${l}
${await m}
${_}
`)}if(C){let _=`EOF-${c}`,k=`${c}_${Date.now()}`;await v.exec(`cat <<'${_}' >${k}
${await g}
${_}
mv ${k} ${c}`)}let b=()=>k9(t,i,v,n,c,u,d,f),S=await b(),P;return{ready:S.ready,passwdUser:w,nodeExecutable:n,mrpcExec:I9(()=>S.mrpc,i,o),mrpcPtyExec:T9(()=>S.mrpc,i,o),mrpcExecToEnd:A9(()=>S.mrpc,i,o),setBaseEnv:_=>new Promise((k,T)=>{P=_,S.mrpc.setBaseEnv(_,A=>A?T(A):k())}),connect:S.mrpc.connect,reconnect:async()=>{let _=`${i}: Reconnecting exec server`,k=h.start(_);await S.process.terminate().catch(()=>{}),v=await Ai(e,h,void 0,void 0,i),S=await b(),P&&await new Promise((T,A)=>{S.mrpc.setBaseEnv(P,M=>M?A(M):T())}),h.stop(_,k)},terminate:()=>S.process.terminate()}}async function k9(t,e,r,n,i,o,s,a){let{cliHost:c,output:l}=t,u=Object.keys(o||{}),d=se(V({},u.reduce((_,k)=>(_[k]="duplex",_),{})),{rpc:"async",connected:"async",ready:"async"}),f={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async",connect:"duplex"},p=r.process,h=`echo -n ${Br} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(u)}' REMOTE_CONTAINERS_IPC='${s||""}' '${n}' '${i}'
`;p.stdin.write(h);let m,g=new Promise(_=>m=_),v=new lD.StringDecoder;p.stderr.on("data",_=>{let k=v.write(_).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(m){let T=k.indexOf(Br);T!==-1&&(m(),m=void 0,k=k.substr(0,T)+k.substr(T+1))}k&&l.write(Ne(`${e} server: ${k}`))}),p.exit.then(({code:_,signal:k})=>{l.write(`${e} server terminated (code: ${_}, signal: ${k}).`)},_=>{l.write(`${e} server did not launch or terminated: ${_&&_.message||String(_)}`)});let C=(c==null?void 0:c.type)==="local",b,S=new Promise(_=>b=_),P=x9(f,d)(se(V({},u.reduce((_,k)=>{let T=o[k];return _[k]=()=>T.cliHost.connect(T.socketPath),_},{})),{rpc:async(_,k)=>{try{let T=JSON.parse(_),A=await uw(C?a:c,T.command,T.stdin).catch(M=>{if(C)throw M});!C&&(A==null?void 0:A.code)!==0&&(A=await uw(a,T.command,T.stdin),A.code===0&&(C=!0)),k(void 0,JSON.stringify(A))}catch(T){console.error(T),k(T)}},connected:_=>{_()},ready:_=>{b(),_()}}));return(0,qp.default)(uD.source(p.stdout),P.createStream(),uD.sink(p.stdin)),await Promise.race([g,p.exit.then(({code:_,signal:k})=>{throw new Error(`${e} server terminated (code: ${_}, signal: ${k}).`)})]),{ready:S,mrpc:P,process:p}}function I9(t,e,r){return async n=>{let{cmd:i,args:o,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),d=t(),f=await new Promise((p,h)=>{d.exec({cmd:i,args:o,cwd:s||r,env:a},(m,g)=>{m?h(m):p(g)})});return{stdin:Tw.sink(d.stdin(f,p=>{p&&p.message!=="unexpected end of parent stream"&&console.error(p)})),stdout:Tw.source(d.stdout(f)),stderr:Tw.source(d.stderr(f)),exit:new Promise((p,h)=>{d.exit(f,(m,g)=>{var v;c.stop(l,u),m?(((v=m.message)==null?void 0:v.endsWith("ENOENT"))&&!m.code&&(m.code="ENOENT"),h(m)):p(g)})}),terminate:async()=>new Promise((p,h)=>{d.terminate(f,m=>{m?h(m):p()})})}}}function T9(t,e,r){return async n=>{let{cmd:i,args:o,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),d=t(),f=await new Promise((g,v)=>{var w,C;d.ptyExec({cmd:i,args:o,cwd:s||r,env:a,rows:(w=c.dimensions)==null?void 0:w.rows,cols:(C=c.dimensions)==null?void 0:C.columns},(b,S)=>{b?v(b):g(S)})}),p=[c.onDidChangeDimensions&&c.onDidChangeDimensions(g=>d.ptyResize(f,g.columns,g.rows))],h=P9();(0,qp.default)(h,d.ptyIn(f,g=>{g&&g.message!=="unexpected end of parent stream"&&console.error(g)}));let m=new xp;return(0,qp.default)(d.ptyOut(f),g=>{g(null,function v(w,C){if(w!==!0){if(w)throw w;m.fire(C),g(null,v)}})}),{write:g=>h.push(g),onData:m.event,resize:(g,v)=>d.ptyResize(f,g,v),exit:new Promise((g,v)=>{d.ptyExit(f,(w,C)=>{p.forEach(b=>b==null?void 0:b.dispose()),c.stop(l,u),w?v(w):g(C)})}),terminate:async()=>new Promise((g,v)=>{d.ptyTerminate(f,w=>{w?v(w):g()})})}}}function A9(t,e,r){return async n=>{let{cmd:i,args:o,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),d=t();return new Promise((f,p)=>{d.execToEnd({cmd:i,args:o,cwd:s||r,env:a},(h,m)=>{if(c.stop(l,u),h||!m)p({stdin:new mo.Writable,stdout:mo.Readable.from([]),stderr:mo.Readable.from([]),exit:Promise.reject(h),terminate:async()=>{}});else{let g=mo.Readable.from([Buffer.from(m.stdout.data)]),v=new Promise(b=>g.on("end",b)),w=mo.Readable.from([Buffer.from(m.stderr.data)]),C=new Promise(b=>w.on("end",b));f({stdin:new mo.Writable,stdout:g,stderr:w,exit:Promise.all([v,C]).then(()=>({code:m.code,signal:m.signal})),terminate:async()=>{}})}})})}}var Aw="\\\\.\\pipe\\openssh-ssh-agent";function fD(t){if(t.env.SSH_AUTH_SOCK)return{cliHost:t,socketPath:t.env.SSH_AUTH_SOCK};if(t.platform==="win32")return{cliHost:t,socketPath:Aw}}var jp=new Set;async function D9(t,e,r,n){let i=await n.processId;if(i&&i>0){let o=await eT(t,i),s=o.REMOTE_CONTAINERS_IPC;s&&s!==e&&!jp.has(s)&&s.indexOf("vscode-remote-containers-ipc")!==-1&&(jp.add(s),await t.exec(`rm '${s}' && ln -s '${e}' '${s}'`));let a=o.SSH_AUTH_SOCK;a&&r&&a!==r&&!jp.has(a)&&a.indexOf("vscode-ssh-auth")!==-1&&(jp.add(a),await t.exec(`rm '${a}' && ln -s '${r}' '${a}'`))}}async function R9(t,e,r,n,i,o){let s=(i==null?void 0:i.commit)||"b3318bc0524af3d74034b8bb8a64df0ccf35549a",a=(i==null?void 0:i.commit)?i.quality||"insider":"stable",{localCacheFolder:c,output:l,alternateDownload:u}=t,d=Ur.posix.join(r,"bin",s),f=Ur.posix.join(d,"node");try{await e.exec(`test -x '${f}'`)}catch{if(i)try{let v=Ur.posix.join(Ow(n,i),"bin",s),w=Ur.posix.join(v,"node");await e.exec(`test -x '${w}'`);let C=Ur.posix.join(v,"node_modules","node-pty","package.json");return await e.exec(`test -f '${C}'`),w}catch{}let p;if((await e.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")p=Nw;else{let v=await Fw(e);p=Lw(v,!1)}let m={localCacheFolder:c,build:p,commit:s,quality:a,web:!1,output:l,alternateDownload:u},g=eu(m);if(await pt(g)||await Up(m),p===Nw)await Zl({output:l},e,g,d,o);else{let v=[];await Mp.t({file:g,filter:C=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(C),onentry:C=>{new Mp.WriteEntry.Tar(C).on("data",S=>v.push(S))}});let w=Buffer.concat(v);await Zl({output:l},e,w,d,o,!1)}}return f}var qw=Y(require("path"));var O9=Y(require("http")),N9=Y(require("https"));function Mw(t,e={}){return new Promise((r,n)=>{let i=t.startsWith("https:")?N9:O9,o;if(Object.keys(e).length>0){let a=new URL(t);o={headers:e,host:a.host,path:a.pathname}}i.get(o!=null?o:t,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let l=(c=a.headers)==null?void 0:c.location;l&&r(Mw(l,e))}n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",n);let l=[];a.on("data",u=>l.push(u)),a.on("end",()=>r(Buffer.concat(l)))}}).on("error",n)})}async function go(t){let e=await Oe(qw.join(t,"package.json"),"utf8");return JSON.parse(e)}async function tu(t){let e=await Oe(qw.join(t,"product.json"),"utf8"),r=JSON.parse(e);return r.commit||(r.commit=await L9(r.quality)),r.serverDataFolderName||(r.serverDataFolderName=".vscode-server-oss"),r}async function L9(t="insider"){let e=`https://update.code.visualstudio.com/api/update/server-linux-x64/${t}/latest`,r=await Mw(e);return JSON.parse(r.toString()).version}var ru=!0;function nu(t,e=!1){let{serverApplicationName:r}=t;return!e&&r?["bin",r]:["server.sh"]}var hD=/^\\\\wsl(\.localhost|\$)?\\/;function Ht(t){return hD.test(t.toLowerCase())}function vo(t){let e=t.toLowerCase(),r=hD.exec(e);if(!r)return"";let n=e.indexOf("\\",r[0].length);return t.substring(r[0].length,n)}async function Bp(t){let{stdout:e}=await xe({exec:Os(void 0),cmd:"wsl",args:["-l","-v"],output:t}),r=e.toString(e[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(r)||[])[1]}async function Di(t,e,r){let{stdout:n}=await xe({exec:Os(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:r});return n.toString().trim()}async function Xa(t,e){let r=vo(t),n=await Di(r,t,e);return Ee.parse(`vscode-remote://wsl+${r}${n}`)}function Za(t){if(t.scheme==="vscode-remote"){let e=Hp(t.authority);if(e){let r=t.path;return Hl(r)&&(r=pD.posix.dirname(r)),{wslDistro:e,wslPath:r}}}}function Hp(t){return(/wsl\+(.*)/.exec(t)||[])[1]}async function mD(t,e,r,n,i,o,s,a){var h;let{distro:c,cwd:l}=await jw(t,e,s),u=ec("wsl",["-d",c,"-e"],l),d=await Ql({extensionPath:r,localCacheFolder:n,package:await go(r),product:i,loadNativeModule:o,output:s,alternateDownload:a},u,l,!1),f=await tc({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((h=d.passwdUser)==null?void 0:h.shell)||"/bin/sh",remoteExec:d.exec});delete f.WSL_INTEROP,await d.setBaseEnv(f);let p=yo("wsl",l,f,d.exec,d.ptyExec,d.connect,d.nodeExecutable,s);return p.toCommonURI=async m=>{try{return Ee.file((await xe({exec:d.exec,cmd:"wslpath",args:["-w",m],output:s})).stdout.toString().trim())}catch{return}},p}async function jw(t,{defaultDistro:e},r){let n,i;return typeof t!="string"?(n=t.wslDistro,i=t.wslPath):Ht(t)?(n=vo(t),i=await Di(n,t,r)):(n=e||await Bp(r)||(()=>{throw new Error("No default WSL distro found.")})(),i=await Di(n,t,r)),{distro:n,cwd:i}}var yD=Y(require("path")),Vp=Y(require("net")),Gp=Y(require("os"));var gD=Y(require("os"));async function vD(t,e,r,n,i,o,s,a,c,l){var v;let u=t.substr(6),d=u.indexOf(":"),f=[(l==null?void 0:l.settings.executablePath)||"ssh"];(l==null?void 0:l.settings.configFilePath)&&f.push("-F",F9(l==null?void 0:l.settings.configFilePath)),d!==-1?f.push("-p",u.substr(d+1),u.substr(0,d)):f.push(u);let p=ec(f[0],f.slice(1),void 0,await(l==null?void 0:l.sshAskpassEnv)||{}),h=await Ql({extensionPath:n,localCacheFolder:i,package:await go(n),product:o,loadNativeModule:s,output:a,alternateDownload:c},p,e,!1),m=await tc({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:a},{shell:((v=h.passwdUser)==null?void 0:v.shell)||"/bin/sh",remoteExec:h.exec});await h.setBaseEnv(m);let g=yo("ssh",e,m,h.exec,h.ptyExec,h.connect,h.nodeExecutable,a);return g.toCommonURI=()=>Promise.resolve(void 0),g.reconnect=()=>h.reconnect(),g.terminate=()=>h.terminate(),g}function F9(t){return t.replace(/^~($|\/|\\)/,`${gD.homedir()}$1`)}function iu(t,e){let r=M9(t);if(!r)return;let n=r.hostName;if(r.user||r.hostName.toLowerCase()!==r.hostName||r.port||r.hostName.match(/[\/\\\+]/)){let i=JSON.stringify(r);n=Buffer.from(i,"utf8").toString("hex")}return Ee.parse(`vscode-remote://ssh-remote+${n}${e}`)}function M9(t){if(!t.startsWith("ssh://"))return;let e=t.substr(6),r=e.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(r){let[,n,i,o]=r;return{hostName:i,user:n,port:o?parseInt(o,10):void 0}}return{hostName:e}}var wD=kw(),Ns;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(Ns||(Ns={}));async function Tn(t,e,r,n,i,o,s,a,c,l){return(t==null?void 0:t.startsWith("ssh://"))&&!(l==null?void 0:l.localDocker)?vD(t,e,n,i,o,s,r,a,c,l):typeof e!="string"||n.executeInWSL==="forWSLPath"&&Ht(e)||n.executeInWSL==="always"?mD(e,n,i,o,s,r,a,c):$p(e,r,a)}async function $p(t,e,r){let n=Os(t),i=await CD(t,e);return q9(t,n,i,j9)}function yo(t,e,r,n,i,o,s,a){let c;return{type:t,platform:"linux",exec:n,ptyExec:i,cwd:e,env:r,path:yD.posix,async homedir(){var l;return typeof c=="undefined"&&(c=this.env.HOME||((l=Wp((await this.readFile("/etc/passwd")).toString(),(await this.getuid()).toString()))==null?void 0:l.home)||"/"),c},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async l=>{try{return await xe({exec:n,cmd:"test",args:["-f",l],output:it}),!0}catch(u){if((u==null?void 0:u.code)!==1)throw u;return!1}},isFolder:async l=>{try{return await xe({exec:n,cmd:"test",args:["-d",l],output:it}),!0}catch(u){if((u==null?void 0:u.code)!==1)throw u;return!1}},readFile:async l=>{try{return(await xe({exec:n,cmd:"cat",args:[l],output:it})).stdout}catch(u){let d=new Error(`Could not read file: ${l}`);throw d.originalError=u,d.code="ENOENT",d}},writeFile:async(l,u)=>{await xe({exec:n,cmd:"/bin/sh",args:["-c",`cat >'${l}'`],stdin:u,output:it})},rename:async(l,u)=>{await xe({exec:n,cmd:"mv",args:[l,u],output:it})},mkdirp:async l=>{await xe({exec:n,cmd:"mkdir",args:["-p",l],output:it})},readDir:async l=>(await xe({exec:n,cmd:"ls",args:["-a",l],output:it})).stdout.toString().trim().split(`
`).filter(u=>u!=="."&&u!==".."),readDirWithTypes:async l=>{let u={f:1,"*":1,"/":2,"@":64};return(await xe({exec:n,cmd:"ls",args:["-aF",l],output:it})).stdout.toString().trim().split(`
`).map(d=>"/*@=%|>".indexOf(d[d.length-1])!==-1?[d.substr(0,d.length-1),d[d.length-1]]:[d,"f"]).filter(([d])=>d!=="."&&d!=="..").map(([d,f])=>[d,u[f]||0])},getuid:async()=>{let l=await xe({exec:n,cmd:"id",args:["-u"],output:it});return parseInt(l.stdout.toString().trim(),10)},getgid:async()=>{let l=await xe({exec:n,cmd:"id",args:["-g"],output:it});return parseInt(l.stdout.toString().trim(),10)},toCommonURI:()=>Promise.resolve(void 0),connect:o,nodeExecutable:s}}function q9(t,e,r,n){return{type:"local",platform:process.platform,exec:e,ptyExec:r,cwd:t,env:process.env,path:yD,homedir:async()=>Gp.homedir(),tmpdir:async()=>Gp.tmpdir(),isFile:pt,isFolder:fl,readFile:Oe,writeFile:ya,rename:Ci,mkdirp:async i=>{await vr(i)},readDir:Yr,getuid:async()=>process.getuid(),getgid:async()=>process.getgid(),toCommonURI:async i=>Ee.file(i),connect:n}}function j9(t){if(process.platform!=="win32"||t.startsWith("\\\\.\\pipe\\"))return wD.duplex(Vp.connect(t));let e=new Vp.Socket;return(async()=>{let r=await Oe(t),n=r.indexOf(10),i=parseInt(r.slice(0,n).toString(),10),o=r.slice(n+1);e.connect(i,"127.0.0.1",()=>{e.write(o,s=>{s&&(console.error(s),e.destroy())})})})().catch(r=>{console.error(r),e.destroy()}),wD.duplex(e)}function ED(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var Uw=Vt.join(__dirname,"..","..","node_modules",".bin","ts-node"),Ti=Vt.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function xe(t){let{exec:e,cmd:r,args:n,cwd:i,env:o,stdin:s,output:a,print:c}=t,l=await e({cmd:r,args:n,cwd:i,env:o,output:a});return new Promise((u,d)=>{let f=[],p=[],h=c==="continuous"?new $w.StringDecoder:void 0;l.stdout.on("data",v=>{f.push(v),c==="continuous"&&a.write(h.write(v))}),l.stdout.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let m=c==="continuous"?new $w.StringDecoder:void 0;l.stderr.on("data",v=>{p.push(v),c==="continuous"&&a.write(Ne(m.write(v)))}),l.stderr.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let g=[];l.exit.then(({code:v})=>{try{g.forEach(b=>b.dispose());let w=Buffer.concat(f),C=Buffer.concat(p);(c===!0||v&&c==="onerror")&&(a.write(w.toString().replace(/\r?\n/g,`\r
`)),a.write(Ne(C.toString()))),c&&v&&a.write(`Exit code ${v}`),v?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:w,stderr:C,code:v}):u({stdout:w,stderr:C})}catch(w){d(w)}},d),s instanceof Buffer?(l.stdin.write(s,v=>{v&&d(v)}),l.stdin.end()):s instanceof bD.ReadStream?s.pipe(l.stdin):typeof s=="function"&&g.push(s(v=>l.stdin.write(v)))})}async function ho(t){let{ptyExec:e,cmd:r,args:n,cwd:i,env:o,output:s,resolveOn:a,onDidInput:c}=t,l=await e({cmd:r,args:n,cwd:i,env:o,output:s});return new Promise((u,d)=>{let f="",p=[c&&c(h=>l.write(h))];l.onData(h=>{f+=h,s.raw(h),a&&a.exec(f)&&u({cmdOutput:f})}),l.exit.then(({code:h,signal:m})=>{try{p.forEach(g=>g==null?void 0:g.dispose()),h||m?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,cmdOutput:f,code:h,signal:m}):u({cmdOutput:f})}catch(g){d(g)}},h=>{p.forEach(m=>m==null?void 0:m.dispose()),d(h)})})}function Os(t){return async function(e){let{cmd:r,args:n,output:i}=e,o=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,s=i.start(o),a=e.cwd||t,c=e.env?V(V({},process.env),e.env):process.env,l=await zp(r,a,c,i),u=rc.spawn(l,n,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((d,f)=>{u.once("error",p=>{i.stop(o,s),f(p)}),u.once("close",(p,h)=>{i.stop(o,s),d({code:p,signal:h})})}),async terminate(){u.kill("SIGKILL")}}}}async function CD(t,e){let r=await e("node-pty");if(!r)throw new Error("Missing node-pty");return async function(n){var m,g;let{cmd:i,args:o,output:s}=n,a=`Run: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),l=!1,u=n.cwd||t,d=n.env?V(V({},process.env),n.env):process.env,f=await zp(i,u,d,s),p=r.spawn(f,o||[],{cwd:u,env:d,cols:(m=s.dimensions)==null?void 0:m.columns,rows:(g=s.dimensions)==null?void 0:g.rows,useConpty:l}),h=[s.onDidChangeDimensions&&s.onDidChangeDimensions(v=>p.resize(v.columns,v.rows))];return{onData:p.onData.bind(p),write:p.write.bind(p),resize:p.resize.bind(p),exit:new Promise(v=>{p.onExit(({exitCode:w,signal:C})=>{if(h.forEach(b=>b==null?void 0:b.dispose()),s.stop(a,c),v({code:w,signal:C}),process.platform==="win32")try{p.kill()}catch{}})}),async terminate(){p.kill("SIGKILL")}}}}function ec(t,e,r,n){return async function(i){let{env:o,cmd:s,args:a,output:c}=i,l=i.cwd||r,u=l?`cd '${l}' && `:"",d=Object.keys(o||{}).map(b=>`${b}='${o[b]}' `).join(""),f=(a||[]).map(b=>` '${b.replace(/'/g,`'"'"'`)}'`).join(""),p=`${u}${d}${s}${f}`,h=p!==s?["/bin/sh","-c",p]:[p],m=[...e,...h],g=`Run: ${t} ${m.join(" ").replace(/\n.*/g,"")}`,v=c.start(g),w=await zp(t,process.cwd(),process.env,c),C=rc.spawn(w,m,{windowsHide:!0,env:n?V(V({},process.env),n):void 0});return{stdin:C.stdin,stdout:C.stdout,stderr:C.stderr,exit:new Promise((b,S)=>{C.once("error",P=>{c.stop(g,v),S(P)}),C.once("close",(P,_)=>{c.stop(g,v),b({code:P,signal:_})})}),async terminate(){C.kill("SIGKILL")}}}}async function _D(t,e,r,n){let i=await n("node-pty");if(!i)throw new Error("Missing node-pty");return async function(o){var P,_;let{env:s,cmd:a,args:c,output:l}=o,u=o.cwd||r,d=u?`cd '${u}' && `:"",f=Object.keys(s||{}).map(k=>`${k}='${s[k]}' `).join(""),p=(c||[]).map(k=>` '${k.replace(/'/g,`'"'"'`)}'`).join(""),h=`${d}${f}${a}${p}`,m=[...e,"/bin/sh","-c",h],g=`Run: ${t} ${m.join(" ").replace(/\n.*/g,"")}`,v=l.start(g),w=!1,C=await zp(t,process.cwd(),process.env,l),b=i.spawn(C,m,{cols:(P=l.dimensions)==null?void 0:P.columns,rows:(_=l.dimensions)==null?void 0:_.rows,useConpty:w}),S=[l.onDidChangeDimensions&&l.onDidChangeDimensions(k=>b.resize(k.columns,k.rows))];return{onData:b.onData.bind(b),write:b.write.bind(b),resize:b.resize.bind(b),exit:new Promise(k=>{b.onExit(({exitCode:T,signal:A})=>{if(S.forEach(M=>M==null?void 0:M.dispose()),l.stop(g,v),k({code:T,signal:A}),process.platform==="win32")try{b.kill()}catch{}})}),async terminate(){b.kill("SIGKILL")}}}}async function zp(t,e=process.cwd(),r,n){if(process.platform!=="win32")return t;if(Vt.isAbsolute(t))return await ou(t)||t;if(/[/\\]/.test(t)){let a=Vt.join(e,t);return await ou(a)||a}let i,o;if(r){for(let a of Object.keys(r))if(a.toLowerCase()==="path"){let c=r[a];typeof c=="string"&&(i=c,o=c.split(Vt.delimiter).filter(Boolean),o.push(Vt.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(o===void 0||o.length===0){n.write(`findLocalWindowsExecutable: No PATH to look up exectuable '${t}'.`);let a=Vt.join(e,t);return await ou(a)||a}for(let a of o){let c;Vt.isAbsolute(a)?c=Vt.join(a,t):c=Vt.join(e,a,t);let l=await ou(c);if(l)return l}n.write(`findLocalWindowsExecutable: Exectuable '${t}' not found on PATH '${i}'.`);let s=Vt.join(e,t);return await ou(s)||s}var SD=process.env.PATHEXT,xD=SD?SD.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function ou(t){if(xD.indexOf(Vt.extname(t))!==-1)return await pt(t)?t:void 0;for(let e of xD){let r=t+e;if(await pt(r))return r}}function Ls(t){let e=/^'?v?(\d+(\.\d+)*)/.exec(t);if(!!e)return e[1].split(".").map(r=>parseInt(r,10))}function nc(t,e){for(let r=0,n=Math.max(t.length,e.length);r<n;r++){let i=t[r]||0,o=e[r]||0;if(i!==o)return i<o}return!1}var PD=Ti?(t,e,r)=>rc.spawn(Uw,[t,...e||[]],se(V({},r),{windowsHide:!0})):rc.fork;async function kD(t,e){if(!e){try{return require(t)}catch{}return}try{return require(`${e}/node_modules.asar/${t}`)}catch{}try{return require(`${e}/node_modules/${t}`)}catch{}}function su(t){let{output:e}=t,r=[];return{output:er(se(V({},e),{get dimensions(){return e.dimensions},event:i=>r?r.push(i):e.event(i)})),flush:()=>{r&&(r.forEach(i=>e.event(i)),r=void 0)}}}function ID(t,e,r){return er(se(V({},t),{get dimensions(){return t.dimensions},event:i=>{i.channel===e&&t.event(i),r.event(i)}}))}function Kp(t,e){return typeof e!="string"&&"win32"in e?t==="win32"?e.win32:e.posix:e}async function Xl(t,e){return Kp(t.platform,{posix:async()=>{try{return await t.exec(`test -f '${e}'`),!0}catch{return!1}},win32:async()=>(await t.exec(`Test-Path '${e}' -PathType Leaf`)).stdout.trim()==="True"})()}var Br="\u2404";async function Ai(t,e,r,n="linux",i="Container"){let o=typeof t=="function",s=n==="win32",a=o?await t({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:s?"powershell":"/bin/sh",args:s?["-NoProfile","-Command","-"]:[],output:e}):t;if(!o){let f=s?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${Br}; /bin/sh'
`;a.stdin.write(f),await new Promise(h=>{let m="",g=new Bw.StringDecoder;a.stdout.on("data",function v(w){m+=g.write(w),m.includes(f)&&(a.stdout.off("data",v),h())})})}let c=U9(a),l;async function u(f,p){let h=l=(async()=>{try{await l}catch{}return d(Kp(n,f),p)})();try{return await Promise.race([h,c.unexpectedExit])}finally{c.disposeStdioListeners(),l===h&&(l=void 0)}}async function d(f,p){let h=`Run in ${i.toLowerCase()}: ${f.replace(/\n.*/g,"")}`,m;if((p==null?void 0:p.logOutput)!=="silent"&&(m=e.start(h,p==null?void 0:p.logLevel)),a.stdin.destroyed){e.write("Stdin closed!");let{code:_,signal:k}=await a.exit;return Promise.reject({message:`Shell server terminated (code: ${_}, signal: ${k})`,code:_,signal:k})}n==="win32"?a.stdin.write(`[Console]::Write('${Br}'); ( ${f} ); [Console]::Write("${Br}$LastExitCode ${Br}"); [Console]::Error.Write('${Br}')
`):a.stdin.write(`echo -n ${Br}; ( ${f} ); echo -n ${Br}$?${Br}; echo -n ${Br} >&2
`);let[g,v]=TD(a.stdout,[1,2],(p==null?void 0:p.logOutput)==="continuous"?(_,k,T)=>{k===1&&T===0&&e.write(_,p==null?void 0:p.logLevel)}:()=>{}),w=TD(a.stderr,[1],(p==null?void 0:p.logOutput)==="continuous"?(_,k,T)=>{k===0&&T===0&&e.write(_,p==null?void 0:p.logLevel)}:()=>{})[0];(p==null?void 0:p.stdin)&&(await g,a.stdin.write(p==null?void 0:p.stdin));let[C,b]=await v,[S]=await w,P=parseInt(b,10)||0;return((p==null?void 0:p.logOutput)===void 0||(p==null?void 0:p.logOutput)===!0)&&(e.write(C,p==null?void 0:p.logLevel),e.write(S,p==null?void 0:p.logLevel),P&&e.write(`Exit code ${P}`,p==null?void 0:p.logLevel)),(p==null?void 0:p.logOutput)==="continuous"&&P&&e.write(`Exit code ${P}`,p==null?void 0:p.logLevel),(p==null?void 0:p.logOutput)!=="silent"&&e.stop(h,m,p==null?void 0:p.logLevel),P?Promise.reject({message:`Command in ${i.toLowerCase()} failed: ${f}`,code:P,stdout:C,stderr:S}):{stdout:C,stderr:S}}return{exec:u,process:a,platform:n,path:Kp(n,$9)}}function TD(t,e,r){let n=e.map(()=>{let u,d=new Promise((f,p)=>u={resolve:f,reject:p});return V({promise:d},u)}),i=new Bw.StringDecoder("utf8"),o=[],s=0,a=[];function c(u){let d=i.write(u);l(d)}function l(u){let d=u.indexOf(Br);if(d!==-1){let f=u.substr(0,d);o.push(f),r(f,s,a.length),a.push(o.join("")),o.length=0,a.length===e[s]&&(n[s].resolve(a),s++,a=[],s===e.length&&t.off("data",c)),d+1<u.length&&l(u.substr(d+1))}else o.push(u),r(u,s,a.length)}return t.on("data",c),n.map(u=>u.promise)}function U9(t){let e,r=new Promise((c,l)=>e=l),n=[],i=[],o=c=>n.push(c),s=c=>i.push(c);return t.stdout.on("data",o),t.stderr.on("data",s),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(n).toString()}
${Buffer.concat(i).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{t.stdout.off("data",o),t.stderr.off("data",s),n.length=0,i.length=0}}}var AD=Y(require("path"));var B9=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function Hw(t,e,r,n,i){let{repository:o,installCommand:s,targetPath:a}=t.dotfilesConfiguration;if(o=i["remote.containers.dotfiles.repository"]||i["dotfiles.repository"]||o,s=i["remote.containers.dotfiles.installCommand"]||i["dotfiles.installCommand"]||s,a=i["remote.containers.dotfiles.targetPath"]||i["dotfiles.targetPath"]||a,!o)return;await n;let c=await r;o.indexOf(":")===-1&&!/^\.{0,2}\//.test(o)&&(o=`https://github.com/${o}.git`);let l=e.shellServer,u=V9(e),d=Object.keys(c).filter(f=>!(f.startsWith("BASH_FUNC_")&&f.endsWith("%%"))).reduce((f,p)=>`${f}${p}=${H9(c[p])} `,"");try{t.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await l.exec(`# Clone & install dotfiles
${Yp(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${o} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${d}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:ce.Info}):await l.exec(`# Clone & install dotfiles
${Yp(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${o} ${a} || exit $?
cd ${a}
for f in ${B9.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${d}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:ce.Info}),t.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{t.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function H9(t){return`'${(t||"").replace(/'+/g,`'"$&"'`)}'`}function V9(t){return AD.posix.join(on(t),".dotfilesMarker")}var GD=Y(require("net")),WD=Y(VD());async function Yw({forwardedPorts:t,output:e,getLogLevel:r},n,i,o){e.write(`Port forwarding for container port ${i} starts listening on local port.`,ce.Debug);let s=o?{VSCODE_REMOTE_CONTAINERS_SESSION:o}:void 0;return new Promise((a,c)=>{let l=new Set,u=GD.createServer({pauseOnConnect:!0},d=>{let f=d.remotePort,p=u.address().port;e.write(`Port forwarding connection from ${f} > ${p} > ${i} in the container.`),r()===ce.Trace&&(async()=>{let h=await(0,WD.default)("port",f);e.write(`Port forwarding process for ${f} > ${p} > ${i} in the container:
${JSON.stringify(h,void 0,"  ")}`)})().catch(console.error),X9(e,n,[n.nodeExecutable,"-e",`
				const net = require('net');
				process.stdin.pause();
				const client = net.createConnection({ port: ${i} }, () => {
					console.error('Connection established');
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
			`],s).then(h=>{let m;h.exit.then(({code:g,signal:v})=>{m||(l.delete(d),d.end()),e.write(`Port forwarding ${f} > ${p} > ${i} terminated${m?` by extension (${m})`:""} with code ${g} and signal ${v}.`)},g=>{l.delete(d),d.end(),e.write(`Port forwarding ${f} > ${p} > ${i} terminated with error: ${g&&g.message||String(g)}`)}),h.stderr.on("data",g=>{e.write(`Port forwarding ${f} > ${p} > ${i} stderr: ${g.toString("utf8")}`,ce.Debug)}),d.on("close",g=>{e.write(`Port forwarding ${f} > ${p} > ${i}: Local close${g?" with error":""}`,ce.Debug),l.delete(d),m="closed",h.stdin.end(),setTimeout(()=>{m="killed",h.terminate().catch(console.error)},5e3)}),h.stdout.pipe(d),d.pipe(h.stdin),l.add(d)}).catch(console.error)});u.on("listening",()=>{let d={targetPort:i,server:u,connections:l};u.on("close",()=>{t.delete(d)}),t.add(d),e.write(`Port forwarding local port ${u.address().port} to container port ${i}`),a(u)}),u.on("error",d=>{if(d&&(d.code==="EADDRINUSE"||d.code==="EACCES")){u.listen(0,"127.0.0.1");return}c(d)}),u.on("close",()=>{c(new Error("Closed"))}),u.listen(i,"127.0.0.1")})}async function X9(t,e,r,n){return e.remoteExec({env:n,cmd:r[0],args:r.slice(1),output:t})}var ic=Y(require("path"));function oc(t,e){let r,n=t.platform==="win32",i=se(V({},t),{get env(){return r||(r=zD(n,t.env))}}),o=tK.bind(void 0,n,i);return t.containerWorkspaceFolder&&(i.containerWorkspaceFolder=KD(o,t.containerWorkspaceFolder)),Xp(o,e)}function Jw(t,e,r,n){let i=t==="win32";return Xp(rK.bind(void 0,i,e,zD(i,r)),n)}function Xp(t,e){if(typeof e=="string")return KD(t,e);if(Array.isArray(e))return e.map(r=>Xp(t,r));if(e&&typeof e=="object"){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n]=Xp(t,e[n])}),r}return e}var Z9=/\$\{(.*?)\}/g;function zD(t,e){if(t){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n.toLowerCase()]=e[n]}),r}return e}function KD(t,e){return e.replace(Z9,eK.bind(void 0,t))}function eK(t,e,r){let n,i=r.split(":");return i.length>1&&(r=i[0],n=i[1]),t(e,r,n)}function tK(t,e,r,n,i){switch(n){case"env":case"localEnv":return YD(t,e.env,i,r,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:r;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?ic.win32:ic.posix).basename(e.localWorkspaceFolder):r;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:r;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?ic.posix.basename(e.containerWorkspaceFolder):r;default:return r}}function rK(t,e,r,n,i,o){switch(i){case"containerEnv":return YD(t,r,o,n,e);default:return n}}function YD(t,e,r,n,i){if(r){t&&(r=r.toLowerCase());let o=e[r];return typeof o=="string"?o:""}throw new ge({description:`'${n}'${i?` in ${ic.posix.basename(i.path)}`:""} can not be resolved because no environment variable name is given.`})}async function ti(t){return new Promise(e=>setTimeout(e,t))}var Co=0,ZD=/Extension host agent listening on (\d+)/;var tr;(function(a){a[a.Begin=0]="Begin",a[a.CloningRepository=1]="CloningRepository",a[a.BuildingImage=2]="BuildingImage",a[a.StartingContainer=3]="StartingContainer",a[a.InstallingServer=4]="InstallingServer",a[a.StartingServer=5]="StartingServer",a[a.End=6]="End"})(tr||(tr={}));var Xw="updateContentCommand";async function th(t){let{params:e,createdAt:r,startedAt:n,sharedDataFolder:i,sharedDataFolderIsLocalCacheFolder:o,remoteWorkspaceFolder:s,containerUser:a,containerGroup:c,containerEnv:l,remoteExec:u,remotePtyExec:d,remoteExecAsRoot:f,rootShellServer:p}=t,h;if(p&&a==="root"?h=p:h=await Ai(u,e.output,e.sessionId),!l){let H=(await h.exec("echo $PATH")).stdout.trim();l=H?{PATH:H}:{}}a||(a=await Dw(h)),!f&&a==="root"&&(f=u);let m=await Fw(h),g=await Rw(h,a);g||e.output.write(Vy(`User ${a} not found in /etc/passwd.`));let v=await nK(l,g),w=await eR(l,g),C=Ow(w,e.product),{commit:b,quality:S}=e.product,P=b&&await iK(C,b,S||"insider",e.web),_=Lw(m,S==="stable"),k=b&&i&&await tR(he.posix,i,_,b,S||"insider",e.web),T=P&&await sK(P),A;p?A=Promise.resolve(p):a==="root"&&(A=Promise.resolve(h));let M={createdAt:r,startedAt:n,osRelease:m,build:_,user:a,gid:c||(g==null?void 0:g.gid),env:l,shell:v,homeFolder:w,userDataFolder:C,sharedDataFolderIsLocalCacheFolder:o,sharedDataFolder:i,installFolder:P,sharedInstallFolder:k,remoteWorkspaceFolder:s,nodeExecutable:T,remoteExec:u,remotePtyExec:d,remoteExecAsRoot:f,shellServer:h};return(A||f)&&(M.launchRootShellServer=()=>A||(A=Ai(f,e.output))),M}async function Dw(t){return(await t.exec("id -un")).stdout.trim()}async function eR(t,e){return t.HOME||e&&e.home||"/root"}async function nK(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function Rw(t,e){let{stdout:r}=await t.exec("cat /etc/passwd",{logOutput:!1});return Wp(r,e)}function Wp(t,e){return t.split(/\r?\n/).map(n=>n.split(":")).map(n=>({name:n[0],uid:n[2],gid:n[3],home:n[5],shell:n[6]})).find(n=>n.name===e||n.uid===e)}async function iK(t,e,r,n){return he.posix.join(t,"bin",`${e}${r==="stable"?"":`-${r}`}${n?"-web":""}`)}async function tR(t,e,r,n,i,o){return t.join(e,"bin",r.id,`${n}${i==="stable"?"":`-${i}`}${o?"-web":""}`)}function rR(t){return he.posix.join(t.userDataFolder,"extensions")}function on(t){return he.posix.join(typeof t=="string"?t:t.userDataFolder,"data/Machine")}function rh(t){return he.posix.join(t.userDataFolder,"data/Machine/settings.json")}function oK(t){return he.posix.join(t,".vscode-remote")}function Ow(t,e){return he.posix.join(t,e.serverDataFolderName)}function sc(t){return he.posix.join("/var",/^\.*(.*)$/.exec(t)[1])}async function sK(t){return he.posix.join(t,"node")}async function nh(t,e,r,n,i=Co){var w;await nR(t,e),await PK(t,e),await kK(t,e);let o=await iR(t,e,r,n),{serverDownloaded:s}=await oR(t,e),a,c,l=Promise.resolve(),u;if(!t.cliMode&&e.nodeExecutable){let C=await Jl(t,e);a=C.remoteContainersCLI,c=C.remoteEnv,l=C.ready,u=C.mrpcExec;let b=t.cliHost.reconnect;b&&(t.cliHost.reconnect=async()=>{await b(),C.reconnect().catch(S=>t.output.write(Ne(S&&(S.stack||S.message)||String(S))))})}let f=t.computeExtensionHostEnv||e.installFolder&&t.cliMode||t.postCreate.enabled?tc(t,e,r,u).then(C=>V(V(V(V({},C),c),t.cliMode?{}:{REMOTE_CONTAINERS:"true"}),r.remoteEnv?Jw(t.cliHost.platform,r.configFilePath,e.env,r.remoteEnv):{})):Promise.resolve({}),p=(w=o["remote.containers.gitCredentialHelperConfigLocation"])!=null?w:t.credentialHelperConfigLocation;!t.cliMode&&e.nodeExecutable&&(await Fs(t,e,[".ssh","known_hosts"],"ssh"),p!=="none"&&await ac(e,a,t.output,"system"));let h,m,g,v;if(e.installFolder){let b=await fR(t,e,i,u,async()=>cR(t,e,async()=>{var _,k;return Array.from(new Set([...((_=r.vscode)==null?void 0:_.extensions)||[],...((k=await n())==null?void 0:k.allFeatures.filter(T=>(ru||T.included)&&T.value).reduce((T,A)=>{var M;return T.concat(((M=A.vscode)==null?void 0:M.extensions)||[])},[]))||[]]))}),f),S=b.serverPort;g=b.connectionToken,v=b.webConnectionToken,h=S,t.forwardServerPort&&e.nodeExecutable&&(m=await Yw(t,e,S,t.sessionId),h=m.address().port,t.backgroundTasks.push(async()=>gR(t,e,r)))}if(t.postCreate.enabled){let C,b=!1,S=new Promise(_=>C=()=>{b=!0,_()}),P=(async()=>{var _;if((r.waitFor||Xw)==="initializeCommand"&&C(),!(t.postCreate.skipNonBlocking&&b)&&(await eC(t,e,r,"onCreateCommand",f,l,!1,C),!(t.postCreate.skipNonBlocking&&b)&&(await eC(t,e,r,"updateContentCommand",f,l,!!t.prebuild,C),!(t.postCreate.skipNonBlocking&&b)))){if(!t.prebuild){if(await eC(t,e,r,"postCreateCommand",f,l,!1,C),t.postCreate.skipNonBlocking&&b||(await Hw(t,e,f,l,o),!t.cliMode&&e.nodeExecutable&&(((_=o["remote.containers.copyGitConfig"])!=null?_:t.isCopyGitConfigEnabled)&&(await Fs(t,e,[".gitconfig"],"git"),await sh(t,e,f.then(k=>V(V({},e.env),k)))),await ac(e,a,t.output,p)),await wK(t,e,r,f,l,C),t.postCreate.skipNonBlocking&&b))return;await CK(t,e,r,f,l,C)}t.postCreate.done()}})();t.backgroundTasks.push(P),await Promise.race([S,P])}return{hostOrContainerPort:h,hostPortServer:m,connectionToken:g,webConnectionToken:v,remoteEnv:t.computeExtensionHostEnv?await f:{},serverDownloaded:s}}async function ih(t,e,r,n,i=Co,o){var C;await nR(t,e);let s=await iR(t,e,r,n),{serverDownloaded:a}=await oR(t,e),c,l,u=Promise.resolve(),d;if(!t.cliMode&&e.nodeExecutable){let b=await Jl(t,e);c=b.remoteContainersCLI,l=b.remoteEnv,u=b.ready,d=b.mrpcExec;let S=t.cliHost.reconnect;S&&(t.cliHost.reconnect=async()=>{await S(),b.reconnect().catch(P=>t.output.write(Ne(P&&(P.stack||P.message)||String(P))))})}let p=t.computeExtensionHostEnv||e.installFolder&&t.cliMode||t.postCreate.enabled?tc(t,e,r,d).then(b=>V(V(V(V({},b),l),t.cliMode?{}:{REMOTE_CONTAINERS:"true"}),r.remoteEnv?Jw(t.cliHost.platform,r.configFilePath,e.env,r.remoteEnv):{})):Promise.resolve({}),h=(C=s["remote.containers.gitCredentialHelperConfigLocation"])!=null?C:t.credentialHelperConfigLocation;!t.cliMode&&e.nodeExecutable&&(await Fs(t,e,[".ssh","known_hosts"],"ssh"),h!=="none"&&await ac(e,c,t.output,"system"));let m,g,v,w;if(e.installFolder){let S=await fR(t,e,i,d,async()=>cR(t,e,async()=>{var k,T;return Array.from(new Set([...((k=r.vscode)==null?void 0:k.extensions)||[],...((T=await n())==null?void 0:T.allFeatures.filter(A=>(ru||A.included)&&A.value).reduce((A,M)=>{var H;return A.concat(((H=M.vscode)==null?void 0:H.extensions)||[])},[]))||[]]))}),p),P=S.serverPort;v=S.connectionToken,w=S.webConnectionToken,m=P,t.forwardServerPort&&e.nodeExecutable&&(g=await Yw(t,e,P,t.sessionId),m=g.address().port,t.backgroundTasks.push(async()=>gR(t,e,r)))}if(t.postCreate.enabled){let b,S=new Promise(_=>b=()=>{_()}),P=(async()=>{var T;let _=V(V({},l),t.cliMode?{}:{REMOTE_CONTAINERS:"true"}),k=["onCreateCommand","updateContentCommand","postCreateCommand","postStartCommand","postAttachCommand"];if(t.prebuild){let A=k.indexOf("updateContentCommand");if((!k.slice(0,A+1).some(J=>r[J])?"prebuild":await o(!1,!1,!0,_))!=="prebuild")throw new Error('"prebuild" expected')}else{let A=!0,M=!0,H=k.indexOf(r.waitFor||Xw),J=k.indexOf("postCreateCommand"),K=H<=J&&!k.slice(0,H+1).some(F=>r[F]),oe=!k.slice(0,J+1).some(F=>r[F]),te=K?"skipNonBlocking":oe?"stopForPersonalization":await o(A,M,!1,_);if(te==="skipNonBlocking"){if(b(),t.postCreate.skipNonBlocking)return;A=!1,te=!k.slice(H+1,J+1).some(L=>r[L])?"stopForPersonalization":await o(A,M,!1,_)}if(te==="stopForPersonalization"){await Hw(t,e,p,u,s),!t.cliMode&&e.nodeExecutable&&(((T=s["remote.containers.copyGitConfig"])!=null?T:t.isCopyGitConfigEnabled)&&(await Fs(t,e,[".gitconfig"],"git"),await sh(t,e,p.then(q=>V(V({},e.env),q)))),await ac(e,c,t.output,h)),M=!1;let F=H>J&&!k.slice(J+1,H+1).some(q=>r[q]),L=!k.slice(J+1).some(q=>r[q]);te=F?"skipNonBlocking":L?"done":await o(A,M,!1,_)}if(te==="skipNonBlocking"){if(b(),t.postCreate.skipNonBlocking)return;A=!1,te=!k.slice(H+1).some(L=>r[L])?"done":await o(A,M,!1,_)}if(te!=="done")throw new Error('"done" expected')}})();P.then(()=>{t.postCreate.done()},_=>{t.postCreate.done(_)}),t.backgroundTasks.push(P),await Promise.race([S,P])}return{hostOrContainerPort:m,hostPortServer:g,connectionToken:v,webConnectionToken:w,remoteEnv:t.computeExtensionHostEnv?await p:{},serverDownloaded:a}}async function nR(t,e){let r=oK(e.homeFolder);!await ch(e.shellServer,e.userDataFolder)&&await ch(e.shellServer,r)&&await Ri(t,e,["/bin/sh","-c",`cp -r '${r}' '${e.userDataFolder}'`])}async function iR(t,e,r,n){var a,c;let i=on(e),o=he.posix.join(i,".writeMachineSettingsMarker"),s=rh(e);if(await ah(e.shellServer,o)){let l=Object.assign({},...((a=await n())==null?void 0:a.allFeatures.filter(u=>{var d;return(ru||u.included)&&u.value&&((d=u.vscode)==null?void 0:d.settings)}).map(u=>{var d;return(d=u.vscode)==null?void 0:d.settings}))||[],(c=r.vscode)==null?void 0:c.settings);if(aK(l,r.portsAttributes),cK(l,r.otherPortsAttributes),Object.keys(l).length)return await e.shellServer.exec(`mkdir -p '${he.posix.dirname(s)}' && cat >'${s}' <<'settingsJSON'
${JSON.stringify(l,null,"	")}
settingsJSON
`),l}try{let{stdout:l}=await e.shellServer.exec(`cat ${s}`);return Xe(l)||{}}catch{return{}}}function aK(t,e){if(!t||!e)return;let r="remote.portsAttributes";if(!t[r]){t[r]=e;return}for(let n in e)t[r][n]||(t[r][n]=e[n])}function cK(t,e){if(!t||!e)return;let r="remote.otherPortsAttributes";t[r]||(t[r]=e)}async function oh(t,e,r,n){let i=typeof t.gid=="string"?`${t.user}:${t.gid}`:t.user,o=await e();if((await o.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let c=he.posix.dirname(r);c!=="/"&&await o.exec(`chown ${i} ${c}`),r!=="/"&&await o.exec(`chown -R ${i} ${r}`)}else if(n&&(await o.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let u=he.posix.dirname(n);u!=="/"&&await o.exec(`chown -R ${i} ${u}`)}}async function ac(t,e,r,n){if((e||Ti)&&n!=="none"){let i=n==="system"?t.launchRootShellServer&&await t.launchRootShellServer():t.shellServer;i?await i.exec(`command -v git >/dev/null 2>&1 && git config --${n} --replace-all credential.helper '!f() { ${t.nodeExecutable} ${e} $*; }; f' || true`):r.write("Cannot configure system wide Git credential helper without root access.")}}async function Fs(t,e,r,n){let{cliHost:i}=t,o=i.path.join(await i.homedir(),...r),s=he.posix.join(e.homeFolder,...r);await Ka(t,e,o,s,n)}async function sh(t,e,r){let{cliHost:n}=t,{env:i}=n,o=["git","config"],s=i.XDG_CONFIG_HOME?[i.XDG_CONFIG_HOME]:[await n.homedir(),".config"],a=n.path.join(...s,...o),c=(async()=>{let l=await r,u=l.XDG_CONFIG_HOME?[l.XDG_CONFIG_HOME]:[e.homeFolder,".config"];return he.posix.join(...u,...o)})();await Ka(t,e,a,c,"git")}async function Ka(t,e,r,n,i){let o=await lK(t.cliHost,r);if(o)try{let s=await n;await e.shellServer.exec(`# Test for ${s} and ${i}
[ -e ${s} ] && echo ${s} exists && exit 1
command -v ${i} >/dev/null 2>&1 || (echo ${i} not found && exit 1) || exit 1
mkdir -p ${he.posix.dirname(s)}`),await e.shellServer.exec(`# Copy ${r} to ${s}
${rC(o.byteLength)} >${s}`,{stdin:o})}catch(s){if(s&&s.code!==1)throw s}}async function lK(t,e){try{return await t.readFile(e)}catch(r){if(r&&(r.code==="ENOENT"||r.code==="EISDIR"))return;throw r}}async function oR(t,e){let{commit:r}=t.product,{installFolder:n,shellServer:i,launchRootShellServer:o,build:s}=e;if(!(r&&n))return{serverDownloaded:void 0};uK(e.osRelease,s),s.preview&&t.output.write(`\r
[1mSupport for ${s.label} is in preview.[22m\r
\r
`);let a=await ch(i,n),c;a||s===uR[s.arch]&&(o?c=(await o()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):c=i.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`));let l=e.sharedInstallFolder;if(l&&await ch(i,l))return a||await i.exec(`mkdir -p '${he.posix.dirname(n)}' && ln -snf '${l}' '${n}'`),o&&(async()=>{await(await o()).exec(`touch '${l}'`)})().catch(console.error),await c,{serverDownloaded:!1};if(a)return{serverDownloaded:!1};t.progress(4),t.output.write(`Installing VS Code Server for commit ${r}\r
`);let u=!!(l&&o),d=u?l:n,f=u?await o():i,p={localCacheFolder:t.localCacheFolder,build:s,commit:r,quality:t.product.quality||"insider",web:t.web,output:t.output,alternateDownload:t.alternateDownload},h=eu(p),m=await pt(h);m||await Up(p);try{e.sharedDataFolderIsLocalCacheFolder?await sR(p):await Zl(t,f,h,d)}catch(g){if(g&&g.stderr&&/unexpected end of file|not in gzip format/i.test(g.stderr.toString()))await Up(p),e.sharedDataFolderIsLocalCacheFolder?await sR(p):await Zl(t,f,h,d);else throw g}return u&&(await i.exec(`mkdir -p '${he.posix.dirname(n)}' && ln -snf '${l}' '${n}'`),(async()=>{await f.exec(`cd '${he.posix.dirname(l)}' && ls -t | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await c,{serverDownloaded:!m}}function uK(t,e){let r=t.version;if(e.minVersion&&r){let n=Ls(r.trim());if(n&&nc(n,e.minVersion)){let i=`${e.label} ${e.minVersion.join(".")} or later required.`;throw new ge({description:i,data:{reload:!1}})}}}async function Up(t){let{build:e,commit:r,quality:n,web:i,output:o}=t,s="Downloading VS Code Server",a=o.start(s);o.write(`${r} ${e.id} ${n} ${i?"web":""}`);let c=eu(t);await vr(he.dirname(c));let l=`https://update.code.visualstudio.com/commit:${r}/server-${e.id}${i?"-web":""}/${n}`;try{let u=`${c}_${Date.now()}`;await new Promise((d,f)=>{let p=Zp.createWriteStream(u);JD.https.get(l,m=>{if(m.statusCode<200||m.statusCode>299){f(new ge({description:"Downloading the VS Code Server failed. Please try again later.",originalError:`Failed to download VS Code Server (${l}): HTTP ${m.statusCode} - ${m.statusMessage}`}));return}m.on("error",f),m.pipe(p),m.on("end",d)}).on("error",f)}),await Ci(u,c)}catch(u){if(t.alternateDownload){o.write(u&&(u.originalError||u.message)),o.write("Retrying to download VS Code Server.");let d=`${c}_${Date.now()}`;await t.alternateDownload(l,d),await Ci(d,c)}else throw u||new Error("Failed to download VS Code Server.")}finally{o.stop(s,a)}}async function Zl(t,e,r,n,i,o=!0){let s="Installing VS Code Server",a=t.output.start(s);try{let c=`${n}_${Date.now()}`;if(await e.exec(`mkdir -p ${c}`),i)typeof r=="string"&&r.endsWith(".zip")?await e.exec(`unzip ${r} -d ${c}`):await e.exec(`cat ${r} | tar --no-same-owner -x${o?"z":""} -C ${c}`);else{let l=typeof r=="string"?await Oe(r):r;await e.exec(`${rC(l.byteLength)} | tar --no-same-owner -x${o?"z":""} -C ${c}`,{stdin:l})}await e.exec(`mv -n ${he.posix.join(c,"*",".")} ${n} && rmdir ${c}`)}finally{t.output.stop(s,a)}}async function sR(t){let{localCacheFolder:e,build:r,commit:n,quality:i,web:o,output:s}=t,a="Unpacking VS Code Server",c=s.start(a);s.write(`${n} ${r.id} ${i} ${o?"web":""}`);try{let l=await tR(he,e,r,n,i,o),u=`${l}_${Date.now()}`;await vr(u);let d=eu(t);await(await Os(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",d,"--strip-components","1","-C",u],cwd:process.cwd(),output:s})).exit,await pv(l,{recursive:!0}),await Ci(u,l)}finally{s.stop(a,c)}}function eu(t){let{localCacheFolder:e,build:r,commit:n,quality:i,web:o}=t,s=he.join(e,"serverCache",n),a=`vscode-server-${r.id}${i==="stable"?"":`-${i}`}${o?"-web":""}${r.archiveExt||".tar.gz"}`;return he.join(s,a)}async function aR(t,e){let r={VSCODE_AGENT_FOLDER:e.userDataFolder},{stdout:n}=await Ri(t,e,[he.posix.join(e.installFolder,...nu(t.product)),...pR(e.userDataFolder),...mR(t.telemetry),"--list-extensions"],e.installFolder,{remoteEnv:r});return n.toString().split(`
`).filter(i=>!!i)}async function cR(t,e,r){let n="Preparing Extensions",i=t.output.start(n),{sharedDataFolder:o}=e,s=o?gK(o):void 0,a=lR(e),c=await dK(t,e,r);if(e.sharedDataFolderIsLocalCacheFolder)e.shellServer.exec(`mkdir -p '${s}' && ln -s -T '${s}' '${a}' || true`),e.launchRootShellServer&&(await e.launchRootShellServer()).exec(`chown -R ${e.user} ${s}`);else{let l=mK(t.localCacheFolder),u=await fK(t,e,l,s,a,[...c.builtinExtensions,...c.extensions]);pK(t,e,l,s,a,u).catch(console.error)}return t.output.stop(n,i),c}async function dK(t,e,r){let n=on(e),i=he.posix.join(n,".installExtensionsMarker"),o=!await ah(e.shellServer,i),s=o?[]:t.installBuiltinExtensions||[],a=await t.getAdditionalExtensionsToInstall(o),c=o?[]:await r();for(let u of a)c.indexOf(u)===-1&&c.push(u);let l=[].concat(...s.map(u=>["--install-builtin-extension",u]),...c.map(u=>["--install-extension",u]));return t.cliMode&&l.length&&l.push("--do-not-sync"),{builtinExtensions:s,extensions:c,args:l}}async function fK(t,e,r,n,i,o){t.output.write(`Extensions cache, install extensions: ${o.join(", ")||"None"}`);let{shellServer:s}=e,a=(await s.exec(`test -d ${i} && ls ${i} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(n){let c=(await s.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(u=>!!u),l=c.filter(u=>o.some(d=>u.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, link in container: ${l.join(", ")||"None"}`),l.length){await s.exec(`mkdir -p '${i}' && ln -s '${n}'/* '${i}' || true`);let{launchRootShellServer:u}=e;u&&(async()=>{await(await u()).exec(`cd ${n} && touch ${l.map(f=>`'${f}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await vr(r);let c=await Yr(r),l=c.filter(u=>o.some(d=>u.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, copy to remote: ${l.join(", ")||"None"}`),l.length){let u=he.basename(r),d=eh.c({cwd:he.dirname(r)},l.map(h=>he.join(u,h))),f=he.posix.join(i,`tmp-${Date.now()}`),p=await new Promise(h=>{let m=[];d.on("data",g=>m.push(g)),d.on("end",()=>h(Buffer.concat(m)))});await s.exec(`# Copy extensions to remote
mkdir -p ${f}
${rC(p.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${f}
mv ${f}/* ${i} && rmdir ${f}`,{stdin:p})}return{remoteExtensions:a.concat(l),cachedExtensions:c}}}async function pK(t,e,r,n,i,o){if(n&&!e.launchRootShellServer)return;let s=1e4,a=6e4;for(await ti(s);;)o=await hK(t,e,r,n,i,o),await ti(a)}async function hK(t,e,r,n,i,{remoteExtensions:o,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:l}=e,u=(await a.exec(`ls ${i} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(f=>!!f);if(!n){let f=o.filter(p=>u.indexOf(p)===-1);t.output.write(`Extensions cache, remote removals: ${f.join(", ")||"None"}`);for(let p of f)try{await V_(he.join(r,p))}catch(h){if(!(h&&h.code==="ENOENT"))throw h}}let d=u.filter(f=>o.indexOf(f)===-1&&s.indexOf(f)===-1);if(t.output.write(`Extensions cache, copy to ${n?"shared cache":"local"}: ${d.join(", ")||"None"}`,ce.Trace),d.length)if(n){let f=await c();await f.exec(`mkdir -p '${n}' && cd '${i}' && cp ${d.map(p=>`'${p}'`).join(" ")} '${n}'`),await f.exec(`cd '${n}' && ls -t | tail -n +50 | xargs rm -f`)}else{let f=he.posix.basename(i),p=await l({cmd:"tar",cwd:he.posix.dirname(i),args:["c",...d.map(v=>he.posix.join(f,v))],output:t.output}),h=he.join(he.dirname(r),`${he.basename(r)}-${Date.now()}`);await vr(h);let m=eh.x({cwd:h,strip:1}),g=new Promise((v,w)=>{m.on("error",w),m.on("finish",v)});p.stdout.pipe(m),await g;for(let v of await Yr(h))await Ci(he.join(h,v),he.join(r,v));await pv(h)}return{remoteExtensions:u,cachedExtensions:s}}var Zw="extensionsCache";function mK(t){return he.join(t,Zw)}function gK(t){return he.posix.join(t,Zw)}function lR(t){return he.posix.join(t.userDataFolder,Zw)}var vK={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},uR={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},Nw={label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},yK={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function Lw(t,e){let r=yK[t.hardware];if(t.id==="alpine"){let i=r&&uR[r];if(!i)throw new ge({description:`Alpine Linux is not supported on the hardware architecture '${t.hardware}' of the container.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return i}let n=r&&vK[r];if(!n||e&&!n.stable)throw new ge({description:`The hardware architecture '${t.hardware}' of the container is not supported.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return n}async function Fw(t){let e="unknown",r="unknown",n="unknown";try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:i}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");r=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",n=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound"}catch(i){console.error(i)}return{hardware:e,id:r,version:n}}async function eC(t,e,r,n,i,o,s,a){let c=he.posix.join(on(e),`.${n}Marker`),l=!!e.createdAt&&await dR(e.shellServer,c,e.createdAt)||s;await tC(t,e,r,n,i,o,l,a)}async function wK(t,e,r,n,i,o){let s=he.posix.join(on(e),".postStartCommandMarker"),a=!!e.startedAt&&await dR(e.shellServer,s,e.startedAt);await tC(t,e,r,"postStartCommand",n,i,a,o)}async function dR(t,e,r){try{return await t.exec(`mkdir -p '${he.posix.dirname(e)}' && CONTENT="$(cat '${e}' 2>/dev/null || echo ENOENT)" && [ "\${CONTENT:-${r}}" != '${r}' ] && echo '${r}' > '${e}'`),!0}catch{return!1}}async function CK(t,e,r,n,i,o){await tC(t,e,r,"postAttachCommand",n,i,!0,o)}async function tC({postCreate:t},e,r,n,i,o,s,a){let c=r[n];if(s&&c&&(typeof c=="string"?c.trim():c.length)){await o;let l=`Running ${n}...`,u=typeof c=="string"?c:c.join(" "),d=er({event(f){t.output.event(f),f.type==="raw"&&f.text.includes("::endstep::")&&t.output.event({type:"progress",name:l,status:"running",stepDetail:""}),f.type==="raw"&&f.text.includes("::step::")&&t.output.event({type:"progress",name:l,status:"running",stepDetail:`${f.text.split("::step::")[1].split(`\r
`)[0]}`})},get dimensions(){return t.output.dimensions},onDidChangeDimensions:t.output.onDidChangeDimensions},ce.Info);try{d.event({type:"progress",name:l,status:"running",stepDetail:u});let f=e.remoteWorkspaceFolder||e.homeFolder;d.raw(`[1mRunning the ${n} from devcontainer.json...[0m\r
\r
`),await xK(se(V({},t),{output:d}),e,typeof c=="string"?["/bin/sh","-c",c]:c,f,{remoteEnv:await i,print:"continuous"}),d.raw(`\r
`),d.event({type:"progress",name:l,status:"succeeded"})}catch(f){if(d.event({type:"progress",name:l,status:"failed"}),f&&(f.code===130||f.signal===2))d.raw(`\r
[1m${n} interrupted.[0m\r
\r
`);else throw(f==null?void 0:f.code)&&d.write(Ne(`${n} failed with exit code ${f.code}. Skipping any further user-provided commands.`)),new ge({description:`The ${n} in the devcontainer.json failed.`,originalError:f})}}n===(r.waitFor||Xw)&&a()}async function ah(t,e){try{return await t.exec(Yp(e)),!0}catch{return!1}}function Yp(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${he.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function ch(t,e){try{return await bK(t,e),!0}catch{return!1}}async function bK(t,e){return t.exec(`test -d ${e}`)}async function fR(t,e,r,n,i,o){let{userDataFolder:s,installFolder:a,sharedInstallFolder:c,shellServer:l}=e,{processes:u,mntNS:d}=await dw(l),f=`(${he.posix.join(...nu(t.product,!1))}|${he.posix.join(...nu(t.product,!0))})`.replace(".","\\."),p=new RegExp(`${he.posix.join(he.posix.dirname(a).replace(".","\\."),"[^/]*",f)}`),h=u.filter(K=>K.mntNS===d&&p.test(K.cmd));t.output.write(`Running extension host agents:
${JSON.stringify(h,void 0,"  ")}`,ce.Trace);let{current:m,others:g}=h.reduce((K,oe)=>(K[(oe.cwd===a||oe.cwd===c)&&p.test(oe.cmd)?"current":"others"].push(oe),K),{current:[],others:[]});if(!t.cliMode&&g.length){t.output.write(`Terminating old extension host agent.\r
`);try{await l.exec(`kill -9 ${g.map(K=>K.pgrp?`-${K.pgrp}`:K.pid).join(" ")}`)}catch{}}let{commit:v,quality:w}=t.product,C=he.posix.join(on(e),`.connection-token-${v}${w==="stable"?"":`-${w}`}${t.web?"-web":""}`),b=he.posix.join(on(e),`.devport-${v}${w==="stable"?"":`-${w}`}${t.web?"-web":""}`);if(m.length){t.output.write(`Extension host agent is already running.\r
`);try{let{stdout:K}=await l.exec(`cat '${b}' 2>/dev/null`),oe=K.toString().trim(),te=parseInt(oe,10),F=m[0].cmd.indexOf(` ${hR(t.product)} `)!==-1?(await l.exec(`cat '${C}'`)).stdout.toString().trim():void 0,L=(/--connectionToken ([^ ]+) /.exec(m[0].cmd)||[])[1];return{serverPort:te,connectionToken:F,webConnectionToken:L}}catch(K){console.error(K),t.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await l.exec(`kill -9 ${m.map(oe=>oe.pgrp?`-${oe.pgrp}`:oe.pid).join(" ")}`)}catch{}}}let S=!!t.webConnectionToken,P;if(!S){let K=`${C}-${qr()}`,{stdout:oe}=await l.exec(`cat '${C}' 2>/dev/null || (umask 377 && echo '${qr()}' >'${K}' && mv -n '${K}' '${C}' && rm -f '${K}' && cat '${C}')`);P=oe.toString().trim()}t.progress(5);let _="Starting VS Code Server",k=t.output.start(_),T=[he.posix.join(a,...nu(t.product,S)),"--log",$a(t.getLogLevel()),"--force-disable-user-env",...pR(e.userDataFolder),...EK(t),...mR(t.telemetry),"--accept-server-license-terms","--host","127.0.0.1","--port",String(r),...t.webConnectionToken?["--connectionToken",t.webConnectionToken]:[],...P?[hR(t.product),C]:[],"--extensions-download-dir",lR(e),...(await i()).args,"--start-server",...t.isLocalContainer?["--disable-websocket-compression"]:[""],...t.cliMode?["--enable-remote-auto-shutdown"]:[]],M=(await Ri(t,{remoteExec:await n||e.remoteExec},T,a,{remoteEnv:V({SHELL:e.shell,VSCODE_AGENT_FOLDER:s},t.cliMode?await o:{}),resolveOn:ZD,print:"continuous"})).cmdOutput;t.output.stop(_,k);let H=(ZD.exec(M)||[])[1];if(!H)throw new Error("Port not found");return await l.exec(`echo ${H} >'${b}'`),{serverPort:parseInt(H,10),connectionToken:P,webConnectionToken:t.webConnectionToken}}function pR(t){return["--server-data-dir",t]}function hR(t){return t.serverApplicationName?"--connection-token-file":"--connection-secret"}function EK(t){return t.isLocalContainer?["--use-host-proxy"]:[]}function mR(t){return t?[]:["--disable-telemetry"]}var _K=/^([a-z0-9\-]+):(\d{1,5})$/;function SK(t){let e=t.match(_K);if(!(!e||e.length!==3))return{host:e[1],port:Number(e[2])}}async function gR(t,e,r){let n=await t.getTunnels();await Promise.all((r.forwardPorts||[]).filter(i=>!n.find(o=>o.remoteAddress.port===i)).map(async i=>{let o,s;if(typeof i=="number")o=i;else{let a=SK(i);if(!a)return;s=a.host,o=a.port}return t.openTunnel(e,o,s)}))}async function xK(t,{remotePtyExec:e},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?it:t.output}),a="",c,l=new Promise(f=>{c=f});s.onData(f=>{a+=f,o==="continuous"&&t.output.raw(f),i.resolveOn&&i.resolveOn.exec(a)&&c()});let u=t.onDidInput&&t.onDidInput(f=>s.write(f)),d=await Promise.race([s.exit,l]);return u&&u.dispose(),o==="end"&&t.output.raw(a),d&&(d.code||d.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:a,code:d.code,signal:d.signal}):{cmdOutput:a}}async function Ri(t,{remoteExec:e},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?it:t.output}),a=[],c=[],l=new Qw.StringDecoder,u=new Qw.StringDecoder,d="",f="",p,h,m=new Promise((b,S)=>{p=b,h=S});s.stdout.on("data",b=>{a.push(b);let S=l.write(b);o==="continuous"&&t.output.write(S.replace(/\r?\n/g,`\r
`)),d+=S,i.resolveOn&&i.resolveOn.exec(d)&&p()}),s.stderr.on("data",b=>{c.push(b),f+=u.write(b)}),i.stdin instanceof Buffer?(s.stdin.write(i.stdin,b=>{b&&h(b)}),s.stdin.end()):i.stdin instanceof Zp.ReadStream&&i.stdin.pipe(s.stdin);let g=await Promise.race([s.exit,m]),v=Buffer.concat(a),w=Buffer.concat(c);o==="end"&&(t.output.write(d.replace(/\r?\n/g,`\r
`)),t.output.write(Ne(f)));let C=`${d}
${f}`;return g&&(g.code||g.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:C,stdout:v,stderr:w,code:g.code,signal:g.signal}):{cmdOutput:C,stdout:v,stderr:w}}function rC(t){let e=8*1024,r=t%e,n=(t-r)/e;return`(dd iflag=fullblock bs=${e} count=${n} 2>/dev/null; dd iflag=fullblock bs=${r} count=1 2>/dev/null)`}async function PK(t,e){let r=he.posix.join(sc(t.product.serverDataFolderName),".patchEtcEnvironmentMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await Xl(e.shellServer,r)){let n=await e.launchRootShellServer();await ah(n,r)&&await n.exec(`cat >> /etc/environment <<'etcEnvrionmentEOF'
${Object.keys(e.env).map(i=>`
${i}="${e.env[i]}"`).join("")}
etcEnvrionmentEOF
`)}}async function kK(t,e){let r=he.posix.join(sc(t.product.serverDataFolderName),".patchEtcProfileMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await Xl(e.shellServer,r)){let n=await e.launchRootShellServer();await ah(n,r)&&await n.exec("sed -i -E 's/((^|\\s)PATH=)([^\\$]*)$/\\1${PATH:-\\3}/g' /etc/profile || true")}}async function tc(t,e,r,n){var o;let{userEnvProbe:i}=r||{};if(t.output.write(`userEnvProbe: ${i||t.defaultUserEnvProbe}${i?"":" (default)"}`),i||(i=t.defaultUserEnvProbe),i==="none")return{};try{let a=(await(0,XD.promisify)(QD.randomBytes)(16)).toString("hex"),c=new RegExp(a+"([^]*)"+a),l=e.shell;t.output.write(`userEnvProbe shell: ${l}`);let u=he.posix.basename(l),d=`echo -n ${a}; cat /proc/self/environ; echo -n ${a}`,f;/^pwsh(-preview)?$/.test(u)?f=i==="loginInteractiveShell"||i==="loginShell"?["-Login","-Command"]:["-Command"]:f=[i==="loginInteractiveShell"?"-lic":i==="loginShell"?"-lc":i==="interactiveShell"?"-ic":"-c"];let p=er(t.output,ce.Trace),h=Ri({output:p},{remoteExec:await n||e.remoteExec},[l,...f,d],e.installFolder);Promise.race([h,ti(2e3)]).then(async _=>{if(!_){let k,T=e.shellServer||await Ai(e.remoteExec,t.output);try{({processes:k}=await dw(T))}finally{e.shellServer||await T.process.terminate()}let A=k.find(M=>M.cmd.startsWith(l)&&M.cmd.indexOf(a)!==-1);if(A){let H=tT(k)[A.pid];t.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${fw(H)}`)}else t.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(_=>t.output.write(Ne(_&&(_.stack||_.message)||"Error reading process tree.")));let m=await Promise.race([h,ti(1e4)]);if(!m)return t.output.write(Ne("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let g=m.stdout.toString(),v=c.exec(g),C=(v?v[1]:"").split("\0").reduce((_,k)=>{let T=k.indexOf("=");return T!==-1&&(_[k.substring(0,T)]=k.substring(T+1)),_},{});t.output.write(`userEnvProbe parsed: ${JSON.stringify(C,void 0,"  ")}`,ce.Trace),delete C.PWD;let b=C.PATH,S=(o=e.env)==null?void 0:o.PATH,P=!(t.allowSystemConfigChange&&e.launchRootShellServer)&&b&&S;if(P){let _=e.user;C.PATH=IK(b,S,_==="root"||_==="0")}return t.output.write(`userEnvProbe PATHs:
Probe:     ${typeof b=="string"?`'${b}'`:"None"}
Container: ${typeof S=="string"?`'${S}'`:"None"}${P?`
Merged:    ${typeof C.PATH=="string"?`'${C.PATH}'`:"None"}`:""}`),C}catch(s){return t.output.write(Ne(s&&(s.stack||s.message)||"Error reading shell environment.")),{}}}function IK(t,e,r){let n=t.split(":"),i=0;for(let o of e.split(":")){let s=n.indexOf(o);s===-1?(r||!/\/sbin(\/|$)/.test(o))&&n.splice(i++,0,o):i=s+1}return n.join(":")}async function vR(t){for(let e of t)await(typeof e=="function"?e():e)}var cO=Y(require("crypto")),fu=Y(require("path"));function yR(t){return typeof t=="undefined"||t===null}function TK(t){return typeof t=="object"&&t!==null}function AK(t){return Array.isArray(t)?t:yR(t)?[]:[t]}function DK(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function RK(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function OK(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var NK=yR,LK=TK,FK=AK,MK=RK,qK=OK,jK=DK,At={isNothing:NK,isObject:LK,toArray:FK,repeat:MK,isNegativeZero:qK,extend:jK};function wR(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function au(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=wR(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}au.prototype=Object.create(Error.prototype);au.prototype.constructor=au;au.prototype.toString=function(e){return this.name+": "+wR(this,e)};var br=au;function nC(t,e,r,n,i){var o="",s="",a=Math.floor(i/2)-1;return n-e>a&&(o=" ... ",e=n-a+o.length),r-n>a&&(s=" ...",r=n+a-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function iC(t,e){return At.repeat(" ",e-t.length)+t}function $K(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",c,l,u=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(s-c<0);c++)l=nC(t.buffer,n[s-c],i[s-c],t.position-(n[s]-n[s-c]),d),a=At.repeat(" ",e.indent)+iC((t.line-c+1).toString(),u)+" | "+l.str+`
`+a;for(l=nC(t.buffer,n[s],i[s],t.position,d),a+=At.repeat(" ",e.indent)+iC((t.line+1).toString(),u)+" | "+l.str+`
`,a+=At.repeat("-",e.indent+u+3+l.pos)+`^
`,c=1;c<=e.linesAfter&&!(s+c>=i.length);c++)l=nC(t.buffer,n[s+c],i[s+c],t.position-(n[s]-n[s+c]),d),a+=At.repeat(" ",e.indent)+iC((t.line+c+1).toString(),u)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var UK=$K,BK=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],HK=["scalar","sequence","mapping"];function VK(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function GK(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(BK.indexOf(r)===-1)throw new br('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=VK(e.styleAliases||null),HK.indexOf(this.kind)===-1)throw new br('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var rr=GK;function CR(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function WK(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function oC(t){return this.extend(t)}oC.prototype.extend=function(e){var r=[],n=[];if(e instanceof rr)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new br("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof rr))throw new br("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new br("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new br("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof rr))throw new br("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(oC.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=CR(i,"implicit"),i.compiledExplicit=CR(i,"explicit"),i.compiledTypeMap=WK(i.compiledImplicit,i.compiledExplicit),i};var zK=oC,KK=new rr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),YK=new rr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),JK=new rr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),QK=new zK({explicit:[KK,YK,JK]});function XK(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function ZK(){return null}function e8(t){return t===null}var t8=new rr("tag:yaml.org,2002:null",{kind:"scalar",resolve:XK,construct:ZK,predicate:e8,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function r8(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function n8(t){return t==="true"||t==="True"||t==="TRUE"}function i8(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var o8=new rr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:r8,construct:n8,predicate:i8,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function s8(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function a8(t){return 48<=t&&t<=55}function c8(t){return 48<=t&&t<=57}function l8(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!s8(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!a8(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!c8(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function u8(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function d8(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1==0&&!At.isNegativeZero(t)}var f8=new rr("tag:yaml.org,2002:int",{kind:"scalar",resolve:l8,construct:u8,predicate:d8,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),p8=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function h8(t){return!(t===null||!p8.test(t)||t[t.length-1]==="_")}function m8(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var g8=/^[-+]?[0-9]+e/;function v8(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(At.isNegativeZero(t))return"-0.0";return r=t.toString(10),g8.test(r)?r.replace("e",".e"):r}function y8(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!=0||At.isNegativeZero(t))}var w8=new rr("tag:yaml.org,2002:float",{kind:"scalar",resolve:h8,construct:m8,predicate:y8,represent:v8,defaultStyle:"lowercase"}),C8=QK.extend({implicit:[t8,o8,f8,w8]}),b8=C8,bR=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ER=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function E8(t){return t===null?!1:bR.exec(t)!==null||ER.exec(t)!==null}function _8(t){var e,r,n,i,o,s,a,c=0,l=null,u,d,f;if(e=bR.exec(t),e===null&&(e=ER.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],d=+(e[11]||0),l=(u*60+d)*6e4,e[9]==="-"&&(l=-l)),f=new Date(Date.UTC(r,n,i,o,s,a,c)),l&&f.setTime(f.getTime()-l),f}function S8(t){return t.toISOString()}var x8=new rr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:E8,construct:_8,instanceOf:Date,represent:S8});function P8(t){return t==="<<"||t===null}var k8=new rr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:P8}),sC=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function I8(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=sC;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8==0}function T8(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=sC,s=0,a=[];for(e=0;e<i;e++)e%4==0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),new Uint8Array(a)}function A8(t){var e="",r=0,n,i,o=t.length,s=sC;for(n=0;n<o;n++)n%3==0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function D8(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var R8=new rr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:I8,construct:T8,predicate:D8,represent:A8}),O8=Object.prototype.hasOwnProperty,N8=Object.prototype.toString;function L8(t){if(t===null)return!0;var e=[],r,n,i,o,s,a=t;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],s=!1,N8.call(i)!=="[object Object]")return!1;for(o in i)if(O8.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function F8(t){return t!==null?t:[]}var M8=new rr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:L8,construct:F8}),q8=Object.prototype.toString;function j8(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],q8.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function $8(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var U8=new rr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:j8,construct:$8}),B8=Object.prototype.hasOwnProperty;function H8(t){if(t===null)return!0;var e,r=t;for(e in r)if(B8.call(r,e)&&r[e]!==null)return!1;return!0}function V8(t){return t!==null?t:{}}var G8=new rr("tag:yaml.org,2002:set",{kind:"mapping",resolve:H8,construct:V8}),_R=b8.extend({implicit:[x8,k8],explicit:[R8,M8,U8,G8]}),bo=Object.prototype.hasOwnProperty,lh=1,SR=2,xR=3,uh=4,aC=1,W8=2,PR=3,z8=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,K8=/[\x85\u2028\u2029]/,Y8=/[,\[\]\{\}]/,kR=/^(?:!|!!|![a-z\-]+!)$/i,IR=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function TR(t){return Object.prototype.toString.call(t)}function ri(t){return t===10||t===13}function Ms(t){return t===9||t===32}function Er(t){return t===9||t===32||t===10||t===13}function cc(t){return t===44||t===91||t===93||t===123||t===125}function J8(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function Q8(t){return t===120?2:t===117?4:t===85?8:0}function X8(t){return 48<=t&&t<=57?t-48:-1}function AR(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function Z8(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var DR=new Array(256),RR=new Array(256);for(qs=0;qs<256;qs++)DR[qs]=AR(qs)?1:0,RR[qs]=AR(qs);var qs;function e5(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||_R,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function OR(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=UK(r),new br(e,r)}function me(t,e){throw OR(t,e)}function dh(t,e){t.onWarning&&t.onWarning.call(null,OR(t,e))}var NR={YAML:function(e,r,n){var i,o,s;e.version!==null&&me(e,"duplication of %YAML directive"),n.length!==1&&me(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&me(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&me(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&dh(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&me(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],kR.test(i)||me(e,"ill-formed tag handle (first argument) of the TAG directive"),bo.call(e.tagMap,i)&&me(e,'there is a previously declared suffix for "'+i+'" tag handle'),IR.test(o)||me(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{me(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function Eo(t,e,r,n){var i,o,s,a;if(e<r){if(a=t.input.slice(e,r),n)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||me(t,"expected valid JSON character");else z8.test(a)&&me(t,"the stream contains non-printable characters");t.result+=a}}function LR(t,e,r,n){var i,o,s,a;for(At.isObject(r)||me(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,a=i.length;s<a;s+=1)o=i[s],bo.call(e,o)||(e[o]=r[o],n[o]=!0)}function lc(t,e,r,n,i,o,s,a,c){var l,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),l=0,u=i.length;l<u;l+=1)Array.isArray(i[l])&&me(t,"nested arrays are not supported inside keys"),typeof i=="object"&&TR(i[l])==="[object Object]"&&(i[l]="[object Object]");if(typeof i=="object"&&TR(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(l=0,u=o.length;l<u;l+=1)LR(t,e,o[l],r);else LR(t,e,o,r);else!t.json&&!bo.call(r,i)&&bo.call(e,i)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,me(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function cC(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):me(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function _t(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Ms(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(ri(i))for(cC(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&dh(t,"deficient indentation"),n}function fh(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Er(r)))}function lC(t,e){e===1?t.result+=" ":e>1&&(t.result+=At.repeat(`
`,e-1))}function t5(t,e,r){var n,i,o,s,a,c,l,u,d=t.kind,f=t.result,p;if(p=t.input.charCodeAt(t.position),Er(p)||cc(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=t.input.charCodeAt(t.position+1),Er(i)||r&&cc(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,a=!1;p!==0;){if(p===58){if(i=t.input.charCodeAt(t.position+1),Er(i)||r&&cc(i))break}else if(p===35){if(n=t.input.charCodeAt(t.position-1),Er(n))break}else{if(t.position===t.lineStart&&fh(t)||r&&cc(p))break;if(ri(p))if(c=t.line,l=t.lineStart,u=t.lineIndent,_t(t,!1,-1),t.lineIndent>=e){a=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=c,t.lineStart=l,t.lineIndent=u;break}}a&&(Eo(t,o,s,!1),lC(t,t.line-c),o=s=t.position,a=!1),Ms(p)||(s=t.position+1),p=t.input.charCodeAt(++t.position)}return Eo(t,o,s,!1),t.result?!0:(t.kind=d,t.result=f,!1)}function r5(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Eo(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else ri(r)?(Eo(t,n,i,!0),lC(t,_t(t,!1,e)),n=i=t.position):t.position===t.lineStart&&fh(t)?me(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);me(t,"unexpected end of the stream within a single quoted scalar")}function n5(t,e){var r,n,i,o,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Eo(t,r,t.position,!0),t.position++,!0;if(a===92){if(Eo(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),ri(a))_t(t,!1,e);else if(a<256&&DR[a])t.result+=RR[a],t.position++;else if((s=Q8(a))>0){for(i=s,o=0;i>0;i--)a=t.input.charCodeAt(++t.position),(s=J8(a))>=0?o=(o<<4)+s:me(t,"expected hexadecimal character");t.result+=Z8(o),t.position++}else me(t,"unknown escape sequence");r=n=t.position}else ri(a)?(Eo(t,r,n,!0),lC(t,_t(t,!1,e)),r=n=t.position):t.position===t.lineStart&&fh(t)?me(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}me(t,"unexpected end of the stream within a double quoted scalar")}function i5(t,e){var r=!0,n,i,o,s=t.tag,a,c=t.anchor,l,u,d,f,p,h=Object.create(null),m,g,v,w;if(w=t.input.charCodeAt(t.position),w===91)u=93,p=!1,a=[];else if(w===123)u=125,p=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),w=t.input.charCodeAt(++t.position);w!==0;){if(_t(t,!0,e),w=t.input.charCodeAt(t.position),w===u)return t.position++,t.tag=s,t.anchor=c,t.kind=p?"mapping":"sequence",t.result=a,!0;r?w===44&&me(t,"expected the node content, but found ','"):me(t,"missed comma between flow collection entries"),g=m=v=null,d=f=!1,w===63&&(l=t.input.charCodeAt(t.position+1),Er(l)&&(d=f=!0,t.position++,_t(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,uc(t,e,lh,!1,!0),g=t.tag,m=t.result,_t(t,!0,e),w=t.input.charCodeAt(t.position),(f||t.line===n)&&w===58&&(d=!0,w=t.input.charCodeAt(++t.position),_t(t,!0,e),uc(t,e,lh,!1,!0),v=t.result),p?lc(t,a,h,g,m,v,n,i,o):d?a.push(lc(t,null,h,g,m,v,n,i,o)):a.push(m),_t(t,!0,e),w=t.input.charCodeAt(t.position),w===44?(r=!0,w=t.input.charCodeAt(++t.position)):r=!1}me(t,"unexpected end of the stream within a flow collection")}function o5(t,e){var r,n,i=aC,o=!1,s=!1,a=e,c=0,l=!1,u,d;if(d=t.input.charCodeAt(t.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)aC===i?i=d===43?PR:W8:me(t,"repeat of a chomping mode identifier");else if((u=X8(d))>=0)u===0?me(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?me(t,"repeat of an indentation width identifier"):(a=e+u-1,s=!0);else break;if(Ms(d)){do d=t.input.charCodeAt(++t.position);while(Ms(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!ri(d)&&d!==0)}for(;d!==0;){for(cC(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),ri(d)){c++;continue}if(t.lineIndent<a){i===PR?t.result+=At.repeat(`
`,o?1+c:c):i===aC&&o&&(t.result+=`
`);break}for(n?Ms(d)?(l=!0,t.result+=At.repeat(`
`,o?1+c:c)):l?(l=!1,t.result+=At.repeat(`
`,c+1)):c===0?o&&(t.result+=" "):t.result+=At.repeat(`
`,c):t.result+=At.repeat(`
`,o?1+c:c),o=!0,s=!0,c=0,r=t.position;!ri(d)&&d!==0;)d=t.input.charCodeAt(++t.position);Eo(t,r,t.position,!1)}return!0}function FR(t,e){var r,n=t.tag,i=t.anchor,o=[],s,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,me(t,"tab characters must not be used in indentation")),!(c!==45||(s=t.input.charCodeAt(t.position+1),!Er(s))));){if(a=!0,t.position++,_t(t,!0,-1)&&t.lineIndent<=e){o.push(null),c=t.input.charCodeAt(t.position);continue}if(r=t.line,uc(t,e,xR,!1,!0),o.push(t.result),_t(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&c!==0)me(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function s5(t,e,r){var n,i,o,s,a,c,l=t.tag,u=t.anchor,d={},f=Object.create(null),p=null,h=null,m=null,g=!1,v=!1,w;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),w=t.input.charCodeAt(t.position);w!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,me(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(w===63||w===58)&&Er(n))w===63?(g&&(lc(t,d,f,p,h,null,s,a,c),p=h=m=null),v=!0,g=!0,i=!0):g?(g=!1,i=!0):me(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,w=n;else{if(s=t.line,a=t.lineStart,c=t.position,!uc(t,r,SR,!1,!0))break;if(t.line===o){for(w=t.input.charCodeAt(t.position);Ms(w);)w=t.input.charCodeAt(++t.position);if(w===58)w=t.input.charCodeAt(++t.position),Er(w)||me(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(lc(t,d,f,p,h,null,s,a,c),p=h=m=null),v=!0,g=!1,i=!1,p=t.tag,h=t.result;else if(v)me(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=u,!0}else if(v)me(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=u,!0}if((t.line===o||t.lineIndent>e)&&(g&&(s=t.line,a=t.lineStart,c=t.position),uc(t,e,uh,!0,i)&&(g?h=t.result:m=t.result),g||(lc(t,d,f,p,h,m,s,a,c),p=h=m=null),_t(t,!0,-1),w=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&w!==0)me(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&lc(t,d,f,p,h,null,s,a,c),v&&(t.tag=l,t.anchor=u,t.kind="mapping",t.result=d),v}function a5(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&me(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):me(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Er(s);)s===33&&(n?me(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),kR.test(i)||me(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),Y8.test(o)&&me(t,"tag suffix cannot contain flow indicator characters")}o&&!IR.test(o)&&me(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{me(t,"tag name is malformed: "+o)}return r?t.tag=o:bo.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:me(t,'undeclared tag handle "'+i+'"'),!0}function c5(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&me(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Er(r)&&!cc(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&me(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function l5(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Er(n)&&!cc(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&me(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),bo.call(t.anchorMap,r)||me(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],_t(t,!0,-1),!0}function uc(t,e,r,n,i){var o,s,a,c=1,l=!1,u=!1,d,f,p,h,m,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=a=uh===r||xR===r,n&&_t(t,!0,-1)&&(l=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;a5(t)||c5(t);)_t(t,!0,-1)?(l=!0,a=o,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=l||i),(c===1||uh===r)&&(lh===r||SR===r?m=e:m=e+1,g=t.position-t.lineStart,c===1?a&&(FR(t,g)||s5(t,g,m))||i5(t,m)?u=!0:(s&&o5(t,m)||r5(t,m)||n5(t,m)?u=!0:l5(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&me(t,"alias node should not have any properties")):t5(t,m,lh===r)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=a&&FR(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&me(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,f=t.implicitTypes.length;d<f;d+=1)if(h=t.implicitTypes[d],h.resolve(t.result)){t.result=h.construct(t.result),t.tag=h.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(bo.call(t.typeMap[t.kind||"fallback"],t.tag))h=t.typeMap[t.kind||"fallback"][t.tag];else for(h=null,p=t.typeMap.multi[t.kind||"fallback"],d=0,f=p.length;d<f;d+=1)if(t.tag.slice(0,p[d].tag.length)===p[d].tag){h=p[d];break}h||me(t,"unknown tag !<"+t.tag+">"),t.result!==null&&h.kind!==t.kind&&me(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+h.kind+'", not "'+t.kind+'"'),h.resolve(t.result,t.tag)?(t.result=h.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):me(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function u5(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(_t(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Er(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&me(t,"directive name must not be less than one character in length");s!==0;){for(;Ms(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!ri(s));break}if(ri(s))break;for(r=t.position;s!==0&&!Er(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&cC(t),bo.call(NR,n)?NR[n](t,n,i):dh(t,'unknown document directive "'+n+'"')}if(_t(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,_t(t,!0,-1)):o&&me(t,"directives end mark is expected"),uc(t,t.lineIndent-1,uh,!1,!0),_t(t,!0,-1),t.checkLineBreaks&&K8.test(t.input.slice(e,t.position))&&dh(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&fh(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,_t(t,!0,-1));return}if(t.position<t.length-1)me(t,"end of the stream or a document separator is expected");else return}function MR(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new e5(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,me(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)u5(r);return r.documents}function d5(t,e,r){e!==null&&typeof e=="object"&&typeof r=="undefined"&&(r=e,e=null);var n=MR(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function f5(t,e){var r=MR(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new br("expected a single document in the stream, but found more")}}var p5=d5,h5=f5,qR={loadAll:p5,load:h5},jR=Object.prototype.toString,$R=Object.prototype.hasOwnProperty,uC=65279,m5=9,cu=10,g5=13,v5=32,y5=33,w5=34,dC=35,C5=37,b5=38,E5=39,_5=42,UR=44,S5=45,ph=58,x5=61,P5=62,k5=63,I5=64,BR=91,HR=93,T5=96,VR=123,A5=124,GR=125,nr={};nr[0]="\\0";nr[7]="\\a";nr[8]="\\b";nr[9]="\\t";nr[10]="\\n";nr[11]="\\v";nr[12]="\\f";nr[13]="\\r";nr[27]="\\e";nr[34]='\\"';nr[92]="\\\\";nr[133]="\\N";nr[160]="\\_";nr[8232]="\\L";nr[8233]="\\P";var D5=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],R5=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function O5(t,e){var r,n,i,o,s,a,c;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=t.compiledTypeMap.fallback[s],c&&$R.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[s]=a;return r}function N5(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new br("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+At.repeat("0",n-e.length)+e}var L5=1,lu=2;function F5(t){this.schema=t.schema||_R,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=At.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=O5(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?lu:L5,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function WR(t,e){for(var r=At.repeat(" ",e),n=0,i=-1,o="",s,a=t.length;n<a;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=a):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function fC(t,e){return`
`+At.repeat(" ",t.indent*e)}function M5(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function hh(t){return t===v5||t===m5}function uu(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==uC||65536<=t&&t<=1114111}function zR(t){return uu(t)&&t!==uC&&t!==g5&&t!==cu}function KR(t,e,r){var n=zR(t),i=n&&!hh(t);return(r?n:n&&t!==UR&&t!==BR&&t!==HR&&t!==VR&&t!==GR)&&t!==dC&&!(e===ph&&!i)||zR(e)&&!hh(e)&&t===dC||e===ph&&i}function q5(t){return uu(t)&&t!==uC&&!hh(t)&&t!==S5&&t!==k5&&t!==ph&&t!==UR&&t!==BR&&t!==HR&&t!==VR&&t!==GR&&t!==dC&&t!==b5&&t!==_5&&t!==y5&&t!==A5&&t!==x5&&t!==P5&&t!==E5&&t!==w5&&t!==C5&&t!==I5&&t!==T5}function j5(t){return!hh(t)&&t!==ph}function du(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function YR(t){var e=/^\n* /;return e.test(t)}var JR=1,pC=2,QR=3,XR=4,dc=5;function $5(t,e,r,n,i,o,s,a){var c,l=0,u=null,d=!1,f=!1,p=n!==-1,h=-1,m=q5(du(t,0))&&j5(du(t,t.length-1));if(e||s)for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=du(t,c),!uu(l))return dc;m=m&&KR(l,u,a),u=l}else{for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=du(t,c),l===cu)d=!0,p&&(f=f||c-h-1>n&&t[h+1]!==" ",h=c);else if(!uu(l))return dc;m=m&&KR(l,u,a),u=l}f=f||p&&c-h-1>n&&t[h+1]!==" "}return!d&&!f?m&&!s&&!i(t)?JR:o===lu?dc:pC:r>9&&YR(t)?dc:s?o===lu?dc:pC:f?XR:QR}function U5(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===lu?'""':"''";if(!t.noCompatMode&&(D5.indexOf(e)!==-1||R5.test(e)))return t.quotingType===lu?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),a=n||t.flowLevel>-1&&r>=t.flowLevel;function c(l){return M5(t,l)}switch($5(e,a,t.indent,s,c,t.quotingType,t.forceQuotes&&!n,i)){case JR:return e;case pC:return"'"+e.replace(/'/g,"''")+"'";case QR:return"|"+ZR(e,t.indent)+eO(WR(e,o));case XR:return">"+ZR(e,t.indent)+eO(WR(B5(e,s),o));case dc:return'"'+H5(e)+'"';default:throw new br("impossible error: invalid scalar style")}}()}function ZR(t,e){var r=YR(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function eO(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function B5(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var l=t.indexOf(`
`);return l=l!==-1?l:t.length,r.lastIndex=l,tO(t.slice(0,l),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var a=s[1],c=s[2];o=c[0]===" ",n+=a+(!i&&!o&&c!==""?`
`:"")+tO(c,e),i=o}return n}function tO(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,a=0,c="";n=r.exec(t);)a=n.index,a-i>e&&(o=s>i?s:a,c+=`
`+t.slice(i,o),i=o+1),s=a;return c+=`
`,t.length-i>e&&s>i?c+=t.slice(i,s)+`
`+t.slice(s+1):c+=t.slice(i),c.slice(1)}function H5(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=du(t,i),n=nr[r],!n&&uu(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||N5(r);return e}function V5(t,e,r){var n="",i=t.tag,o,s,a;for(o=0,s=r.length;o<s;o+=1)a=r[o],t.replacer&&(a=t.replacer.call(r,String(o),a)),(Oi(t,e,a,!1,!1)||typeof a=="undefined"&&Oi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function rO(t,e,r,n){var i="",o=t.tag,s,a,c;for(s=0,a=r.length;s<a;s+=1)c=r[s],t.replacer&&(c=t.replacer.call(r,String(s),c)),(Oi(t,e+1,c,!0,!0,!1,!0)||typeof c=="undefined"&&Oi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=fC(t,e)),t.dump&&cu===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function G5(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,a,c,l,u;for(s=0,a=o.length;s<a;s+=1)u="",n!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=o[s],l=r[c],t.replacer&&(l=t.replacer.call(r,c,l)),!!Oi(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),!!Oi(t,e,l,!1,!1)&&(u+=t.dump,n+=u));t.tag=i,t.dump="{"+n+"}"}function W5(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),a,c,l,u,d,f;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new br("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)f="",(!n||i!=="")&&(f+=fC(t,e)),l=s[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),!!Oi(t,e+1,l,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&cu===t.dump.charCodeAt(0)?f+="?":f+="? "),f+=t.dump,d&&(f+=fC(t,e)),!!Oi(t,e+1,u,!0,d)&&(t.dump&&cu===t.dump.charCodeAt(0)?f+=":":f+=": ",f+=t.dump,i+=f));t.tag=o,t.dump=i||"{}"}function nO(t,e,r){var n,i,o,s,a,c;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,jR.call(a.represent)==="[object Function]")n=a.represent(e,c);else if($R.call(a.represent,c))n=a.represent[c](e,c);else throw new br("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=n}return!0}return!1}function Oi(t,e,r,n,i,o,s){t.tag=null,t.dump=r,nO(t,r,!1)||nO(t,r,!0);var a=jR.call(t.dump),c=n,l;n&&(n=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",d,f;if(u&&(d=t.duplicates.indexOf(r),f=d!==-1),(t.tag!==null&&t.tag!=="?"||f||t.indent!==2&&e>0)&&(i=!1),f&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&f&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),a==="[object Object]")n&&Object.keys(t.dump).length!==0?(W5(t,e,t.dump,i),f&&(t.dump="&ref_"+d+t.dump)):(G5(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?rO(t,e-1,t.dump,i):rO(t,e,t.dump,i),f&&(t.dump="&ref_"+d+t.dump)):(V5(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&U5(t,t.dump,e,o,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new br("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(l=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",t.dump=l+" "+t.dump)}return!0}function z5(t,e){var r=[],n=[],i,o;for(hC(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function hC(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)hC(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)hC(t[n[i]],e,r)}function K5(t,e){e=e||{};var r=new F5(e);r.noRefs||z5(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Oi(r,0,n,!0,!0)?r.dump+`
`:""}var Y5=K5,J5={dump:Y5};function mC(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var _r=qR.load,cge=qR.loadAll,lge=J5.dump;var uge=mC("safeLoad","load"),dge=mC("safeLoadAll","loadAll"),fge=mC("safeDump","dump");var yh=Y(require("path"));var yC=Y(require("path")),aO=Y(require("os"));var iO=Y(require("crypto"));var oO=Y(require("util"));var An={async readDocument(t){switch(t.scheme){case"file":try{return(await Oe(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,r){switch(t.scheme){case"file":let n=Bt(r,e);await ya(t.fsPath,n);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},mh=class{constructor(e){this.fileHost=e}async readDocument(e){switch(e.scheme){case mh.scheme:try{return(await this.fileHost.readFile(Ie(e,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case mh.scheme:let i=Bt(n,r);await this.fileHost.writeFile(Ie(e,this.fileHost.platform),Buffer.from(i));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},Dt=mh;Dt.scheme="vscode-fileHost";var $s=class{constructor(e){this.shellServer=e}async readDocument(e){switch(e.scheme){case $s.scheme:try{let{stdout:r}=await this.shellServer.exec(`cat ${e.path}`);return r}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case $s.scheme:try{if(!$s.nonce){let s=await(0,oO.promisify)(iO.randomBytes)(20);$s.nonce=s.toString("hex")}let i=Bt(n,r),o=`EOF-${$s.nonce}`;await this.shellServer.exec(`cat <<'${o}' >${e.path}
${i}
${o}
`)}catch(i){console.log(i)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},js=$s;js.scheme="vscode-remote";var sO=class{constructor(e){this.documents=e}async readDocument(e){let r=this.documents[e.scheme];if(!r)throw new Error(`Unsupported scheme: ${e.toString()}`);return r.readDocument(e)}async applyEdits(e,r,n){let i=this.documents[e.scheme];if(!i)throw new Error(`Unsupported scheme: ${e.toString()}`);return i.applyEdits(e,r,n)}};function Rt(t,e){let r={file:An,[Dt.scheme]:new Dt(t)};return e&&(r[js.scheme]=new js(e)),new sO(r)}var gC=new Map;async function vC(t,e){let r=t.toString(),n=gC.get(r);if(n||gC.set(r,n=[]),n.push(e),n.length===1){for(;n.length;)await n[0](),n.shift();gC.delete(r)}}var _o;(function(s){s[s.Slash=47]="Slash",s[s.Colon=58]="Colon",s[s.A=65]="A",s[s.Z=90]="Z",s[s.a=97]="a",s[s.z=122]="z"})(_o||(_o={}));function Ie(t,e){let r;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===Dt.scheme)?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,e==="win32"&&(r=r.replace(/\//g,"\\")),r}function fc(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}function wC(t,e){return Ee.file(t.path.join(e,".devcontainer","devcontainer.json")).with({scheme:Dt.scheme})}async function gh(t,e){let r=fc(t.path,e);for(let n of r)if(await t.isFile(n))return Ee.file(n).with({scheme:Dt.scheme})}async function vh(t){let e=fc(yC,t);for(let r of e)if(await pt(r))return r}var Ni=`{${aO.EOL}}`;async function an(t,e,r,n){e.scheme==="file"&&await vr(yC.dirname(e.fsPath)),await t.applyEdits(e,r,n)}function pc(t){let e=yC.posix.dirname(t.path);return t.with({path:e})}function Us(t){if(!(t.extensions||t.settings||t.devPort!==void 0))return t;let e=V({},t);return e.vscode||(e.vscode={}),e.extensions&&(e.vscode.extensions=(e.vscode.extensions||[]).concat(e.extensions),delete e.extensions),e.settings&&(e.vscode.settings=V(V({},e.settings),e.vscode.settings||{}),delete e.settings),e.devPort!==void 0&&e.vscode.devPort===void 0&&(e.vscode.devPort=e.devPort,delete e.devPort),e}function Bs(t,e,r){return Li(t,e.configFilePath,r)}function Li(t,e,r){let n=pc(e);return e.with({path:yh.posix.resolve(n.path,t.platform==="win32"&&e.scheme!==js.scheme?(yh.win32.isAbsolute(r)?"/":"")+r.replace(/\\/g,"/"):r)})}function wt(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function hc(t){return t&&(wt(t)||"image"in t||"dockerComposeFile"in t)}function dr(t,e){return Bs(t,e,Q5(e))}function Q5(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function ir(t,e,r,n){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(i=>Ie(Bs(t,e,i),t.platform))}else if(typeof e.dockerComposeFile=="string")return[Ie(Bs(t,e,e.dockerComposeFile),t.platform)];if(n){let i=r==null?void 0:r.COMPOSE_FILE;if(i)return i.split(t.path.delimiter).map(a=>t.path.resolve(n,a));try{let a=t.path.join(n,".env"),c=await t.readFile(a),l=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),u=l&&l[1].trim();if(u)return u.split(t.path.delimiter).map(d=>t.path.resolve(n,d))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let o=[t.path.resolve(n,"docker-compose.yml")],s=t.path.resolve(n,"docker-compose.override.yml");return await t.isFile(s)&&o.push(s),o}return[]}function X5(){return{contentHashes:{}}}async function lO(t,e,r){let n=t.configurationTracking,i=n.getConfigurationState();if(i){let o=i.contentHashes,s=Object.keys(o),c=(await CC(t,e,r)).contentHashes,l=Object.keys(c),u=new Set(l);s.forEach(p=>u.delete(p));let d=new Set(s);l.forEach(p=>d.delete(p));let f=[];for(let p of s)p in c&&c[p]!==o[p]&&f.push(p);if(u.size||d.size||f.length){let p=await CC(t,e,r);(async()=>{await n.containerOutdated([...u,...d,...f].sort())==="ignore"&&await t.configurationTracking.updateConfigurationState(p)})().catch(console.error)}}else await uO(t,e,r)}async function wh(t,e,r){let n="Updating configuration state",i=t.common.output.start(n);await uO(t,e,r),t.common.output.stop(n,i)}async function uO(t,e,r){let n=await CC(t,e,r);await t.configurationTracking.updateConfigurationState(n)}async function CC(t,e,r){let n=X5();Ch(n,fu.posix.basename(r.configFilePath.path),JSON.stringify(se(V({},r),{forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0})));let i=pc(r.configFilePath).path;if(wt(r)){let o=dr(t.common.cliHost,r),s=await e.readDocument(o);s!==void 0&&Ch(n,fu.posix.relative(i,o.path),s)}if("dockerComposeFile"in r){let o=await ir(t.common.cliHost,r,t.common.cliHost.env,t.common.cliHost.cwd),s=await Promise.all(o.map(async a=>{let c=Ee.file(a).with({scheme:Dt.scheme});return{uri:c,content:await e.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&Ch(n,fu.posix.relative(i,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:l}=s[a];if(l){let u=_r(l),d=u&&u.services,f=d&&d[r.service],p=f&&f.build,h=p&&(typeof p=="string"?p:p.context);if(h){let m=Li(t.common.cliHost,c,h),g=dO(m,p.dockerfile||"Dockerfile"),v=await e.readDocument(g);v!==void 0&&Ch(n,fu.posix.relative(i,g.path),v)}if(f&&(f.image||f.build))break}}}return n}function Ch(t,e,r){let n=cO.createHash("sha256").update(r).digest("hex");t.contentHashes[e]=n}var On=Y(require("path")),V1=Y(require("crypto"));var Mt=Y(require("path"));var vO=Y(require("net")),xC=Y(require("path"));var bC=Y(require("path")),EC=Y(require("http")),fO=Y(require("os")),pO=Y(require("crypto"));async function hO(t,e){let r=await _C(t),n=new mO(r,e);return n.listen(),n}var mO=class{constructor(e,r){this.ipcHandlePath=e;this.server=EC.createServer((n,i)=>{Promise.resolve(r(n,i)).catch(o=>console.error(o&&o.message||o))}),this.server.on("error",n=>console.error(n))}listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function gO(t){return new Promise((e,r)=>{let n=[];t.setEncoding("utf8"),t.on("data",i=>n.push(i)),t.on("error",i=>r(i)),t.on("end",()=>{let i=JSON.parse(n.join(""));e(i)})})}async function Z5(t){return new Promise((e,r)=>{pO.randomBytes(t,(n,i)=>{n?r(n):e(i)})})}async function _C(t){let r=(await Z5(20)).toString("hex"),n=`${t}-${r}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?bC.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):bC.join(fO.tmpdir(),`${n}.sock`)}var SC=class{constructor(){this.messages=[]}push(e){this.messages.push(e),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(e){if(this.messages.length){let r=this.messages;return this.messages=[],r}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((r,n)=>{this.dequeueRequest={resolve:r,reject:n},typeof e=="number"&&setTimeout(n,e)})}};async function ni(t,e,r){let n=await _C("ssh-askpass");return await new Promise((i,o)=>{vO.createServer(s=>{s.setEncoding("utf8");let a="";s.on("data",async c=>{if(a+=c,a.endsWith(`
`))try{r.write(`SSH askpass request: ${a}`,ce.Trace);let l=await e(JSON.parse(a));s.write(l,u=>{u&&console.error(u)}),s.end()}catch(l){console.error(l)}}),s.on("error",c=>console.error(c))}).on("error",s=>{o(s)}).listen(n,()=>{i()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:xC.join(t,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_EXTRA_ARGS:process.versions.electron?"--ms-enable-electron-run-as-node":"",VSCODE_SSH_ASKPASS_MAIN:xC.join(t,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:n}}var eY=0;function fr(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++eY)}:{}}async function Sr(t,e){return(await So(t,[e]))[0]}async function So(t,e){let r=await Eh(t,"container",e);for(let n of r){n.Ports=[];let i=n.NetworkSettings.Ports;for(let o in i){let[s,a]=o.split("/");for(let c of i[o]||[]){let{HostIp:l,HostPort:u}=c;n.Ports.push({IP:l,PrivatePort:parseInt(s),PublicPort:parseInt(u),Type:a})}}}return r}async function mc(t,e){return(await Eh(t,"image",[e]))[0]}async function bh(t,e){return(await Eh(t,"volume",[e]))[0]}async function pu(t,e){return Eh(t,"volume",e)}async function Eh(t,e,r){if(!r.length)return[];let n=mu(t),i=await xe(se(V({},n),{args:(n.args||[]).concat(["inspect","--type",e,...r])}));try{return JSON.parse(i.stdout.toString())}catch(o){throw console.error({stdout:i.stdout.toString(),stderr:i.stderr.toString()}),o}}async function Fi(t,e=!1,r=[]){let n=[];e&&n.push("-a");for(let o of r)n.push("--filter",`label=${o}`);return(await ze(t,"ps","-q",...n)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function xo(t,e=[]){let r=[];for(let i of e)r.push("--filter",`label=${i}`);return(await ze(t,"volume","ls","-q",...r)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function PC(t){return(await ze(t,"volume","ls","-q","-f","dangling=true")).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function yO(t){return(await ze(t,"volume","prune","-f")).stdout.toString()}async function _h(t,e,r){let n=[];for(let i of r||[])n.push("--label",i);await ze(t,"volume","create",...n,e)}async function Sh(t,e){let{exec:r,cmd:n,args:i,env:o,output:s}=mu(t),a=[];for(let f in e)for(let p of e[f])a.push("--filter",`${f}=${p}`);let c=await IC(t)?"json":"{{json .}}",l=(i||[]).concat(["events","--format",c,...a]),u=await r({cmd:n,args:l,env:o,output:s}),d=[];return u.stderr.on("data",f=>d.push(f)),u.exit.then(({code:f,signal:p})=>{d.length&&s.write(Ne(Buffer.concat(d).toString())),(f||p&&p!=="SIGKILL")&&s.write(Ne(`Docker events terminated (code: ${f}, signal: ${p}).`))},f=>{s.write(Ne(f&&(f.stack||f.message)))}),u}async function ze(t,...e){let r=mu(t);return xe(se(V({},r),{args:(r.args||[]).concat(e)}))}async function kC(t){var e;try{let{stdout:r}=await ze(t,"context","ls","--format","{{json .}}"),n=`[${r.toString().trim().split(/\r?\n/).join(",")}]`;return(e=JSON.parse(n).find(s=>s.Current))==null?void 0:e.Name}catch{return}}async function IC(t){if(("cliHost"in t?t.cliHost:t.common.cliHost).platform!=="linux")return!1;try{let{stdout:r}=await ze(t,"-v");return r.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function xh(t,...e){let r=gu(t);return ho(se(V({},r),{args:(r.args||[]).concat(e)}))}async function Hs(t,...e){let r=mu(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return xe(se(V({},r),{args:(r.args||[]).concat(e)}))}async function wO(t,...e){let r=gu(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return ho(se(V({},r),{args:(r.args||[]).concat(e)}))}function gc(t,e,r){return async function(n){let{exec:i,cmd:o,args:s,env:a}=mu(t),{argsPrefix:c,args:l}=bO(e,r,n,!1);return i({cmd:o,args:(s||[]).concat(l),env:a,output:CO(n.output,o,c)})}}async function hu(t,e,r,n){if(!await n("node-pty"))throw new Error("Missing node-pty");return async function(o){let{ptyExec:s,cmd:a,args:c,env:l}=gu(t),{argsPrefix:u,args:d}=bO(e,r,o,!0);return s({cmd:a,args:(c||[]).concat(d),env:l,output:CO(o.output,a,u)})}}function CO(t,e,r){return tY(t,`Run: ${e} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function tY(t,e,r){let n=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return er(se(V({},t),{get dimensions(){return t.dimensions},event:o=>t.event("text"in o?se(V({},o),{text:o.text.replace(n,r)}):o)}))}function bO(t,e,r,n){let{env:i,cwd:o,cmd:s,args:a}=r,c=["exec","-i"];n&&c.push("-t"),e&&c.push("-u",e),i&&Object.keys(i).forEach(u=>c.push("-e",`${u}=${i[u]}`)),o&&c.push("-w",o),c.push(t);let l=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:l,args:c}}function mu(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:V(V({},t.dockerEnv),fr(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:V(V({},t.env),fr(t.env)),output:t.output}:se(V({},t),{env:V(V({},t.env),fr(t.env))})}function gu(t,e){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:V(V({},t.dockerEnv),fr(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:V(V({},t.env),fr(t.env)),output:t.output}:se(V({},t),{env:V(V({},t.env),fr(t.env))})}function TC(t){return t.toLowerCase().replace(/[^a-z0-9\._-]+/g,"").replace(/(\.[\._-]|_[\.-]|__[\._-]|-+[\._])[\._-]*/g,(e,r)=>r.substr(0,r.length-1))}var Cc=Y(require("path")),v1=Y(h1()),y1=Y(require("url")),w1=Y(Rl());var m1=Y(Va()),g1=Y(require("url"));function BC(t,e){return new Promise((r,n)=>{let i=new g1.URL(t.url),o={hostname:i.hostname,port:i.port,path:i.pathname+i.search,method:t.type,headers:t.headers},s=m1.https.request(o,a=>{if(a.statusCode<200||a.statusCode>299)n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),e&&e.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,ce.Error);else{a.on("error",n);let c=[];a.on("data",l=>c.push(l)),a.on("end",()=>r(Buffer.concat(c)))}});s.on("error",n),t.data&&s.write(t.data),s.end()})}var Tu="devcontainer-features.tgz";function jh(t){return t?{allFeatures:t.featureSets.map(r=>r.features).flat()}:void 0}function Rn(t){let e=typeof t=="string"?Cc.join(t,"dist"):t.distFolder;return Cc.join(e,"node_modules","vscode-dev-containers","container-features")}function C1(t){let{type:e}=t;switch(e){case"local-cache":return"local-cache";case"direct-tarball":return Buffer.from(t.tarballUri).toString("base64");case"github-repo":return`github-${t.owner}-${t.repo}-${t.isLatest?"latest":t.tag}`;case"file-path":return Buffer.from(t.filePath).toString("base64")}}function $h(t,e){let r=new RegExp("^[a-zA-Z0-9_-]*$");if(!t.includes("/"))return e.write(`[${t}] - No slash, must be locally cached feature.`,ce.Trace),{id:t,sourceInformation:{type:"local-cache"}};if(t.startsWith("http://")||t.startsWith("https://")){e.write(`[${t}] - Direct URI`,ce.Trace),t=t.replace(/\/+$/,"");let u=t.lastIndexOf("#"),d=t.substring(u+1);if(d===""||!r.test(d)){e.write(`Parse error. Specify a feature id with alphanumeric, dash, or underscore characters. Provided: ${d}.`,ce.Error);return}let f=new y1.URL(t.substring(0,u)).toString();return e.write(`[${t}] - uri: ${f} , id: ${d}`,ce.Trace),{id:d,sourceInformation:{type:"direct-tarball",tarballUri:f}}}if(t.startsWith("/")||t.startsWith("./")||t.startsWith("../"))return;let n="latest",i=t.split("@");if(i.length>2){e.write("Parse error. Use the '@' symbol only to designate a version tag.",ce.Error);return}i.length===2&&(e.write(`[${t}] has version ${i[1]}`,ce.Trace),n=i[1]);let s=i[0].split("/");if(s.length!==3||s.some(u=>u==="")||!r.test(s[2])){e.write("Invalid parse for GitHub/registry feature identifier. Follow format: '<publisher>/<feature-set>/<feature>'",ce.Error);return}let a=s[0],c=s[1],l=s[2];return n==="latest"?{id:l,sourceInformation:{type:"github-repo",apiUri:`https://api.github.com/repos/${a}/${c}/releases/latest`,unauthenticatedUri:`https://github.com/${a}/${c}/releases/latest/download/${Tu}`,owner:a,repo:c,isLatest:!0}}:{id:l,sourceInformation:{type:"github-repo",apiUri:`https://api.github.com/repos/${a}/${c}/releases/tags/${n}`,unauthenticatedUri:`https://github.com/${a}/${c}/releases/download/${n}/${Tu}`,owner:a,repo:c,tag:n,isLatest:!1}}}var Uh=async(t,e)=>{try{await G_(t,!1,!0)}catch(r){e.write(`Didn't remove temporary tarball from disk with caught exception: ${r==null?void 0:r.Message} `,ce.Trace)}};function aJ(t,e,r){let n={"user-agent":"devcontainer"},i=o=>{let s=o.tarballUri;return s.startsWith("https://github.com")||s.startsWith("https://api.github.com")};if(t.type==="github-repo"||t.type==="direct-tarball"&&i(t)){let o=e.GITHUB_TOKEN;o?(r.write("Using GITHUB_TOKEN."),n.Authorization=`Bearer ${o}`):r.write("No GITHUB_TOKEN found in env. Request will be sent unauthenticated.")}return n}async function cJ(t,e,r){let{output:n,env:i}=t,{dstFolder:o}=e,s=[],a=r.features;if(!a||!Object.keys(a).length||!o)return;let c=Cc.join(o,Tu);n.write("Preparing to parse declared features and fetch remote features.");for await(let l of Object.keys(a)){let u=$h(l,n);if(u===void 0){n.write(`Failed to parse key: ${l}`,ce.Error);continue}let d=u.id,f=u.sourceInformation,p=f.type;if(p==="local-cache"){n.write("Detected local feature set. Continuing...");continue}let h=C1(u.sourceInformation),m=Cc.join(o,h);if(s.some(w=>w===h)){n.write(`Already pulled remote resource for '${h}'. No need to re-fetch.`);continue}if(n.write(`Fetching: featureSet = ${h}, feature = ${d}, Type = ${p}`),p==="file-path"){n.write("Local file-path to features on disk is unimplemented. Continuing...");continue}else{let w,C=aJ(f,i,n);if(p==="github-repo")n.write("Determining tarball URI for provided github repo.",ce.Trace),C.Authorization&&C.Authorization!==""?(n.write("Authenticated. Fetching from GH API.",ce.Trace),w=await lJ(f,C,n),C.Accept="Accept: application/octet-stream"):(n.write("Not authenticated. Fetching from unauthenticated uri",ce.Trace),w=f.unauthenticatedUri);else if(p==="direct-tarball")w=f.tarballUri;else{n.write(`Unhandled source type: ${p}`,ce.Error);continue}if(w!==void 0&&w!==""){let b={type:"GET",url:w,headers:C};n.write(`Fetching tarball at ${b.url}`),n.write(`Headers: ${JSON.stringify(b)}`,ce.Trace);let S=await BC(b,n);if(!S||S.length===0){n.write("Did not receive a response from tarball download URI",ce.Error),await Uh(c,n);continue}let P=(_,k)=>!(_.startsWith("./.")||_===`./${Tu}`||_==="./.");n.write("Preparing to unarchive received tgz.",ce.Trace),await vr(m),await ya(c,S),await w1.x({file:c,cwd:m,filter:P})}else{n.write("Could not fetch features from constructed tarball URL",ce.Error),await Uh(c,n);continue}}n.write("Attempting to load devcontainer-features.json",ce.Trace);let v=await Au(m,n);if(!v||!v.features||v.features.length===0){n.write("Unable to parse received devcontainer-features.json.",ce.Error),await Uh(c,n);continue}n.write(`Done loading FeatureSet ${h} into from disk into memory`,ce.Trace),v.sourceInformation&&(v=se(V({},v),{sourceInformation:V(V({},v.sourceInformation),f)})),n.write("Merged sourceInfomation",ce.Trace),e.featureSets.push(v),s.push(h),await Uh(c,n),n.write(`Succeeded in fetching feature set ${h}`,ce.Trace)}return e}async function lJ(t,e,r){let n={type:"GET",url:t.apiUri,headers:e},i=JSON.parse((await BC(n,r)).toString());if(i){let o=i.assets.find(s=>s.name===Tu);if(o&&o.url)return r.write(`Found url to fetch release artifact ${o.name}. Asset of size ${o.size} has been downloaded ${o.download_count} times and was last updated at ${o.updated_at}`),o.url;r.write("Unable to fetch release artifact URI from GitHub API",ce.Error);return}}async function Au(t,e){let r=await Oe(Cc.join(t,"devcontainer-features.json"));if(r.length===0){e.write("Parsed featureSet is empty.",ce.Error);return}let n=Xe(r.toString());if(!(n==null?void 0:n.features)||n.features.length===0){e.write("Parsed featureSet contains no features.",ce.Error);return}return e.write(`Loaded devcontainer-features.json declares ${n.features.length} features and ${n.sourceInformation?"contains":"does not contain"} explicit source info.`,ce.Trace),uJ(n)}function uJ(t){return t.features.find(e=>e.extensions||e.settings)?se(V({},t),{features:t.features.map(e=>{if(!(e.extensions||e.settings))return e;let r=V({},e);return r.vscode||(r.vscode={}),r.extensions&&(r.vscode.extensions=(r.vscode.extensions||[]).concat(r.extensions),delete r.extensions),r.settings&&(r.vscode.settings=V(V({},r.settings),r.vscode.settings||{}),delete r.settings),r})}):t}async function Bh(t,e,r,n,i){var l;let{output:o}=t,s=r.features;if(!s||!Object.keys(s).length)return;let a={featureSets:[],dstFolder:e},c=await Au(i(t.extensionPath),o);if(!c){o.write("Failed to load locally cached features",ce.Error);return}if(c=se(V({},c),{sourceInformation:{type:"local-cache"}}),a.featureSets.push(c),a=(l=await cJ(t,a,r))!=null?l:a,a=await Hh(t,r,a,n),!a.featureSets.every(u=>u.features.every(d=>d.value===!1)))return a}var HC=(t,e)=>`${t}-${C1(e)}`;async function Hh(t,e,r,n){var d;let{output:i}=t,o=await n(),s=o["com.visualstudio.code.devcontainers.id"],a=o.version,c=e.features||{},l={};for(let f of Object.keys(c)){let{id:p,sourceInformation:h}=(d=$h(f,i))!=null?d:{};if(p&&h){let m=HC(p,h);l[m]=c[f]}else{i.write(`Failed to read user declared feature ${f}. Skipping.`,ce.Error);continue}}let u={};for(let f of r.featureSets)for(let p of f.features){dJ(p);let h=HC(p.id,f.sourceInformation);s&&(p.exclude||[]).some(m=>b1(m,s,a))?p.included=!1:"include"in p?p.included=!!s&&(p.include||[]).some(m=>b1(m,s,a)):p.included=!0,u[h]=u[h]||p.included,p.value=l[h]||!1}t.output.write(`Feature configuration:
`+JSON.stringify(se(V({},r),{imageDetails:void 0}),void 0,"  "),ce.Trace);for(let f of r.featureSets)f.features=f.features.filter(p=>{let h=HC(p.id,f.sourceInformation);return h in u&&p.included===u[h]?(delete u[p.id],!0):!1});return r}function dJ(t){if(t.values){let e=t.options||(t.options={});e.version={type:"string",[t.customValues?"proposals":"enum"]:t.values,default:t.values[0],description:t.hint}}delete t.type,delete t.values,delete t.customValues,delete t.hint}function b1(t,e,r){let n=t.indexOf("@"),[i,o]=n!==-1?[t.slice(0,n),t.slice(n+1)]:[t,void 0];return e===i&&(!o||!r||v1.satisfies(r,o))}function ji(t){var e;return((e=t.options)==null?void 0:e.version)?"version":void 0}function Du(t){var r,n;let e=ji(t);if(!e)return!!t.value;if(typeof t.value=="object"){let i=t.value[e];return i===void 0&&t.options?(r=t.options[e])==null?void 0:r.default:i}return t.value===void 0&&t.options?(n=t.options[e])==null?void 0:n.default:t.value}function E1(t){var r;let e=ji(t);return e?t.options&&((r=t.options[e])==null?void 0:r.default):!0}var VC="com.docker.compose.project",_1="com.docker.compose.service";async function S1(t,e,r,n,i,o,s,a,c,l,u,d,f){return fJ(t,e,r,n,i,o,GC(n),s,a,c,l,u,d,f)}async function fJ(t,e,r,n,i,o,s,a,c,l,u,d,f,p){var v;let{common:h}=t,{cliHost:m}=e,g;try{let w=await ir(m,n,m.env,m.cwd),C=m.path.join(m.cwd,".env"),b=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await m.isFile(C)?C:void 0,S=await Ru(e,r,w),P=!c,_=a.Config.Labels||{},k=await Bh(t.common,await Wh(t.common),n,async()=>_,Rn),T=jh(k);g=await _c(t,a.Id,s,n.remoteUser),u&&c&&g.user!=="root"&&(g.launchRootShellServer?await oh(g,g.launchRootShellServer,s,n.configFilePath.path):h.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let A=Rt(m,g.shellServer);P||await wh(t,A,n);let M={cwd:i,dockerCLI:t.dockerCLI,dockerComposeCLI:await t.dockerComposeCLI(),env:h.env,containerId:a.Id,user:g.user,sessionId:h.sessionId,shutdownAction:n.shutdownAction,projectName:S,composeFiles:w,envFile:b,buildContainerRunArgs:l,service:n.service,runServices:n.runServices,logLevel:h.getLogLevel(),delay:1e4},{shutdownArgs:H,doneWithDocuments:J}=await Gh(t,A,"dockerCompose",M,P?n:void 0);h.backgroundTasks.push(J);let K=((v=n.vscode)==null?void 0:v.devPort)||Co,{hostOrContainerPort:oe,hostPortServer:te,connectionToken:F,webConnectionToken:L,remoteEnv:q,serverDownloaded:G}=await ih(h,g,n,async()=>T,K,zh(t,e,o,d,f,p));return H.hostPortServer=te,bc(h,g,oe,F,L,a,r),{params:h,properties:g,config:n,resolvedAuthority:{host:ko,port:oe,connectionToken:F,extensionHostEnv:q},webConnectionToken:L,tunnelInformation:h.isLocalContainer?Ec(a):{},dockerParams:t,dockerContainerId:a.Id,serverDownloaded:G}}catch(w){let C=w instanceof ge?w:new ge({description:"An error occurred setting up the container.",originalError:w});throw a&&(C.manageContainer=!0,C.params=t.common,C.containerId=a.Id,C.dockerParams=t),g&&(C.containerProperties=g),C.config=n,C}}function GC(t){return t.workspaceFolder||"/"}async function x1(t,e,r){if(Ht(t)){let n=vo(t),i=[];for(let o=0;o<e.length;o++){let s=await Di(n,e[o],r);i.push(s)}return i}return e}async function P1(t,e,r){try{let n=[].concat(...e.map(o=>["-f",o]));r&&n.push("--env-file",r);let i=await t.dockerComposeCLI();(Ls(i.version)||[])[0]>=2&&n.push("--profile","*");try{let{stdout:o}=await Hs(t,...n,"config"),s=o.toString();return t.output.write(s),_r(s)||{}}catch(o){if(!Buffer.isBuffer(o==null?void 0:o.stderr)||(o==null?void 0:o.stderr.toString().indexOf("UnicodeEncodeError"))===-1)throw o;if(t.cliHost.platform==="win32"){let{cmdOutput:c}=await wO(se(V({},t),{output:er({event:t.output.event,dimensions:{columns:999999,rows:1}},ce.Info)}),...n,"config");return _r(c.replace(fo,""))||{}}let{stdout:s}=await Hs(se(V({},t),{env:se(V({},t.env),{LANG:"en_US.UTF-8",LC_CTYPE:"en_US.UTF-8"})}),...n,"config"),a=s.toString();return t.output.write(a),_r(a)||{}}}catch(n){throw n instanceof ge?n:new ge({description:"An error occurred retrieving the Docker Compose configuration.",originalError:n,data:{fileWithError:e[0]}})}}async function k1(t,e,r){let n=await Fi(t,!0,[`${VC}=${e}`,`${_1}=${r}`]);return n&&n[0]}async function I1(t,e,r){var n;return(n=t.find(i=>{let o=i.Config.Labels||{};return o[VC]===e&&o[_1]===r}))==null?void 0:n.Id}async function Ru(t,e,r){let{cliHost:n}="cliHost"in t?t:t.common,i=await pJ(t),o=Vh(n.env.COMPOSE_PROJECT_NAME||"",i);if(o)return o;try{let c=n.path.join(n.cwd,".env"),l=await n.readFile(c),u=/^COMPOSE_PROJECT_NAME=(.+)$/m.exec(l.toString()),d=u&&u[1].trim(),f=Vh(d||"",i);if(f)return f}catch(c){if(!(c&&(c.code==="ENOENT"||c.code==="EISDIR")))throw c}let s=e.configFolderPath,a=r[0]?n.path.dirname(r[0]):n.cwd;return ED(n.platform,a,n.path.join(s,".devcontainer"))?Vh(`${n.path.basename(s)}_devcontainer`,i):Vh(n.path.basename(a),i)}function WC(t){let e=(t.Config.Labels||{})[VC];return e||void 0}function Vh(t,e){return e?t.toLowerCase().replace(/[^-_a-z0-9]/g,""):t.toLowerCase().replace(/[^a-z0-9]/g,"")}async function pJ(t){try{let e=Ls((await t.dockerComposeCLI()).version);return e?!nc(e,[1,21,0]):!0}catch{return!0}}function ii(t,e,r){let n;return()=>n||(n=(async()=>{let i=!1,o;try{o=(await Hs(se(V({},t),{cmd:r}),"version","--short")).stdout}catch(s){if((s==null?void 0:s.code)!=="ENOENT")throw s;o=(await Hs(se(V({},t),{cmd:e}),"compose","version","--short")).stdout,i=!0}return{version:o.toString().trim(),cmd:i?e:r,args:i?["compose"]:[]}})())}var oi=Y(require("url")),T1=Y(require("https"));var zC;(function(e){e[e.CannotAccessRepository=2]="CannotAccessRepository"})(zC||(zC={}));function si(t){return t.toLowerCase().indexOf("github.com")>=0?yJ(t):t.toLowerCase().indexOf("visualstudio.com")>=0?gJ(t):t.toLowerCase().indexOf("dev.azure.com")>=0?mJ(t):t.toLowerCase().indexOf("gitlab.com")>=0?vJ(t):hJ(t)}function $i(t){let e="owner",r="repository";return{repository:"unknown",repositoryUrl:t,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function hJ(t){var s;let e="unknown-owner",r,n=t,i;i=(s=oi.parse(t))==null?void 0:s.path;let o=i==null?void 0:i.split("/");return!o||o.length<1?$i(t):(r=o[o.length-1],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"unknown",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`})}function mJ(t){var o,s;let e,r,n=t,i;if(Kh(t)){let a=`http://${t}`;i=(o=oi.parse(a))==null?void 0:o.path;let c=i==null?void 0:i.split("/");if(!c||c.length<5)return $i(t);e=c[3],r=c[4]}else{i=(s=oi.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return $i(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function gJ(t){var o,s;let e,r,n=t,i;if(Kh(t)){let a=`http://${t}`;i=(o=oi.parse(a))==null?void 0:o.path;let c=i==null?void 0:i.split("/");if(!c||c.length<5)return $i(t);e=c[3],r=c[4]}else{i=(s=oi.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return $i(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function vJ(t){var o,s;let e,r,n=t,i;if(Kh(t)){let a=`http://${t}`;i=(o=oi.parse(a))==null?void 0:o.path,i&&(i=i.replace("/:","/"));let c=i==null?void 0:i.split("/");if(!c||c.length<3)return $i(t);e=c[1],r=c[2]}else{i=(s=oi.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<2)return $i(t);e=a[1],r=a[2]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function yJ(t){var c,l;let e,r,n=t,i,o,s;if(Kh(t)){let u=`http://${t}`;s=(c=oi.parse(u))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(l=oi.parse(t))==null?void 0:l.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return $i(t);if(e=a[1],r=a[2],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let u=t.match(/\/tree\/|\/commit\//);u&&u.index&&(n=t.substring(0,u.index),i=t.substring(u.index+u[0].length))}if(a[3]==="pull"){o=a[4];let u=t.match(/\/pull\//);u&&u.index&&(n=t.substring(0,u.index))}}return{repository:"github",repositoryUrl:n,ref:i,commit:a[3]==="commit",repositoryOwner:e,repositoryName:r,pullRequestId:o,fullRepositoryName:`${e}/${r}`}}function Kh(t){return t=t.toLowerCase(),t.indexOf("://")<0?t.indexOf("@")<t.indexOf(":"):!1}var Yh=class extends Error{constructor(e,r){super();this.code=e,this.description=r}},Jh=class{constructor(e){this.inputUrl=e,this.gitUrlInfo=si(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(e,r,n,i){}installExtension(){return null}},A1=class extends Jh{constructor(e){super(e)}async parseUrl(e){var o,s,a;let r=(o=this.gitUrlInfo)==null?void 0:o.repositoryOwner,n=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,i=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(e,r,n,i)}async getPullRequestInfo(e,r,n,i){var u,d,f,p,h,m,g,v,w,C,b;let o=await this.fetchPullRequestInfo(e,r,n,i),s=(d=(u=o.head)==null?void 0:u.repo)==null?void 0:d.clone_url,a=(p=(f=o.base)==null?void 0:f.repo)==null?void 0:p.clone_url;if(!a)throw new Yh(2,"Cannot access the head repository of the Pull Request.");let c=(h=o.head)==null?void 0:h.ref,l=((v=(g=(m=o.head)==null?void 0:m.repo)==null?void 0:g.owner)==null?void 0:v.login)===r?null:(b=(C=(w=o.head)==null?void 0:w.repo)==null?void 0:C.owner)==null?void 0:b.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:l}}async fetchPullRequestInfo(e,r,n,i){let o=`/repos/${r}/${n}/pulls/${i}`,s={"user-agent":"vscode-remote-containers"};e&&(s.authorization=`token ${e}`);let a={hostname:"api.github.com",port:443,path:o,method:"GET",headers:s};return new Promise((c,l)=>{let u="",d=T1.request(a,f=>{if(f.statusCode<200||f.statusCode>=300)return l(new Error(`Status Code: ${f.statusCode}`));f.on("data",p=>{u+=p}),f.on("end",()=>{let p=JSON.parse(u.toString());c(p)})});d.on("error",l),d.end()})}cloneOptions(e){return{url:e.urlToClone,fullClone:!0}}async postClone(e,r,n,i){if(e.sourceOwner){let l=e.prRepositoryUrl.replace(/\.[^/.]+$/,"");await xe({exec:r.exec,cmd:"git",args:["remote","add",e.sourceOwner,l],cwd:n,output:i}),await xe({exec:r.exec,cmd:"git",args:["fetch",e.sourceOwner,e.ref],cwd:n,output:i});try{await xe({exec:r.exec,cmd:"git",args:["checkout","-t",`${e.sourceOwner}/${e.ref}`],cwd:n,output:i})}catch(u){if(!(u.stderr&&u.stderr.startsWith(`fatal: A branch named '${e.ref}' already exists`)))throw u}await xe({exec:r.exec,cmd:"git",args:["config","--local",`remote.${e.sourceOwner}.github-pr-remote`,"true"],cwd:n,output:i})}else await xe({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:i});let o=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${o}#${s}#${a}`;await xe({exec:r.exec,cmd:"git",args:["config","--local",`branch.${e.ref}.github-pr-owner-number`,c],cwd:n,output:i})}installExtension(){return"GitHub.vscode-pull-request-github"}},D1=class extends Jh{constructor(e){super(e)}async parseUrl(e){var r,n;return{urlToClone:(r=this.gitUrlInfo)==null?void 0:r.repositoryUrl,ref:(n=this.gitUrlInfo)==null?void 0:n.ref}}cloneOptions(e){let r=this.gitUrlInfo.commit;return{url:e.urlToClone,branch:!r&&e.ref||void 0,fullClone:r}}async postClone(e,r,n,i){this.gitUrlInfo.commit&&await xe({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:i})}},KC=class extends Jh{constructor(e,r){super(e);this.branch=r}async parseUrl(e){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(e){return{url:e.urlToClone,branch:e.ref||void 0}}};function Sc(t,e){if(e)return new KC(t,e);let r=si(t);if(r.repository==="github"){if(r.pullRequestId)return new A1(t);if(r.ref)return new D1(t)}return new KC(t)}var Ou=Mt.join(__dirname,"..","node_modules","vscode-dev-containers","repository-containers");async function R1(t,e,r,n){if(e&&!/\/\.?devcontainer\.json$/.test(e.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${Ie(e,t.common.cliHost.platform)}).`);let i=t.parsedAuthority;if(!i||Wt(i))return wJ(t,i,e,r,n);if(pn(i))return i.inspectVolume?O1(t,i):CJ(t,i,e);if(Lu(i))return O1(t,i);throw new Error(`Unexpected authority: ${JSON.stringify(i)}`)}async function wJ(t,e,r,n,i){let{common:o,dockerCLI:s,dockerComposeCLI:a}=t,{cliHost:c,env:l,output:u}=o,d=c.cwd,f=t.originalCwd||d,p=e&&Ge(c.path,Hl(e.hostPath)?c.path.join(d,Mt.basename(e.hostPath)):d),h;p&&(h=await EJ(t,p),h&&(o.backgroundTasks.push(h==null?void 0:h.gitUnshallow),await h.gitClone()));let m={cliHost:c,dockerCLI:s,dockerComposeCLI:a,env:l,output:u},g=i||[`${ZC}=${f}`,`${Qh}=${o.product.quality}`];return YC(t,m,g,f,d,r,n,p,e==null?void 0:e.settings,[],o.cliMode?"never":"on")}async function CJ(t,e,r){let{repositoryPath:n,volumeName:i,folder:o}=e,s=dn(n);i=await M1(t,s,i);let{labels:a,remoteWorkspaceFolder:c}=q1(s,n,o,i),l=[...a,`${Qh}=${t.common.product.quality}`],{containerId:u,config:d}=await s.cloneAndInitializeRepository(t,e,s,i,r),f=Ge(Mt.posix,o?s.workspaceFolder(o):s.fullRepositoryName),p=[`type=volume,source=${i},target=${Mt.posix.dirname(f.rootFolderPath)},external=true`],h=await j1(t,u,c),m=V({},h.env),{HOME:g,USERPROFILE:v}=t.common.env;g!==void 0&&(m.HOME=g),v!==void 0&&(m.USERPROFILE=v);let w=XC(s,i,o),C=h.cliHost,b;if(wt(d)||"image"in d){let S=se(V({},d),{configFilePath:void 0,workspaceFolder:void 0,workspaceMount:""}),P=C.path.join(await C.tmpdir(),`devcontainer-${qr()}.json`);await C.writeFile(P,Buffer.from(JSON.stringify(S))),b=Ee.from({scheme:Dt.scheme,path:P})}try{return await YC(t,h,l,t.common.cliHost.cwd,C.cwd,r,b,f,e.settings,p,"off",w,!0)}finally{Promise.all(t.common.backgroundTasks.filter(S=>typeof S!="function").map(S=>S.catch(()=>{}))).then(()=>ze(t,"rm","-f",u))}}async function O1(t,e){let{common:r,dockerCLI:n,dockerComposeCLI:i}=t,{cliHost:o,env:s,output:a}=r,{volumeName:c}=e,l,u,d=Lu(e);d?(l=Xh,u="Inspect Volume"):(l=dn(e.repositoryPath).volumeDestination,u="Recovery Container");let f=[`${eb}=${c}`,`${Qh}=${r.product.quality}`],p=await F1(t),h=[`type=volume,source=${c},target=${l},external=true`],m={cliHost:o,dockerCLI:n,dockerComposeCLI:i,env:s,output:a},g=Ge(o.path,p);return YC(t,m,f,p,p,void 0,void 0,g,e.settings,h,"never",void 0,!d,u)}async function YC(t,e,r,n,i,o,s,a,c,l,u,d,f,p){let{common:h,userRepositoryConfigurationPaths:m,workspaceMountConsistencyDefault:g}=t,{output:v,extensionPath:w,appRoot:C,postCreate:b}=h,{cliHost:S}=e;t.cacheMount==="bind"&&await vr(h.localCacheFolder);let P=t.cacheMount==="volume"?[...l,"type=volume,source=vscode,target=/vscode,external=true"]:t.cacheMount==="bind"?[...l,`type=bind,source=${h.localCacheFolder},target=/vscode`]:l;t.cacheMount==="volume"&&await _h(e,"vscode");let _=o||(a?await ai(S,a,m,!s,v):void 0);if((_==null?void 0:_.scheme)==="file"&&S.type!=="local"){let L=Mt.dirname(_.fsPath),q=Mt.basename(_.fsPath),G=q===".devcontainer.json"?L:Mt.dirname(L),z=S.path.join(await S.tmpdir(),`devcontainer-config-${qr()}`);await Ys(G,S,z,v),_=Ee.from({scheme:Dt.scheme,path:S.path.join(z,...q===".devcontainer.json"?[q]:[Mt.basename(L),q])})}typeof t.removeOnStartup=="string"&&await ze(t,"rm","-f",t.removeOnStartup);let k=t.removeOnStartup===!0||!await U1(e,r),T=V(V({},t.dockerEnv),fr(t.dockerEnv)),A=await tb({cliHost:S,env:T,extensionPath:w,appRoot:C,package:h.package,postCreate:b,output:v},["up",...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],"--container-data-folder",on(t.common.product.serverDataFolderName),"--container-system-data-folder",sc(t.common.product.serverDataFolderName),"--workspace-folder",i,...t.workspaceMountConsistencyDefault?["--workspace-mount-consistency",t.workspaceMountConsistencyDefault]:[],...[].concat(...r.map(L=>["--id-label",L])),"--log-level",$a(h.getLogLevel()),..._?["--config",Ie(_,S.platform)]:[],...s?["--override-config",Ie(s,S.platform)]:[],...t.removeOnStartup===!0?["--remove-existing-container"]:[],...t.expectExistingContainer?["--expect-existing-container"]:[],...[].concat(...P.map(L=>["--mount",L])),"--skip-post-create","--update-remote-user-uid-default",u,"--mount-workspace-git-root",String(!h.cliMode),...v.dimensions?["--terminal-columns",String(v.dimensions.columns),"--terminal-rows",String(v.dimensions.rows)]:[]]);if((A==null?void 0:A.outcome)!=="success")throw new ge({description:`devcontainer command failed: ${A?JSON.stringify(A):"data missing"}`});let M=await fn(t,A.containerId);if(!M)return B1(h.output,"Dev container not found.");let H=_||(a?s?wC(S,a.configFolderPath):void 0:s),J=H&&await Ks(S,a,H,v,g,t.configUpdater,s,h.cliMode)||void 0;if(!J)throw H||a?new ge({description:`Dev container config (${Ie(H||wC(S,a.configFolderPath),S.platform)}) not found.`}):new ge({description:"No dev container config and no workspace found."});let K=J.config,oe=xc(c),te=p||(K.name?`Dev Container: ${K.name}${oe}`:`Dev Container${oe}`);h.setWorkspaceName(te);let F;if(wt(K)||"image"in K)F=await $1(t,e,a,K,J.workspaceConfig,n,i,M,k,f,r,_,s);else if("dockerComposeFile"in K){if(!a)throw new ge({description:"A Dev Container using Docker Compose requires a workspace folder."});F=await S1(t,e,a,K,n,i,M,k,d,f,r,_,s)}else throw new ge({description:`Dev container config (${K.configFilePath}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.`});return F}async function Ks(t,e,r,n,i,o,s,a=!1){let l=await Rt(t).readDocument(s!=null?s:r);if(!l)return;let u=Xe(l);u=u&&Us(u);let d=u;if(u&&o&&(u.configFilePath=r,d=o(u),delete d.configFilePath),!d||typeof d!="object"||Array.isArray(d))throw new ge({description:`Dev container config (${Ie(r,t.platform)}) must contain a JSON object literal.`});let f=await H1(t,e,d,n,i,a),p=oc({platform:t.platform,localWorkspaceFolder:e==null?void 0:e.rootFolderPath,containerWorkspaceFolder:f.workspaceFolder,configFile:r,env:t.env},d);return typeof p.workspaceFolder=="string"&&(f.workspaceFolder=p.workspaceFolder),"workspaceMount"in p&&(f.workspaceMount=p.workspaceMount),p.configFilePath=r,{config:p,workspaceConfig:f}}async function ai(t,e,r,n,i){let o=await JC(t,e,r,n,i);return o==null?void 0:o.uri}async function JC(t,e,r,n,i){let o=await XI(t,e,it),s=o&&await Nu(o,r);if(s)return{uri:s,location:"user"};let a=await gh(t,e.configFolderPath);if(a)return{uri:a,location:"workspace"};let c=o&&await Nu(o,[Ou]);if(c)return{uri:c,location:"builtin"};n&&i&&((o==null?void 0:o.length)?i.write(`No dev container config found. Additional locations checked:
${[...QC(o,r),...QC(o,[Ou])].map(l=>`- ${Mt.join(l,".devcontainer","devcontainer.json")}`).join(`
`)}`):i.write("No dev container config found. No repository connection string found."))}async function Nu(t,e){let r=QC(t,e);for(let n of r){let i=await vh(n);if(i)return Ee.file(i)}}function QC(t,e){let r=[],n=new Set(t.map(bJ).filter(i=>!!i));for(let i of n)for(let o of e){let s=Mt.join(o,i);r.push(s)}return r}function N1(t,e,r){let n=t.path.relative(e.rootFolderPath,Ie(r,t.platform));return n&&!n.startsWith("..")&&!t.path.isAbsolute(n)}function L1(t){if(t.scheme!=="file")return;let e=Mt.relative(Ou,t.fsPath);if(e&&!e.startsWith("..")&&!Mt.isAbsolute(e))return e}function bJ(t){let e;if(t.startsWith("https://"))e=t.substr(8);else{let r=/[^@:]+@([^:]+):(.+)/.exec(t);if(r)e=`${r[1]}/${r[2]}`;else return}if(!(e.toLowerCase().startsWith("github.com")&&(e=(/^[^/]+\/[^/]+\/[^/]+/.exec(e)||[])[0],!e)))return e.endsWith(".git")&&(e=e.substr(0,e.length-4)),e}async function EJ(t,e){var p;let{common:r,gitClone:n}=t,{cliHost:i}=r;if(!n)return;let o=su(r),s=su(r),a=Sc(n.url,n.branch),c=await a.parseUrl(n.tokenEnvVar?i.env[n.tokenEnvVar]:void 0),l=a.cloneOptions(c),u=se(V(V({},n),l),{env:V(V({},n.env),l.env)}),d=await Sp(r,r.cliHost,e.rootFolderPath,u,o.output,s.output),f=(p=d.gitClone)==null?void 0:p.then(()=>a.postClone(c,i,e.rootFolderPath,o.output));return{gitClone:async()=>{o.flush(),await f},gitUnshallow:async()=>{o.flush(),s.flush(),await d.gitUnshallow}}}function dn(t){return{repositoryPath:t,fullRepositoryName:Zh(t),repositoryName:_J(t),workspaceFolder:G1,volumeDestination:rb(),oldVolumeName:SJ(t),alreadyCloned:!1,imageName:xJ(t),uniqueVolumeName:PJ(t),getWorkspaceConfiguration:(e,r)=>kJ(e,r),getOldWorkspacePath:K1,cloneAndInitializeRepository:IJ,getConfigurationFromImage:z1,gitUrlHandler:Sc(t),gitUrlInfo:si(t)}}function Zh(t){let e=si(t);return e==null?void 0:e.fullRepositoryName}function _J(t){let e=si(t);return e==null?void 0:e.repositoryName}function rb(){return"/workspaces"}function SJ(t){let e=Zh(t);return`vsc-${On.posix.basename(e)}-${nb(t)}`}function xJ(t){let e=Zh(t),r=nb(t),n=On.posix.basename(e);return TC(`vsc-${n}-${r}`)}function PJ(t){let e=si(t),r="";e&&e.repositoryName&&(r=e.repositoryName,e.ref?r=`${r}-${e.ref.replace(/\//g,"-")}`:e.pullRequestId&&(r=`${r}-pull-${e.pullRequestId}`));let n=nb(t);return`${r}-${n}`}function nb(t){return V1.createHash("md5").update(t).digest("hex")}function kJ(t,e){let r=G1(t),n=`type=volume,src=${e},dst=${rb()}`;return{workspaceFolder:r,workspaceMount:n}}function G1(t){return On.posix.join(`${rb()}`,`${t}`)}async function IJ(t,{folder:e,cloneInfo:r},n,i,o){var u;await AJ(t);let{containerId:s,shellServer:a}=await TJ(t,n,i,e,o,t.configProvider,r),{config:c}=await z1(t,n,e,o,a),l=(u=n.gitUrlHandler)==null?void 0:u.installExtension();return l&&(c.vscode||(c.vscode={}),c.vscode.extensions||(c.vscode.extensions=[]),c.vscode.extensions.includes(l)||c.vscode.extensions.push(l)),{repository:n,volumeName:i,containerId:s,shellServer:a,config:c}}async function TJ(t,e,r,n,i,o,s){let{common:a}=t,{output:c,loadNativeModule:l}=a,u=e.fullRepositoryName,d,f,p,h;t.common.progress(tr.CloningRepository);let m=XC(e,r,n,t.buildContainerRunArgs);n?(c.write(`Cloning Github repository: ${u} into ${e.workspaceFolder(n)}
\r`),d=`fatal: destination path '${e.workspaceFolder(n)}' already exists`,h=e.workspaceFolder(n),p=`Repository '${u}' was already cloned into '${e.workspaceFolder(n)}'.
\r`):(c.write(`Cloning Github repository: ${u} into volume ${r}
\r`),d=`fatal: destination path '${u}' already exists`,h=`${u}`,p=`Repository '${u}' was already cloned into volume.`);let g=e.gitUrlHandler;if(!g)throw new ge({description:"Could not analyze the URL."});s?f=g.cloneOptions(s):f={url:e.repositoryPath};let{stdout:v}=await ze(t,...m),w=v.toString().trim(),C=gc(t,w,"root"),b=await Ai(C,c),S,P,_=Promise.resolve(),k;if(!a.cliMode){let H=await Jl(a,{remoteExec:C,user:"root",nodeExecutable:"node",shellServer:b});S=H.remoteContainersCLI,P=H.remoteEnv,_=H.ready,k=H.mrpcExec}let T=await hu(t,w,"root",l),A=yo("container",h,{},await k||C,T,()=>{throw new Error("not implemented")},void 0,c);try{a.cliMode||(t.common.isCopyGitConfigEnabled&&(await Fs(t.common,{homeFolder:"/root",shellServer:b},[".gitconfig"],"git"),await sh(t.common,{homeFolder:"/root",shellServer:b},{})),await ac({shellServer:b,nodeExecutable:"node"},S,c,"global"),await Fs(t.common,{homeFolder:"/root",shellServer:b},[".ssh","known_hosts"],"ssh"),await _);let H=su(a),J=await Sp(a,A,h,se(V({},f),{env:V(V({},P),f.env)}),c,H.output);if(await J.gitClone,J.gitUnshallow&&(a.backgroundTasks.push(J.gitUnshallow.then(()=>{})),J.gitUnshallow.then(H.flush,H.flush)),J.gitClone&&s)try{await g.postClone(s,A,h,c)}catch{return ib(t,w,`Failed to checkout the repository ${s.urlToClone}.`)}}catch(H){let J=H&&(H.cmdOutput||H.stack||H.message)||String(H);if(J=J.replace(fo,""),J.replace(/[\r\n]+/gm,"").includes(d))c.write(p),e.alreadyCloned=!0;else return ib(t,w,`Git clone failed. ${J}`)}let{configRaw:M}=await W1(t,e,n,i,b);if(!hc(M)&&o){c.write(`Repository ${u} has no development container files.
\r`);let H=!0;for(;H;){let J=await o.createConfiguration(h,A);if(J)H=!1;else if(J=await o.showError("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started.","Select Configuration"),J!=="Select Configuration")return ib(t,w,"Cancelled container configuration selection.")}}return{containerId:w,shellServer:b}}function XC(t,e,r,n=[]){return r?["run","-d","--mount",`type=volume,src=${e},dst=${t.volumeDestination}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${ob}`,"sleep","infinity"]:["run","-d","--mount",`type=volume,src=${e},dst=${t.fullRepositoryName}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${ob}`,"sleep","infinity"]}function ib(t,e,r){throw e&&ze(t,"rm","-f",e),new ge({description:r})}async function W1(t,e,r,n,i){let o,s;if(r?s=e.workspaceFolder(r):s=`${K1(e.repositoryPath)}`,n)return o=(await i.exec(`cat ${n.path} 2>/dev/null`,{logOutput:!1})).stdout,{configRaw:o&&Xe(o),configFile:n,workspaceFolder:s};if(n=await Nu([e.repositoryPath],t.userRepositoryConfigurationPaths),n&&(o=(await Oe(n.fsPath)).toString()),!n)for(let a of fc(On.posix,s))try{o=(await i.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,n=Ee.from({scheme:"vscode-remote",path:a});break}catch{}return n||(n=await Nu([e.repositoryPath],[Ou]),n&&(o=(await Oe(n.fsPath)).toString())),{configRaw:o&&Xe(o),configFile:n,workspaceFolder:s}}async function z1(t,e,r,n,i){let{configRaw:o,configFile:s,workspaceFolder:a}=await W1(t,e,r,n,i);if(!s||!o)throw new ge({description:"The repository does not have a 'devcontainer.json' configuration file."});let{common:c,configUpdater:l}=t,{cliHost:u,output:d}=c,f=Us(V({},o)),p=f;l&&(f.configFilePath=s,p=l(f),delete p.configFilePath);let h=oc({platform:u.platform,configFile:s,env:u.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:a},p);return h.configFilePath=s,("workspaceMount"in h||"workspaceFolder"in h)&&d.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),{workspaceFolder:a,config:h}}function K1(t){return`/workspaces/${On.posix.basename(Zh(t))}`}var ob="vsc-volume-bootstrap";var sb="bootstrap.Dockerfile";async function AJ(t){let{common:e,development:r}=t,{cliHost:n,output:i}=e,o=e.package.version,s=n.path.join(await n.tmpdir(),"vsch","bootstrap-image",r?`${o}-dev-${qr()}`:o);if(!await n.isFolder(s)){let c=`${s}-${qr()}`,l=n.path.join(c,".vscode-remote-containers","dist",`dev-containers-cli-${o}`);await n.mkdirp(n.path.join(l,"dist","spec-node")),await n.writeFile(n.path.join(c,sb),await Oe(On.join(e.extensionPath,"scripts",sb))),await n.writeFile(n.path.join(l,"package.json"),await Oe(On.join(e.extensionPath,"package.json"))),await n.writeFile(n.path.join(l,"dist","spec-node","devContainersSpecCLI.js"),await Oe(On.join(e.extensionPath,"dist","spec-node","devContainersSpecCLI.js")));let u=Rn(e.extensionPath),d=n.path.join(l,"dist","node_modules","vscode-dev-containers","container-features");await Ys(u,n,d,i),await n.rename(c,s)}let a=["build","-f",n.path.join(s,sb),"-t",ob,s];await xh(t,...a)}async function F1(t){let{common:e,development:r}=t,{cliHost:n,output:i}=e,o=e.package.version,s=n.path.join(await n.tmpdir(),"vsch","inspect-volume",r?`${o}-dev-${qr()}`:o);if(!await n.isFolder(s)){let a=`${s}-${qr()}`;await Ys(On.join(e.extensionPath,"scripts","inspect-volume"),n,a,i),await n.rename(a,s)}return s}async function M1(t,e,r){let n=[`vsch.local.repository=${e.repositoryPath}`];return r?r===hn?(r=e.uniqueVolumeName,n.push("vsch.local.repository.unique=true")):n.push("vsch.local.repository.unique=false"):(r=e.oldVolumeName,n.push("vsch.local.repository.unique=false")),e.gitUrlInfo.ref&&n.push(`vsch.local.repository.branch=${e.gitUrlInfo.ref}`),e.gitUrlInfo.pullRequestId&&n.push(`vsch.local.repository.pullRequestId=${e.gitUrlInfo.pullRequestId}`),(await xo(t)).indexOf(r)===-1&&await _h(t,r,n),r}var em="vsch.local.repository",ab="vsch.local.repository.volume",lb="vsch.local.repository.folder";function q1(t,e,r,n){return r?{labels:[`${em}=${e}`,`${ab}=${n}`,`${lb}=${r}`],remoteWorkspaceFolder:t.workspaceFolder(r)}:{labels:[`${em}=${e}`],remoteWorkspaceFolder:t.getOldWorkspacePath(e)}}async function j1(t,e,r){let{loadNativeModule:n,output:i}=t.common,o=gc(t,e,"root"),s=await hu(t,e,"root",n),a=yo("container",r,{},o,s,()=>{throw new Error("not implemented")},"node",i);return{cliHost:a,dockerCLI:"docker",dockerComposeCLI:ii({exec:a.exec,env:{},output:i},"docker","docker-compose"),env:{},output:i}}var Qh="vsch.quality",ZC="vsch.local.folder",eb="vsch.local.volume",Xh="/volume";async function $1(t,e,r,n,i,o,s,a,c,l,u,d,f){let{common:p}=t,h,m;try{let g=!c,v;return h=async()=>v||(v=(async()=>{let w=(a==null?void 0:a.Config.Labels)||{},C=await Bh(t.common,await Wh(t.common),n,async()=>w,Rn);return jh(C)})()),m=await _c(t,a.Id,i.workspaceFolder,n.remoteUser),l&&c&&i.workspaceFolder&&m.user!=="root"&&(m.launchRootShellServer?await oh(m,m.launchRootShellServer,i.workspaceFolder,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files.")),await RJ(a,t,e,m,n,h,r,g,o,s,u,d,f)}catch(g){throw DJ(g,a,t,m,n)}}function DJ(t,e,r,n,i){let o=t instanceof ge?t:new ge({description:"An error occurred setting up the container.",originalError:t});return e&&(o.manageContainer=!0,o.params=r.common,o.containerId=e.Id,o.dockerParams=r),n&&(o.containerProperties=n),i&&(o.config=i),o}async function RJ(t,e,r,n,i,o,s,a,c,l,u,d,f){var _;let{common:p}=e,h=Rt(p.cliHost,n.shellServer);a||await wh(e,h,i);let m={cwd:c,dockerCLI:e.dockerCLI,env:p.env,containerId:t.Id,user:n.user,sessionId:p.sessionId,shutdownAction:i.shutdownAction,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:g}=await Gh(e,h,"singleContainer",m,a?i:void 0),{hostOrContainerPort:v,hostPortServer:w,connectionToken:C,webConnectionToken:b,remoteEnv:S,serverDownloaded:P}=await ih(p,n,i,o,((_=i.vscode)==null?void 0:_.devPort)||Co,zh(e,r,l,u,d,f));return g.hostPortServer=w,bc(p,n,v,C,b,t,s),{params:p,properties:n,config:i,resolvedAuthority:{host:ko,port:v,connectionToken:C,extensionHostEnv:S},webConnectionToken:b,tunnelInformation:p.isLocalContainer?Ec(t):{},dockerParams:e,dockerContainerId:t.Id,serverDownloaded:P}}async function U1(t,e){let r=await Fi(t,!0,e);return(await So(t,r)).filter(i=>i.State.Status!=="removing")[0]}function Pc(t){let e=(t.Config.Labels||{})[ZC];return e||void 0}function Js(t){let e=(t.Config.Labels||{})[em];return e||void 0}function tm(t){let e=(t.Config.Labels||{})[ab];return e||void 0}function Y1(t){let e=(t.Config.Labels||{})[eb];return e||void 0}function J1(t){let e=(t.Config.Labels||{})[lb];return e||void 0}function B1(t,e){throw t.write(Ne(e)),new Error(e)}var Q1=Y(require("path"));async function X1(t,e,r,n,i,o){let s,a=new Promise(h=>s=h),c=new SC,l=[],u=await hO("vscode-remote-containers",async(h,m)=>{let g=await gO(h),v=[];if(g.type==="poll")try{v=await c.dequeue(6e4)}catch{}else if(g.type==="reply"){let w=l[g.sequence];w&&(w(g.reply),delete l[g.sequence])}else g.type==="done"&&s?s():g.type==="log"&&n.event(g.event);m.write(JSON.stringify(v)),m.end()});u.server.unref();let d=Q1.join(r,"dist","shutdown","shutdownMonitorProcess"),f=[u.ipcHandlePath,t,ce[e],i||"",o.getTime().toString()];n.write(`Forking shutdown monitor: ${d} ${f.join(" ")}\r
`);let p=PD(d,f,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return p.on("error",h=>{console.error(h)}),p.unref(),{queue:c,sequence:0,replies:l,done:a}}async function rm(t,e,r){let n=t.sequence++,i=new Promise(s=>t.replies[n]=s);return t.queue.push({type:"configure",sequence:n,options:e}),await i}async function Z1({queue:t,done:e}){t.push({type:"cleanup"}),await e}var tL=Y(require("util"));var Fu=Y(require("string_decoder"));var hn="__UNIQUE__",ko="127.0.0.1";function kc(t,e){let r=t.platform==="win32"&&!t.env.SSH_AUTH_SOCK?Aw:t.type==="wsl"?t.env.SSH_AUTH_SOCK:void 0,n={DOCKER_CONTEXT:"default"};return e&&("context"in e?n.DOCKER_CONTEXT=e.context:(e.host&&(e.host.startsWith("ssh://")&&t.type==="ssh"?n.VSCODE_DOCKER_HOST=e.host:n.DOCKER_HOST=e.host),e.certPath&&(n.DOCKER_CERT_PATH=e.certPath),e.tlsVerify&&(n.DOCKER_TLS_VERIFY=e.tlsVerify))),r&&(n.SSH_AUTH_SOCK=r),n}function Io(t){let e;if(t.DOCKER_CONTEXT&&t.DOCKER_CONTEXT!=="default")e={context:t.DOCKER_CONTEXT};else{e={};let r=t.VSCODE_DOCKER_HOST||t.DOCKER_HOST;r&&(e.host=r),t.DOCKER_CERT_PATH&&(e.certPath=t.DOCKER_CERT_PATH),t.DOCKER_TLS_VERIFY&&(e.tlsVerify=t.DOCKER_TLS_VERIFY),Object.keys(e).length||(e=void 0)}return e}function nm(t,e){e&&("context"in e&&e.context&&t.write(`Context: ${e.context}\r
`),"host"in e&&e.host&&t.write(`Host: ${e.host}\r
`),"certPath"in e&&e.certPath&&t.write(`CertPath: ${e.certPath}\r
`),"tlsVerify"in e&&e.tlsVerify&&t.write(`TLSVerify: ${e.tlsVerify}\r
`))}function im(t){return!t.VSCODE_DOCKER_HOST&&!t.DOCKER_HOST&&(!t.DOCKER_CONTEXT||t.DOCKER_CONTEXT==="default")}function xc(t){return t&&("context"in t||t.host)?` @ ${"context"in t?t.context:t.host}`:""}async function fn(t,e){try{return await Sr(t,e)}catch{return}}function bc(t,e,r,n,i,o,s){let a=o.Ports.filter(f=>!!f.PublicPort),c="";if(t.authority&&s){let f=s.isWorkspaceFile?"workspace":"folder",p=e.remoteWorkspaceFolder||"/",h=s.isWorkspaceFile?Nn.posix.join(p,t.cliHost.path.basename(s.workspaceOrFolderPath)):p;c=`&${f}=${encodeURIComponent(`vscode-remote://${t.authority}${h}`)}`}let l=[...a.length?["Published Ports:"]:[],...a.map(f=>`${f.PrivatePort}/${f.Type} -> ${f.IP}:${f.PublicPort}`),...a.length?[""]:[],...t.web?[`VS Code Web: http://localhost:${r}?tkn=${n||i}${c}`,""]:[]],u=l.reduce((f,p)=>Math.max(p.length,f),0),d="-".repeat(u);u>0&&t.output.write(`\r
\r
${d}\r
${l.join(`\r
`)}${d}\r
\r
`)}async function om(t){let{common:e}=t,{output:r}=e,n="Check Docker is running",i=r.start(n);try{let{stdout:o}=await ze(t,"version","--format","{{.Server.APIVersion}}"),s=o.toString();if(s.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(s);r.write(`Server API version: ${s.trim()}`)}catch(o){console.error(o);let s=o&&(o.stderr?o.stderr.toString():o.message)||"";s&&r.write(Ne(s));let a="Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed.",c=o&&(o.stderr?o.stderr.toString().toLowerCase():o.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a="Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction.":a="Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group.":c.indexOf("ENOENT")!==-1&&(a="The 'docker' command was not found. Make sure Docker is installed."),new ge({description:a,originalError:`Docker returned an error code ${o.code}, message: ${o.message}`})}finally{r.stop(n,i)}}function Wt(t){return t.hostPath!==void 0}function pn(t){return t.repositoryPath!==void 0}function Lu(t){return!pn(t)&&t.volumeName!==void 0}function mn(t){let e=nL("dev-container",t);if(!!e)return typeof e=="string"?{hostPath:e}:"repositoryPath"in e?e.dockerHost?{repositoryPath:e.repositoryPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`,cloneInfo:e.cloneInfo}}:e:"hostPath"in e&&e.dockerHost?{hostPath:e.hostPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`}}:e}function Mu(t,e,r,n){let i=r?JSON.stringify({hostPath:t,localDocker:n,settings:r}):t;return`vscode-remote://dev-container+${Buffer.from(i,"utf8").toString("hex")}${e}`}function Qs(t,e,r,n,i,o){if(t){let a=dn(t);if(!e){let l=JSON.stringify({repositoryPath:t,settings:i,cloneInfo:o,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(l,"utf8").toString("hex")}${a.getOldWorkspacePath(t)}`}let c=JSON.stringify({repositoryPath:t,volumeName:e,folder:r,settings:i,cloneInfo:o,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${a.workspaceFolder(r)}`}let s=JSON.stringify({volumeName:e,settings:i});return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${Xh}`}function sm(t){let e=nL("attached-container",t);if(!!e)return typeof e=="string"?{containerId:e}:(e.dockerHost&&(e.settings={host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},delete e.dockerHost),e)}function rL(t,e,r){let n=JSON.stringify({containerName:t,settings:e,cwd:r});return`attached-container+${Buffer.from(n,"utf8").toString("hex")}`}function nL(t,e){try{let[r,n]=e.split("+"),i=r===t&&n?Buffer.from(n,"hex").toString("utf8"):void 0;return i?i.startsWith("{")?JSON.parse(i):i:void 0}catch(r){console.warn(r);return}}async function ub(t,e,r,n=!1){return!n&&await cw(t,e,r)||e}function iL(t,e,r){let n=t.path.relative(t.path.dirname(e),r);return`/workspaces/${t.platform==="win32"?n.replace(/\\/g,"/"):n}`}async function H1(t,e,r,n,i,o=!1){if("dockerComposeFile"in r)return{workspaceFolder:GC(r),workspaceMount:void 0};let{workspaceFolder:s,workspaceMount:a}=r;if(e&&(!s||!("workspaceMount"in r))){let c=await ub(t,e.rootFolderPath,n,o);if(!s){let l=t.path.relative(t.path.dirname(c),e.rootFolderPath);s=`/workspaces/${t.platform==="win32"?l.replace(/\\/g,"/"):l}`}if(!("workspaceMount"in r)){let l=`/workspaces/${t.path.basename(c)}`,u=t.platform!=="linux"?`,consistency=${i||"consistent"}`:"",d=c.indexOf(",")!==-1?'"':"",f=l.indexOf(",")!==-1?'"':"";a=`type=bind,${d}source=${c}${d},${f}target=${l}${f}${u}`}}return{workspaceFolder:s,workspaceMount:a}}function oL(t,e,r){if(t==="win32")return e;let n=`${NJ(r,"/")}/`;return(t==="linux"?e.startsWith(n):e.toLowerCase().startsWith(n.toLowerCase()))&&(e=`~/${e.substr(n.length)}`),e}function NJ(t,e){if(e.length===0)return t;for(;t.endsWith(e);)t=t.substr(0,t.length-e.length);return t}function dO(t,e){return t.with({path:Nn.posix.resolve(t.path,e)})}async function Gh(t,e,r,n,i){let{common:o,onRemoveOnShutdownChanged:s}=t;if(o.cliMode)return{shutdownArgs:{},doneWithDocuments:Promise.resolve()};let a=o.output.start("Setup shutdown monitor"),c=await X1(r,o.getLogLevel(),o.extensionPath,o.output,o.logFilePath?Nn.dirname(o.logFilePath):void 0,o.sessionStart);rm(c,n,o.output).catch(f=>console.error(f)),s&&s(async f=>{n.rebuild=!!f,n.delay=0,await rm(c,n,o.output)}),o.onDidChangeLogLevel(async f=>{n.logLevel=f,await rm(c,n,o.output)});let l={},u=async()=>{let f=Z1(c);l.hostPortServer&&await(0,tL.promisify)(l.hostPortServer.close.bind(l.hostPortServer))(),await f};o.shutdowns.push(u);let d=i?lO(t,e,i).catch(console.error):Promise.resolve();return o.output.stop("Setup shutdown monitor",a),{monitor:c,shutdownArgs:l,doneWithDocuments:d}}function Ec(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>({remoteAddress:{port:e.PrivatePort,host:e.IP},localAddress:e.IP+":"+e.PublicPort}))}}async function _c(t,e,r,n,i){let{common:o}=t,s="Inspecting container",a=o.output.start(s),c=await Sr(t,e);o.output.stop(s,a);let l=n||c.Config.User||"root",[,u,,d]=/([^:]*)(:(.*))?/.exec(l),f=LJ(c.Config.Env),p=gc(t,e,l),h=await hu(t,e,l,o.loadNativeModule),m=gc(t,e,"root"),g=c.Mounts.find(C=>C.Type==="volume"&&C.Name==="vscode"),v=c.Mounts.find(C=>C.Type==="bind"&&C.Source===o.localCacheFolder),w=g&&Nn.posix.join(g.Destination,/^\.*(.*)$/.exec(o.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination);return th({params:o,createdAt:c.Created,startedAt:c.State.StartedAt,sharedDataFolder:w,sharedDataFolderIsLocalCacheFolder:!g&&!!v,remoteWorkspaceFolder:r,containerUser:u==="0"?"root":u,containerGroup:d,containerEnv:f,remoteExec:p,remotePtyExec:h,remoteExecAsRoot:m,rootShellServer:i})}function LJ(t){return(t||[]).reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=r.substr(n+1)),e},{})}async function Wh(t){let{cliHost:e}=t,{version:r}=t.package,n=e.path.join(await e.tmpdir(),"vsch","container-features",`${r}-${Date.now()}`);return await e.mkdirp(n),n}async function sL(t){let{common:e,dockerCLI:r,dockerComposeCLI:n,dockerEnv:i}=t,{cliHost:o,output:s}=e;return{cliHost:o,dockerCLI:r,dockerComposeCLI:n,env:i,output:s}}async function aL(t,e){return t.type==="local"&&e?t.path.join(e,"data"):t.path.join(await t.homedir(),".vscode-remote-containers","data")}async function Ys(t,e,r,n){await e.mkdirp(r);let i=eL.c({cwd:t,filter:l=>(console.log(l),!0)},["."]),o=new Promise((l,u)=>{i.on("error",u),i.on("finish",l)}),s=await e.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:r,output:n}),a=new Fu.StringDecoder;s.stdout.on("data",l=>{n.write(a.write(l))});let c=new Fu.StringDecoder;s.stderr.on("data",l=>{n.write(Ne(c.write(l)))}),i.pipe(s.stdin),await s.exit,await o}async function tb(t,e){let{cliHost:r,env:n,appRoot:i,postCreate:o,output:s}=t,a=await MJ(t),c=r.type==="local"?Ti?Uw:process.argv[0]:r.nodeExecutable||(()=>{throw new Error("nodeExecutable required")})(),l;return await FJ({exec:r.exec,cwd:a.cwd,cmd:c,args:[a.script,...e],env:V(V({},n),r.type==="local"?i?{NODE_PATH:r.path.join(i,"node_modules.asar")}:void 0:r.type==="container"?void 0:{NODE_PATH:r.path.join(r.path.dirname(c),"node_modules")}),stdin:o.onDidInput,output:s,stdoutData:u=>l=u,stderrData:u=>{s.event(u)}}),l}async function FJ(t){let{exec:e,cmd:r,args:n,cwd:i,env:o,stdin:s,output:a,stdoutData:c,stderrData:l}=t,u=await e({cmd:r,args:n,cwd:i,env:o,output:a});return new Promise((d,f)=>{let p=new Fu.StringDecoder,h="";u.stdout.on("data",w=>{h+=p.write(w);let C=h.split(`
`);h=C.pop();for(let b of C)if(b.trim())try{c(JSON.parse(b))}catch{a.write(b)}}),u.stdout.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let m=new Fu.StringDecoder,g="";u.stderr.on("data",w=>{g+=m.write(w);let C=g.split(`
`);g=C.pop();for(let b of C)if(b.trim())try{l(JSON.parse(b))}catch{a.write(b)}}),u.stderr.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let v=[];u.exit.then(({code:w})=>{try{v.forEach(C=>C.dispose()),w?(a.write(`Exit code ${w}`),f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,code:w})):d()}catch(C){f(C)}},f),typeof s=="function"&&v.push(s(w=>u.stdin.write(w)))})}async function MJ(t){let{cliHost:e,extensionPath:r,output:n}=t,i=Nn.join(r,Ti?"src":"dist","spec-node",`devContainersSpecCLI.${Ti?"t":"j"}s`),o=e.type==="local"?r:e.path.join(await e.homedir(),".vscode-remote-containers","dist",`dev-containers-cli-${t.package.version}`),s=e.type==="local"?i:e.path.join(o,"dist","spec-node","devContainersSpecCLI.js");if(["wsl","ssh"].indexOf(e.type)!==-1&&!await e.isFile(s)){let a=`${o}-${qr()}`,c=e.path.join(a,"dist","spec-node","devContainersSpecCLI.js");await e.mkdirp(e.path.dirname(c)),await e.writeFile(e.path.join(a,"package.json"),await Oe(Nn.join(r,"package.json"))),await e.writeFile(c,await Oe(i));let l=Rn(r),u=e.path.join(a,"dist","node_modules","vscode-dev-containers","container-features");await Ys(l,e,u,n),await Ys(Nn.join(r,"scripts"),e,e.path.join(a,"scripts"),n),await e.rename(a,o)}return{cwd:o,script:s}}function zh(t,e,r,n,i,o){return async(s,a,c,l)=>{let{common:u}=t,{cliHost:d}=e,f=V(V({},t.dockerEnv),fr(t.dockerEnv)),p={cliHost:e.cliHost,env:f,extensionPath:u.extensionPath,appRoot:u.appRoot,package:u.package,postCreate:u.postCreate,output:u.postCreate.output},h=u.postCreate.output.dimensions||u.output.dimensions,m=await tb(p,["run-user-commands",...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],"--container-data-folder",on(t.common.product.serverDataFolderName),"--container-system-data-folder",sc(t.common.product.serverDataFolderName),"--workspace-folder",r,...[].concat(...n.map(g=>["--id-label",g])),"--log-level",$a(u.getLogLevel()),...i?["--config",Ie(i,d.platform)]:[],...o?["--override-config",Ie(o,d.platform)]:[],"--default-user-env-probe",u.defaultUserEnvProbe,"--skip-non-blocking-commands",String(s),"--prebuild",String(c),"--stop-for-personalization",String(a),...[].concat(...Object.keys(l).map(g=>["--remote-env",`${g}=${l[g]}`])),"--mount-workspace-git-root",String(!u.cliMode),...h?["--terminal-columns",String(h.columns),"--terminal-rows",String(h.rows)]:[]]);if((m==null?void 0:m.outcome)!=="success")throw new ge({description:`devcontainer command failed: ${m?JSON.stringify(m):"data missing"}`});return m.result}}var ut=Y(require("vscode"));var Xs={id:"openDocumentation",title:"Open Documentation",isLastAction:!1,applicable:(t,e)=>!e,execute:async t=>{await ut.env.openExternal(ut.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},Zs={id:"reloadWindow",title:"Reload Window",isLastAction:!0,applicable:(t,e)=>!e&&t.data.reload!==!1,execute:async t=>{t.manageContainer&&t.dockerParams&&t.containerId&&await ze(t.dockerParams,"stop","-t","0",t.containerId),await ut.commands.executeCommand("workbench.action.reloadWindow")}},cL={id:"rebuildContainer",title:"Rebuild Container",isLastAction:!0,applicable:(t,e)=>t.manageContainer&&!!t.dockerParams&&!!t.containerId&&!e,execute:async t=>{await ze(t.dockerParams,"rm","-f",t.containerId),await ut.commands.executeCommand("workbench.action.reloadWindow")}},Ic={id:"openRecent",title:"Open Recent...",isLastAction:!0,applicable:(t,e)=>!e,execute:async t=>{await ut.commands.executeCommand("workbench.action.openRecent")}},lL={id:"startContainer",title:"Start Container",isLastAction:!0,applicable:t=>!!t.dockerParams&&!!t.containerId&&t.data.start===!0,execute:async t=>{await ze(t.dockerParams,"start",t.containerId),await ut.commands.executeCommand("workbench.action.reloadWindow")}},uL={id:"chooseContainer",title:"Choose Container",isLastAction:!0,applicable:t=>t.data.attach===!0,execute:async()=>{await ut.commands.executeCommand("remote-containers.attachToRunningContainer")}},To={id:"closeRemote",title:"Close Remote",isLastAction:!0,applicable:(t,e)=>{if(!e)return!1;let r=ut.workspace.workspaceFile;return!(r&&r.scheme==="untitled"||ut.workspace.textDocuments.some(i=>i.isDirty))},execute:async t=>{await ut.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},Tc=[{id:"retry",title:"Retry",isLastAction:!0,applicable:(t,e)=>e&&t.data.reload!==!1,execute:Zs.execute},{id:"moreActions",title:"More Actions...",isCloseAffordance:!0,isLastAction:!1,applicable:(t,e)=>e,execute:async t=>{}},{id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(t,e)=>e&&!!t.data.learnMoreUrl,async execute(t){await ut.env.openExternal(ut.Uri.parse(t.data.learnMoreUrl))}}];async function Ao(t,e,r,n=!1,i){var f,p,h,m,g,v;let o=t instanceof ge?t:new ge({description:"An error occurred setting up the container.",originalError:t});if(i){i.show();let w=o.originalError&&(o.originalError.stack||o.originalError.message)||o.originalError;if(w!==void 0){i.log.write(Ne(String(w)));let C=(p=(f=o.originalError)==null?void 0:f.stdout)==null?void 0:p.toString().trim();C&&i.log.write(C);let b=(m=(h=o.originalError)==null?void 0:h.stderr)==null?void 0:m.toString().trim();b&&i.log.write(Ne(b)),((g=o.originalError)==null?void 0:g.code)&&i.log.write(`Exit code ${(v=o.originalError)==null?void 0:v.code}`)}}if(t.message.indexOf("Cancelled container configuration selection")!==-1)throw await ut.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),ut.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let s=o.actions;s.length||(s=[Xs]);let a=await s.reduce(async(w,C)=>await C.applicable(o,!0)?[...await w,C]:w,Promise.resolve([])),c=await ut.window.showErrorMessage(o.description,{modal:!0},...a);if(c&&(dL(r,e,c.id),await c.execute(o)),c&&c.isLastAction){if(n)throw ut.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let l=await s.reduce(async(w,C)=>await C.applicable(o,!1)?[...await w,C]:w,Promise.resolve([])),u=l.map(w=>({label:w.title,action:w}));async function d(){let C=await(l.length?ut.window.showQuickPick(u,{ignoreFocusOut:!0,placeHolder:"Pick an action to help resolve the problem."}):Promise.resolve(void 0));C&&(dL(r,e,C.action.id),C.action.execute(o).catch(console.error),C.action.isLastAction||await d())}if(d().catch(console.error),n)throw ut.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function dL(t,e,r){t.sendTelemetryEvent("errorAction",{resolver:e,action:r})}var re=Y(require("vscode")),Yu=Y(require("path")),BM=Y(require("os"));var HM=Y(iF()),No=Y(UM());var Bte="remote.containers.defaultExtensions",li="remote-containers.revealLogTerminal",rE="remote-containers.revealPostCreateTerminal",Ju="remote-containers.openDevContainerFile",VM="remote-containers.openRepositoryInVolume",xm="remote-containers.openRepositoryInUniqueVolume",GM="remote-containers.openRepositoryFromRemoteHub",WM="remote-containers.openPullRequestInVolume",Qu=re.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),Xu=re.Uri.parse("https://aka.ms/vscode-dev-containers"),zM=new hw,ar={onRemoveOnShutdownChangedEmitter:zM,onRemoveOnShutdownChanged:zM.event,results:new Map},ra,ui=t=>kD(t,re.env.appRoot);function Pm(t,e,r,n){return async(i,o)=>{if(re.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0),o.resolveAttempt>1){let s=r.get(i);if(!s)throw new Error("Reconnect attempt without old result.");let a=`Reconnection attempt ${o.resolveAttempt-1}`,c=t.log.start(a),{cliHost:l}=s.params;if(l.reconnect)try{await l.reconnect()}catch(u){throw t.log.write(Ne(String(u&&(u.stack||u.message)||u))),re.RemoteAuthorityResolverError.TemporarilyNotAvailable("Cannot reconnect to remote host.")}if(s.dockerContainerId){let u=await fn(s.dockerParams,s.dockerContainerId);if(!u)throw re.RemoteAuthorityResolverError.NotAvailable("Container no longer exists.");if(u.State.Status==="paused")throw re.RemoteAuthorityResolverError.TemporarilyNotAvailable("Container is paused.");if(u.State.Status!=="running")throw re.RemoteAuthorityResolverError.NotAvailable("Container is no longer running.")}return t.log.stop(a,c),se(V({},s.resolvedAuthority),{isTrusted:s.isTrusted})}else{let s="Resolving Remote",a=t.log.start(s),c=await n(i,t,e);return Hte(c.params,c.properties).catch(l=>{}),r.set(i,c),t.log.stop(s,a),re.window.withProgress({location:re.ProgressLocation.Window,title:are,cancellable:!1},async l=>{await vR(c.params.backgroundTasks)}).then(void 0,l=>{t.log.write(Ne(String(l&&(l.stack||l.message)||l)))}),se(V(V({},c.resolvedAuthority),c.tunnelInformation),{isTrusted:c.isTrusted})}}}async function Hte(t,e){if(!e.nodeExecutable)return;let r=await Oe(Yu.join(t.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:n}=await Ri(t,e,[e.nodeExecutable,"-e",r],void 0,{silent:!0}),i=n.toString().trim();t.sendTelemetryEvent("extraInfo",{remoteCloud:i})}var nE;async function Vte(t){return nE||(nE=ni(Yu.join(__dirname,"..",".."),Bi,t)),nE}var Zu={};async function Bi(t,e=!0){var r;if(t.counter&&((r=Zu[t.prompt])==null?void 0:r.from)===t.counter&&delete Zu[t.prompt],!Zu[t.prompt]){if(!e)return"";Zu[t.prompt]={result:Promise.resolve(re.window.showInputBox({prompt:t.prompt||"Enter password",password:!0,ignoreFocusOut:!0}).then(n=>n||"")),from:t.counter}}return Zu[t.prompt].result}async function He(t,e,r,n=!0,i=Vte(e),o=!0){let s=!r;if(s){if(ar.results.size){let g=[...ar.results.values()].filter(v=>v.dockerParams)[0];return sL(g.dockerParams)}if(ra)return ra}r&&typeof r!="string"&&"scheme"in r&&(r.scheme==="file"?r=r.fsPath:r=Za(r));let a;if(!r){let g=(re.workspace.workspaceFolders||[])[0];if(re.env.remoteName==="wsl")g?r=Za(g.uri):r={wslDistro:Hp(re.env.remoteAuthority),wslPath:"/"};else if(re.env.remoteName==="ssh-remote"){let v=Gte(re.env.remoteAuthority);if(v){let{user:w,hostName:C,port:b}=v;a={host:`ssh://${w?`${w}@`:""}${C}${b?`:${b}`:""}`},g?r=g.uri.path:r="/"}}else(g==null?void 0:g.uri.scheme)==="file"&&(r=g.uri.fsPath);r||(r=process.cwd())}let c=a&&"host"in a&&a.host||void 0,l=n?qn():{executeInWSL:"never",defaultDistro:void 0},u=Tn(c,r,ui,l,t.extensionPath,Vi(),await tu(re.env.appRoot),e,fi,{sshAskpassEnv:i,settings:qc()});o&&!await Promise.race([u,ti(1e3)])&&await re.window.withProgress({location:re.ProgressLocation.Notification,title:`[Setting up Remote-Containers (show log)](command:${li} "Show details in terminal")`,cancellable:!1},async()=>{await u});let d=await u,f=Mn(),p=Lo();if(!a){let g=re.workspace.getConfiguration("docker"),v=g.get("context")||d.env.DOCKER_CONTEXT;if(!v){let w={cliHost:d,dockerCLI:f,dockerComposeCLI:ii({exec:d.exec,env:{},output:it},f,p),env:{},output:it};v=await kC(w)||"default"}v&&v!=="default"?a={context:v}:(a=Io(d.env)||{},"context"in a||(iE(a,g,"host"),iE(a,g,"certPath"),iE(a,g,"tlsVerify"),Object.keys(a).length||(a=void 0)))}let h=V(V({},await i),kc(d,a)),m={cliHost:d,dockerCLI:f,dockerComposeCLI:ii({exec:d.exec,env:h,output:e},f,p),env:h,output:e};return s&&(ra=m),m}var km;function KM(t){if(km)return km;let e=zte(t);return t.subscriptions.push(e),t.subscriptions.push(e.event(()=>{let r=ra==null?void 0:ra.cliHost;ra=void 0,(r==null?void 0:r.terminate)&&r.terminate()})),km=e.event,km}function Gte(t){let e=/^ssh-remote\+(.*)$/.exec(t);if(!e)return;let r=e[1];try{let n=JSON.parse(Buffer.from(r,"hex").toString("utf8"));if(n&&n.hostName)return n}catch{}return{hostName:r}}function iE(t,e,r){let n=e.get(r);n&&(t[r]=n)}var Wte=["remote.containers.dockerPath","remote.containers.executeInWSL","remote.containers.executeInWSLDistro","docker.context","docker.host","docker.certPath","docker.tlsVerify"];function zte(t){let e=new re.EventEmitter,r=re.workspace.onDidChangeConfiguration(async c=>{Wte.some(l=>c.affectsConfiguration(l))&&e.fire()}),n,i,o,s=()=>{(async()=>{i||(i=await Tn(void 0,process.cwd(),ui,qn(),t.extensionPath,Vi(),void 0,it,fi));let c={cliHost:i,dockerCLI:Mn(),dockerComposeCLI:ii({exec:i.exec,env:{},output:it},Mn(),Lo()),env:{},output:it},l=await kC(c);l===void 0?o=setTimeout(s,2*60*1e3):(l!==n&&(n!==void 0&&e.fire(),n=l),o=setTimeout(s,2*1e3))})().catch(console.error)};s();let a=e.dispose;return e.dispose=()=>{r.dispose(),o&&clearTimeout(o),a.call(e)},e}async function na(){let t=re.workspace.workspaceFolders;if((t==null?void 0:t.length)===1){let e=t[0].uri;return oE(e)}return null}async function oE(t){if(t&&t.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(t.authority)){let r=mn(t.authority);if(Wt(r))return null;if(pn(r)&&r.inspectVolume&&r.inspectVolume===!0)return r}return null}function Im(t){return{getConfigurationState:()=>t.get("configurationState"),updateConfigurationState:async e=>t.update("configurationState",e),containerOutdated:Kte}}async function Kte(t){let e="Rebuild",r="Ignore",n=await re.window.showInformationMessage(`Configuration file(s) changed: ${t.join(", ")}. The container might need to be rebuilt to apply the changes.`,e,r);if(n===e)return re.commands.executeCommand("remote-containers.rebuildContainer");if(n===r)return"ignore"}async function Yte(t){return t?YM():Array.from(new Set([...re.workspace.getConfiguration().get(Bte)||[],...YM()]))}function YM(){let t=re.env.language,e=t.indexOf("-"),r=JM(t)||(e!==-1?JM(t.substr(0,e)):void 0);return r?[r]:[]}function JM(t){let e=t.toLowerCase();return re.extensions.all.filter(r=>{var i;let n=r.packageJSON&&r.packageJSON.contributes;return((i=n==null?void 0:n.localizations)==null?void 0:i.length)?!!n.localizations.find(o=>{var s;return((s=o==null?void 0:o.languageId)==null?void 0:s.toLowerCase())===e}):!1}).map(r=>r.id)[0]}function Jte(){return re.env.isTelemetryEnabled}function QM(){return!!re.workspace.getConfiguration().get("workbench.enableExperiments")}function Qte(){return!!re.workspace.getConfiguration().get("remote.containers.enableWebAccess")}function Tm(){return re.workspace.getConfiguration().get("remote.containers.workspaceMountConsistency")||"cached"}function Am(){return!!re.workspace.getConfiguration().get("remote.containers.experimentalUpdateRemoteUserUIDOnMacOS")}function Dm(){var t;return(t=re.workspace.getConfiguration().get("remote.containers.cacheVolume"))!=null?t:!0}function Xte(){let t=re.workspace.getConfiguration().get("remote.containers.copyGitConfig");return typeof t=="boolean"?t:!0}function Zte(){return re.workspace.getConfiguration().get("remote.containers.gitCredentialHelperConfigLocation")||"global"}function Mn(){return re.workspace.getConfiguration().get("remote.containers.dockerPath")||"docker"}function qn(){return{executeInWSL:sE(),defaultDistro:ere()}}function sE(){return process.platform!=="win32"?"never":re.workspace.getConfiguration().get("remote.containers.executeInWSL",!1)?"always":"forWSLPath"}function ere(){if(process.platform==="win32")return re.workspace.getConfiguration().get("remote.containers.executeInWSLDistro")||void 0}function Lo(){return re.workspace.getConfiguration().get("remote.containers.dockerComposePath")||"docker-compose"}function aE(){let t=re.workspace.getConfiguration().get("remote.containers.logLevel")||"debug";return hk(t)}var tre=t=>re.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration("remote.containers.logLevel")&&t(aE())});function rre(){let t=re.workspace.getConfiguration();return{repository:(t.get("remote.containers.dotfiles.repository","")||t.get("dotfiles.repository","")).trim()||void 0,installCommand:(t.get("remote.containers.dotfiles.installCommand","")||t.get("dotfiles.installCommand","")).trim()||void 0,targetPath:(t.get("remote.containers.dotfiles.targetPath","")||t.get("dotfiles.targetPath","")).trim()||"~/dotfiles"}}function qc(){let t=re.workspace.getConfiguration();return{executablePath:t.get("remote.SSH.path"),configFilePath:t.get("remote.SSH.configFile")}}function Hi(t,e,r,n,i,o){var l;let s={resolver:e,outcome:r};n&&(s.configProperties=JSON.stringify(Object.keys(n)),s.configExtensions=JSON.stringify(((l=n.vscode)==null?void 0:l.extensions)||[]),s.configFeatures=JSON.stringify(Object.keys(n.features||{})),"image"in n?s.configType="image":wt(n)?s.configType="dockerfile":"dockerComposeFile"in n&&(s.configType="dockerCompose")),i&&(s.hardwareId=i.osRelease.hardware,s.osReleaseId=i.osRelease.id,s.osReleaseVersion=i.osRelease.version);let a=o&&o.originalError,c=a&&(a.stack||a.message||String(a))||o&&o.description;c&&(s.errorMessage=c),t.sendTelemetryEvent("resolver",s)}var XM=class{constructor(e){this.onClose=e;this.writeEmitter=new re.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.inputEmitter=new re.EventEmitter;this.onDidInput=this.inputEmitter.event;this.queue=[];this.ready=!1}open(){this.ready=!0,this.queue.forEach(e=>this.writeEmitter.fire(e))}close(){this.ready=!1,this.onClose()}write(e){this.queue.push(e),this.ready&&this.writeEmitter.fire(e)}handleInput(e){this.inputEmitter.fire(e)}},Rm=class{constructor(e,r,n=void 0){this.sessionStart=r;this.outputTerminal=new XM(()=>this._terminal=void 0);this.onDidInput=this.outputTerminal.onDidInput;this._name="Dev Containers";this._revealOnNextOutput=!1;let i=o=>{this.outputTerminal.write(o),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=e?Yu.join(e,`remoteContainers-${r.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=nre(i,aE,this.logFilePath,r,n),Object.defineProperty(this.log,"dimensions",{get:()=>{var o;return(o=this._terminal)==null?void 0:o.dimensions}}),this.log.onDidChangeDimensions=o=>re.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&o(s.dimensions)})}get name(){return this._name}set name(e){this._name=e}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(e){this._revealOnNextOutput=e}show(){this._terminal||(this._terminal=re.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function nre(t,e,r,n,i=void 0){let o=[];return r&&o.push(gk(r,()=>Math.min(ce.Debug,e()))),o.push(vk(t,e,n)),er(mk(o,i))}async function cE(t,e){let r=await fn(t,e.Id);if(r&&r.State.Status==="running")try{await ze(t,"stop",r.Id)}catch(n){re.window.showErrorMessage(`Error stopping container: ${n.message}`)}}async function Om(t,e){let r=await fn(t,e.Id);if(r&&r.State.Status!=="running")try{await ze(t,"start",r.Id)}catch(n){re.window.showErrorMessage(`Error starting container: ${n.message}`)}}async function ZM(t,e){try{await ze(t,"rm",e)}catch(r){re.window.showErrorMessage(`Error removing container: ${r.message}`)}}async function lE(t,e){try{await ze(t,"volume","rm","--force",e)}catch(r){re.window.showErrorMessage(`Error removing volume: ${r.message}`)}}function ire(){return re.env.sessionId!=="someValue.sessionId"?re.env.sessionId:`${re.env.sessionId}_${Date.now()}`}function ore(t,e){let r=re.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:t.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:e,tildify:!0}});t.shutdowns.push(r.dispose.bind(r))}async function eq(t,e){if(t.globalState.get("removeOnStartup")===e)return await t.globalState.update("removeOnStartup",null),!0;let r=t.workspaceState.get("removeOnStartup",!1);return r&&await t.workspaceState.update("removeOnStartup",null),r}async function tq(t,e){await t.workspaceState.update("removeOnStartup",e)}async function uE(t,e){await t.globalState.update("removeOnStartup",e)}async function rq(t,e){return t.globalState.get("buildNoCache")===e?(await t.globalState.update("buildNoCache",null),!0):!1}async function ed(t,e){await t.globalState.update("buildNoCache",e)}async function td(t,e,r,n,i){await t.globalState.update("openEditorsOnStartup",{workspaceFolder:e,fileWithError:r==null?void 0:r.toString(),logFile:n,openLog:i})}async function nq(t){var r;let e=t.globalState.get("openEditorsOnStartup");if(e){await t.globalState.update("openEditorsOnStartup",void 0);let n=(r=re.workspace.workspaceFolders)==null?void 0:r.some(o=>o.uri.fsPath===e.workspaceFolder||o.uri.path===e.workspaceFolder),i=await na();if(n||i&&i.repositoryPath===e.workspaceFolder&&(n=!0),n){let o=e.fileWithError?Ee.parse(e.fileWithError):void 0;if(e.openLog==="onTheSide"&&await oq(o),e.openLog&&e.logFile){let s={viewColumn:e.openLog==="onTheSide"?re.ViewColumn.Beside:re.ViewColumn.One,preserveFocus:!0},a=await re.window.showTextDocument(re.Uri.file(e.logFile),s),c=new re.Position(a.document.lineCount-1,0);a.selection=new re.Selection(c,c),a.revealRange(a.selection)}return e.openLog!=="onTheSide"&&await oq(o),!0}}return!1}function iq(t){return[`vscode-remote:/workspaces/${t}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${t}/.devcontainer.json`]}async function oq(t){return t?re.commands.executeCommand("vscode.open",re.Uri.parse(t.toString()),{viewColumn:re.ViewColumn.One}):re.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:re.ViewColumn.One})}async function dE(t){if(ar.results.size)return[...ar.results.values()].filter(o=>o.config).map(o=>o.config.configFilePath);let e=di(),r=re.workspace.workspaceFolders||[],n=await Promise.all(r.map(async o=>{let s=Ge(t.path,Ie(o.uri,t.platform));return await ai(t,s,e)})),i=re.workspace.workspaceFile;if(i&&i.scheme!=="untitled"){let o=Ge(t.path,Ie(i,t.platform)),s=await ai(t,o,e);s&&n.indexOf(s)===-1&&n.unshift(s)}return n.filter(o=>!!o)}function di(){return re.workspace.getConfiguration().get("remote.containers.repositoryConfigurationPaths")||[]}async function sre(t,e,r="localhost"){await re.workspace.openTunnel({remoteAddress:{host:r,port:e}})}function sq(t,e){let r=new Rm(void 0,e);r.name="Configuring...",r.revealOnNextOutput=!0;let n=!1;r.onDidInput(()=>{n&&(n=!1,r.dispose())});let i,o={enabled:!0,skipNonBlocking:!1,output:ID(r.log,"postCreate",t),onDidInput:r.onDidInput,done:()=>{r.shown&&(r.log.raw("[1mDone. Press any key to close the terminal.[0m"),n=!0),i()},promise:new Promise(s=>i=s)};return{channel:r,postCreate:o}}async function jc(t){let{authority:e,extensionContext:r,sessionStart:n,progress:i,cliHost:o,env:s,cwd:a,isLocalContainer:c,telemetry:l,output:u,logFilePath:d,allowSystemConfigChange:f,postCreate:p}=t,h=Qte(),m=se(V({computeExtensionHostEnv:!0},l),{appRoot:re.env.appRoot,localCacheFolder:Vi(),extensionPath:r.extensionPath,webConnectionToken:void 0,sessionId:ire(),sessionStart:n,authority:e,cliHost:o,env:s,cwd:a,isLocalContainer:c,getAdditionalExtensionsToInstall:Yte,isCopyGitConfigEnabled:Xte(),credentialHelperConfigLocation:Zte(),dotfilesConfiguration:rre(),progress:lre(i),output:u,logFilePath:d,allowSystemConfigChange:f,defaultUserEnvProbe:"loginInteractiveShell",postCreate:p,telemetry:Jte(),forwardServerPort:!0,web:h,getLogLevel:aE,onDidChangeLogLevel:tre,loadNativeModule:ui,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:g=>ore(m,g),openTunnel:sre,getTunnels:()=>Promise.resolve(re.workspace.tunnels),onAdoptProcess:re.window.onDidOpenTerminal,persistedFolder:await aL(o,r.globalStoragePath),alternateDownload:fi});return m}async function fi(t,e){let r=await re.commands.executeCommand("_workbench.downloadResource",re.Uri.parse(t));if(!r)throw new ge({description:"Downloading the VS Code Server failed. Please try again later."});await Ci(r.fsPath,e)}var $c=`[Starting Dev Container (show log)](command:${li} "Show details in terminal")`,are=`[Configuring Dev Container](command:${rE} "Show details in terminal")`,cre={[tr.Begin]:"",[tr.CloningRepository]:"Cloning Repository",[tr.BuildingImage]:"Building image",[tr.StartingContainer]:"Starting container",[tr.InstallingServer]:"Installing server",[tr.StartingServer]:"Starting server",[tr.End]:""};function Vi(){return Yu.join(BM.tmpdir(),"vsch")}function lre(t){let e=0;return r=>{let n=tr.End-r,i=(100-e)/(n+1);t.report({message:cre[r],increment:i}),e+=i}}async function aq(t,e,r){let{name:n,publisher:i,version:o,aiKey:s}=e;if(!s)return dk(e,r);let a=i?`${i}.${n}`:n,c=new HM.default(a,o,s);t.subscriptions.push(c);let l=new cq(c),u=ure(r),d=QM()?(0,No.getExperimentationService)(a,o,u,l,t.globalState):void 0;return{sendTelemetryEvent:l.sendTelemetryEvent.bind(l),isCachedFlightEnabled:async f=>d&&QM()?d.isCachedFlightEnabled(f):!1,product:r,package:e}}var cq=class{constructor(e){this.baseReporter=e;this.sharedProperties={}}sendTelemetryEvent(e,r,n){this.baseReporter.sendTelemetryEvent(e,V(V({},this.sharedProperties),r),n)}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){let n={};for(let[i,o]of r)n[i]=o;this.sendTelemetryEvent(e,n)}};function ure(t){switch(t.quality){case"stable":return No.TargetPopulation.Public;case"insider":return No.TargetPopulation.Insiders;case"exploration":return No.TargetPopulation.Internal;case void 0:return No.TargetPopulation.Team;default:return No.TargetPopulation.Public}}var rd="Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container.",fE="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function nd(t,e){if((e==null?void 0:e.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-"))||t.globalState.get(fE))return!0;let r="Got It",n="Learn More",i=await re.window.showWarningMessage("Cloning a repository in a Dev Container may execute arbitrary code. ",{modal:!0,detail:"Only clone a repository in a Dev Container if you trust its authors."},r,n);return i===r?(await t.globalState.update(fE,!0),!0):(i===n&&re.env.openExternal(re.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var pE="userConfirmedAttachToContainerRequiresTrust";async function Fo(t){if(t.globalState.get(pE))return!0;let e="Got It",r="Learn More",n=await re.window.showWarningMessage("Attaching to a container may execute arbitrary code.",{modal:!0,detail:"Only attach to a container if you trust its origin."},e,r);return n===e?(await t.globalState.update(pE,!0),!0):(n===r&&re.env.openExternal(re.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function lq(t){t.globalState.setKeysForSync([fE,pE,hE])}function uq(){let t=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(t)&&(process.env.PATH=`${t}:/usr/local/bin`)}var hE="updatedToPreRelease2",dre="2022-01-19T05:14:31.474Z";async function dq(t,e){try{e.quality==="insider"&&e.date&&e.date.localeCompare(dre)>=0&&!t.globalState.get(hE,!1)&&(await t.globalState.update(hE,!0),await re.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-containers",{installPreReleaseVersion:!0}))}catch(r){console.error(r)}}var Ze=Y(require("vscode")),Fe=Y(require("path")),mH=Y(require("fs"));var Wi=Y(sU()),gH=Y(eH());var vH=Y(require("util"));var tH=Y(require("path"));var Lce=["png","md","json","txt","map"],Fce=["node_modules",".git","bin","out","dist",".vscode-test"],Mce=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],rH={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},nH={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},qce=["docker-existing-docker-compose","docker-existing-dockerfile","codespaces-linux"];async function r_(t,e){for(let r of e)if(r.metaData){if(qce.indexOf(tH.basename(r.definitionFolder))>-1)continue;let n=0,i=0,o=r.metaData.get("languagesPlatforms");if(o){let s=o.split(",").map(a=>a.trim());if(s[0]==="Any")n+=5;else for(let a of s)if(nH[a]){let c=nH[a];for(let l of c)t.fileTypes.get(l.toLowerCase())&&(n+=10),t.mostPopularFileType===l&&(n+=10)}else if(rH[a]){let c=rH[a],l=!1;for(let u of c)t.configFiles.get(u)&&(l=!0,i+=20);l||(i-=20)}}r.recommendationScore=n+(i<0?-4:i)}}async function iH(t,e){return jce(t,e.rootFolderPath,Fce,Lce)}async function jce(t,e,r,n){let i=new Map,o=new Map,s=500;function a(p,h,m,g){let v=[];(t.readDirWithTypes||t.readDir)(p).then(C=>{if(m.count>=s)return m.count+=C.length,m.maxReached=!0,g(v);let b=C.length;if(b===0)return g(v);let S=C;m.count+C.length>s&&(m.maxReached=!0,b=s-m.count,S=C.slice(0,b)),m.count+=C.length;for(let P of S){let _=Array.isArray(P)?P[0]:P;(Array.isArray(P)?Promise.resolve((P[1]&pl.File)!=0):t.isFile(t.path.join(p,_))).then(T=>{T?(v.push(_),--b==0&&g(v)):h.indexOf(_)===-1?a(t.path.join(p,_),h,m,A=>{if(v=v.concat(A),--b==0)return g(v)}):--b==0&&g(v)},()=>{if(--b==0)return g(v)})}},()=>g(v))}let c=p=>{i.has(p)?i.set(p,i.get(p)+1):i.set(p,1)},l=p=>{for(let h of Mce)h.pattern.test(p)&&(o.has(h.tag)?o.set(h.tag,o.get(h.tag)+1):o.set(h.tag,1))},u=p=>{if(p.lastIndexOf(".")>=0){let h=p.split(".").pop();h&&!n.includes(h)&&c(h.toLowerCase())}l(p)},d=p=>[...p.entries()].reduce((h,m)=>m[1]>h[1]?m:h,["",0])[0],f={count:0,maxReached:!1};return new Promise((p,h)=>{a(e,r,f,async m=>{m.forEach(u),p({configFiles:o,fileTypes:i,fileCount:f.count,mostPopularFileType:d(i)})})})}var qg=Y(require("path"));var Vo=Y(require("vscode"));async function jg(){await Vo.window.showInformationMessage("You need to first save your workspace in a folder containing all its workspace folders.",{modal:!0})}function Go(t,e){let r=Vo.workspace.fs;return{platform:t,path:t==="win32"?qg.win32:qg.posix,async isFile(n){try{return((await r.stat(pa(t,e,n))).type&Vo.FileType.File)!=0}catch(i){if((i==null?void 0:i.code)==="FileNotFound")return!1;throw i}},async readFile(n){try{let i=await r.readFile(pa(t,e,n));return Buffer.from(i)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let o=new Error(`Could not read file: ${n}`);throw o.originalError=i,o.code="ENOENT",o}throw i}},async writeFile(n,i){await r.writeFile(pa(t,e,n),i)},async readDir(n){return(await r.readDirectory(pa(t,e,n))).map(o=>o[0])},async readDirWithTypes(n){return r.readDirectory(pa(t,e,n))},async mkdirp(n){await r.createDirectory(pa(t,e,n))},async toCommonURI(n){return pa(t,e,n)}}}function pa(t,e,r){let n=t==="win32"?"/"+r.replace(/\\/g,"/"):r;return e.with({path:n})}var $g=class{async readDocument(e){try{let r=await Vo.workspace.fs.readFile(e);return Buffer.from(r).toString()}catch{return}}async applyEdits(e,r,n){let i=Bt(n,r);await Vo.workspace.fs.writeFile(e,Buffer.from(i))}};var ve=Y(require("vscode"));var mt=Y(require("vscode")),oH=Y(require("path"));async function n_(t,e){var i,o;let{fileHost:r}=t,n=await t.findDevContainerFiles();if(n.length){let s=n.length>1?(i=await mt.window.showQuickPick(n.map(d=>({label:d.scheme==="file"?d.fsPath:d.toString(),uri:d})),{placeHolder:"Select a container configuration file"}))==null?void 0:i.uri:n[0];if(!s)return;let a=r.path.dirname(Ie(s,r.platform)),c=r.path.basename(a)===".devcontainer"?r.path.dirname(a):a,l=Ge(r.path,c),u=await c_(r,l);if(u){let d=se(V({},u.object),{configFilePath:u.uri});if("image"in d)return{workspace:l,config:u,imageName:d.image,manifest:await Bd(d.image)};if(wt(d)){let f=((o=d.build)==null?void 0:o.args)||{},p=dr(r,d),h=await i_(r,p,f);if(h)return V({workspace:l,config:u},h)}if("dockerComposeFile"in d){let f=await ir(r,d),p=await e.readDockerComposeConfig(f,void 0),h=await sH(r,f,c,u.uri,d,p);if(h)return V({workspace:l,config:u},h)}return{workspace:l,config:u}}}else{let s="Add Files...";await mt.window.showInformationMessage("No container configuration file found.",{modal:!0},s)===s&&await Ud(t)}}async function sH(t,e,r,n,i,o){var u;let s=((o==null?void 0:o.services)||{})[i.service]||{},a=Ug(t,e,r,s),c=a?Li(t,n,a):void 0,l=c&&await i_(t,c,((u=s.build)==null?void 0:u.args)||{});if(l)return l;if(typeof s.image=="string")return{imageName:s.image,manifest:await Bd(s.image)}}function Ug(t,e,r,n){let i=e.length?t.path.dirname(e[0]):r,o=n.build;if(typeof o=="string")return t.path.resolve(i,o,"Dockerfile");if(o&&typeof o=="object"&&typeof o.context=="string"){let s=typeof o.dockerfile=="string"?o.dockerfile:"Dockerfile";return t.path.resolve(i,o.context,s)}}async function i_(t,e,r){let i=await Rt(t).readDocument(e);if(i){let o=(/^\s*FROM\s+(\S+)(\s|$)/m.exec(i)||[])[1]||void 0;if(o){let s=o.replace(/\$\{([^\}]+)\}/,(a,c)=>r[c]||a);return{imageName:s,manifest:await Bd(s)}}}}async function aH(t){let e=await n_(t,{readDockerComposeConfig:async(r,n)=>{if(r[0])try{let i=await t.fileHost.readFile(r[0]);return _r(i.toString())}catch(i){t.output.write(Ne(String(i&&(i.stack||i.message)||i)))}return{}}});e&&await o_(t,e,{})}async function o_(t,e,r){var h;let{fileHost:n}=t,{workspace:i,config:o}=e,s=mt.window.createQuickPick();s.ignoreFocusOut=!0;let a={fileHost:n,workspace:i,quickPick:s,telemetry:await t.telemetry,output:t.output},c={featureSets:[]},l=await rl(),u=Rn({distFolder:l}),d=await Au(u,a.output);if(!d)return;d=se(V({},d),{sourceInformation:{type:"local-cache"}}),c.featureSets.push(d),c=await Hh(a,o.object,c,async()=>{var m,g;return V({"com.visualstudio.code.devcontainers.id":(m=e.manifest)==null?void 0:m.definitionName,version:(g=e.manifest)==null?void 0:g.definitionVersion},r)});let f=((h=c.featureSets.find(m=>m.sourceInformation.type==="local-cache"))==null?void 0:h.features.filter(m=>m.included))||[];if(!f.length){await mt.window.showInformationMessage("No container features available for the current base image.",{modal:!0});return}let p=await a_(a,f,f.filter(m=>m.value!==!1));try{if(p){let m=o.text,g=o.text;for(let v of f){let w=p[v.id];if(w!==Du(v)){let C=["features",v.id];if(w!==!1&&typeof v.value=="object"){let S=ji(v);S&&C.push(S)}let b=yt(g,C,w!==!1?w:void 0,{formattingOptions:{}});g=Bt(g,b)}}m!==g&&await Rt(n).applyEdits(o.uri,[{content:g,offset:0,length:o.text.length}],o.text)}}finally{s.dispose()}}async function Bg(t,e,r,n){var u,d;if(!$d())return e;let i=e.configText,o=(u=t.existingConfig)==null?void 0:u.object.features;if(!t.replaceExistingConfig&&o){r=se(V({},r),{features:V(V({},r.features),o)});for(let f in o){let p=yt(i,["features",f],o[f],{formattingOptions:{}});i=Bt(i,p)}}let s=Go(process.platform,Ee.file(e.configFilePath)),a=await s_(t,s,r,oH.basename(e.definitionFolder)),c=((d=((a==null?void 0:a.featureSets)||[]).find(f=>f.sourceInformation.type==="local-cache"))==null?void 0:d.features.filter(f=>f.included))||[],l=await a_(t,c,c.filter(f=>f.value!==!1),!0);if(!!l){if(l==="back")return n();for(let f of c){let p=l[f.id];if(p!==Du(f)){let h=["features",f.id];if(p!==!1&&typeof f.value=="object"){let g=ji(f);g&&h.push(g)}let m=yt(i,h,p!==!1?p:void 0,{formattingOptions:{}});i=Bt(i,m)}}return se(V({},e),{configText:i})}}async function s_(t,e,r,n){var l;let i;if("image"in r)i=await Bd(r.image);else if(wt(r)){let u=((l=r.build)==null?void 0:l.args)||{},d=dr(e,r),f=await i_(e,d,u);i=f==null?void 0:f.manifest}else if("dockerComposeFile"in r){let u=await ir(e,r);if(u.length&&await e.isFile(u[0])){let d=await e.readFile(u[0]),f=_r(d.toString()),p=await sH(e,u,t.workspace.rootFolderPath,r.configFilePath,r,f);i=p==null?void 0:p.manifest}i=i||n&&await l_(n)||void 0}let o=await rl(),s=Rn({distFolder:o}),a={featureSets:[]},c=await Au(s,t.output);if(!!c)return c=se(V({},c),{sourceInformation:{type:"local-cache"}}),a.featureSets.push(c),a=await Hh(t,r,a,async()=>({"com.visualstudio.code.devcontainers.id":i==null?void 0:i.definitionName,version:i==null?void 0:i.definitionVersion})),a}var jd={iconPath:new mt.ThemeIcon("check-all"),tooltip:"Finish"};async function a_(t,e,r,n=!1){if(!e.length)return{};let i={iconPath:new mt.ThemeIcon("info"),tooltip:"Open Documentation"},o=t.quickPick.onDidTriggerItemButton(l=>{let u=l.item.feature.documentationURL;mt.env.openExternal(mt.Uri.parse(u))}),s=await Un(t.quickPick,e.map(l=>({label:l.name,picked:r.indexOf(l)!==-1,buttons:l.documentationURL?[i]:void 0,feature:l})).sort((l,u)=>l.label.localeCompare(u.label)),"Select additional features to install",void 0,!0,n?[mt.QuickInputButtons.Back,jd]:[jd]);if(o.dispose(),!s)return;if(s.button===mt.QuickInputButtons.Back)return"back";let a=s.pick.map(l=>l.feature),c={};for(let l of e){let u=a.indexOf(l)!==-1;c[l.id]=u?Du(l)||E1(l):!1}return s.button===jd?c:Uce(t,c,a,()=>a_(t,e,a))}function $ce(t){let e=ji(t),r=e&&t.options&&t.options[e];return!!r&&r.type==="string"&&("enum"in r||"proposals"in r)}async function Uce(t,e,r,n){let i=r.filter($ce);return async function o(s,a,c){if(!a.length)return s;let l=a[0],u=l.options[ji(l)],d=("enum"in u&&u.enum||"proposals"in u&&u.proposals||[]).map(h=>({label:String(h),value:h,picked:Du(l)===h})),f=d.length===1?{pick:d[0],button:"ok"}:await Un(t.quickPick,d,u.description||"Select a value",void 0,void 0,[mt.QuickInputButtons.Back,jd],"proposals"in u);if(!f)return;if(f.button===mt.QuickInputButtons.Back)return c();let p=se(V({},s),{[l.id]:f.pick.value});return f.button===jd?s:o(p,a.slice(1),()=>o(s,a,c))}(e,i,n)}var cH="remote.containers.experimentalContainerFeatures";function lH(){return mt.commands.executeCommand("setContext","experimentalContainerFeatures",$d()),mt.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration(cH)&&mt.commands.executeCommand("setContext","experimentalContainerFeatures",$d())})}function $d(){return mt.workspace.getConfiguration().get(cH,!0)}var u_=Y(require("path"));function uH(t){return{provideCompletionItems(e,r,n){let i=Wk(e.getText(),e.offsetAt(r)),o=e.getWordRangeAtPosition(r)||new ve.Range(r,r);if(i.path[0]==="extensions"||i.path[0]==="vscode"&&i.path[1]==="extensions"){let s=Xe(e.getText());return s.configFilePath=e.uri,Bce(s,o)}if($d()&&i.path[0]==="features"){let s=Xe(e.getText());s.configFilePath=e.uri;try{return Hce(t,s,i,o)}catch(a){console.error(a)}}return[]}}}function Bce(t,e){var n;let r=((t==null?void 0:t.extensions)||[]).concat(((n=t==null?void 0:t.vscode)==null?void 0:n.extensions)||[]);if(Array.isArray(r)){let i=ve.extensions.all.filter(o=>!(o.id.startsWith("vscode.")||o.id==="Microsoft.vscode-markdown"||r.indexOf(o.id)>-1));if(i.length)return i.map(o=>{let s=new ve.CompletionItem(o.id),a=`"${o.id}"`;return s.kind=ve.CompletionItemKind.Value,s.insertText=a,s.range=e,s.filterText=a,s})}}async function Hce(t,e,r,n){var o,s;let i=e&&e.features||{};if(typeof i=="object"){if(e.configFilePath.scheme==="vscode-remote"&&t.fileHost.type==="local"){e=se(V({},e),{configFilePath:e.configFilePath.with({scheme:Dt.scheme,authority:""})});let h=ve.env.remoteName&&ve.env.remoteName!=="test"?"linux":process.platform,m=((o=(ve.workspace.workspaceFolders||[])[0])==null?void 0:o.uri)||Ee.file(process.cwd());t=se(V({},t),{fileHost:await Go(h,m)})}let{path:a}=t.fileHost,c=Ie(e.configFilePath,t.fileHost.platform),l=a.basename(c),u=a.dirname(c),d=Ge(a,l===".devcontainer.json"?u:a.dirname(u)),f=await s_(se(V({},t),{workspace:d}),t.fileHost,e),p=((s=((f==null?void 0:f.featureSets)||[]).find(h=>h.sourceInformation.type==="local-cache"))==null?void 0:s.features.filter(h=>h.included))||[];if(r.path.length===2)if(r.isAtPropertyKey){let h=p.filter(m=>!(m.id in i));if(h.length)return h.map(m=>{let g=new ve.CompletionItem(m.id),v=`"${m.id}": `;return g.kind=ve.CompletionItemKind.Property,g.insertText=v,g.range=n,g.filterText=v,g})}else{let h=r.path[1],m=p.find(g=>g.id===h);if(m){let g=ji(m),v=g&&(m.options||{})[g]||{type:"boolean",description:"Set to true to install."},w=(v.type==="string"?("enum"in v&&v.enum||"proposals"in v&&v.proposals||[""]).map(C=>`"${C}"`):["true","false"]).map(C=>({label:C,text:C}));return w.push({label:"{}",text:new ve.SnippetString(`{
	$1
}$0`)}),w.map(({label:C,text:b},S)=>{let P=new ve.CompletionItem(C);return P.kind=ve.CompletionItemKind.Value,P.insertText=b,P.range=n,P.sortText=`${S}_${C}`,P})}}else if(r.path.length===3){let h=r.path[1],m=p.find(g=>g.id===h);if(m){let g=m.options||{};if(r.isAtPropertyKey)return Object.keys(g).filter(v=>!(v in(i[h]||{}))).map(v=>{let w=new ve.CompletionItem(v),C=`"${v}": `;return w.kind=ve.CompletionItemKind.Property,w.insertText=C,w.range=n,w.filterText=C,w.detail=g[v].description,w});{let v=r.path[2],w=g[v];if(w)return(w.type==="string"?("enum"in w&&w.enum||"proposals"in w&&w.proposals||[""]).map(b=>`"${b}"`):["true","false"]).map((b,S)=>{let P=new ve.CompletionItem(b),_=b;return P.kind=ve.CompletionItemKind.Value,P.insertText=_,P.range=n,P.filterText=_,P.sortText=`${S}_${b}`,P})}}}}}async function dH(t){let e=await d_(t);if((e==null?void 0:e.scheme)===Dt.scheme){let r=Ie(e,t.fileHost.platform);e=await t.fileHost.toCommonURI(r)}e&&await ve.window.showTextDocument(ve.Uri.parse(e.toString()))}async function d_(t){let e=await t.findDevContainerFiles();if(!e.length){let n="Add Files...";await ve.window.showInformationMessage("No container configuration file found.",{modal:!0},n)===n&&await Ud(t)&&(e=await t.findDevContainerFiles())}if(!e.length)return;let r;return e.length===1?r={uri:e[0]}:r=await ve.window.showQuickPick(e.map(n=>({label:n.scheme==="file"?n.fsPath:n.toString(),uri:n})),{placeHolder:"Select a container configuration file"}),r==null?void 0:r.uri}async function fH(t,e){var n,i,o;let r=await d_(t);if(r){let s=Rt(t.fileHost);r.scheme==="file"&&!await pt(r.fsPath)?await an(An,r,[],Ni):r.scheme==="vscode-remote"&&(s=new $g);let a=await s.readDocument(r);if(a){let c=!/\.?devcontainer\.json/.test(u_.default.posix.basename(r.path)),l=Xe(a),u=!c&&((n=l.vscode)==null?void 0:n.extensions),d=(u?(i=l.vscode)==null?void 0:i.extensions:l.extensions)||[],f=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if((l.extensions||[]).concat(((o=l.vscode)==null?void 0:o.extensions)||[]).indexOf(e)===-1){d.push(e);let p;u?l.vscode?p=yt(a,["vscode","extensions"],d,{formattingOptions:{}}):p=yt(a,["vscode"],{extensions:d},{formattingOptions:{}}):p=yt(a,["extensions"],d,{formattingOptions:{}}),await s.applyEdits(r,p,a),await ve.window.showInformationMessage(`Extension has been added to the ${f}.`)}else await ve.window.showInformationMessage(`Extension is already included in the ${f}.`)}}}async function pH(t,e){var s,a;let r=await ve.commands.executeCommand("remote.tunnel.label",e);if(r===void 0)return;let n=r.label,i=r.port,o=await d_(t);if(o){let c=Rt(t.fileHost);o.scheme==="file"&&!await pt(o.fsPath)?await an(An,o,[],Ni):o.scheme==="vscode-remote"&&(c=new $g);let l=await c.readDocument(o);if(l){let d=(s=Xe(l).portsAttributes)!=null?s:{},f=(a=d[`${i}`])!=null?a:{},p=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if(d&&f&&f.label===n)await ve.window.showInformationMessage(`Port attributes are already included in the ${p}.`);else{f.label=n,d[`${i}`]=f;let h=yt(l,["portsAttributes"],d,{formattingOptions:{}});await c.applyEdits(o,h,l),await ve.window.showInformationMessage(`Port attributes have been added to the ${p}.`)}}}}function hH(t,e){let r=ve.languages.createDiagnosticCollection("devcontainer");return ve.window.activeTextEditor&&f_(ve.window.activeTextEditor.document,r,e.output),t.subscriptions.push(ve.workspace.onDidChangeTextDocument(n=>{n&&f_(n.document,r,e.output)})),t.subscriptions.push(ve.workspace.onDidOpenTextDocument(n=>{n&&f_(n,r,e.output)})),r.dispose}function f_(t,e,r){let n=u_.default.basename(t.uri.fsPath);if(/\.?devcontainer\.json/.test(n)){let i=vp(t.getText());if(!i)return;let o=yp(i)||{},s=[...Vce(t,o,r),...Gce(i,t)];e.set(t.uri,s)}}function Vce(t,e,r){let n=e==null?void 0:e.features;if(!n)return[];let i=[];return Object.keys(n).forEach(o=>{let s=$h(o,r);if(!s||s.sourceInformation.type!=="local-cache")for(let a=0;a<t.lineCount;a++){let c=t.lineAt(a);if(c.text.includes(o)){let l=c.text.indexOf(o),u=l+o.length,d=s==null?void 0:s.sourceInformation,f="Expected feature identifier to contain only alphanumeric and/or the '-' characters.",p=ve.DiagnosticSeverity.Error;d&&(f=`WARNING: Provided feature syntax is currently experimental and is subject to change.
`,p=ve.DiagnosticSeverity.Warning);let h={message:f,severity:p,range:new ve.Range(new ve.Position(a,l),new ve.Position(a,u))};i.push(h);break}}if(s&&s.sourceInformation.type==="github-repo")for(let a=0;a<t.lineCount;a++){let c=t.lineAt(a),l=s.sourceInformation;if(c.text.includes(o)){let u=c.text.indexOf(o),d=u+o.length,f={message:"Feature-set source can be found on GitHub.",range:new ve.Range(new ve.Position(a,u),new ve.Position(a,d)),code:{target:ve.Uri.parse(`https://github.com/${l.owner}/${l.repo}`),value:"github-repo"},severity:ve.DiagnosticSeverity.Information};i.push(f);break}}}),i}function Gce(t,e){return["extensions","settings","devPort"].filter(r=>po(t,[r])&&po(t,["vscode",r])).map(r=>{var s,a;let n=(((a=(s=po(t,[r]))==null?void 0:s.parent)==null?void 0:a.children)||[])[0],i=e.positionAt(n.offset),o=e.positionAt(n.offset+n.length);return{message:`Legacy "${r}" property when "${r}" property under "vscode" is also present.`,range:new ve.Range(i,o),severity:ve.DiagnosticSeverity.Warning}})}async function yH(t,e){return hH(t,e),{async openConfiguration(){return dH(e)},async createConfiguration(){return Ud(e)},async addExtensionToConfiguration(r){return fH(e,r)},async addPortLabelToConfiguration(r){return pH(e,r)},async configureContainerFeatures(){return aH(e)},createCompletionItemProvider(){return uH(e)}}}async function Ud(t){let{fileHost:e}=t,r=await Wce();if(r){let n=Ie(r,e.platform),i=Ge(e.path,n),o=await wp(e,i);if(o){let a="Continue";if(await Ze.window.showInformationMessage(`The workspace could fail to open in a container: ${o}`,{modal:!0},a)!==a)return!1}let s=await Hd(t,i);if(s){let a=await e.toCommonURI(s);return a&&Ze.window.showTextDocument(Ze.Uri.parse(a.toString())),!0}}return!1}async function Wce(){let t=Ze.workspace.workspaceFile,e=Ze.workspace.workspaceFolders,r;if(t){if(t.scheme==="untitled"){await jg();return}r=t}else if(e&&e.length)if(e.length>1){let n=await Ze.window.showWorkspaceFolderPick({placeHolder:"Select a folder to create a container configuration for"});n&&(r=n.uri)}else r=e[0].uri;return r}function Un(t,e,r,n,i,o,s){if(t.value="",t.title=n||"Add Development Container Configuration Files",t.placeholder=r,t.canSelectMany=!!i,Array.isArray(e))if(t.items=e,i)t.selectedItems=e.filter(l=>l.picked);else{let l=e.find(u=>u.picked);l&&(t.activeItems=[l])}t.buttons=o?Array.isArray(o)?o:[Ze.QuickInputButtons.Back]:[];let a=[],c=new Promise((l,u)=>{if(Array.isArray(e)||(t.busy=!0,e.then(d=>{if(t.busy=!1,t.items=d,i)t.selectedItems=d.filter(f=>f.picked);else{let f=d.find(p=>p.picked);f&&(t.activeItems=[f])}},d=>{t.busy=!1,u(d)})),a.push(t.onDidAccept(()=>{let d=i?t.selectedItems.slice():t.selectedItems[0];l(Array.isArray(o)?{pick:d,button:"ok"}:d),a.forEach(f=>f.dispose())})),t.buttons.length&&a.push(t.onDidTriggerButton(d=>{let f=i?t.selectedItems.slice():t.activeItems[0];l(o===!0?"back":{pick:f,button:d}),a.forEach(p=>p.dispose())})),a.push(t.onDidHide(()=>{a.forEach(d=>d.dispose()),t.dispose(),l(void 0)})),s){let d;a.push(t.onDidChangeValue(f=>{let p=f.trim().toLowerCase(),h=!p||t.items.find(m=>m.label.toLowerCase()===p);if(h&&d)t.items=t.items.filter(m=>m!==d),d=void 0;else if(!h){let m=t.items.filter(g=>g!==d);m.push(d={label:`Other: ${f}`,value:f}),t.items=m}}))}});return t.show(),c}var p_={label:"Learn More",description:"Documentation on predefined container definitions",alwaysShow:!0,type:"help"};async function Hd(t,e){let{fileHost:r,telemetry:n}=t,i=await n,o=await c_(r,e),a=!!hc(o==null?void 0:o.object)&&!!o;if(a){Gr(i,"exists");let l=Ie(o.uri,r.platform);if(!await Ze.window.showWarningMessage(`Dev Container configuration '${r.path.relative(e.configFolderPath,l)}' file already exists.`,{modal:!0},"Continue")){let d=await r.toCommonURI(l);d&&Ze.window.showTextDocument(Ze.Uri.parse(d.toString()));return}}let c=Ze.window.createQuickPick();return c.ignoreFocusOut=!0,h_(se(V({},t),{quickPick:c,replaceExistingConfig:a,existingConfig:o,telemetry:i,workspace:e,codespaces:!!t.codespaces}))}async function h_(t){let{fileHost:e,workspace:r,telemetry:n,existingFilesLearnMoreLink:i}=t,o=await e.readDir(r.rootFolderPath),s=o.filter(p=>/docker.*compose/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),a=o.filter(p=>/dockerfile/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),c=a.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:kH(e,p),dockerfile:h,dockerfilePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerfile"}}),l=s.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:kH(e,p),dockerComposeFile:h,dockerComposePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerComposeFile"}});if(!(a.length>0||s.length>0))return Hg(t,void 0);let d={label:"From a predefined container configuration definition...",detail:"Use a base configuration from the container definition registry",alwaysShow:!0,type:"predefined"},f=await Un(t.quickPick,[d,...c,...l,...i?[p_]:[]],"How would you like to create your container configuration?");if(!f){Gr(n,"canceled");return}if(f.type==="help"){Gr(n,"help"),Ze.env.openExternal(i);return}if(f.type==="predefined")return Hg(t,()=>h_(t));if(f.type==="dockerComposeFile")return Xce(t,f.dockerComposePath,()=>h_(t));if(f.type==="dockerfile")return Qce(t,f.dockerfilePath)}function wH(t){let e=t.metaData.get("categories");return e?e.trim().split(", ").indexOf("Core")>-1:!1}async function zce(t){let{fileHost:e,workspace:r,predefinedDefinitionsLearnMoreLink:n}=t,i=t.stats||(t.stats=await iH(e,r)),o=await TH(t.codespaces,r_.bind(null,i)),s=[];i.mostPopularFileType.length===0?s=await ele(t.codespaces):s=o.filter(c=>c.recommendationScore&&c.recommendationScore>0&&wH(c));let a;return s.length>0?a=[{label:"Show All Definitions...",detail:"Show all available predefined container definitions.",alwaysShow:!0,type:"showAll"},...n?[p_]:[],...s]:a=[...n?[p_]:[],...o],{items:a,stats:i}}async function Hg(t,e){let{telemetry:r,predefinedDefinitionsLearnMoreLink:n}=t,i=zce(t),{infoButton:o,sub:s}=bH(t),a=i.then(l=>l.items.map(u=>u.type==="baseConfiguration"?se(V({},u),{buttons:[o]}):u)),c=await Un(t.quickPick,a,"Select a container configuration definition",void 0,void 0,!!e);if(s.dispose(),c==="back")return e();if(!c){Gr(r,"canceled");return}if(c.type==="help"){Gr(r,"help"),Ze.env.openExternal(n);return}if(c.type==="showAll")return CH(t,(await i).stats,()=>Hg(t,e));if(c.type==="baseConfiguration")return EH(t,c,()=>Hg(t,e))}async function CH(t,e,r){let{telemetry:n}=t,i=await TH(t.codespaces,r_.bind(null,e)),{infoButton:o,sub:s}=bH(t),a=i.map(l=>l.type==="baseConfiguration"?se(V({},l),{buttons:[o]}):l),c=await Un(t.quickPick,a,"Select a container configuration definition",void 0,void 0,!0);if(s.dispose(),c==="back")return r();if(c&&c.type==="baseConfiguration")return EH(t,c,()=>CH(t,e,r));Gr(n,"canceled")}function bH(t){let e={iconPath:new Ze.ThemeIcon("info"),tooltip:"Open Documentation"},r=t.quickPick.onDidTriggerItemButton(n=>{let i=`https://github.com/microsoft/vscode-dev-containers/blob/main/containers/${Fe.basename(n.item.definitionFolder)}/README.md`;Ze.env.openExternal(Ze.Uri.parse(i))});return{infoButton:e,sub:r}}async function EH(t,e,r){let{telemetry:n}=t,i=await Kce(t,e);if(!i){Gr(n,"canceled");return}return i==="back"?r():(Gr(n,"definition",Fe.basename(i.definitionFolder)),m_(t,i))}async function m_(t,e){let{quickPick:r}=t;r.busy=!0,r.enabled=!1;try{return await ile(t,e)}finally{r.hide()}}async function Kce(t,e){let r=Xe(e.configText);if(r.configFilePath=Ee.file(e.configFilePath),wt(r))return Yce(t,e,r,async()=>"back",(n,i)=>_H(t,n,r,i));if("dockerComposeFile"in r){let n=Go(process.platform,Ee.file(e.configFilePath));return Jce(t,e,n,r,async()=>"back",(i,o)=>SH(t,i,n,r,o))}return Bg(t,e,r,async()=>"back")}async function Yce(t,e,r,n,i){var c;let o=dr({platform:process.platform},r),s=((c=r.build)==null?void 0:c.args)||{},a=await xH(o,s);return async function l(u,d,f){if(!d.length)return i(se(V({},e),{configText:u}),f);let p=d[0],h=await Un(t.quickPick,p.items,p.placeholder,void 0,void 0,!0);if(!h)return;if(h==="back")return f();let m=u;if(h.value!==p.default){let g=yt(m,["build","args",p.name],h.value,{formattingOptions:{}});m=Bt(m,g)}return l(m,d.slice(1),()=>l(u,d,f))}(e.configText,a,n)}async function _H(t,e,r,n){var u;let i=dr({platform:process.platform},r),o=((u=r.build)==null?void 0:u.args)||{},{options:s,hasOptions:a}=await PH(i,o),c=s.length?await Un(t.quickPick,s,a?`Select the options for the '${e.label}' dev container`:`Select the install options for the '${e.label}' dev container`,void 0,!0,!0):[];if(!c)return;if(c==="back")return n();let l=e.configText;for(let d of s){let f=c.indexOf(d)!==-1;if(f!==d.default){let p=yt(l,["build","args",d.name],String(f),{formattingOptions:{}});l=Bt(l,p)}}return Bg(t,se(V({},e),{configText:l}),r,s.length?()=>_H(t,e,r,n):n)}async function Jce(t,e,r,n,i,o){var a;let s=await ir(r,n);if(s.length&&await r.isFile(s[0])){let c=e.files||{},l=c[s[0]]||(await r.readFile(s[0])).toString(),u=_r(l),d=((u==null?void 0:u.services)||{})[n.service]||{},f=t.workspace.rootFolderPath,p=Ug(r,s,f,d);if(p){let h=n.configFilePath,m=Li(r,h,p),g=((a=d.build)==null?void 0:a.args)||{},v=await xH(m,g),w;return async function C(b,S){if(!b.length)return w&&(c[s[0]]=w.toString()),o(se(V({},e),{files:c}),S);let P=b[0],_=await Un(t.quickPick,P.items,P.placeholder,void 0,void 0,!0);if(!!_){if(_==="back")return S();if(_.value!==P.default){w||(w=Wi.parseDocument(l,{lineCounter:new Wi.LineCounter}));let k=w.getIn(["services","app","build"]);k.has("args")||k.set("args",new Wi.YAMLMap),k.get("args").set(P.name,_.value)}return C(b.slice(1),()=>C(b,S))}}(v,i)}}return o(e,i)}async function SH(t,e,r,n,i){var c;let o=!1,s=e.files||{},a=await ir(r,n);if(a.length&&await r.isFile(a[0])){let l=s[a[0]]||(await r.readFile(a[0])).toString(),u=_r(l),d=((u==null?void 0:u.services)||{})[n.service]||{},f=t.workspace.rootFolderPath,p=Ug(r,a,f,d);if(p){let h=n.configFilePath,m=Li(r,h,p),g=((c=d.build)==null?void 0:c.args)||{},{options:v,hasOptions:w}=await PH(m,g);o=!!v.length;let C=v.length?await Un(t.quickPick,v,w?`Select the options for the '${e.label}' dev container`:`Select the install options for the '${e.label}' dev container`,void 0,!0,!0):[];if(!C)return;if(C==="back")return i();let b;for(let S of v){let P=C.indexOf(S)!==-1;if(P!==S.default){b||(b=Wi.parseDocument(l,{lineCounter:new Wi.LineCounter}));let _=b.getIn(["services","app","build"]);_.has("args")||_.set("args",new Wi.YAMLMap),_.get("args").set(S.name,String(P))}}b&&(s[a[0]]=b.toString())}}return Bg(t,se(V({},e),{files:s}),n,o?()=>SH(t,e,r,n,i):i)}async function xH(t,e){let r=(await Oe(t.fsPath)).toString(),n=/^#\s*\[Choice\]\s*([^:\r\n]+):(.*)\r?\nARG\s+([^=\s]+)="?([^"\r\n]*)"?\s*$/gm,i,o=[];for(;i=n.exec(r);)o.push(i);return o.map(([,s,a,c,l])=>{let u=e[c]||l,d=a.trim().split(",").map(p=>p.trim()).map(p=>({label:p,description:p===u?"(default)":void 0,value:p})),f=d.findIndex(p=>p.value===u);return f!==-1&&d.unshift(...d.splice(f,1)),{placeholder:s||c,name:c,default:u,items:d}})}async function PH(t,e){let r=(await Oe(t.fsPath)).toString(),n=/^#\s*\[(Option|Install)\]\s*(.+)\r?\nARG\s+([^=\s]+)="?(true|false)"?\s*$/gm,i,o=[];for(;i=n.exec(r);)o.push(i);let s=o.map(([,c,l,u,d])=>{let p=(e[u]||d)==="true";return{type:c.toLowerCase(),label:l||u,picked:p,name:u,default:p}}),a=s.some(c=>c.type==="option");return a&&s.filter(c=>c.type==="install").forEach(c=>c.label=`Install ${c.label}`),{options:s,hasOptions:a}}function kH(t,e){let r=Ze.workspace.workspaceFolders||[];if(r.length<2)return;let n=r.find(i=>t.platform==="win32"?e.toLowerCase().startsWith(i.uri.fsPath.toLowerCase()):e.startsWith(i.uri.fsPath));return n&&n.name}async function Qce(t,e){let{fileHost:r,workspace:n,telemetry:i}=t,s=(await Vg()).find(a=>Fe.basename(a.definitionFolder)==="docker-existing-dockerfile");if(s){let a=Fe.relative(s.definitionFolder,s.configFilePath),c=r.path.sep!==Fe.sep?a.replace(Fe.sep===Fe.win32.sep?/\\/g:/\//g,r.path.sep):a,l=r.path.resolve(n.configFolderPath,c),u=r.path.relative(r.path.dirname(l),e),d=r.platform==="win32"?u.replace(/\\/g,"/"):u,f="dockerFile"in Xe(s.configText)?["dockerFile"]:["build","dockerfile"],p=yt(s.configText,f,d,{formattingOptions:{}}),h=Bt(s.configText,p);return Gr(i,"dockerFile"),m_(t,se(V({},s),{configText:h}))}else{Gr(i,"existingDockerfileDefinitionNotFound");return}}async function Xce(t,e,r){let{fileHost:n,workspace:i,telemetry:o}=t,s=(await n.readFile(e)).toString(),a=_r(s);if(!a){await Ze.window.showErrorMessage(`Invalid docker-compose file "${e}"`,{modal:!0});return}let c=a.version,l=Object.keys(a&&a.services||{}),u=l.length<2?l[0]||"":await Un(t.quickPick,l.map(h=>({label:h,type:"service"})),"Select a service",void 0,void 0,!0);if(u==="back")return r();if(u===void 0){Gr(o,"canceled");return}let d=typeof u=="string"?u:u.label,p=(await Vg()).find(h=>Fe.basename(h.definitionFolder)==="docker-existing-docker-compose");if(p){let h=Fe.relative(p.definitionFolder,p.configFilePath),m=n.path.sep!==Fe.sep?h.replace(Fe.sep===Fe.win32.sep?/\\/g:/\//g,n.path.sep):h,g=n.path.resolve(i.configFolderPath,m),v=n.path.relative(n.path.dirname(g),e),w=n.platform==="win32"?v.replace(/\\/g,"/"):v,C=Xe(p.configText).dockerComposeFile,b=Array.isArray(C)?C.slice(1):[],S=[w,...b],P=yt(p.configText,["dockerComposeFile"],S,{formattingOptions:{}}),_=Bt(p.configText,P),k=yt(_,["service"],d,{formattingOptions:{}}),T=Bt(_,k),A=b.reduce((H,J)=>(H[Bs({platform:process.platform},{configFilePath:Ee.file(p.configFilePath)},J).fsPath]=!0,H),{}),M=se(V({},p),{configText:T,async copyFile(H,J){if(A[H]){let K=this.files&&this.files[H]||(await Oe(H)).toString(),oe=_r(K);oe.version&&c&&oe.version!==c&&(K=K.replace(new RegExp(`^(version:.*)(${oe.version.replace(/\./g,"\\.")})`,"m"),`$1${c}`));let te=Object.keys(oe&&oe.services||{});te.length&&(K=K.replace(new RegExp(`\\b${te[0]}\\b`),d)),await n.writeFile(J,Buffer.from(K))}else{let K=this.files&&this.files[H]?Buffer.from(this.files[H]):await Oe(H);await n.writeFile(J,K)}}});return Gr(o,"dockerComposeFile"),m_(t,M)}else{Gr(o,"existingDockerComposeDefinitionNotFound");return}}function Gr(t,e,r){let n={outcome:e};r&&(n.definitionName=r),t.sendTelemetryEvent("createConfiguration",n)}function Zce(t,e){let r=e.recommendationScore===void 0?0:e.recommendationScore,n=t.recommendationScore===void 0?0:t.recommendationScore;return r-n}var IH=["docker-existing-docker-compose","docker-existing-dockerfile"];async function TH(t,e){let r=(await Vg()).filter(n=>IH.indexOf(Fe.basename(n.definitionFolder))===-1);return t&&(r=r.filter(n=>!/^\s*no\b/i.test(n.metaData.get("codespaces")||"yes"))),e?(await e(r),r.sort(Zce)):r.sort((n,i)=>n.label.localeCompare(i.label))}async function ele(t){let e=(await Vg()).filter(r=>IH.indexOf(Fe.basename(r.definitionFolder))===-1);return e=e.filter(r=>wH(r)),t&&(e=e.filter(r=>!/^\s*no\b/i.test(r.metaData.get("codespaces")||"yes"))),e.sort((r,n)=>r.label.localeCompare(n.label))}async function Vg(){let t=new gH.default,e=await rl(),r=Fe.join(e,"node_modules","vscode-dev-containers","containers"),n=Fe.join(e,"node_modules","vscode-dev-containers","containers-readmes"),i=await Yr(r);return(await Promise.all(i.map(async s=>{var w;let a=Fe.join(r,s),c=await vh(a),l=c&&await nle(c);if(!l)return;let u=Xe(l);u.configFilePath=Ee.file(c);let[,d,f]=((w=u.name)==null?void 0:w.match(/^(.*)(\([^)]*\))$/))||[],p=(d==null?void 0:d.trim())||u.name||s,h=f,m,g=Fe.join(n,s,"README.md"),v=new Map;if(await pt(g))try{let C=await Oe(g,{encoding:"utf8"}),b=/\#\s*summary.*\n*(.*)/i.exec(C);if(b){let S=t.render(b[1]);m=tle(S);let P=m.indexOf(". ");P!==-1&&(m=m.substr(0,P+1))}v=rle(C)}catch(C){console.error(C)}return{label:p,description:h,type:"baseConfiguration",detail:m,definitionFolder:a,configText:l,configFilePath:c,metaData:v}}))).filter(s=>!!s)}function tle(t){return t.replace(/<[^>]*>/g,"").trim().replace(/&#([0-9]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,10))}).replace(/&#x([0-9a-f]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e})}function rle(t){let e=new Map,r=!1,n=/^\s*\|\s*Metadata\s*\|\s*Value\s*\|/i,i=/^\s*\|/gi,o={categories:/^\s*\|\s*\*Categories\*\s*\|\s*(.*)\s*\|/i,contributors:/^\s*\|\s*\*Contributors\*\s*\|\s*(.*)\s*\|/i,definitionType:/^\s*\|\s*\*Definition type\*\s*\|\s*(.*)\s*\|/i,codespaces:/^\s*\|\s*\*Works in Codespaces\*\s*\|\s*(.*)\s*\|/i,languagesPlatforms:/^\s*\|\s*\*Languages, platforms\*\s*\|\s*(.*)\s*\|/i},s=t.toString().split(`
`);for(let a of s)if(!r)a.match(n)&&(r=!0);else{if(!a.match(i))break;for(let c in o){let l=a.match(o[c]);l&&l[1]&&e.set(c,l[1])}}return e}async function nle(t){return await pt(t)?(await Oe(t)).toString():void 0}async function ile(t,e){let{fileHost:r,workspace:n,replaceExistingConfig:i,existingConfig:o,output:s}=t,a=n.configFolderPath,c="Skip",l=(await DH(e.definitionFolder)).map(f=>Fe.relative(e.definitionFolder,f)),u,d;for(let f of l){let p=Fe.join(e.definitionFolder,f),h=p===e.configFilePath,m=r.path.sep!==Fe.sep?f.replace(Fe.sep===Fe.win32.sep?/\\/g:/\//g,r.path.sep):f,g=r.path.join(a,m);if(h&&!i&&o){let v=Xe(e.configText);try{d=ole(r,v,g,o)}catch(w){await ale(w,r,g,m,s);return}g=Ie(o.uri,r.platform)}else if(await r.isFile(g)){let v=await Ze.window.showInformationMessage(`File '${m}' already exists, overwrite?`,{modal:!0},c,"Overwrite");if(!v)return;if(v===c)continue}if(await r.mkdirp(r.path.dirname(g)),h)u=g,await r.writeFile(g,Buffer.from(d||e.configText));else if(e.copyFile)await e.copyFile(p,g);else{let v=e.files&&e.files[p]?Buffer.from(e.files[p]):await Oe(p);await r.writeFile(g,v)}}return u}function ole(t,e,r,n){var u,d,f,p,h,m;let i=n.text,o=Ie(n.uri,t.platform);if("image"in e)i=ot(i,["image"],e.image);else if("dockerFile"in e){let g=nl(t,r,o,e.dockerFile);if(i=ot(i,["dockerFile"],g),e.context){let v=nl(t,r,o,e.context);i=ot(i,["context"],v)}}else if("build"in e){let g=nl(t,r,o,e.build.dockerfile);if(i=ot(i,["build","dockerfile"],g),e.build.context){let v=nl(t,r,o,e.build.context);i=ot(i,["build","context"],v)}i=ot(i,["build","target"],e.build.target),i=ot(i,["build","args"],e.build.args)}else if("dockerComposeFile"in e){let g=sle(t,r,o,e.dockerComposeFile);i=ot(i,["dockerComposeFile"],g),i=ot(i,["service"],e.service),i=ot(i,["workspaceFolder"],e.workspaceFolder)}e.features&&(i=ot(i,["features"],e.features));let s=v_(((u=e.vscode)==null?void 0:u.settings)||e.settings,((d=n.object.vscode)==null?void 0:d.settings)||n.object.settings);((f=n.object.vscode)==null?void 0:f.settings)?n.object.vscode?i=ot(i,["vscode","settings"],s):i=ot(i,["vscode"],{settings:s}):i=ot(i,["settings"],s);let a=g_(n.object.forwardPorts,e.forwardPorts);i=ot(i,["forwardPorts"],a);let c=g_(((p=n.object.vscode)==null?void 0:p.extensions)||n.object.extensions,((h=e.vscode)==null?void 0:h.extensions)||e.extensions);if(((m=n.object.vscode)==null?void 0:m.extensions)?n.object.vscode?i=ot(i,["vscode","extensions"],c):i=ot(i,["vscode"],{extensions:c}):i=ot(i,["extensions"],c),"image"in e||wt(e)){let g=g_(n.object.mounts,e.mounts);i=ot(i,["mounts"],g);let v=v_(e.containerEnv,n.object.containerEnv);i=ot(i,["containerEnv"],v),i=ot(i,["containerUser"],e.containerUser);let w=AH(n.object.runArgs,e.runArgs);i=ot(i,["runArgs"],w)}i=ot(i,["postCreateCommand"],e.postCreateCommand);let l=v_(e.remoteEnv,n.object.remoteEnv);return i=ot(i,["remoteEnv"],l),i=ot(i,["remoteUser"],e.remoteUser),i}function ot(t,e,r){if(r===void 0)return t;let n=yt(t,e,r,{formattingOptions:{}});return Bt(t,n)}function sle(t,e,r,n){return Array.isArray(n)?n.map(i=>nl(t,e,r,i)):nl(t,e,r,n)}function nl({path:t},e,r,n){let i=t.resolve(t.dirname(e),n);return t.relative(t.dirname(r),i)||"."}function g_(t,e){var r;return(r=AH(t,e))==null?void 0:r.filter((n,i,o)=>o.indexOf(n)===i)}function AH(t,e){if(!!(e==null?void 0:e.length))return(t||[]).concat(e)}function v_(t,e){if(!(!t||!Object.keys(t).length))return Object.assign({},t,e)}async function c_(t,e){let r=await gh(t,e.configFolderPath);if(!r)return;let n=await Rt(t).readDocument(r);if(!n)return;let i=Xe(n);return{uri:r,text:n,object:i}}async function DH(t){let e=await Yr(t);return[].concat(...await Promise.all(e.map(async r=>{let n=Fe.join(t,r);return(await(0,vH.promisify)(mH.lstat)(n)).isDirectory()?DH(n):n})))}async function ale(t,e,r,n,i){i.write(Ne(t&&(t.stack||t.message)));let o=await e.toCommonURI(r),s=await Ze.window.showErrorMessage(`Could not update '${n}' due to errors in its content. Try fixing these first.`,{modal:!0},...o?["Open devcontainer.json"]:[]);o&&s&&Ze.window.showTextDocument(Ze.Uri.parse(o.toString()))}async function Bd(t){return(await cle()).find(r=>{var n,i;return(i=(n=r.build)==null?void 0:n.tags)==null?void 0:i.some(o=>{let c=`^mcr.microsoft.com/vscode/devcontainers/${o.split(/\$\{[^}]*\}/).map(l=>l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g").join(".*")}$`;return new RegExp(c).test(t)})})}async function cle(){let t=Fe.join(await rl(),"node_modules","vscode-dev-containers","manifests");return(await Promise.all((await Yr(t)).map(e=>l_(e,t)))).filter(Boolean)}async function l_(t,e){e=e||Fe.join(await rl(),"node_modules","vscode-dev-containers","manifests");let r=Fe.join(e,t,"definition-manifest.json");if(await pt(r)){let n=(await Oe(r)).toString(),i=Xe(n);return i.definitionName=t,i}}async function rl(){let t=await fl(Fe.join(__dirname,"node_modules","vscode-dev-containers"))?[]:await fl(Fe.join(__dirname,"..","node_modules","vscode-dev-containers"))?[".."]:["..",".."];return Fe.join(__dirname,...t)}async function RH(t,e,r,n,i,o){let s=mn(r);if(Wt(s)&&!await Me.workspace.requestWorkspaceTrust({message:rd}))return Ht(s.hostPath)?(await Me.window.showInformationMessage("The WSL folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen in WSL."}),await Me.commands.executeCommand("remote-containers.reopenInWSL")):(await Me.window.showInformationMessage("The local folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen locally."}),await Me.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let a=pn(s);return a&&!await nd(t,s.repositoryPath)?(await Me.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{})):se(V({},await lle(s,t,i,o,e,r,n)),{isTrusted:a||void 0})}async function lle(t,e,r,n,i,o,s){let{log:a,logFilePath:c}=r,l="hostPath"in t&&Ht(t.hostPath)&&!!Me.extensions.getExtension("ms-vscode-remote.remote-wsl");l&&Me.commands.executeCommand("setContext","canReopenInWSL",!0);let u=t.settings,d="localDocker"in t&&t.localDocker,f=!!(u&&"host"in u&&u.host&&u.host.startsWith("ssh://")&&!d)&&(!!Me.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!Me.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));f&&Me.commands.executeCommand("setContext","canReopenInSSH",!0);let p=!(u&&"host"in u&&u.host&&u.host.startsWith("ssh://")&&!d);p&&Me.commands.executeCommand("setContext","canReopenLocally",!0);let h;return Me.window.withProgress({location:Me.ProgressLocation.Notification,title:$c,cancellable:!1},async m=>{let g=ni(e.extensionPath,Bi,a),{cliHost:v,originalCwd:w}=await ule(t,e.extensionPath,Vi(),g,i.product,a),C=V(V({},await g),kc(v,t.settings)),b=V(V({},v.env),C),S=await jc({authority:o,extensionContext:e,sessionStart:r.sessionStart,progress:m,cliHost:v,env:b,cwd:v.cwd,isLocalContainer:im(C),telemetry:i,output:a,logFilePath:c,allowSystemConfigChange:!0,postCreate:n}),P={async createConfiguration(_,k){return Hd({fileHost:k,telemetry:i,output:a,existingFilesLearnMoreLink:Qu,predefinedDefinitionsLearnMoreLink:Xu,openConfigurationCommandId:Ju},Ge(y_.posix,_))},async showError(_,...k){return await Me.window.showErrorMessage(_,{modal:!0},...k)}};return h={common:S,parsedAuthority:t,dockerCLI:Mn(),dockerComposePath:Lo(),dockerComposeCLI:ii({exec:S.cliHost.exec,env:V(V({},C),fr(C)),output:S.output},Mn(),Lo()),dockerEnv:C,workspaceMountConsistencyDefault:Tm(),updateRemoteUserUIDOnMacOS:Am(),cacheMount:Dm()?"volume":"none",configurationTracking:Im(e.workspaceState),removeOnStartup:await eq(e,o),buildNoCache:await rq(e,o),onRemoveOnShutdownChanged:s,userRepositoryConfigurationPaths:di(),originalCwd:w,configProvider:P,development:e.extensionMode===Me.ExtensionMode.Development},await om(h),R1(h)}).then(m=>(s(async g=>{await tq(e,g&&m.dockerContainerId||!1),await ed(e,g==="rebuildNoCache"?o:!1)}),Hi(i,w_(t),"success",m.config,m.properties),m),m=>{var _;let g=m instanceof ge?m:new ge({description:"An error occurred setting up the container.",originalError:m});pn(t)&&(g.volumeName=t.volumeName,g.volumeName===hn&&(g.volumeName=dn(t.repositoryPath).uniqueVolumeName),g.repositoryPath=t.repositoryPath,g.folderPath=t.folder),Hi(i,w_(t),"failure",g.config,g.containerProperties,g);let v="onTheSide",w=(_=g.data)==null?void 0:_.fileWithError,C=w&&(h==null?void 0:h.common.cliHost.path.basename(w))||"devcontainer.json",b=Wt(t)?[{id:"openFileWithErrorLocally",title:`Open ${C} Locally`,isLastAction:!0,applicable:async(k,T)=>p&&!(T&&l),async execute(){let k=h==null?void 0:h.common.cliHost,T=w?k.type==="wsl"?await k.toCommonURI(w):Ee.file(w):void 0;await td(e,t.hostPath,T,c,v);let A=Me.Uri.file(t.hostPath);await Me.commands.executeCommand("vscode.openFolder",A)}},{id:"openFileWithErrorinWSL",title:`Open ${C} in WSL`,isLastAction:!0,applicable:async()=>l,async execute(){let k=Me.Uri.parse((await Xa(t.hostPath,a)).toString());await td(e,k.path,w?k.with({path:w}):void 0,c,v),await Me.commands.executeCommand("vscode.openFolder",k)}},{id:"openFileWithErrorinSSH",title:`Open ${C} in SSH`,isLastAction:!0,applicable:async()=>f,async execute(){let k=t.settings,T=Me.Uri.parse(iu(k.host,t.hostPath).toString());await td(e,T.path,w?T.with({path:w}):void 0,c,v),await Me.commands.executeCommand("vscode.openFolder",T)}}]:[],S=pn(t)?t.inspectVolume?[To]:[{id:"reopenInRecoveryContainer",title:`Open ${C} in Recovery Container`,isLastAction:!0,applicable:(k,T)=>!0,execute:async k=>{await td(e,t.repositoryPath,w?Ee.file(w).with({scheme:"vscode-remote"}):void 0,c,v),await Me.commands.executeCommand("remote-containers.inspectVolume",k.volumeName,k.repositoryPath,k.folderPath)}},To,{id:"openRepository",title:"Open Repository",isLastAction:!1,applicable:(k,T)=>!T,async execute(){Me.env.openExternal(Me.Uri.parse(t.repositoryPath))}}]:[],P=Lu(t)?[To]:[];return g.actions=[...Tc,Zs,cL,...b,...S,...P,Ic,Xs],dle(g),Ao(g,w_(t),i,!0,r)})}async function ule(t,e,r,n,i,o){let{settings:s}=t,a=s&&"host"in s&&s.host||void 0;if(Wt(t)){let c=Ge(y_,t.hostPath),l=c.rootFolderPath,u=await Tn(a,c.rootFolderPath,ui,qn(),e,r,i,o,fi,{sshAskpassEnv:n,settings:qc(),localDocker:t.localDocker});return u.cwd!==c.rootFolderPath&&(c=Ge(u.path,c.isWorkspaceFile?u.path.join(u.cwd,y_.basename(t.hostPath)):u.cwd)),o.write(`Setting up container for folder or workspace: ${c.workspaceOrFolderPath}\r
`),nm(o,t.settings),t.localDocker&&o.write(`Local Docker: ${t.localDocker}\r
`),{cliHost:u,originalCwd:l}}else{let c=process.cwd();return{cliHost:await Tn(a,c,ui,qn(),e,r,i,o,fi,{sshAskpassEnv:n,settings:qc()}),originalCwd:c}}}function w_(t){return Wt(t)?"config":pn(t)?t.inspectVolume?"volume":"repository":"volume"}function dle(t){let e=(t.originalError&&(t.originalError.cmdOutput||t.originalError.message)||"").toLowerCase();e&&e.indexOf("drive has not been shared")!==-1?t.description="The drive of the workspace folder is not shared. Share it in the Docker settings first.":e&&(e.indexOf("port is already allocated")!==-1||e.indexOf("address already in use")!==-1)?t.description="A port the container is setup to bind to is already in use. See the Dev Containers terminal for details.":e&&e.indexOf('invalid mount config for type "bind"')!==-1?t.description="A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running.":e&&e.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(t.description="The base image references the obsolete Debian 8 update repository.",t.actions.push({id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(r,n)=>n,async execute(){Me.env.openExternal(Me.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var yi=Y(require("vscode"));var OH=Y(require("util"));var Bn=Y(require("path"));async function NH(t,e,r){let{common:n}=t,i;try{let{commit:o}=n.product;if(!o)throw new ge({description:"Cannot attach without commit id for the remote extension host."});i=await _c(t,e.Id,r.workspaceFolder,r.remoteUser);let s=Rt(n.cliHost,i.shellServer),{hostOrContainerPort:a,hostPortServer:c,connectionToken:l,webConnectionToken:u,remoteEnv:d,serverDownloaded:f}=await nh(n,i,r,async()=>{},Co);if(fle(n,i,s,r.configFilePath),hle(n,i,s,r.configFilePath),bc(n,i,a,l,u,e,Ge(Bn.posix,"/")),c){let p=async()=>{await(0,OH.promisify)(c.close.bind(c))()};n.shutdowns.push(p)}return{params:n,properties:i,config:r,resolvedAuthority:{host:ko,port:a,connectionToken:l,extensionHostEnv:d},webConnectionToken:u,tunnelInformation:n.isLocalContainer?Ec(e):{},dockerParams:t,dockerContainerId:e.Id,serverDownloaded:f}}catch(o){let s=o instanceof ge?o:new ge({description:"An error occurred attaching to the container.",originalError:o});throw e&&(s.manageContainer=!1,s.params=t.common,s.containerId=e.Id,s.dockerParams=t),i&&(s.containerProperties=i),s.config=r,s}}function fle(t,e,r,n){e.installFolder&&LH(t,e,r,n).catch(console.error)}async function LH(t,e,r,n){try{await Ri(t,e,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 15
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],rR(e),{print:"off"});return}catch(i){(i==null?void 0:i.code)===1?await ple(t,e,r,n):(i==null?void 0:i.code)!==2&&await ti(6e4)}return LH(t,e,r,n)}async function ple(t,e,r,n){let i=await aR(t,e);await vC(n,async()=>{var s;let o=await Kg(t.cliHost,r,n,e.remoteWorkspaceFolder);if(!gle(((s=o.config.vscode)==null?void 0:s.extensions)||[],i)){let a=yt(o.text,["extensions"],i,{formattingOptions:{}});await an(r,n,a,o.text)}})}function hle(t,e,r,n){FH(t,e,r,n).catch(console.error)}async function FH(t,e,r,n){try{let i=rh(e),o=Bn.posix.dirname(i),s=Bn.posix.basename(i);await Ri(t,e,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 15
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],o,{print:"off"});return}catch(i){(i==null?void 0:i.code)===1?await mle(t.cliHost,e,r,n):(i==null?void 0:i.code)!==2&&await ti(6e4)}return FH(t,e,r,n)}async function mle(t,e,r,n){let{stdout:i}=await e.shellServer.exec(`cat ${rh(e)}`),o=Xe(i)||{};await vC(n,async()=>{var a;let s=await Kg(t,r,n,e.remoteWorkspaceFolder);if(JSON.stringify(((a=s.config.vscode)==null?void 0:a.settings)||{})!==JSON.stringify(o)){let c=yt(s.text,["settings"],o,{formattingOptions:{}});await an(r,n,c,s.text)}})}function gle(t,e){let r=new Set(t),n=new Set(e);return r.size===n.size&&t.every(i=>n.has(i))}async function MH(t,e){let r=Wg(t,e.Name),n=await VH(r);return n||(r=$H(t,e.Config.Image),n=await VH(r)),n}async function qH(t,e,r,n,i){let o=Ee.file(Wg(r,n.Name)),s=await Kg(t,e,o,i);return s.exists||(o=Ee.file($H(r,n.Config.Image)),s=await Kg(t,e,o,i)),s}function Gg(t){return Bn.join(t,"nameConfigs")}function Wg(t,e){let r=e.startsWith("/")?e.substr(1):e;return Bn.join(Gg(t),`${BH(r)}.json`)}async function jH(t){try{let e=Gg(t);return(await Yr(e)).filter(n=>n.endsWith(".json")).map(n=>({name:HH(n.substr(0,n.length-5)),uri:Ee.file(Bn.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function zg(t){return Bn.join(t,"imageConfigs")}function $H(t,e){return Bn.join(zg(t),`${BH(e)}.json`)}async function UH(t){try{let e=zg(t);return(await Yr(e)).filter(n=>n.endsWith(".json")).map(n=>({image:HH(n.substr(0,n.length-5)),uri:Ee.file(Bn.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function BH(t){return t.replace(/[:/%]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}function HH(t){return t.replace(/%([0-9a-f]{2})/g,(e,r)=>String.fromCharCode(parseInt(r,16)))}async function VH(t){if(!await pt(t))return;let e=await Oe(t),r=Xe(e.toString())||{},n=Us(r);return n.configFilePath=Ee.file(t),n}async function Kg(t,e,r,n){let i=await e.readDocument(r),o=i||Ni,s=Xe(o)||{},a=Us(s),c=oc({platform:t.platform,configFile:r,env:t.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:n},a);return c.configFilePath=r,{exists:!!i,text:o,config:c}}async function GH(t,e,r,n,i){return await Fo(t)?se(V({},await vle(t,e,r,n,i)),{isTrusted:!0}):(await yi.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function vle(t,e,r,n,i){let o;return yi.window.withProgress({location:yi.ProgressLocation.Notification,title:$c,cancellable:!1},async s=>{var a,c;try{let l=sm(r),{settings:u}=l,d="containerName"in l?l.containerName:l.containerId;n.log.write(`Setting up container: ${d}\r
`),nm(n.log,u);let f=u&&"host"in u&&u.host||void 0,p=l.cwd||((f==null?void 0:f.startsWith("ssh://"))?"/":process.cwd()),h=ni(t.extensionPath,Bi,n.log),m=await Tn(f,p,ui,qn(),t.extensionPath,Vi(),e.product,n.log,fi,{sshAskpassEnv:h,settings:qc()}),g=Mn(),v=V(V({},await h),kc(m,u)),w=ii({exec:m.exec,env:V(V({},v),fr(v)),output:n.log},Mn(),Lo()),C=V(V({},m.env),v),b=await fn({cliHost:m,dockerCLI:g,dockerComposeCLI:w,env:C,output:n.log},"containerName"in l?l.containerName:l.containerId);if(!b)throw new ge({description:`Cannot attach to the container with name/id ${d}, it no longer exists.`,data:{reload:!1,attach:!0}});let S=(c=(a=(yi.workspace.workspaceFolders||[void 0])[0])==null?void 0:a.uri)==null?void 0:c.path,P=await qH(m,An,t.globalStoragePath,b,S);if(S&&P.config.workspaceFolder!==S){let M=yt(P.text,["workspaceFolder"],S,{formattingOptions:{}});await an(An,P.config.configFilePath,M,P.text)}let _={common:await jc({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:s,cliHost:m,env:C,cwd:p,isLocalContainer:im(v),telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:i}),parsedAuthority:l,dockerCLI:g,dockerComposePath:Lo(),dockerComposeCLI:w,dockerEnv:v,workspaceMountConsistencyDefault:Tm(),updateRemoteUserUIDOnMacOS:Am(),cacheMount:Dm()?"volume":"none",configurationTracking:Im(t.workspaceState),userRepositoryConfigurationPaths:[],development:t.extensionMode===yi.ExtensionMode.Development};await om(_);let k=xc(u),T=b.Name.startsWith("/")?b.Name.substr(1):b.Name,A=`Container ${b.Config.Image} (${T})${k}`;if(_.common.setWorkspaceName(A),b.State.Status!=="running")throw new ge({description:`Cannot attach to the container ${b.Config.Image} (${T})${k}, it is not running.`,params:_.common,containerId:b.Id,dockerParams:_,data:{reload:!1,start:!0}});return await NH(_,b,P.config)}catch(l){let u=l instanceof ge?l:new ge({description:"An error occurred attaching to the container.",originalError:l});throw u.actions=[lL,uL,...Tc,Zs,To,Ic,Xs],u}}).then(s=>(Hi(e,"attach","success",o,s.properties),s),s=>{let a=s instanceof ge?s:new ge({description:"An error occurred attaching to the container.",originalError:s});return Hi(e,"attach","failure",o,a.containerProperties,a),Ao(a,"attach",e,!0,n)})}var st=Y(require("vscode"));var gt=Y(require("vscode")),WH=Y(require("path")),ha=Y(require("os")),Vd=Y(require("fs")),zH=Y(require("child_process")),KH=Y(Va());async function Yg(t){Cle()?await new YH().downloadAndInstallDocker(t):QH()?await new JH().downloadAndInstallDocker(t):await gt.env.openExternal(gt.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var C_=class{async downloadAndInstallDocker(e){if(await this.preInstallCheck(e)){let n="Downloading Docker installer...",i="The Docker Desktop installation is started. Complete the installation and then start Docker Desktop.",o;try{o=await gt.window.withProgress({location:gt.ProgressLocation.Notification,title:n},async()=>this.downloadInstaller())}catch(a){let c="Downloading the Docker Desktop installer failed. Do you want to manually download and install?",l="Download";throw this.handleError(c,l,this.downloadUrl),a}let s=this.getInstallCommand(o);gt.window.showInformationMessage(i);try{await this.install(o,s,e)}catch(a){let c=`Docker Desktop installation failed. ${a}`,l="Install Instruction";throw this.handleError(c,l,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(e){let r=!0;if(await new XH(e).isDockerInstalledRealTimeCheck()){let n="Docker Desktop is already installed. Would you like to reinstall?",i="Reinstall";r=await gt.window.showInformationMessage(n,{modal:!0},i)!==void 0}return r}async downloadInstaller(){let e=`${wle()}.${this.fileExtension}`;return await Ele(this.downloadUrl,e),e}handleError(e,r,n){gt.window.showErrorMessage(e,{title:r}).then(i=>{i&&gt.env.openExternal(gt.Uri.parse(n))})}},YH=class extends C_{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-windows-vscode";this.fileExtension="exe"}getInstallCommand(e){return`"${e}"`}async install(e,r,n){try{n.write(`Executing command ${r}`),await eV(r,n)}finally{try{await Vd.promises.stat(e),await Vd.promises.unlink(e)}catch{}}}},JH=class extends C_{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-mac-vscode";this.fileExtension="dmg"}getInstallCommand(e){return`chmod +x '${e}' && open '${e}'`}async install(e){let r="Docker Install",n=this.getInstallCommand(e);await ble(n,r,{addDockerEnv:!1})}},yle=0;function wle(){return WH.join(ha.tmpdir(),`${gt.env.sessionId}-${yle++}.tmp`)}function Cle(){return ha.platform()==="win32"}function QH(){return ha.platform()==="darwin"}async function ble(t,e,r){var a,c,l;let n;r=r!=null?r:{},r.addDockerEnv&&(n={});let i=new gt.Task({type:"shell"},(a=r.workspaceFolder)!=null?a:gt.TaskScope.Workspace,e,"Docker",new gt.ShellExecution(t,{cwd:r.cwd||((l=(c=r.workspaceFolder)==null?void 0:c.uri)==null?void 0:l.fsPath)||ha.homedir(),env:n}),[]);r.alwaysRunNew&&(i.definition.idRandomizer=Math.random()),r.focus&&(i.presentationOptions={focus:!0});let o=await gt.tasks.executeTask(i);return new Promise((u,d)=>{let f=gt.tasks.onDidEndTaskProcess(p=>{p.execution===o&&(f.dispose(),p.exitCode&&r.rejectOnError&&d(p.exitCode),u())})})}var XH=class{constructor(e){this.output=e;this.maxCacheTime=3e4;this.isDockerInstalledLazy=new tV(async()=>{let r=await this.isDockerInstalledRealTimeCheck();return r&&this.isDockerInstalledLazy.cacheForever(),r},this.maxCacheTime)}async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{return await eV("docker -v",this.output),!0}catch{return!1}}};async function Ele(t,e){await new Promise((r,n)=>{let i=Vd.createWriteStream(e);KH.https.get(t,s=>{if(s.statusCode<200||s.statusCode>299){n(new Error(`Failed to download Docker (${t}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",n),s.pipe(i),s.on("end",r)}).on("error",n)})}var ZH=10*1024;async function eV(t,e,r,n){let i=Buffer.alloc(r&&r.maxBuffer||ZH),o=Buffer.alloc(r&&r.maxBuffer||ZH);return await _le(t,e,r,n,i,n,o),{stdout:b_(i),stderr:b_(o)}}async function _le(t,e,r,n,i,o,s,a){return await new Promise((c,l)=>{let u,d=0,f=0;r=r||{},r.shell=!0,Sle(r,e);let p=zH.spawn(t,r);p.on("error",h=>(u&&(u.dispose(),u=void 0),l(h))),p.on("close",(h,m)=>{if(u&&(u.dispose(),u=void 0),a&&a.isCancellationRequested)return l(new Error("User canceled"));if(h){let g=`Process '${t.length>50?`${t.substring(0,50)}...`:t}' exited with code ${h}`;s&&(g+=`
Error: ${b_(s)}`);let v=new Error(g);return v.code=h,v.signal=m,v.stdErrHandled=o!==null,l(v)}return c()}),(r==null?void 0:r.stdin)&&(p.stdin.write(r.stdin),p.stdin.end()),(n||i)&&p.stdout.on("data",h=>{let m=h.toString();n&&n(m,p),i&&(d+=i.write(m,d))}),(o||s)&&p.stderr.on("data",h=>{let m=h.toString();o&&o(m,p),s&&(f+=s.write(m,f))}),a&&(u=a.onCancellationRequested(()=>{p.kill()}))})}function Sle(t,e){var r,n;!QH()||/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((r=t==null?void 0:t.env)==null?void 0:r.PATH)||process.env.PATH||"")||(t=t!=null?t:{},t.env=(n=t.env)!=null?n:V({},process.env),e.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),t.env.PATH=`${t.env.PATH}:/usr/local/bin`)}function b_(t){return t.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var tV=class{constructor(e,r){this.valueFactory=e;this._valueLifetime=r;this._isValueCreated=!1}get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let e=this._valuePromise===void 0;e&&(this._valuePromise=this.valueFactory());let r=await this._valuePromise;if(e&&(this._value=r,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&e){let n=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(n)},this._valueLifetime)}return r}};async function Ir(t,e,r){var o;let n=(o=(st.workspace.workspaceFolders||[])[0])==null?void 0:o.uri;n&&(n.scheme==="file"&&Ht(n.fsPath)||Za(n))&&(e=await He(t,e.output,n));let i=await Gd(e,r);if(i==="permission")return await st.window.showErrorMessage("Current user does not have permission to run 'docker'.",{modal:!0,detail:"Try adding the user to the 'docker' group."},"Documentation")&&st.env.openExternal(st.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(i==="ssh")return await st.window.showErrorMessage("Cannot connect to Docker daemon using 'ssh'.",{modal:!0,detail:"Make sure public/private keys are set up for connecting without keyboard interaction."},"Show Log")&&st.commands.executeCommand(li),!1;if(i==="daemon")return await st.window.showErrorMessage("Docker returned an error.",{modal:!0,detail:"Make sure the Docker daemon is running."},"Show Log")&&st.commands.executeCommand(li),!1;if(!i||i==="command"){if(e.cliHost.type==="wsl")await st.window.showErrorMessage("Docker Desktop WSL 2 backend required.",{modal:!0},"Read more on docker.com")&&st.env.openExternal(st.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let s="Install",a="License",c="Ignore",l=i===!1?[s,a,c]:[s,a],u=await st.window.showErrorMessage("Docker version 17.12.0 or later required.",{modal:!0,detail:"Check the license for details."},...l);if(u===s)Yg(e.output).then(console.error);else if(u===a)st.env.openExternal(st.Uri.parse("https://aka.ms/docker-subscription-service-agreement"));else if(u===c)return!0}return!1}return i==="wsl1"?(await st.window.showErrorMessage("WSL 2 distro required.",{modal:!0,detail:"The WSL distro is running with WSL 1."},"Read more on docker.com")&&st.env.openExternal(st.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}async function Gd(t,e){var s,a,c,l;let r;try{let u=await ze(t,"version","--format","{{.Server.APIVersion}}");r=u.stdout.toString(),t.output.write(r);let d=u.stderr.toString();d&&t.output.write(Ne(d))}catch(u){console.error(u);let d=(s=u==null?void 0:u.stdout)==null?void 0:s.toString();d&&t.output.write(d);let f=u&&(u.stderr?u.stderr.toString():u.message)||"";f&&t.output.write(Ne(f)),Wd(e,"error",void 0,f);let p=f.toLowerCase();return p.indexOf("permission denied")!==-1?p.indexOf("ssh")!==-1?"ssh":"permission":p.indexOf("enoent")!==-1||p.indexOf("not found")!==-1?(t.output.write(`CLI host's PATH: ${t.cliHost.env.PATH}`),"command"):t.cliHost.type==="wsl"&&((l=(c=(a=u==null?void 0:u.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:l.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let n=r.trim(),i=Ls(n);if(!i&&n.toLowerCase().indexOf("error during connect")!==-1)return Wd(e,"error",void 0,n),"daemon";if(!i)return Wd(e,"unparsed",n),!0;let o=!nc(i,[1,35]);return!o&&await IC(t)?(Wd(e,"podman",n),!0):(Wd(e,o?"success":"failure",n),o)}function Wd(t,e,r,n){let i={outcome:e};r&&(i.version=r),n&&(i.errorMessage=n),t.sendTelemetryEvent("dockerVersion",i)}async function rV(t){try{return await Hs(t,"version"),!0}catch{return await st.window.showErrorMessage("Docker Compose required",{modal:!0},"Documentation")&&st.env.openExternal(st.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")),!1}}var il=Y(require("vscode"));var E_=class{constructor(e){this.fileHost=e}async provideDocumentLinks(e,r){let n=[],i=vp(e.getText());if(!i)return n;let o=yp(i)||{};return o.configFilePath=e.uri,wt(o)&&this._linksForDockerfile(n,o,i,e),"dockerComposeFile"in o&&await this._linksForDockerCompose(n,o,i,e),n}_tryAddDocumentLinkToBucket(e,r,n,i,o){let s=e.positionAt(r),a=e.positionAt(n);s.compareTo(a)!==0&&o.push(new il.DocumentLink(new il.Range(s,a),i))}_linksForDockerfile(e,r,n,i){let o=po(n,["build","dockerfile"])||po(n,["dockerFile"]);o&&o.type==="string"&&this._tryAddDocumentLinkToBucket(i,o.offset+1,o.offset+o.length-1,dr(this.fileHost,r),e)}async _linksForDockerCompose(e,r,n,i){let s=(await ir(this.fileHost,r)).map(c=>il.Uri.file(c).path),a=po(n,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(i,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,i.uri.with({path:s[c]}),e);else a.type==="string"&&this._tryAddDocumentLinkToBucket(i,a.offset+1,a.offset+a.length-1,i.uri.with({path:s[0]}),e)}};var ee=Y(require("vscode")),ma=Y(require("path"));var nV="Stop Container",iV="Reopen Folder locally",oV="Close Workspace",Wo;(function(i){i.Placeholder="Placeholder",i.Group="Group",i.Container="Container",i.Folder="Folder"})(Wo||(Wo={}));var Yt=class{static isGroupItem(e){return!!e&&e.type===Wo.Group}static isContainerItem(e){return!!e&&e.type===Wo.Container}static isFolderItem(e){return!!e&&e.type===Wo.Folder}},zd;(function(n){n[n.DevContainers=0]="DevContainers",n[n.AttachContainers=1]="AttachContainers",n[n.OtherContainers=2]="OtherContainers"})(zd||(zd={}));var __=class extends Yt{constructor(e,r){super();this.label=e;this.groupType=r;this.type=Wo.Group}async asTreeItem(e,r,n,i){return new ee.TreeItem(this.label,ee.TreeItemCollapsibleState.Expanded)}},Vn=class extends Yt{constructor(e,r=[],n,i=!1){super();this.container=e;this.folders=r;this.parent=n;this.isDevContainer=i;this.type=Wo.Container;this._alreadyCheckedRepository=!1}async asTreeItem(e,r,n,i){let o=new ee.TreeItem(this.getContainerLabel(),this.getCollapsibleState());o.description=this.containerDescription;let s=this.getContextBase();o.iconPath=Jg(r,Ile),o.contextValue="exited"+s;let a=!1;return n&&this.container.Id===n.Id?(o.iconPath=Jg(r,kle),o.contextValue="active"+s,a=!0):e&&await this.setTreeItemIconAndContext(e,s,o),o.tooltip=this.getHover(a,o.iconPath instanceof ee.ThemeIcon?o.iconPath:new ee.ThemeIcon("vm"),o.label),this.folders.length===1&&(o.contextValue+="Folder"),o}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?ee.TreeItemCollapsibleState.Expanded:ee.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(e,r,n){switch(this.container.State.Status){case"created":{n.iconPath=new ee.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"paused":{n.iconPath=new ee.ThemeIcon("vm-outline"),n.contextValue="running"+r;break}case"restarting":{n.iconPath=new ee.ThemeIcon("vm-outline"),n.contextValue="exited"+r;break}case"exited":{n.iconPath=new ee.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"running":{n.iconPath=new ee.ThemeIcon("vm-running"),n.contextValue="running"+r;break}}}getTimeElapsed(e){if(!e)return"";let r="",n=e.State.Status,i=new Date(e.State.StartedAt),o=new Date(e.State.FinishedAt);if(i.getFullYear()>1&&o.getFullYear()>1){let s=new Date,a=new Date(i>o?e.State.StartedAt:e.State.FinishedAt),c,l,u=s.getTime()-a.getTime();(l=Math.round(u/Vn.years))>0?l===1?c="year":c="years":(l=Math.round(u/Vn.days))>0?l===1?c="day":c="days":(l=Math.round(u/Vn.hours))>0?l===1?c="hour":c="hours":(l=Math.round(u/Vn.minutes))>0?l===1?c="minute":c="minutes":(l=Math.round(u/Vn.seconds),l===1?c="second":c="seconds"),r=` ${l} ${c}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+r}getContainerLabel(){if(Pc(this.container)&&this.folders.length>0)return`${ma.basename(this.folders[0].folder.path)}`;{let r=WC(this.container);if(r)return r;let n=this.repository;return n?n.repositoryName:this.container.Config.Image}}get containerDescription(){return this.container.Name.substr(1)}getHover(e,r,n){let i=new ee.MarkdownString(void 0,!0);if(i.appendMarkdown(`$(${r.id}) ${n} (${this.container.Name.substr(1)})  
`),this.repository){let s=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";i.appendMarkdown(`${s} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let o=tm(this.container);return o&&i.appendMarkdown(`$(file-symlink-directory) ${o}  
`),e?i.appendMarkdown("$(remote) Connected"):i.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),i}get repository(){if(!this._alreadyCheckedRepository){let e=Js(this.container);e&&(this._repository=dn(e)),this._alreadyCheckedRepository=!0}return this._repository}inspect(e){return Sr(e,this.container.Id)}},mr=Vn;mr.seconds=1e3,mr.minutes=Vn.seconds*60,mr.hours=Vn.minutes*60,mr.days=Vn.hours*24,mr.years=Vn.days*365;var ga=class extends Yt{constructor(e,r,n){super();this.container=e;this.folder=r;this.isDevContainer=n;this.type=Wo.Folder}async asTreeItem(e,r,n,i){let o=new ee.TreeItem(ma.basename(this.folder.path),ee.TreeItemCollapsibleState.None);return o.description=this.folder.path,o.iconPath=Jg(r,Ale),o.contextValue="attachedFolder",this.isDevContainer&&!Js(this.container)&&(o.contextValue="devFolder"),n&&this.container.Id===n.Id&&i===this.folder.path&&(o.iconPath=Jg(r,Tle),o.tooltip=`Active Folder ${o.label}`,o.contextValue=`active${o.contextValue}`),o}};function xle(t,e,r,n){if(!(!ee.env.remoteName||ee.env.remoteName!=="attached-container"&&ee.env.remoteName!=="dev-container"))return sV(t,e,r,n)}function sV(t,e,r,n){ee.commands.executeCommand("setContext","remote-containers:showDetails",!0);let i=new pV(t,e,n,e.output),o=ee.window.createTreeView("detailsContainers",{treeDataProvider:i});return i.setTitle=s=>{o.title=s},t.subscriptions.push(r.onDidChangeActiveContainer(s=>i.refresh(s))),i}function Ple(t,e){let r=[nV];return t&&t.Id===e.Id&&ee.workspace.workspaceFolders&&ee.workspace.workspaceFolders.length>0&&(r.push(oV),ee.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&r.push(iV)),r}var aV=class{constructor(e,r){this.dockerParams=e;this.containerId=r;this.writeEmitter=new ee.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.destroyables=[]}open(){let{cliHost:e,env:r,output:n}=this.dockerParams;e.exec({cmd:Mn(),args:["logs","-f",this.containerId],env:r,output:n}).then(i=>{this.destroyables.push(i.stdout.on("data",o=>{this.write(o.toString())})),this.destroyables.push(i.stderr.on("data",o=>{this.write(o.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(e=>{e.destroy()})}write(e){this.writeEmitter.fire(e.replace(/\n/g,`\r
`))}},cV=class{constructor(e,r,n,i,o,s){this.targetsTreeData=e;this.detailsTreeData=r;this.devVolumesTreeData=n;this.dockerParams=i;this.context=o;this.telemetry=s}updateDockerParameters(e){this.dockerParams=e}registerCommands(){let e=[];return e.push(ee.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),e.push(ee.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),e.push(ee.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),e.push(ee.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),e.push(ee.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),e.push(ee.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),e.push(ee.commands.registerCommand("remote-containers.attachToContainer",this.commandAttachToContainer,this)),e.push(ee.commands.registerCommand("remote-containers.attachToContainerNewWindow",this.commandAttachToContainerNewWindow,this)),e.push(ee.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),e.push(ee.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),e.push(ee.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),e.push(ee.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),e.push(ee.commands.registerCommand("remote-containers.pruneVolumes",this.commandPruneVolumes,this)),e.push(ee.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),e.push(ee.commands.registerCommand("remote-containers.startAndOpenFolder",this.commandStartAndOpenFolder,this)),e.push(ee.commands.registerCommand("remote-containers.newContainer",this.commandNewContainer,this)),e.push(ee.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),e}async commandStopContainer(e){if(!Yt.isContainerItem(e))return;let r=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===e.container.Id?"Stop active container? This will disconnect your current window.":`Stop ${e.getContainerLabel()}?`,n=await ee.window.showWarningMessage(r,{modal:!0},...Ple(this.targetsTreeData.currentContainer,e.container));await this.targetsTreeData.withProgress(e,async()=>{switch(n){case nV:{await cE(this.dockerParams,e.container),e.container=await Sr(this.dockerParams,e.container.Id);break}case oV:{await ee.commands.executeCommand("workbench.action.closeFolder");break}case iV:{await ee.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(e){if(!Yt.isContainerItem(e))return;let r=await fn(this.dockerParams,e.container.Id);if(!r)return;let n=await ee.window.showWarningMessage("Remove this container?",{modal:!0,detail:"This action is not reversible and deletes the container permanently."},"Remove");await this.targetsTreeData.withProgress(e.parent,async()=>{n==="Remove"&&(await cE(this.dockerParams,e.container),await ZM(this.dockerParams,r.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(e.container))})}async tryRemoveVolume(e){let r=tm(e);if(r||(r=Y1(e)),r){let n=await bh(this.dockerParams,r);if((await PC(this.dockerParams)).indexOf(r)>=0){let s;(n==null?void 0:n.Labels)&&n.Labels["vsch.local.repository.unique"]==="true"?s="The container is using a volume with a cloned repository.":s=`This is the last container using '${r}'.`,await ee.window.showInformationMessage(s,{modal:!0,detail:"Do you want to remove the volume and the data it contains?"},"Remove")==="Remove"&&await lE(this.dockerParams,r)}}}async commandPruneVolumes(e){let r="Are you sure you want to remove all unused volumes?";await ee.window.showInformationMessage(r,{modal:!0},"Remove")==="Remove"&&await this.targetsTreeData.withProgress(e,async()=>{await yO(this.dockerParams)})}async commandExplorerVolumesRefresh(e){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(e){!Yt.isContainerItem(e)||await this.targetsTreeData.withProgress(e,async()=>{await Om(this.dockerParams,e.container),e.container=await Sr(this.dockerParams,e.container.Id)})}async commandRemoveRecentFolder(e){!Yt.isFolderItem(e)||(await ee.commands.executeCommand("vscode.removeFromRecentlyOpened",e.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(e){!Yt.isContainerItem(e)||(this.detailsTreeData||(this.detailsTreeData=sV(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(e))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(e){let r,n;Yt.isFolderItem(e)?(n=e,r=e.container):mr.isContainerItem(e)&&(n=e.folders[0],r=e.container),r&&(await Om(this.dockerParams,r),await ee.commands.executeCommand("remote-containers.openFolder",n))}async commandAttachToContainer(e){return this.attachToContainerInternal(e)}async commandAttachToContainerNewWindow(e){return this.attachToContainerInternal(e,!0)}async attachToContainerInternal(e,r=!1){let n;Yt.isContainerItem(e)?n=e.container:this.detailsTreeData&&(n=this.detailsTreeData.container),n&&(await Om(this.dockerParams,n),await Qg(this.dockerParams,n,this.context,r))}async commandInspectDockerResource(e){let r;(Yt.isContainerItem(e)||zo.isImageItem(e)||zo.isVolume(e)||zo.isDevVolume(e))&&(r=await e.inspect(this.dockerParams)),r&&ee.window.showTextDocument(await ee.workspace.openTextDocument({language:"json",content:JSON.stringify(r,null,"	")}))}async commandInspectInBasicDevContainer(e){zo.isDevVolume(e)&&await e.inspectInBasicDevContainer()}async commandCloneInVolume(e){zo.isDevVolume(e)&&await e.cloneRepositoryInVolume()}async commandRemoveVolume(e){zo.isDevVolume(e)&&await e.removeVolume(this.dockerParams)}async commandNewContainer(){let e=[{label:"Open Current Folder in Container",command:"remote-containers.reopenInContainer"},{label:"Open Folder in Container...",command:"remote-containers.openFolder"},{label:"Open Workspace in Container...",command:"remote-containers.openWorkspace"},{label:"Clone Repository in Container Volume...",command:"remote-containers.openRepositoryInVolume"},{label:"Clone GitHub Pull Request in Container Volume...",command:"remote-containers.openPullRequestInVolume"},{label:"Try a Sample...",command:"remote-containers.trySample"}],r=await ee.window.showQuickPick(e,{placeHolder:"Select an action to create a container"});if(r)return ee.commands.executeCommand(r.command)}async commandShowContainerLog(e){if(!Yt.isContainerItem(e))return;let r=new aV(this.dockerParams,e.container.Id);ee.window.createTerminal({name:e.container.Config.Image,pty:r}).show()}};async function lV(t,e,r,n){ee.commands.executeCommand("setContext","remote-containers:showDetails",!1);let i=new uV(t,e,s,r,n),o=ee.window.createTreeView("targetsContainers",{treeDataProvider:i});i.setMessage=a=>o.message=a,t.subscriptions.push(ee.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await i.getDockerParams(!0),i.refresh(void 0))));function s(a){let c=xle(t,a,i,r),l=new mV(t,r,n),u=ee.window.createTreeView("devVolumes",{treeDataProvider:l});t.subscriptions.push(u);let d=new cV(i,c,l,a,t,r);t.subscriptions.push(...d.registerCommands()),t.subscriptions.push(KM(t)(async()=>{i.refresh(void 0),l.refresh(void 0);let f=await He(t,n);c&&c.updateDockerParameters(f),d.updateDockerParameters(f)}))}}var uV=class{constructor(e,r,n,i,o){this.context=e;this.resolverResults=r;this.onFirstReveal=n;this.telemetry=i;this.output=o;this._onDidChangeTreeData=new ee.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._onDidChangeActiveContainer=new ee.EventEmitter;this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;this.refreshDockerParams=!1;this.needsSSHCredentials=!1;this.setTreeMessage=()=>{};this.devContainers=[];this.attachContainers=[];this.otherContainers=[];this.recentAttachEntries=new Map;this.recentAttachDevContainerEntries=new Map;this.recentDevComposeEntries=new Map;this.containerItems=new Map;this.action=Promise.resolve();this.needsDockerStartOrInstallContext=void 0;this.hasContainersContext=void 0}set setMessage(e){this.setTreeMessage=e}get currentContainer(){return this._currentContainer}async getDockerParams(e=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=ni(this.context.extensionPath,async r=>(this.needsSSHCredentials=!0,Bi(r,!1)),this.output));try{this.dockerParams=await He(this.context,this.output,void 0,void 0,e?void 0:this.passiveSSHAskpassEnv,!1),await Gd(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)}catch(r){if(!this.needsSSHCredentials)throw r}}return this.dockerParams}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;let n="exec_create: /root/.vscode-server";if(r.Action==="die"||r.Action==="destroy"||r.Action==="create")this._onDidChangeTreeData.fire();else if(!r.Action.startsWith("exec_create")&&r.Actor&&r.Actor.ID&&this.containerItems.has(r.Actor.ID)){let i=this.containerItems.get(r.Actor.ID);this.dockerParams&&i?(async()=>{i.container=await Sr(this.dockerParams,i.container.Id),this._onDidChangeTreeData.fire(i)})():this._onDidChangeTreeData.fire(i);return}else if(r.Action.startsWith(n)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await Sh(e,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async getTreeItem(e){return e.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}async setDockerStartOrInstallContext(e){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==e)&&(this.needsDockerStartOrInstallContext=e,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await ee.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await ee.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}async setHasContainersContext(e){if(this.hasContainersContext===void 0||this.hasContainersContext!==e){this.hasContainersContext=e;let r=ee.workspace.workspaceFolders&&ee.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await ee.commands.executeCommand("setContext",r,!this.hasContainersContext)}}async getDockerOrShowMessage(e){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(e){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(e);let r=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&r.push(new __("Dev Containers",0)),this.otherContainers.length>0&&r.push(new __("Other Containers",2)),r}async getChildDevContainer(e,r){let n=await this.getWorkspaceFolderFromContainer(e),i=n?[new ga(e,n,!0)]:[],o=Pc(e);o&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new ga(e,a,!1))):o&&this.recentAttachEntries.has(e.Id)?i.push(...this.recentAttachEntries.get(e.Id).map(a=>new ga(e,a,!1))):(o=Js(e))&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new ga(e,a,!1))):o===void 0&&this.recentDevComposeEntries.has(e.Id)&&i.push(...this.recentDevComposeEntries.get(e.Id).map(a=>new ga(e,a,!1)));let s=new mr(e,i,r,!0);return this.setContainerItems(s),s}setContainerItems(e){this.containerItems.set(e.container.Id,e),this._currentContainer&&e.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(e)}async getChildContainers(e){if(e.groupType===0){let r=this.devContainers.map(async n=>this.getChildDevContainer(n,e));return r.push(...this.attachContainers.map(async n=>{let i=new mr(n,this.recentAttachEntries.get(n.Id).map(o=>new ga(n,o,!1)),e);return this.setContainerItems(i),i})),Promise.all(r)}else return this.otherContainers.map(r=>{let n=new mr(r,[],e);return this.setContainerItems(n),n})}getChildFolders(e){return e.folders&&e.folders.length>1?e.folders:[]}async getChildItems(e){if(e===void 0){let r=await Fi(this.dockerParams,!0);if(await this.setHasContainersContext(r.length>0),r.length===0)return[];let n=await So(this.dockerParams,r);return this.getChildGroups(n)}else{if(Yt.isGroupItem(e))return this.getChildContainers(e);if(Yt.isContainerItem(e))return this.getChildFolders(e)}return[]}async getChildren(e){return await this.action,await this.getDockerOrShowMessage(e)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(e)):[]}async refresh(e){e===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(e)}async setCurrents(){let e=ee.workspace.workspaceFolders,r;if(this.dockerParams){if(e&&e.length>0){let n=this.resolverResults.get(e[0].uri.authority);n&&n.dockerContainerId&&(r=await fn(this.dockerParams,n.dockerContainerId),this.currentFolder=e[0].uri.path)}else if(this.resolverResults.size>0){let n=[...this.resolverResults.values()][0].dockerContainerId;n&&(r=await fn(this.dockerParams,n))}}r!==this._currentContainer&&(this._currentContainer=r)}addContainerToMap(e){if(Pc(e)){this.devContainers.push(e);return}else if(Js(e)){this.devContainers.push(e);return}else if(WC(e)&&this.recentDevComposeEntries.has(e.Id)){this.devContainers.push(e);return}else if(this.recentAttachEntries.has(e.Id)){this.attachContainers.push(e);return}this.otherContainers.push(e)}async setContainerTypes(e){return await this.setRecentEntries(e),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,e.forEach(r=>{this.addContainerToMap(r)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(e){let r=this.dockerParams.cliHost,n=Ge(r.path,e),i=await ai(r,n,di()),o=i&&await Ks(r,n,i,this.output)||void 0;if(o&&wt(o.config))return ee.Uri.parse(Mu(e,o.workspaceConfig.workspaceFolder,void 0),!0)}async getWorkspaceFolderFromContainer(e){let r=Pc(e);if(r)return this.getWorkspaceFolderFromHostWorkspace(r);{let n=Js(e),i=tm(e),o=J1(e);if(n)return ee.Uri.parse(Qs(n,i,o,!1,void 0,void 0))}}async getWorkspaceFolderFromHostPath(e){let r=this.dockerParams.cliHost,n=await ub(r,e,this.output),i=iL(r,n,e);return ee.Uri.parse(Mu(e,i,void 0),!0)}getWorkspaceFolderFromRepository(e,r,n){return ee.Uri.parse(Qs(e,r,n,!1,void 0,void 0),!0)}async findComposeTargetContainer(e,r){if(!this.dockerParams)return;let n=Ge(this.dockerParams.cliHost.path,e),i=await ai(this.dockerParams.cliHost,n,di()),o=i&&await Ks(this.dockerParams.cliHost,n,i,this.output);if(o&&"dockerComposeFile"in o.config){let s=await ir(this.dockerParams.cliHost,o.config),a=await Ru(this.dockerParams,n,s);return I1(r,a,o.config.service)}}trySetEntryWithAttachAuthority(e,r,n){let i;if("containerName"in r){let o=n.find(s=>s.Name===r.containerName);o&&(i=o.Id)}else i=r.containerId;i&&(this.recentAttachEntries.has(i)?this.recentAttachEntries.get(i).push(e):this.recentAttachEntries.set(i,[e]))}async trySetEntryWithDevAuthority(e,r,n,i){let o=r.hostPath,s=i[o];if(s||(s=await this.getWorkspaceFolderFromHostPath(r.hostPath),i[o]=s),s.path!==e.path){this.recentAttachDevContainerEntries.has(r.hostPath)?this.recentAttachDevContainerEntries.get(r.hostPath).push(e):this.recentAttachDevContainerEntries.set(r.hostPath,[e]);let a=await this.findComposeTargetContainer(r.hostPath,n);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(e):a&&this.recentDevComposeEntries.set(a,[e])}}trySetEntryWithRepoAuthority(e,r){this.getWorkspaceFolderFromRepository(r.repositoryPath,r.volumeName,r.folder).path!==e.path&&(this.recentAttachDevContainerEntries.has(r.repositoryPath)?this.recentAttachDevContainerEntries.get(r.repositoryPath).push(e):this.recentAttachDevContainerEntries.set(r.repositoryPath,[e]))}trySetEntryWithVolumeAuthority(e,r){let n=r.volumeName;!n||(this.recentAttachEntries.has(n)?this.recentAttachEntries.get(n).push(e):this.recentAttachEntries.set(n,[e]))}async trySetEntry(e,r,n){var s;if(!e||!e.folderUri&&!e.workspace.configPath)return;let i=(s=e.folderUri)!=null?s:e.workspace.configPath,o=sm(i.authority);if(o)this.trySetEntryWithAttachAuthority(i,o,r);else{let a=mn(i.authority);a&&(Wt(a)?await this.trySetEntryWithDevAuthority(i,a,r,n):pn(a)?this.trySetEntryWithRepoAuthority(i,a):this.trySetEntryWithVolumeAuthority(i,a))}}async setRecentEntries(e){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let r=await ee.commands.executeCommand("_workbench.getRecentlyOpened");if(r&&r.workspaces){let n={};for(let i of r.workspaces)await this.trySetEntry(i,e,n)}}withProgress(e,r){return this.action=this.action.then(()=>r()),this.refresh(e)}},Hn;(function(s){s.Default="Default",s.Title="Title",s.Image="Image",s.Port="Port",s.Volume="Volume",s.DevVolume="DevVolume"})(Hn||(Hn={}));var zo=class{constructor(e){this.label=e;this.type=Hn.Default}static isDetailItem(e){return!!e&&e.label!==void 0&&e.type!==void 0}static isImageItem(e){return!!e&&e.type===Hn.Image}static isVolume(e){return!!e&&e.type===Hn.Volume}static isDevVolume(e){return!!e&&e.type===Hn.DevVolume}},dV=class{constructor(e){this.detail=e;this.type=Hn.Image;this.context="image";this.label="Image"}inspect(e){return mc(e,this.detail)}},fV=class{constructor(e,r){this.label=e;this.volumeDetails=r;this.type=Hn.Volume;this.context="volume"}async inspect(e){return bh(e,this.volumeDetails)}},pV=class{constructor(e,r,n,i){this.context=e;this.dockerParams=r;this.telemetry=n;this.output=i;this._onDidChangeTreeData=new ee.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.setTreeTitle=()=>{}}updateDockerParameters(e){this.dockerParams=e}set setTitle(e){this.setTreeTitle=e}get container(){return this._container?this._container.container:void 0}getTreeItem(e){let r=new ee.TreeItem(e.label,Array.isArray(e.detail)&&e.detail.length>0?ee.TreeItemCollapsibleState.Expanded:ee.TreeItemCollapsibleState.None);return r.tooltip=e.label,e.detail&&!Array.isArray(e.detail)&&(r.description=e.detail,r.tooltip+=` ${r.description}`),r.contextValue=e.context,r.command=e.command,r}async getAttributes(e,r,n){let i=[];r&&i.push({label:"Workspace",detail:r});let o=Js(e.container);return o&&i.push({label:"Repository",detail:o}),i.push({label:"Name",detail:e.container.Name}),i.push(new dV(e.container.Config.Image)),n&&i.push({label:"Configuration",detail:n,command:{title:"Open Dev Container File",command:"remote-containers.openDevContainerFile",arguments:[n]},context:"devContainer"}),i}async getMounts(e){let r=[];return e&&e.Mounts.forEach(n=>{if(n.Type==="volume"){let i=n.Name,o=new fV(`Volume: ${i}`,i),s={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Volume mount",detail:[o,s]})}else if(n.Type==="bind"){let i={label:`Source: ${n.Source}`,detail:void 0},o={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Bind mount",detail:[i,o]})}}),r}async getChildrenFromRoot(e){let r=[],n=Pc(e.container),i;if(this.dockerParams&&n){let a=await ai(this.dockerParams.cliHost,Ge(this.dockerParams.cliHost.path,n),di());a&&(i=Ie(a,this.dockerParams.cliHost.platform))}r.push({label:"Attributes",detail:await this.getAttributes(e,n,i),type:Hn.Title});let o;this.dockerParams&&(o=await Sr(this.dockerParams,e.container.Id));let s=await this.getMounts(o);return s.length>0&&r.push({label:"Mounts",detail:s,type:Hn.Title}),r}async testContainer(){let e=!0;try{(this.dockerParams?await Sr(this.dockerParams,this._container.container.Id):void 0)===void 0&&(e=!1)}catch{e=!1}return e||(this._container=void 0,this.setTreeTitle("Details (Containers)")),e}async getChildren(e){if(this._container===void 0)return[];let r=[];return e===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),r=await this.getChildrenFromRoot(this._container)):Array.isArray(e.detail)&&r.push(...e.detail),r}async refresh(e){this.dockerParams=await He(this.context,this.output),await Gd(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=e||this._container,this._onDidChangeTreeData.fire(void 0)}},hV=class extends zo{constructor(e){super(e.Name);this.type=Hn.DevVolume;this.volumeDetails=e,this.createdAt=void 0}async asTreeItem(){let e=this.getLabel(),r=new ee.TreeItem(e,ee.TreeItemCollapsibleState.None);return r.iconPath=this.iconPath,r.description=this.getDescription(),this.isUniqueVolume()?r.contextValue="uniqueDevVolume":r.contextValue="devVolume",r}isUniqueVolume(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true")return!0}return!1}getLabel(){let e=this.volumeDetails.Name;if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();n&&n.gitUrlInfo.repository!=="unknown"&&(e=n.gitUrlInfo.fullRepositoryName)}return e}getDescription(){let e="";if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();if(n&&n.gitUrlInfo.repository!=="unknown"){let i=this.getBranchName(),o=this.getPullRequestId();o?e=`#${o}`:i&&(e=`${i}`)}}return e}getBranchName(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.branch"])return e["vsch.local.repository.branch"]}getPullRequestId(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.pullRequestId"])return e["vsch.local.repository.pullRequestId"]}getRepository(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true"){let n=e["vsch.local.repository"];return dn(n)}}}get iconPath(){return new ee.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let e="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let n=new Date,i=new Date(this.volumeDetails.CreatedAt),o,s,a=n.getTime()-i.getTime();(s=Math.round(a/mr.years))>0?s===1?o="year":o="years":(s=Math.round(a/mr.days))>0?s===1?o="day":o="days":(s=Math.round(a/mr.hours))>0?s===1?o="hour":o="hours":(s=Math.round(a/mr.minutes))>0?s===1?o="minute":o="minutes":(s=Math.round(a/mr.seconds),s===1?o="second":o="seconds"),e=` ${s} ${o} ago`}return this.createdAt=e,e}async inspect(e){return bh(e,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await ee.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await ee.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(e){if(!((await PC(e)).indexOf(this.volumeDetails.Name)>=0)){await ee.window.showInformationMessage(`Volume '${this.volumeDetails.Name}' is in use and cannot be removed.`,{modal:!0});return}await ee.window.showInformationMessage(`Are you sure you want to remove volume '${this.volumeDetails.Name}'?`,{modal:!0},"Remove")==="Remove"&&await lE(e,this.volumeDetails.Name)}},mV=class{constructor(e,r,n){this.context=e;this.telemetry=r;this.output=n;this._onDidChangeTreeData=new ee.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event}async getTreeItem(e){return e.asTreeItem()}async getDockerParams(){return this.dockerParams||(this.dockerParams=await He(this.context,this.output,void 0,void 0),await Gd(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)),this.dockerParams}async setHasVolumesContext(e){await ee.commands.executeCommand("setContext","remote-containers:noDevVolumes",e)}async getDockerOrShowMessage(e){return!(!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(e){if(!await this.getDockerOrShowMessage(e))return[];let r=await He(this.context,this.output),n=await xo(r),i=await pu(r,n),o=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=i.filter(o);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let l=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-l.getTime()}),s.map(a=>new hV(a))}async resolveTreeItem(e,r){let n=await He(this.context,this.output),i=await this.getAssociatedContainers(n,r),o=r.getLabel(),s=r.getRepository(),a=r.getBranchName(),c=r.getPullRequestId(),l=r.getTimeElapsed();return i.length>0?e.tooltip=this.renderMarkdown(o,s,a,c,l,i.join(", ")):e.tooltip=this.renderMarkdown(o,s,a,c,l,"*None*"),e}async getAssociatedContainers(e,r){let n=[],i=await Fi(e,!0),o=await So(e,i);for(let s of o)for(let a of s.Mounts)a.Type==="volume"&&a.Name===r.volumeDetails.Name&&n.push(s.Name.substring(1));return n}renderMarkdown(e,r,n,i,o,s){let a=new ee.MarkdownString(void 0,!0);if(r){let c=r.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",l=r.gitUrlInfo.repositoryUrl;l.startsWith("http")?(l=r.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${l}](${l})
`)):a.appendMarkdown(`${c} ${l})
`),a.appendMarkdown(`&nbsp;  
`),n&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${n}](${l}/tree/${n})
`):a.appendMarkdown(`$(git-compare) ${n}
`),a.appendMarkdown(`&nbsp;  
`)),i&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${i}](${l}/pull/${i})
`):a.appendMarkdown(`$(git-pull-request-create) #${i}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${e}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;(r.Action==="die"||r.Action==="destroy"||r.Action==="create"||r.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await Sh(e,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async refresh(e){e===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(e)}},kle="vm-active",Ile="vm-default",Tle="folder-active",Ale="folder";function Jg(t,e){let r=`${e}.svg`;return{light:ee.Uri.file(t.asAbsolutePath(ma.join("resources","light",r))),dark:ee.Uri.file(t.asAbsolutePath(ma.join("resources","dark",r))),highContrast:ee.Uri.file(t.asAbsolutePath(ma.join("resources","highContrast",r)))}}var S_=Y(require("util"));var bn=Y(require("vscode"));async function gV(t,e,r={}){let n=ec(e[0],e.slice(1),void 0),i=await _D(e[0],e.slice(1),void 0,t.loadNativeModule),o=await th({params:t,createdAt:void 0,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:void 0,remoteExec:n,remotePtyExec:i,remoteExecAsRoot:void 0,rootShellServer:void 0}),{hostOrContainerPort:s,connectionToken:a,webConnectionToken:c,remoteEnv:l,serverDownloaded:u}=await nh(t,o,r,async()=>{},void 0);return{params:t,properties:o,config:void 0,resolvedAuthority:{host:ko,port:s,connectionToken:a,extensionHostEnv:l},webConnectionToken:c,tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:u}}async function vV(t,e,r){var n,i,o;if(!!await Fo(t))if(r&&r.name){let s=["get","pod",r.name,"-o","json"];r.namespace&&s.push("--namespace",r.namespace);let{cliHost:a,env:c,output:l}=e,u=(await xe({exec:a.exec,cmd:"kubectl",args:["config","current-context"],env:c,output:l})).stdout.toString().trim(),f=(await xe({exec:a.exec,cmd:"kubectl",args:s,env:c,output:l})).stdout.toString(),p=JSON.parse(f),h=((n=p.spec)==null?void 0:n.containers)||[];if(!h.length){e.output.write(`No containers found. Pod details:
${f}`),await bn.window.showErrorMessage("No containers found.",{modal:!0},"Show Log")&&bn.commands.executeCommand(li);return}let m=h.length>1?(i=await bn.window.showQuickPick(h.map(g=>({label:g.name,detail:g.image,container:g})),{placeHolder:"Select container"}))==null?void 0:i.container:h[0];if(m){let g=((o=p.metadata)==null?void 0:o.namespace)||r.namespace,v={remoteAuthority:Rle({context:u,podname:r.name,namespace:g,name:m.name,image:m.image})};/\d$/.test(t.extensionPath)||(v.reuseWindow=!0),await bn.commands.executeCommand("vscode.newWindow",v)}}else e.output.write(`No Pod name found. Pod object:
${JSON.stringify(r,void 0,"  ")}`),await bn.window.showErrorMessage("No Pod name found.",{modal:!0},"Show Log")&&bn.commands.executeCommand(li)}async function yV(t,e,r,n,i){return await Fo(t)?se(V({},await Dle(t,e,r,n,i)),{isTrusted:!0}):(await bn.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function Dle(t,e,r,n,i){return bn.window.withProgress({location:bn.ProgressLocation.Notification,title:$c,cancellable:!1},async o=>{try{let s=Ole(r),a=process.cwd(),c=await Tn(void 0,a,ui,qn(),t.extensionPath,Vi(),e.product,n.log,fi),l=await jc({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:o,cliHost:c,env:c.env,cwd:a,isLocalContainer:!0,telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:i});l.setWorkspaceName(`${s.name} in ${s.podname} (${s.image})`);let u=["kubectl","exec","-it",s.podname];return s.context&&u.push("--context",s.context),s.namespace&&u.push("--namespace",s.namespace),u.push("--container",s.name,"--"),await gV(l,u)}catch(s){let a=s instanceof ge?s:new ge({description:"An error occurred attaching to the container.",originalError:s});throw a.actions=[...Tc,Zs,To,Ic,Xs],a}}).then(o=>(Hi(e,"k8s-container","success",void 0,o.properties),o),o=>{let s=o instanceof ge?o:new ge({description:"An error occurred attaching to the container.",originalError:o});return Hi(e,"k8s-container","failure",void 0,s.containerProperties,s),Ao(s,"k8s-container",e,!0,n)})}function Rle(t){let e=[];for(let r in t){let n=t[r];n&&e.push(`${r}=${encodeURIComponent(n)}`)}return`k8s-container+${e.join("+")}`}function Ole(t){return t.substr(t.indexOf("+")+1).split("+").reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=decodeURIComponent(r.substr(n+1))),e},{})}var tt=Y(require("vscode")),ol=Y(require("fs")),sl=Y(require("os")),va=Y(require("path")),Xg=Y(require("child_process")),al=Y(require("util"));function Zg(t){switch(t.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${t.quality}`}}async function wV(t,e){var c;let r=t.globalStorageUri,n=rn.joinPath(r,"cli-bin");await tt.workspace.fs.createDirectory(n);let i="";try{i=(await tt.workspace.fs.readFile(rn.joinPath(n,"remote-containers-path"))).toString()}catch(l){if((l==null?void 0:l.code)!=="FileNotFound")return}if(i===t.extensionPath)return;let o=rn.joinPath(t.extensionUri,"dev-containers-user-cli","bin"),s=Zg(e),a=[{source:"devcontainer",destination:`devcontainer${s}`},{source:"devcontainer.cmd",destination:`devcontainer${s}.cmd`}];for(let l of a)tt.workspace.fs.copy(rn.joinPath(o,l.source),rn.joinPath(n,l.destination),{overwrite:!0});await tt.workspace.fs.writeFile(rn.joinPath(n,"vscode-app-root"),Buffer.from(tt.env.appRoot,"utf-8")),await tt.workspace.fs.writeFile(rn.joinPath(n,"vscode-path"),Buffer.from(process.argv0,"utf-8")),await tt.workspace.fs.writeFile(rn.joinPath(n,"vscode-quality"),Buffer.from((c=e.quality)!=null?c:"","utf-8")),await tt.workspace.fs.writeFile(rn.joinPath(n,"vscode-machine-id"),Buffer.from(tt.env.machineId,"utf-8")),await tt.workspace.fs.writeFile(rn.joinPath(n,"remote-containers-path"),Buffer.from(t.extensionPath,"utf-8"))}async function Nle(t,e){let r=Zg(e),n="";try{if(n=(await(0,al.promisify)(Xg.exec)(`powershell.exe -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`)).stdout.toString().trim(),n.indexOf(t)>=0)return await tt.window.showInformationMessage("The devcontainer CLI is already in your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0;switch(await tt.window.showInformationMessage("The devcontainer CLI needs to be added to your PATH",{modal:!0},"Add","Copy CLI Path")){case"Add":let s=(0,al.promisify)(Xg.exec)(`powershell.exe  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${n};${t}', 'User')`),a=tt.window.showInformationMessage("The devcontainer CLI has been added to your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});await Promise.all([s,a]);break;case"Copy CLI Path":await tt.env.clipboard.writeText(t),await tt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}catch{return!1}}async function Lle(t,e){var a;let n=((a=process.env.PATH)!=null?a:"").split(":"),i=[va.join(sl.homedir(),"bin"),va.join(sl.homedir(),".local/bin")],o="/usr/local/bin";sl.platform()==="darwin"&&i.push(o);let s=(0,al.promisify)(ol.stat);for(let c of i){if(n.findIndex(p=>p===c)<0)continue;try{await s(c)}catch{continue}let l=Zg(e),u=va.join(c,`devcontainer${l}`);try{let p=await s(u);return console.log(p),await tt.window.showInformationMessage(`The devcontainer CLI is already symlinked in ${c}`,{modal:!0,detail:`Try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0}catch(p){if((p==null?void 0:p.code)!=="ENOENT")return!1}let d=await tt.window.showInformationMessage("The devcontainer CLI needs to be in your PATH",{detail:`Create a symlink in ${c}?`,modal:!0},"Create","Copy CLI Path"),f=va.join(t,`devcontainer${l}`);switch(d){case"Create":if(c===o){if(!await Fle(f,u))break}else await(0,al.promisify)(ol.symlink)(f,u);await tt.window.showInformationMessage(`The devcontainer CLI has been symlinked in ${c}`,{modal:!0,detail:`Try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break;case"Copy CLI Path":await tt.env.clipboard.writeText(t),await tt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}return!1}async function Fle(t,e){try{return await ol.promises.symlink(t,e),!0}catch(r){if(r.code!=="EACCES"&&r.code!=="ENOENT")throw r;if(await tt.window.showInformationMessage("This will now prompt with 'osascript' for Administrator privileges to install the shell command.",{modal:!0},"OK")==="OK"){let i=`osascript -e "do shell script \\"mkdir -p ${va.dirname(e)} && ln -sf '${t}' '${e}'\\" with administrator privileges"`;return await(0,al.promisify)(Xg.exec)(i),!0}return!1}}async function CV(t,e){let r=t.globalStorageUri,n=rn.joinPath(r,"cli-bin").fsPath;switch(sl.platform()){case"win32":if(await Nle(n,e))return;break;case"darwin":case"linux":if(await Lle(n,e))return;break}if(await tt.window.showInformationMessage("The devcontainer CLI needs to be included your PATH",{modal:!0},"Copy CLI Path")==="Copy CLI Path"){await tt.env.clipboard.writeText(n);let o=Zg(e);await tt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${o} --help'
Note: you may need to restart your shell for PATH changes to take effect`})}}var SV=class{constructor(e,r,n){this.context=e;this.telemetry=n,this.output=r}handleUri(e){switch(e.path){case"/cloneInVolume":this.cloneInVolume(e)}}async cloneInVolume(e){let r=_V.parse(e.query);if(!r.url){U.window.showErrorMessage(`Failed to handle the URI '${e}' expected a 'url' query parameter.`,{modal:!0});return}let n;Array.isArray(r.url)?n=r.url[0]:n=r.url;let i=await He(this.context,this.output.log);if(!!await Ir(this.context,i,await this.telemetry)){if(!await lw(i.cliHost,n,this.output.log)){await U.window.showErrorMessage(`Cannot access the repository '${n}'.`,{modal:!0});return}await U.commands.executeCommand(xm,r.url)}}};async function qle(t){var P;uq();let e=new Date;lq(t);let r=await go(t.extensionPath),n=await tu(U.env.appRoot);dq(t,n);let i=aq(t,r,n),o=`Remote-Containers ${r.version} in VS Code ${U.version} (${n.commit||"out-of-source"}).`,s=new Rm(t.logPath,e,o);t.subscriptions.push(U.commands.registerCommand(li,()=>s.show()));let{channel:a,postCreate:c}=sq(s.log,e);t.subscriptions.push(U.commands.registerCommand(rE,()=>a.show())),t.subscriptions.push(U.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:Pm(s,c,ar.results,async(_,k,T)=>RH(t,await i,_,ar.onRemoveOnShutdownChanged,k,T)),async getCanonicalURI(_){var T;let k=mn(_.authority);if(k&&Wt(k)){let{hostPath:A,settings:M}=k;return Ht(A)?Xa(A,s.log):M&&"host"in M&&((T=M.host)==null?void 0:T.startsWith("ssh://"))?iu(M.host,A):U.Uri.file(A)}return _}}),U.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:Pm(s,c,ar.results,async(_,k,T)=>GH(t,await i,_,k,T))}),U.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:Pm(s,c,ar.results,async(_,k,T)=>yV(t,await i,_,k,T))}),U.window.registerUriHandler(new SV(t,s,i)));let l=async(_,k,T)=>{let A=await He(t,s.log);if(!await Ir(t,A,await i))return;let M;if(Yt.isFolderItem(_)?(M=_.folder,T=Hle()):M=_,M.scheme==="vscode-remote")return U.commands.executeCommand("vscode.openFolder",M,T);{let H=Ge(A.cliHost.path,Ie(M,A.cliHost.platform));return tv(t,H,A,await i,k,T)}};t.subscriptions.push(U.commands.registerCommand("remote-containers.openFolder",async(_,k)=>_?l(_,!1,k):IV(t,!0,await i,!1,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openWorkspace",async(_,k)=>_?l(_,!1,k):IV(t,!1,await i,!1,s.log))),t.subscriptions.push(U.commands.registerCommand(VM,async _=>Kd(t,await i,s.log,_))),t.subscriptions.push(U.commands.registerCommand(xm,async _=>Kd(t,await i,s.log,_,hn))),t.subscriptions.push(U.commands.registerCommand(GM,async _=>{if(_.url){let k=_.url;return(_==null?void 0:_.ref)&&(k=`${_.url}/tree/${_.ref}`),Kd(t,await i,s.log,k,hn)}})),t.subscriptions.push(U.commands.registerCommand(WM,async _=>Gle(t,await i,s.log,_,hn))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolume",async(_,k,T)=>AV(t,_,k,T,await i,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async _=>Wle(t,_,await i,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async _=>Kd(t,await i,s.log,void 0,_))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInContainer",()=>u(!1))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>u(!0))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>u("rebuildNoCache")));let u=async _=>{if(!await U.workspace.requestWorkspaceTrust({message:rd}))return;let T=await He(t,s.log);if(!await Ir(t,T,await i))return;let A=U.workspace.workspaceFile;if(A&&A.scheme==="untitled"){await jg();return}let M=U.workspace.workspaceFolders;if(!A&&M&&M.length){let J=M.length>1?await U.window.showWorkspaceFolderPick({placeHolder:"Pick a folder to reopen in a container."}):M[0];J&&(A=J.uri)}let H=await oE(A);if(H){await Yd(t,H.repositoryPath,H.volumeName,H.folder,T);return}if(A){let J;if(T.cliHost.type==="wsl"&&A.scheme==="file"){let oe=Ie(A,process.platform),te=vo(oe)||await Bp(T.output)||(()=>{throw new Error("No default WSL distro found.")})();J=await Di(te,oe,T.output)}else J=Ie(A,T.cliHost.platform);let K=Ge(T.cliHost.path,J);await tv(t,K,T,await i,_,{forceReuseWindow:!0})}};t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenLocally",async()=>{let _=U.workspace.workspaceFolders,k=U.workspace.workspaceFile||_&&_.length&&_[0].uri;if(k&&k.scheme==="vscode-remote"){let T=mn(k.authority);if(T&&Wt(T)){let A=U.Uri.file(T.hostPath),M={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",A,M)}else U.window.showInformationMessage("'Reopen Locally' not possible in current context.")}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let _=U.workspace.workspaceFolders,k=U.workspace.workspaceFile||_&&_.length&&_[0].uri;if(k&&k.scheme==="vscode-remote"){let T=mn(k.authority);if(T&&Wt(T)&&Ht(T.hostPath)){let A=U.Uri.parse((await Xa(T.hostPath,s.log)).toString()),M={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",A,M)}else U.window.showInformationMessage("'Reopen in WSL' not possible in current context.")}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let _=U.workspace.workspaceFolders,k=U.workspace.workspaceFile||_&&_.length&&_[0].uri;if(k&&k.scheme==="vscode-remote"){let T=mn(k.authority),A=T==null?void 0:T.settings;if(T&&Wt(T)&&A&&"host"in A&&A.host&&A.host.startsWith("ssh://")){let M=U.Uri.parse(iu(A.host,T.hostPath).toString()),H={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",M,H)}else U.window.showInformationMessage("'Reopen in SSH' not possible in current context.")}}));let d,f=async _=>{var M;if(!await Fo(t))return;let k,T=typeof _=="string"?_:(M=_==null?void 0:_.containerDesc)==null?void 0:M.Id;if(T){let H=await He(t,s.log);if(!await Ir(t,H,await i))return;k=await Sr(H,T)}else{let H=!1;d||(d=ni(t.extensionPath,async K=>(H=!0,Bi(K)),s.log));let J=await He(t,s.log,void 0,void 0,d);if(k=await eue(J,Ir(t,J,await i),()=>H),!k)return}let A=await He(t,s.log);Qg(A,k,t)};t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainer",f)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",f)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async _=>vV(t,await He(t,s.log),_)));let p=async _=>{var A;let k=await He(t,s.log);if(!await Ir(t,k,await i))return;let T=(A=_==null?void 0:_.pullRequestModel)==null?void 0:A.html_url;Kd(t,await i,s.log,T,hn)};t.subscriptions.push(U.commands.registerCommand("remote-containers.checkoutPRInVolume",p)),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let _=await na();if(_){let k=await He(t,s.log);await Yd(t,_.repositoryPath,_.volumeName,_.folder,k,!0);return}return await Promise.all(ar.onRemoveOnShutdownChangedEmitter.fire(!0)),U.commands.executeCommand("workbench.action.reloadWindow")})),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let _=await na();if(_){let k=await He(t,s.log);await Yd(t,_.repositoryPath,_.volumeName,_.folder,k,"rebuildNoCache");return}return await Promise.all(ar.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),U.commands.executeCommand("workbench.action.reloadWindow")}));let h=U.env.remoteName&&U.env.remoteName!=="test"?"linux":process.platform,m=((P=(U.workspace.workspaceFolders||[])[0])==null?void 0:P.uri)||Ee.file(process.cwd()),g=Go(h,m),v={fileHost:g,findDevContainerFiles:()=>dE(g),telemetry:i,output:s.log,existingFilesLearnMoreLink:Qu,predefinedDefinitionsLearnMoreLink:Xu,openConfigurationCommandId:Ju},w=await yH(t,v);t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{if(!U.workspace.workspaceFolders){await U.window.showInformationMessage("Open a folder to create the configuration files in first.",{modal:!0},"Open Folder")&&await U.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder");return}await I_(t,g,w,await i,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openDevContainerFile",async(_,k)=>{let T,A=await He(t,s.log),M;if(typeof _=="string"?T=[Ee.file(_)]:(M=await dE(A.cliHost),T=(await Promise.all(M.map(H=>H.scheme==="file"||H.scheme==="vscode-remote"?H:A.cliHost.toCommonURI(Ie(H,A.cliHost.platform))))).filter(H=>!!H)),T.length){let H;T.length===1?H={uri:T[0]}:H=await U.window.showQuickPick(T.map(K=>({label:K.scheme==="file"?K.fsPath:K.toString(),uri:K})),{placeHolder:"Select container configuration file to open"});let J=await na();if(J){let K=iq(J.folder);for(let oe of K){try{await U.workspace.openTextDocument(U.Uri.parse(oe.toString()))}catch{continue}await U.commands.executeCommand("vscode.open",U.Uri.parse(oe.toString()),k);return}return}if(H){let K=H.uri,oe=L1(K);if(oe){let te=`https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers/${process.platform==="win32"?oe.replace(/\\/g,"/"):oe}`;return U.env.openExternal(U.Uri.parse(te))}else{if(K.scheme==="file"&&await pt(K.fsPath))return await U.commands.executeCommand("vscode.open",U.Uri.parse(K.toString()),k);if(K.scheme==="file"&&ar.results.size)return await an(An,K,[],Ni),await U.commands.executeCommand("vscode.open",U.Uri.parse(K.toString()),k);if(K.scheme==="vscode-remote"&&ar.results.size)return await U.commands.executeCommand("vscode.open",U.Uri.parse(K.toString()),k);if(_===void 0)return await I_(t,g,w,await i,s.log)}}}else if(_===void 0&&!(M==null?void 0:M.length))return await I_(t,g,w,await i,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:_,dockerParams:k}=[...ar.results.values()][0];if(!_||!k)return U.window.showInformationMessage("Named configurations are only available for Docker containers.",{modal:!0});let T=await Sr(k,_),A=Wg(t.globalStoragePath,T.Name),M=U.Uri.file(A);return await pt(A)?U.commands.executeCommand("vscode.open",M):(await an(An,M,[],Ni),U.commands.executeCommand("vscode.open",M))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let _=[...(await jH(t.globalStoragePath)).map(T=>V({label:T.name},T)).sort((T,A)=>T.label.localeCompare(A.label)),...(await UH(t.globalStoragePath)).map(T=>V({label:T.image},T)).sort((T,A)=>T.label.localeCompare(A.label))],k=await U.window.showQuickPick(_.length?_:[{label:"No configuration found."}],{placeHolder:"Choose a configuration file"});if(k&&"uri"in k)return U.commands.executeCommand("vscode.open",U.Uri.parse(k.uri.toString()))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.settings",async()=>U.commands.executeCommand("workbench.action.openSettings",`@ext:${kV()}`))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getHelp",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getStarted",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reportIssue",async()=>U.commands.executeCommand("vscode.openIssueReporter",kV()))),t.subscriptions.push(U.commands.registerCommand("remote-containers.provideFeedback",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),t.subscriptions.push(U.languages.registerDocumentLinkProvider([{pattern:"**/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new E_(g))),t.subscriptions.push(U.commands.registerCommand("remote-containers.trySample",async()=>{aue(t,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLogFile",()=>cue(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLastLogFile",()=>lue(t,"remoteContainers",s.logFilePath))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>nue(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>$le(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.installDocker",()=>Yg(s.log))),lV(t,ar.results,await i,s.log),await wV(t,n),t.subscriptions.push(U.commands.registerCommand("remote-containers.installUserCLI",()=>CV(t,n))),(async()=>{await nq(t)||await NV(t,g,await i,s.log)})().catch(console.error),Ule(t);let C=U.env.remoteName,b=!C||["dev-container","attached-container","wsl","ssh-remote","exec","k8s-container"].indexOf(C)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[];t.subscriptions.push(U.commands.registerCommand("remote-containers.addExtensionToConfig",w.addExtensionToConfiguration),U.languages.registerCompletionItemProvider([...b,{pattern:Nt.join(zg(t.globalStoragePath),"*.json")},{pattern:Nt.join(Gg(t.globalStoragePath),"*.json")}],w.createCompletionItemProvider()),U.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>{var T;let _=await He(t,s.log),k=await n_(v,{readDockerComposeConfig:async(A,M)=>{let H=await x1(_.cliHost.cwd,A,_.output);return P1(_,H,M)}});if(k){let A;if(!k.manifest&&k.imageName)try{A=await mc(_,k.imageName)}catch(M){if(((T=M==null?void 0:M.stdout)==null?void 0:T.toString().replace(/\s/g,""))==="[]")try{await ze(_,"pull",k.imageName),A=await mc(_,k.imageName)}catch{}}await o_(v,k,(A==null?void 0:A.Config.Labels)||{})}}),U.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",w.addPortLabelToConfiguration)),await na()&&U.commands.executeCommand("setContext","isRecoveryContainer",!0),t.subscriptions.push(lH())}var xV="showRecoveryContainerNotification",PV="showReopenInContainerNotificationReset",jle=5e3;function $le(t){return t.globalState.update(PV,Date.now())}async function Ule(t){setTimeout(async()=>{let e=t.globalState.get(PV);if(T_(t.globalState.get(xV),e))return;if(await na()){let n="This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry.",i="Reopen in Container",o="Don't Show Again",s=await U.window.showInformationMessage(n,i,o);s===i?U.commands.executeCommand("remote-containers.reopenInContainer"):s===o&&await t.globalState.update(xV,Date.now())}},jle)}async function Ble(){await Promise.all([...ar.results.values()].map(t=>Promise.all(t.params.shutdowns.map(e=>{try{e()}catch(r){console.error(r)}}))))}function kV(){let{name:t,publisher:e}=bV();return`${e}.${t}`}async function IV(t,e,r,n,i){var d;let o=await He(t,i);if(!await Ir(t,o,r))return;let s,a=U.workspace.workspaceFolders;if(a&&a[0]){let f=a[0].uri;if(f.scheme==="vscode-remote"){let p=mn(f.authority);if(p&&Wt(p)){let h=Ge(o.cliHost.path,p.hostPath);s=U.Uri.file(h.rootFolderPath)}else/^(wsl|ssh-remote)\+/.test(f.authority)&&(s=f)}else f.scheme==="file"&&(s=f)}s||(((d=U.env.remoteName)==null?void 0:d.match(/^(wsl|ssh-remote)$/))?s=U.Uri.from({scheme:"vscode-remote",authority:U.env.remoteAuthority,path:await o.cliHost.homedir()}):s=U.Uri.file(EV.homedir()));let c=e?{defaultUri:s,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:"Open"}:{defaultUri:s,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Code Workspace":["code-workspace"]},openLabel:"Open"},l=await U.window.showOpenDialog(c),u=l&&l[0];if(u){let f=e?u:u.with({path:Nt.posix.dirname(u.path)}),p=await He(t,o.output,f,sE()==="always"),h=Ie(u,p.cliHost.platform),m=Ge(p.cliHost.path,h);await tv(t,m,p,r,n)}}function Hle(){return U.workspace.getConfiguration("window").get("openFoldersInNewWindow",void 0)==="on"?{forceNewWindow:!0}:{forceReuseWindow:!0}}async function tv(t,e,r,n,i,o){var g;let{cliHost:s}=r;if(Ht(e.rootFolderPath)){if(r=await He(t,r.output,e.rootFolderPath),s=r.cliHost,!await Ir(t,r,n))return;e=Ge(s.path,e.isWorkspaceFile?s.path.join(s.cwd,Nt.basename(e.workspaceOrFolderPath)):s.cwd)}let a=await wp(s,e);if(a){let v="Continue";if(await U.window.showInformationMessage(`The workspace could fail to open in a container: ${a}`,{modal:!0},v)!==v)return}let c=await ai(s,e,di(),!0,r.output),l=c&&await Ks(s,e,c,r.output);if(!l||!hc(l.config)){let v=await Hd({fileHost:s,telemetry:n,output:r.output,existingFilesLearnMoreLink:Qu,predefinedDefinitionsLearnMoreLink:Xu,openConfigurationCommandId:Ju},e);if(!v||(l=await Ks(s,e,Ee.file(v).with({scheme:Dt.scheme}),r.output),!l))return}let u=l.config;if(!await Vle(r,u))return;let d=l.workspaceConfig.workspaceFolder;if(wt(u)){let v=dr(s,u);if(!u.initializeCommand&&!await Rt(s).readDocument(v))return Jd(`"${v.fsPath}" does not exist.`,s,u.configFilePath);if(u.workspaceFolder&&!Nt.posix.isAbsolute(u.workspaceFolder))return Jd("Workspace folder in devcontainer.json must be an absolute path.",s,u.configFilePath)}else if(!("image"in u))if("dockerComposeFile"in u){if(!await rV(r)||!await tue(e,r,u))return}else{let v=u.configFilePath;return Jd(`Configuration "${s.path.relative(e.rootFolderPath,Ie(v,s.platform))}" not valid.`,s,v)}e.isWorkspaceFile&&(d=Nt.posix.join(d,s.path.basename(e.workspaceOrFolderPath)));let f=Io(r.env),p=s.type==="wsl"?(await s.toCommonURI(e.workspaceOrFolderPath)).fsPath:e.workspaceOrFolderPath,h=(s.type==="local"||s.type==="wsl")&&f&&"host"in f&&((g=f.host)==null?void 0:g.startsWith("ssh://")),m=U.Uri.parse(Mu(p,d,f,h));await nv({uri:m,type:e.isWorkspaceFile?"workspace":"folder",label:`${oL(s.platform,e.workspaceOrFolderPath,await s.homedir())}${xc(f)} [Dev Container]`}),await uE(t,i?m.authority:!1),await ed(t,i==="rebuildNoCache"?m.authority:!1),await U.commands.executeCommand("vscode.openFolder",m,o)}async function Vle(t,e){let r=e.hostRequirements;if(r&&(r.cpus||r.memory)){let n=await ze(t,"info","--format","{{json .}}"),i=JSON.parse(n.stdout.toString()),o=i.NCPU&&r.cpus&&r.cpus>i.NCPU,s=i.MemTotal&&r.memory&&x_(r.memory)>i.MemTotal;if(o||s){let a=[];i.NCPU&&a.push(`CPUs ${i.NCPU}`),i.MemTotal&&a.push(`RAM ${P_(i.MemTotal)}`);let c=[];r.cpus&&c.push(`CPUs ${r.cpus}`),r.memory&&c.push(`RAM ${P_(x_(r.memory))}`),r.storage&&c.push(`disk ${P_(x_(r.storage))}`);let l=`Docker daemon: ${a.join(", ")}
devcontainer.json: ${c.join(", ")}`;if(!await U.window.showInformationMessage("Not all host requirements in devcontainer.json are met by the Docker daemon.",{modal:!0,detail:l},"Continue"))return!1}}return!0}function x_(t){let e=/^(\d+)([tgmk]b)?$/.exec(t);if(e){let[,r,n]=e,i=parseInt(r,10),o=n&&{t:2**40,g:2**30,m:2**20,k:2**10}[n[0]]||1;return i*o}return 0}function P_(t){let e=Math.min(Math.floor(Math.log2(Math.max(Math.abs(t),1))/10),4),r=t/Math.pow(2,10*e),n=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(r),1)))),1),i=Math.round(r*n)/n,o=[" bytes","kb","mb","gb","tb"][e];return`${i}${o}`}async function Kd(t,e,r,n,i){if(!await nd(t))return;let o=await He(t,r),s=null;if(!!await Ir(t,o,e)){if(typeof n=="string")s=n;else{let a=await U.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:c=>`Clone a repository from ${c.name} in a Container Volume`,urlLabel:"Clone git repository from URL",branch:!0});if(a){s=(typeof a=="string"?a:a.url).trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let c=si(s);if(!await lw(o.cliHost,c.repositoryUrl,o.output)){await U.window.showInformationMessage(`Cannot access the repository '${c.repositoryUrl}'.`,{modal:!0});return}typeof a!="string"&&a.branch&&(s=`${s}/tree/${a.branch}`)}}s&&await TV(t,o,s,i)}}async function TV(t,e,r,n){if(n||(n=await Kle(e)),n){let i=k_(r);n!==hn&&(i=await Jle(r)),i&&await Yd(t,r,n,i,e)}}async function Gle(t,e,r,n,i){if(!await nd(t))return;let o=await He(t,r),s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await Ir(t,o,e))return;let a={placeHolder:"e.g. https://github.com/microsoft/vscode/pull/123",prompt:"Enter a GitHub pull request url",validateInput:u=>s.test(u)?void 0:"Invalid pull request url"},c;if(n?c=n:c=await U.window.showInputBox(a),!c)return;let l=si(c);if(l.repository==="unknown"||!l.pullRequestId){await U.window.showInformationMessage(`Invalid pull request URL '${c}'.`,{modal:!0});return}await TV(t,o,c,i)}async function AV(t,e,r,n,i,o){let s=await He(t,o);!await Ir(t,s,i)||(e||(e=await zle(s)),e&&(r&&n?await Zle(e,r,n,s):await Xle(e,s)))}async function Wle(t,e,r,n){let i=await He(t,n);!await Ir(t,i,await r)||e&&e.volumeName&&await AV(t,e.volumeName,void 0,void 0,r,n)}var rv=class{get detail(){return""}},DV=class extends rv{get label(){return"$(plus) Create a new volume..."}get description(){return""}get volumeName(){return""}get detail(){return"Use this volume to store several cloned repositories."}get alwaysShow(){return!0}},RV=class extends rv{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}},OV=class extends rv{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}};async function zle(t){let e=await xo(t),n=(await pu(t,e)).map(a=>new OV(a)),i="Select the volume to inspect with Visual Studio Code",o=U.window.createQuickPick();o.items=n,o.placeholder=i,o.show();let s=await new Promise(a=>{o.onDidAccept(()=>a(o.activeItems[0])),o.onDidHide(()=>a(void 0))});return o.hide(),s?s.volume.Name:null}async function Kle(t){let e=await xo(t,["vsch.local.repository.unique=false"]),n=(await pu(t,e)).map(u=>new RV(u)),i=new DV,o=[i,...n],s="Select the volume for the cloned repository",a=U.window.createQuickPick();a.items=o,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(u=>{a.onDidAccept(()=>u(a.activeItems[0])),a.onDidHide(()=>u(void 0))});if(a.hide(),!c)return null;let l=null;return c===i?l=await Yle(t):l=c.volumeName,l}async function Yle(t){let e="",r="vsc-remote-containers",n=await xo(t);n.find(s=>s===r)||(e=r);let i={prompt:"Enter the volume name.",value:e,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?"Volume names should be at least two characters and the first character must be alphanumeric.":"Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric."},o=await U.window.showInputBox(i);return o?n.find(s=>s===o)?(await U.window.showErrorMessage("Volume already exists",{modal:!0}),null):o:null}async function Jle(t){let e={prompt:"Enter the target folder name.",value:k_(t),ignoreFocusOut:!0},r=await U.window.showInputBox(e);return r||null}function k_(t){return dn(t).repositoryName}async function Qle(){return(await U.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function Yd(t,e,r,n,i,o=!1){let s=Io(i.env),a=Sc(e),c;try{c=await a.parseUrl(void 0)}catch(u){if(u instanceof Yh){U.window.showErrorMessage(u.description);return}let d=await Qle();try{c=await a.parseUrl(d)}catch{U.window.showErrorMessage(`Cannot access '${e}'.`,{modal:!0});return}}let l=U.Uri.parse(Qs(e,r,n,!1,s,c));r===hn&&(r="a unique volume"),await nv({uri:l,type:"folder",label:`${n} in ${r} [Dev Container]`}),await uE(t,o?l.authority:!1),await ed(t,o==="rebuildNoCache"?l.authority:!1),await U.commands.executeCommand("vscode.openFolder",l)}async function Xle(t,e){let r=Io(e.env),n=U.Uri.parse(Qs(void 0,t,void 0,!0,r,void 0));await nv({uri:n,type:"folder",label:`Volume ${t} [Dev Container]`}),await U.commands.executeCommand("vscode.openFolder",n)}async function Zle(t,e,r,n){let i=Io(n.env),o=U.Uri.parse(Qs(e,t,r,!0,i,void 0));await nv({uri:o,type:"folder",label:`${r} in ${t} [Inspect Dev Container]`}),await U.commands.executeCommand("vscode.openFolder",o)}async function nv(t){return U.commands.executeCommand("_workbench.addToRecentlyOpened",t)}async function Qg(t,e,r,n){if(!await Fo(r))return;let i,o=t.cliHost;if(o.type==="wsl"){let l=await o.toCommonURI(o.cwd);l&&l.scheme==="file"&&(i=l.fsPath)}let s=rL(e.Name,Io(t.env),i),a=await MH(r.globalStoragePath,e),c=r.extensionMode===U.ExtensionMode.Development;if(a&&a.workspaceFolder&&!n){let l=U.Uri.parse(`vscode-remote://${s}${a.workspaceFolder}`),u={};c?u.forceReuseWindow=!0:u.forceNewWindow=!0,await U.commands.executeCommand("vscode.openFolder",l,u)}else{let l={remoteAuthority:s};c&&!n&&(l.reuseWindow=!0),await U.commands.executeCommand("vscode.newWindow",l)}}async function eue(t,e,r){let n=(async()=>{if(!await e)throw new Error("cancel");let i=await Fi(t),o=await So(t,i),s=[];if(o.forEach(a=>{a.State.Status==="running"&&s.push({label:a.Name,description:`${a.Config.Image} ${a.Id}`,containerInfo:a})}),s.length===0)throw U.window.showErrorMessage("There are no running containers to attach to.",{modal:!0}),new Error("cancel");return s})();try{let i={placeHolder:"Select the container to attach VS Code"},o=await U.window.showQuickPick(n,i);if(!o&&r()){if(!await e)throw new Error("cancel");o=await U.window.showQuickPick(n,i)}return o?o.containerInfo:void 0}catch(i){if(i&&i.message==="cancel")return;throw i}}async function tue(t,e,r){if(!r.workspaceFolder)return Jd("Workspace folder not specified in devcontainer.json.",e.cliHost,r.configFilePath),!1;if(!Nt.posix.isAbsolute(r.workspaceFolder))return Jd("Workspace folder in devcontainer.json must be an absolute path.",e.cliHost,r.configFilePath),!1;let n=await ir(e.cliHost,r,e.cliHost.env,e.cliHost.cwd),i=await Ru(e,t,n),o=await k1(e,i,r.service),s=o&&await Sr(e,o);return!(s&&!await rue(e.cliHost,n,r,s))}async function rue(t,e,r,n){var o,s;let i=[];for(let a=0;a<e.length;a++)await t.isFile(e[a])||i.push(e[a]);return i.length>0?(U.window.showErrorMessage(`The following referenced docker compose files do not exist: ${i.join(", ")}`,{modal:!0}),!1):((o=r.vscode)==null?void 0:o.devPort)&&!n.Ports.find(a=>{var c;return((c=r.vscode)==null?void 0:c.devPort)===a.PrivatePort})?(U.window.showErrorMessage(`The port '${(s=r.vscode)==null?void 0:s.devPort}' is not open on the service '${r.service}'`,{modal:!0}),!1):!0}async function Jd(t,e,r){if(await U.window.showErrorMessage(t,{modal:!0},"Open devcontainer.json")){let i=Ie(r,e.platform),o=await e.toCommonURI(i);o&&U.window.showTextDocument(U.Uri.parse(o.toString()))}}async function I_(t,e,r,n,i){await r.createConfiguration()&&await NV(t,e,n,i)}async function NV(t,e,r,n){if([void 0,"wsl","ssh-remote"].indexOf(U.env.remoteName)===-1)return;let i=U.workspace.workspaceFile,o=U.workspace.workspaceFolders,s=i||o&&o.length&&o[0].uri||void 0;if(s&&s.scheme!=="vscode-vfs"){let a=Ie(s,e.platform),c=Ge(e.path,a),l=await JC(e,c,di());l&&await iue(t,l,c,e,r,n)}}var iv="showReopenInContainerNotification",LV="showReopenInContainerNotificationReset";function nue(t){return t.globalState.update(LV,Date.now())}async function iue(t,e,r,n,i,o){let s=t.globalState.get(LV);if(T_(t.globalState.get(iv),s)||T_(t.workspaceState.get(iv),s))return;let a=N1(n,r,e.uri),c,l="";n.platform!=="linux"&&U.env.remoteName!=="wsl"&&!(n.platform==="win32"&&Ht(r.rootFolderPath));let u;a?r.isWorkspaceFile?u="Workspace contains a Dev Container configuration file.":u="Folder contains a Dev Container configuration file.":u="There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.";let d="Reopen in Container",f="Clone in Volume",p="Don't Show Again...",h=r.isWorkspaceFile?`${u} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${l}`:`${u} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${l}`,m=c?[d,f,p]:[d,p];oue(i,e.location);let g=await U.window.showInformationMessage(h,...m);if(sue(i,g===d?"reopen":g===f?"openRepository":g===p?"dontShowAgain":"cancel",e.location),g===d){if(!await U.workspace.requestWorkspaceTrust({message:rd}))return;let C=await He(t,o);if(!await Ir(t,C,i))return;if(C.cliHost.type==="wsl"&&n.platform==="win32"){let{cwd:b}=await jw(r.workspaceOrFolderPath,qn(),o);r=Ge(C.cliHost.path,b)}try{await tv(t,r,C,i,!1,{forceReuseWindow:!0})}catch(b){await Ao(b,"ui",i)}}else if(g===f){let w=await He(t,o),C=await ZI(w.cliHost,r,w.output),b="OK",S="Cancel";(!C||b===await U.window.showInformationMessage("Local changes not pushed to the Git remote will not be available in the Docker volume.",b,S))&&await U.window.withProgress({location:U.ProgressLocation.Notification,title:"Clone in Volume"},async(P,_)=>{P.report({message:"Follow the prompts at the top of the window."}),await U.commands.executeCommand(xm,c)})}else if(g===p){let w=r.isWorkspaceFile?"Any Workspace":"Any Folder",C=r.isWorkspaceFile?"Current Workspace":"Current Folder",b=r.isWorkspaceFile?"Don't show again for the current workspace or for any workspace?":"Don't show again for the current folder or for any folder?",S=await U.window.showInformationMessage(b,w,C);S===w?await t.globalState.update(iv,Date.now()):S===C&&await t.workspaceState.update(iv,Date.now())}}function oue(t,e){t.sendTelemetryEvent("reopenNotificationOpen",{location:e})}function sue(t,e,r){t.sendTelemetryEvent("reopenNotificationResult",{result:e,location:r})}function T_(t,e){return t===!1?t=1:t===void 0&&(t=-1),e===void 0&&(e=0),e<t}async function aue(t,e){let r=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET Core",detail:"https://github.com/Microsoft/vscode-remote-try-dotnetcore"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],n={placeHolder:"Select a sample repository to clone in a container volume"},i=await U.window.showQuickPick(r,n);if(!i)return;let o=await He(t,e);i.detail&&await Yd(t,i.detail,hn,k_(i.detail),o)}async function cue(t){let e=await Promise.all((await FV(t)).map(async n=>{let i=await(0,S_.promisify)(ev.stat)(n.path),o=n.time;return{label:n.prefix,description:`${cl(o.getFullYear())}-${cl(o.getMonth())}-${cl(o.getDay())} ${cl(o.getHours())}:${cl(o.getMinutes())}:${cl(o.getSeconds())} - ${i.size} bytes`,path:n.path}}));e.length||e.push({label:"No log files found."});let r=await U.window.showQuickPick(e,{placeHolder:"Choose a log file"});r&&r.path&&await U.window.showTextDocument(U.Uri.file(r.path))}function cl(t,e=2){let r=t.toString();for(;r.length<e;)r="0"+r;return r}async function lue(t,e,r){let n=(await FV(t)).find(i=>i.name.startsWith(e)&&i.path!==r);n?await U.window.showTextDocument(U.Uri.file(n.path)):await U.window.showInformationMessage("No previous log file found.",{modal:!0})}async function FV(t){let e=[],r=Nt.basename(t.logPath),n=Nt.dirname(Nt.dirname(Nt.dirname(t.logPath)));for(let i of(await A_(n)).sort().reverse()){let o=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/.exec(i);if(o){let s=Nt.join(n,i);for(let a of await A_(s)){let c=Nt.join(s,a),l=Nt.join(c,r);for(let u of(await A_(l)).sort()){let d=Nt.join(l,u),f=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(u),p=f?new Date(`${f[1]}-${f[2]}-${f[3]}T${f[4]}:${f[5]}:${f[6]}.${f[7]}Z`):new Date(`${o[1]}-${o[2]}-${o[3]}T${o[4]}:${o[5]}:${o[6]}Z`);e.push({name:u,path:d,time:p,prefix:f?u.substr(0,f.index-1):u.substr(0,u.length-4)})}}}}return e.sort((i,o)=>i.time>o.time?-1:i.time<o.time?1:i.path.localeCompare(o.path)),e}async function A_(t){try{return await(0,S_.promisify)(ev.readdir)(t)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
//# sourceMappingURL=extension.js.map
