var Km=Object.create;var so=Object.defineProperty;var zm=Object.getOwnPropertyDescriptor;var Xm=Object.getOwnPropertyNames;var Ym=Object.getPrototypeOf,Qm=Object.prototype.hasOwnProperty;var ee=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Jm=(e,t)=>{for(var r in t)so(e,r,{get:t[r],enumerable:!0})},kc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Xm(t))!Qm.call(e,s)&&s!==r&&so(e,s,{get:()=>t[s],enumerable:!(n=zm(t,s))||n.enumerable});return e};var Rt=(e,t,r)=>(r=e!=null?Km(Ym(e)):{},kc(t||!e||!e.__esModule?so(r,"default",{value:e,enumerable:!0}):r,e)),Zm=e=>kc(so({},"__esModule",{value:!0}),e);var Ou=ee((oP,Pu)=>{var ev=Object.create,hi=Object.defineProperty,tv=Object.getOwnPropertyDescriptor,rv=Object.getOwnPropertyNames,Mc=Object.getOwnPropertySymbols,nv=Object.getPrototypeOf,jc=Object.prototype.hasOwnProperty,iv=Object.prototype.propertyIsEnumerable,qc=(e,t,r)=>t in e?hi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tn=(e,t)=>{for(var r in t||(t={}))jc.call(t,r)&&qc(e,r,t[r]);if(Mc)for(var r of Mc(t))iv.call(t,r)&&qc(e,r,t[r]);return e},A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ov=(e,t)=>{for(var r in t)hi(e,r,{get:t[r],enumerable:!0})},Fc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of rv(t))!jc.call(e,s)&&s!==r&&hi(e,s,{get:()=>t[s],enumerable:!(n=tv(t,s))||n.enumerable});return e},gi=(e,t,r)=>(r=e!=null?ev(nv(e)):{},Fc(t||!e||!e.__esModule?hi(r,"default",{value:e,enumerable:!0}):r,e)),sv=e=>Fc(hi({},"__esModule",{value:!0}),e),Kt=A((e,t)=>{"use strict";var r=function(){function n(){}return n.info=function(s){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];n.enableDebug&&console.info(n.TAG+s,a)},n.warn=function(s){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];n.disableWarnings||console.warn(n.TAG+s,a)},n.enableDebug=!1,n.disableWarnings=!1,n.disableErrors=!1,n.TAG="ApplicationInsights:",n}();t.exports=r}),Hc=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(a){for(var i,o=1,c=arguments.length;o<c;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(a[u]=i[u])}return a},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var r=$n(),n=require("events"),s=function(){function a(){}return a.prototype.active=function(){var i=this,o=r.CorrelationContextManager.getCurrentContext();return t(t({},o),{getValue:function(c){return i._activeSymbol?c===i._activeSymbol?o:!1:(i._activeSymbol=c,o)},setValue:function(){}})},a.prototype.with=function(i,o){var c=i.parentSpanId,u=i.name,d=a._spanToContext(i,c,u);return r.CorrelationContextManager.runWithContext(d,o)()},a.prototype.bind=function(i){return typeof i=="function"?r.CorrelationContextManager.wrapCallback(i):(i instanceof n.EventEmitter&&r.CorrelationContextManager.wrapEmitter(i),i)},a.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},a.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},a._spanToContext=function(i,o,c){var u=o?"|"+i.spanContext().traceId+"."+o+".":i.spanContext().traceId,d=t(t({},i.spanContext()),{traceFlags:i.spanContext().traceFlags}),l=r.CorrelationContextManager.spanToContextObject(d,u,c);return l},a}();e.OpenTelemetryScopeManagerWrapper=s,e.AsyncScopeManager=new s}),av=A((e,t)=>{e=t.exports=re;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var h=Array.prototype.slice.call(arguments,0);h.unshift("SEMVER"),console.log.apply(console,h)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,i=e.re=[],o=e.src=[],c=0,u=c++;o[u]="0|[1-9]\\d*";var d=c++;o[d]="[0-9]+";var l=c++;o[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;o[p]="("+o[u]+")\\.("+o[u]+")\\.("+o[u]+")";var f=c++;o[f]="("+o[d]+")\\.("+o[d]+")\\.("+o[d]+")";var g=c++;o[g]="(?:"+o[u]+"|"+o[l]+")";var m=c++;o[m]="(?:"+o[d]+"|"+o[l]+")";var v=c++;o[v]="(?:-("+o[g]+"(?:\\."+o[g]+")*))";var y=c++;o[y]="(?:-?("+o[m]+"(?:\\."+o[m]+")*))";var T=c++;o[T]="[0-9A-Za-z-]+";var w=c++;o[w]="(?:\\+("+o[T]+"(?:\\."+o[T]+")*))";var R=c++,O="v?"+o[p]+o[v]+"?"+o[w]+"?";o[R]="^"+O+"$";var F="[v=\\s]*"+o[f]+o[y]+"?"+o[w]+"?",z=c++;o[z]="^"+F+"$";var K=c++;o[K]="((?:<|>)?=?)";var J=c++;o[J]=o[d]+"|x|X|\\*";var te=c++;o[te]=o[u]+"|x|X|\\*";var U=c++;o[U]="[v=\\s]*("+o[te]+")(?:\\.("+o[te]+")(?:\\.("+o[te]+")(?:"+o[v]+")?"+o[w]+"?)?)?";var G=c++;o[G]="[v=\\s]*("+o[J]+")(?:\\.("+o[J]+")(?:\\.("+o[J]+")(?:"+o[y]+")?"+o[w]+"?)?)?";var Q=c++;o[Q]="^"+o[K]+"\\s*"+o[U]+"$";var ne=c++;o[ne]="^"+o[K]+"\\s*"+o[G]+"$";var ve=c++;o[ve]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var de=c++;o[de]="(?:~>?)";var X=c++;o[X]="(\\s*)"+o[de]+"\\s+",i[X]=new RegExp(o[X],"g");var ce="$1~",ie=c++;o[ie]="^"+o[de]+o[U]+"$";var pe=c++;o[pe]="^"+o[de]+o[G]+"$";var he=c++;o[he]="(?:\\^)";var Ce=c++;o[Ce]="(\\s*)"+o[he]+"\\s+",i[Ce]=new RegExp(o[Ce],"g");var _e="$1^",Be=c++;o[Be]="^"+o[he]+o[U]+"$";var Je=c++;o[Je]="^"+o[he]+o[G]+"$";var Ke=c++;o[Ke]="^"+o[K]+"\\s*("+F+")$|^$";var je=c++;o[je]="^"+o[K]+"\\s*("+O+")$|^$";var xe=c++;o[xe]="(\\s*)"+o[K]+"\\s*("+F+"|"+o[U]+")",i[xe]=new RegExp(o[xe],"g");var it="$1$2$3",ut=c++;o[ut]="^\\s*("+o[U]+")\\s+-\\s+("+o[U]+")\\s*$";var Oe=c++;o[Oe]="^\\s*("+o[G]+")\\s+-\\s+("+o[G]+")\\s*$";var me=c++;for(o[me]="(<|>)?=?\\s*\\*",Ae=0;Ae<c;Ae++)r(Ae,o[Ae]),i[Ae]||(i[Ae]=new RegExp(o[Ae]));var Ae;e.parse=ke;function ke(h,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),h instanceof re)return h;if(typeof h!="string"||h.length>n)return null;var b=_.loose?i[z]:i[R];if(!b.test(h))return null;try{return new re(h,_)}catch{return null}}e.valid=nr;function nr(h,_){var b=ke(h,_);return b?b.version:null}e.clean=at;function at(h,_){var b=ke(h.trim().replace(/^[=v]+/,""),_);return b?b.version:null}e.SemVer=re;function re(h,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),h instanceof re){if(h.loose===_.loose)return h;h=h.version}else if(typeof h!="string")throw new TypeError("Invalid Version: "+h);if(h.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof re))return new re(h,_);r("SemVer",h,_),this.options=_,this.loose=!!_.loose;var b=h.trim().match(_.loose?i[z]:i[R]);if(!b)throw new TypeError("Invalid Version: "+h);if(this.raw=h,this.major=+b[1],this.minor=+b[2],this.patch=+b[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");b[4]?this.prerelease=b[4].split(".").map(function(D){if(/^[0-9]+$/.test(D)){var k=+D;if(k>=0&&k<s)return k}return D}):this.prerelease=[],this.build=b[5]?b[5].split("."):[],this.format()}re.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},re.prototype.toString=function(){return this.version},re.prototype.compare=function(h){return r("SemVer.compare",this.version,this.options,h),h instanceof re||(h=new re(h,this.options)),this.compareMain(h)||this.comparePre(h)},re.prototype.compareMain=function(h){return h instanceof re||(h=new re(h,this.options)),rt(this.major,h.major)||rt(this.minor,h.minor)||rt(this.patch,h.patch)},re.prototype.comparePre=function(h){if(h instanceof re||(h=new re(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;var _=0;do{var b=this.prerelease[_],D=h.prerelease[_];if(r("prerelease compare",_,b,D),b===void 0&&D===void 0)return 0;if(D===void 0)return 1;if(b===void 0)return-1;if(b!==D)return rt(b,D)}while(++_)},re.prototype.inc=function(h,_){switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var b=this.prerelease.length;--b>=0;)typeof this.prerelease[b]=="number"&&(this.prerelease[b]++,b=-2);b===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+h)}return this.format(),this.raw=this.version,this},e.inc=Qt;function Qt(h,_,b,D){typeof b=="string"&&(D=b,b=void 0);try{return new re(h,b).inc(_,D).version}catch{return null}}e.diff=ir;function ir(h,_){if(L(h,_))return null;var b=ke(h),D=ke(_),k="";if(b.prerelease.length||D.prerelease.length){k="pre";var $="prerelease"}for(var W in b)if((W==="major"||W==="minor"||W==="patch")&&b[W]!==D[W])return k+W;return $}e.compareIdentifiers=rt;var ht=/^[0-9]+$/;function rt(h,_){var b=ht.test(h),D=ht.test(_);return b&&D&&(h=+h,_=+_),h===_?0:b&&!D?-1:D&&!b?1:h<_?-1:1}e.rcompareIdentifiers=xt;function xt(h,_){return rt(_,h)}e.major=lt;function lt(h,_){return new re(h,_).major}e.minor=Ft;function Ft(h,_){return new re(h,_).minor}e.patch=Pt;function Pt(h,_){return new re(h,_).patch}e.compare=M;function M(h,_,b){return new re(h,b).compare(new re(_,b))}e.compareLoose=N;function N(h,_){return M(h,_,!0)}e.rcompare=P;function P(h,_,b){return M(_,h,b)}e.sort=q;function q(h,_){return h.sort(function(b,D){return e.compare(b,D,_)})}e.rsort=H;function H(h,_){return h.sort(function(b,D){return e.rcompare(b,D,_)})}e.gt=E;function E(h,_,b){return M(h,_,b)>0}e.lt=C;function C(h,_,b){return M(h,_,b)<0}e.eq=L;function L(h,_,b){return M(h,_,b)===0}e.neq=V;function V(h,_,b){return M(h,_,b)!==0}e.gte=ue;function ue(h,_,b){return M(h,_,b)>=0}e.lte=fe;function fe(h,_,b){return M(h,_,b)<=0}e.cmp=Re;function Re(h,_,b,D){switch(_){case"===":return typeof h=="object"&&(h=h.version),typeof b=="object"&&(b=b.version),h===b;case"!==":return typeof h=="object"&&(h=h.version),typeof b=="object"&&(b=b.version),h!==b;case"":case"=":case"==":return L(h,b,D);case"!=":return V(h,b,D);case">":return E(h,b,D);case">=":return ue(h,b,D);case"<":return C(h,b,D);case"<=":return fe(h,b,D);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=ye;function ye(h,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),h instanceof ye){if(h.loose===!!_.loose)return h;h=h.value}if(!(this instanceof ye))return new ye(h,_);r("comparator",h,_),this.options=_,this.loose=!!_.loose,this.parse(h),this.semver===Fe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Fe={};ye.prototype.parse=function(h){var _=this.options.loose?i[Ke]:i[je],b=h.match(_);if(!b)throw new TypeError("Invalid comparator: "+h);this.operator=b[1],this.operator==="="&&(this.operator=""),b[2]?this.semver=new re(b[2],this.options.loose):this.semver=Fe},ye.prototype.toString=function(){return this.value},ye.prototype.test=function(h){return r("Comparator.test",h,this.options.loose),this.semver===Fe?!0:(typeof h=="string"&&(h=new re(h,this.options)),Re(h,this.operator,this.semver,this.options))},ye.prototype.intersects=function(h,_){if(!(h instanceof ye))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var b;if(this.operator==="")return b=new le(h.value,_),vt(this.value,b,_);if(h.operator==="")return b=new le(this.value,_),vt(h.semver,b,_);var D=(this.operator===">="||this.operator===">")&&(h.operator===">="||h.operator===">"),k=(this.operator==="<="||this.operator==="<")&&(h.operator==="<="||h.operator==="<"),$=this.semver.version===h.semver.version,W=(this.operator===">="||this.operator==="<=")&&(h.operator===">="||h.operator==="<="),se=Re(this.semver,"<",h.semver,_)&&(this.operator===">="||this.operator===">")&&(h.operator==="<="||h.operator==="<"),oe=Re(this.semver,">",h.semver,_)&&(this.operator==="<="||this.operator==="<")&&(h.operator===">="||h.operator===">");return D||k||$&&W||se||oe},e.Range=le;function le(h,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),h instanceof le)return h.loose===!!_.loose&&h.includePrerelease===!!_.includePrerelease?h:new le(h.raw,_);if(h instanceof ye)return new le(h.value,_);if(!(this instanceof le))return new le(h,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=h,this.set=h.split(/\s*\|\|\s*/).map(function(b){return this.parseRange(b.trim())},this).filter(function(b){return b.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+h);this.format()}le.prototype.format=function(){return this.range=this.set.map(function(h){return h.join(" ").trim()}).join("||").trim(),this.range},le.prototype.toString=function(){return this.range},le.prototype.parseRange=function(h){var _=this.options.loose;h=h.trim();var b=_?i[Oe]:i[ut];h=h.replace(b,Ge),r("hyphen replace",h),h=h.replace(i[xe],it),r("comparator trim",h,i[xe]),h=h.replace(i[X],ce),h=h.replace(i[Ce],_e),h=h.split(/\s+/).join(" ");var D=_?i[Ke]:i[je],k=h.split(" ").map(function($){return Nt($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(k=k.filter(function($){return!!$.match(D)})),k=k.map(function($){return new ye($,this.options)},this),k},le.prototype.intersects=function(h,_){if(!(h instanceof le))throw new TypeError("a Range is required");return this.set.some(function(b){return b.every(function(D){return h.set.some(function(k){return k.every(function($){return D.intersects($,_)})})})})},e.toComparators=Me;function Me(h,_){return new le(h,_).set.map(function(b){return b.map(function(D){return D.value}).join(" ").trim().split(" ")})}function Nt(h,_){return r("comp",h,_),h=Ur(h,_),r("caret",h),h=Ht(h,_),r("tildes",h),h=S(h,_),r("xrange",h),h=ge(h,_),r("stars",h),h}function De(h){return!h||h.toLowerCase()==="x"||h==="*"}function Ht(h,_){return h.trim().split(/\s+/).map(function(b){return $r(b,_)}).join(" ")}function $r(h,_){var b=_.loose?i[pe]:i[ie];return h.replace(b,function(D,k,$,W,se){r("tilde",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":se?(r("replaceTilde pr",se),oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0"):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0",r("tilde return",oe),oe})}function Ur(h,_){return h.trim().split(/\s+/).map(function(b){return Br(b,_)}).join(" ")}function Br(h,_){r("caret",h,_);var b=_.loose?i[Je]:i[Be];return h.replace(b,function(D,k,$,W,se){r("caret",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?k==="0"?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+".0 <"+(+k+1)+".0.0":se?(r("replaceCaret pr",se),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+"-"+se+" <"+(+k+1)+".0.0"):(r("no pr"),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+" <"+(+k+1)+".0.0"),r("caret return",oe),oe})}function S(h,_){return r("replaceXRanges",h,_),h.split(/\s+/).map(function(b){return Z(b,_)}).join(" ")}function Z(h,_){h=h.trim();var b=_.loose?i[ne]:i[Q];return h.replace(b,function(D,k,$,W,se,oe){r("xRange",h,D,k,$,W,se,oe);var et=De($),Ye=et||De(W),Ve=Ye||De(se),Le=Ve;return k==="="&&Le&&(k=""),et?k===">"||k==="<"?D="<0.0.0":D="*":k&&Le?(Ye&&(W=0),se=0,k===">"?(k=">=",Ye?($=+$+1,W=0,se=0):(W=+W+1,se=0)):k==="<="&&(k="<",Ye?$=+$+1:W=+W+1),D=k+$+"."+W+"."+se):Ye?D=">="+$+".0.0 <"+(+$+1)+".0.0":Ve&&(D=">="+$+"."+W+".0 <"+$+"."+(+W+1)+".0"),r("xRange return",D),D})}function ge(h,_){return r("replaceStars",h,_),h.trim().replace(i[me],"")}function Ge(h,_,b,D,k,$,W,se,oe,et,Ye,Ve,Le){return De(b)?_="":De(D)?_=">="+b+".0.0":De(k)?_=">="+b+"."+D+".0":_=">="+_,De(oe)?se="":De(et)?se="<"+(+oe+1)+".0.0":De(Ye)?se="<"+oe+"."+(+et+1)+".0":Ve?se="<="+oe+"."+et+"."+Ye+"-"+Ve:se="<="+se,(_+" "+se).trim()}le.prototype.test=function(h){if(!h)return!1;typeof h=="string"&&(h=new re(h,this.options));for(var _=0;_<this.set.length;_++)if(Qe(this.set[_],h,this.options))return!0;return!1};function Qe(h,_,b){for(var D=0;D<h.length;D++)if(!h[D].test(_))return!1;if(_.prerelease.length&&!b.includePrerelease){for(D=0;D<h.length;D++)if(r(h[D].semver),h[D].semver!==Fe&&h[D].semver.prerelease.length>0){var k=h[D].semver;if(k.major===_.major&&k.minor===_.minor&&k.patch===_.patch)return!0}return!1}return!0}e.satisfies=vt;function vt(h,_,b){try{_=new le(_,b)}catch{return!1}return _.test(h)}e.maxSatisfying=ur;function ur(h,_,b){var D=null,k=null;try{var $=new le(_,b)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===-1)&&(D=W,k=new re(D,b))}),D}e.minSatisfying=gn;function gn(h,_,b){var D=null,k=null;try{var $=new le(_,b)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===1)&&(D=W,k=new re(D,b))}),D}e.minVersion=mr;function mr(h,_){h=new le(h,_);var b=new re("0.0.0");if(h.test(b)||(b=new re("0.0.0-0"),h.test(b)))return b;b=null;for(var D=0;D<h.set.length;++D){var k=h.set[D];k.forEach(function($){var W=new re($.semver.version);switch($.operator){case">":W.prerelease.length===0?W.patch++:W.prerelease.push(0),W.raw=W.format();case"":case">=":(!b||E(b,W))&&(b=W);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return b&&h.test(b)?b:null}e.validRange=mn;function mn(h,_){try{return new le(h,_).range||"*"}catch{return null}}e.ltr=vn;function vn(h,_,b){return fr(h,_,"<",b)}e.gtr=_n;function _n(h,_,b){return fr(h,_,">",b)}e.outside=fr;function fr(h,_,b,D){h=new re(h,D),_=new le(_,D);var k,$,W,se,oe;switch(b){case">":k=E,$=fe,W=C,se=">",oe=">=";break;case"<":k=C,$=ue,W=E,se="<",oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(vt(h,_,D))return!1;for(var et=0;et<_.set.length;++et){var Ye=_.set[et],Ve=null,Le=null;if(Ye.forEach(function(dt){dt.semver===Fe&&(dt=new ye(">=0.0.0")),Ve=Ve||dt,Le=Le||dt,k(dt.semver,Ve.semver,D)?Ve=dt:W(dt.semver,Le.semver,D)&&(Le=dt)}),Ve.operator===se||Ve.operator===oe||(!Le.operator||Le.operator===se)&&$(h,Le.semver)||Le.operator===oe&&W(h,Le.semver))return!1}return!0}e.prerelease=yn;function yn(h,_){var b=ke(h,_);return b&&b.prerelease.length?b.prerelease:null}e.intersects=vr;function vr(h,_,b){return h=new le(h,b),_=new le(_,b),h.intersects(_)}e.coerce=En;function En(h){if(h instanceof re)return h;if(typeof h!="string")return null;var _=h.match(i[ve]);return _==null?null:ke(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),Lc=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var t=require("path"),r=av(),n=require("module"),s=Object.keys(process.binding("natives")),a=n.prototype.require;function i(o){var c={};return function(u){var d=a.apply(this,arguments);if(o[u]){var l=n._resolveFilename(u,this);if(c.hasOwnProperty(l))return c[l];var p=void 0;if(s.indexOf(u)<0)try{p=a.call(this,t.join(u,"package.json")).version}catch{return d}else p=process.version.substring(1);var f=p.indexOf("-");f>=0&&(p=p.substring(0,f));for(var g=d,m=0,v=o[u];m<v.length;m++){var y=v[m];r.satisfies(p,y.versionSpecifier)&&(g=y.patch(g,l))}return c[l]=g}return d}}e.makePatchingRequire=i}),cv=A((e,t)=>{t.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),kt=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var t=Lc(),r=Lc();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var n=function(i){return!0},s=function(){function i(){this.version=cv().version,this.subscribers={},this.contextPreservationFunction=function(o){return o},this.knownPatches={},this.currentlyPublishing=!1}return i.prototype.shouldPublish=function(o){var c=this.subscribers[o];return c?c.some(function(u){var d=u.filter;return!d||d(!1)}):!1},i.prototype.publish=function(o,c){if(!this.currentlyPublishing){var u=this.subscribers[o];if(u){var d={timestamp:Date.now(),data:c};this.currentlyPublishing=!0,u.forEach(function(l){var p=l.listener,f=l.filter;try{f&&f(!0)&&p(d)}catch{}}),this.currentlyPublishing=!1}}},i.prototype.subscribe=function(o,c,u){u===void 0&&(u=n),this.subscribers[o]||(this.subscribers[o]=[]),this.subscribers[o].push({listener:c,filter:u})},i.prototype.unsubscribe=function(o,c,u){u===void 0&&(u=n);var d=this.subscribers[o];if(d){for(var l=0;l<d.length;++l)if(d[l].listener===c&&d[l].filter===u)return d.splice(l,1),!0}return!1},i.prototype.reset=function(){var o=this;this.subscribers={},this.contextPreservationFunction=function(c){return c},Object.getOwnPropertyNames(this.knownPatches).forEach(function(c){return delete o.knownPatches[c]})},i.prototype.bindToContext=function(o){return this.contextPreservationFunction(o)},i.prototype.addContextPreservation=function(o){var c=this.contextPreservationFunction;this.contextPreservationFunction=function(u){return o(c(u))}},i.prototype.registerMonkeyPatch=function(o,c){this.knownPatches[o]||(this.knownPatches[o]=[]),this.knownPatches[o].push(c)},i.prototype.getPatchesObject=function(){return this.knownPatches},i}();global.diagnosticsSource||(global.diagnosticsSource=new s,a=require("module"),a.prototype.require=t.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var a;e.channel=global.diagnosticsSource}),uv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),lv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis=typeof globalThis=="object"?globalThis:global}),dv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(lv(),e)}),pv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(dv(),e)}),$c=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"}),fv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var t=$c(),r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(s){var a=new Set([s]),i=new Set,o=s.match(r);if(!o)return function(){return!1};var c={major:+o[1],minor:+o[2],patch:+o[3],prerelease:o[4]};if(c.prerelease!=null)return function(l){return l===s};function u(l){return i.add(l),!1}function d(l){return a.add(l),!0}return function(l){if(a.has(l))return!0;if(i.has(l))return!1;var p=l.match(r);if(!p)return u(l);var f={major:+p[1],minor:+p[2],patch:+p[3],prerelease:p[4]};return f.prerelease!=null||c.major!==f.major?u(l):c.major===0?c.minor===f.minor&&c.patch<=f.patch?d(l):u(l):c.minor<=f.minor?d(l):u(l)}}e._makeCompatibilityCheck=n,e.isCompatible=n(t.VERSION)}),mi=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var t=pv(),r=$c(),n=fv(),s=r.VERSION.split(".")[0],a=Symbol.for("opentelemetry.js.api."+s),i=t._globalThis;function o(d,l,p,f){var g;f===void 0&&(f=!1);var m=i[a]=(g=i[a])!==null&&g!==void 0?g:{version:r.VERSION};if(!f&&m[d]){var v=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+d);return p.error(v.stack||v.message),!1}if(m.version!==r.VERSION){var v=new Error("@opentelemetry/api: All API registration versions must match");return p.error(v.stack||v.message),!1}return m[d]=l,p.debug("@opentelemetry/api: Registered a global for "+d+" v"+r.VERSION+"."),!0}e.registerGlobal=o;function c(d){var l,p,f=(l=i[a])===null||l===void 0?void 0:l.version;if(!(!f||!n.isCompatible(f)))return(p=i[a])===null||p===void 0?void 0:p[d]}e.getGlobal=c;function u(d,l){l.debug("@opentelemetry/api: Unregistering a global for "+d+" v"+r.VERSION+".");var p=i[a];p&&delete p[d]}e.unregisterGlobal=u}),hv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var t=mi(),r=function(){function s(a){this._namespace=a.namespace||"DiagComponentLogger"}return s.prototype.debug=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("debug",this._namespace,a)},s.prototype.error=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("error",this._namespace,a)},s.prototype.info=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("info",this._namespace,a)},s.prototype.warn=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("warn",this._namespace,a)},s.prototype.verbose=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("verbose",this._namespace,a)},s}();e.DiagComponentLogger=r;function n(s,a,i){var o=t.getGlobal("diag");if(o)return i.unshift(a),o[s].apply(o,i)}}),Ss=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0;var t;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(t=e.DiagLogLevel||(e.DiagLogLevel={}))}),gv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var t=Ss();function r(n,s){n<t.DiagLogLevel.NONE?n=t.DiagLogLevel.NONE:n>t.DiagLogLevel.ALL&&(n=t.DiagLogLevel.ALL),s=s||{};function a(i,o){var c=s[i];return typeof c=="function"&&n>=o?c.bind(s):function(){}}return{error:a("error",t.DiagLogLevel.ERROR),warn:a("warn",t.DiagLogLevel.WARN),info:a("info",t.DiagLogLevel.INFO),debug:a("debug",t.DiagLogLevel.DEBUG),verbose:a("verbose",t.DiagLogLevel.VERBOSE)}}e.createLogLevelDiagLogger=r}),vi=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var t=hv(),r=gv(),n=Ss(),s=mi(),a="diag",i=function(){function o(){function c(d){return function(){var l=s.getGlobal("diag");if(l)return l[d].apply(l,arguments)}}var u=this;u.setLogger=function(d,l){var p,f;if(l===void 0&&(l=n.DiagLogLevel.INFO),d===u){var g=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return u.error((p=g.stack)!==null&&p!==void 0?p:g.message),!1}var m=s.getGlobal("diag"),v=r.createLogLevelDiagLogger(l,d);if(m){var y=(f=new Error().stack)!==null&&f!==void 0?f:"<failed to generate stacktrace>";m.warn("Current logger will be overwritten from "+y),v.warn("Current logger will overwrite one already registered from "+y)}return s.registerGlobal("diag",v,u,!0)},u.disable=function(){s.unregisterGlobal(a,u)},u.createComponentLogger=function(d){return new t.DiagComponentLogger(d)},u.verbose=c("verbose"),u.debug=c("debug"),u.info=c("info"),u.warn=c("warn"),u.error=c("error")}return o.instance=function(){return this._instance||(this._instance=new o),this._instance},o}();e.DiagAPI=i}),mv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var t=function(){function r(n){this._entries=n?new Map(n):new Map}return r.prototype.getEntry=function(n){var s=this._entries.get(n);if(s)return Object.assign({},s)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(n){var s=n[0],a=n[1];return[s,a]})},r.prototype.setEntry=function(n,s){var a=new r(this._entries);return a._entries.set(n,s),a},r.prototype.removeEntry=function(n){var s=new r(this._entries);return s._entries.delete(n),s},r.prototype.removeEntries=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];for(var a=new r(this._entries),i=0,o=n;i<o.length;i++){var c=o[i];a._entries.delete(c)}return a},r.prototype.clear=function(){return new r},r}();e.BaggageImpl=t}),vv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),Uc=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var t=vi(),r=mv(),n=vv(),s=t.DiagAPI.instance();function a(o){return o===void 0&&(o={}),new r.BaggageImpl(new Map(Object.entries(o)))}e.createBaggage=a;function i(o){return typeof o!="string"&&(s.error("Cannot create baggage metadata from unknown type: "+typeof o),o=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return o}}}e.baggageEntryMetadataFromString=i}),_v=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),yv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ev=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],r=function(){function n(){function s(i){return function(){var o=arguments;if(console){var c=console[i];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,o)}}}for(var a=0;a<t.length;a++)this[t[a].n]=s(t[a].c)}return n}();e.DiagConsoleLogger=r}),Cv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ev(),e),r(Ss(),e)}),Bc=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(t,r){if(t!=null)return t[r]},keys:function(t){return t==null?[]:Object.keys(t)}},e.defaultTextMapSetter={set:function(t,r,n){t!=null&&(t[r]=n)}}}),bv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Tv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),co=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0;function t(n){return Symbol.for(n)}e.createContextKey=t;var r=function(){function n(s){var a=this;a._currentContext=s?new Map(s):new Map,a.getValue=function(i){return a._currentContext.get(i)},a.setValue=function(i,o){var c=new n(a._currentContext);return c._currentContext.set(i,o),c},a.deleteValue=function(i){var o=new n(a._currentContext);return o._currentContext.delete(i),o}}return n}();e.ROOT_CONTEXT=new r}),Sv=A(e=>{"use strict";var t=e&&e.__spreadArray||function(s,a){for(var i=0,o=a.length,c=s.length;i<o;i++,c++)s[c]=a[i];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var r=co(),n=function(){function s(){}return s.prototype.active=function(){return r.ROOT_CONTEXT},s.prototype.with=function(a,i,o){for(var c=[],u=3;u<arguments.length;u++)c[u-3]=arguments[u];return i.call.apply(i,t([o],c))},s.prototype.bind=function(a,i){return i},s.prototype.enable=function(){return this},s.prototype.disable=function(){return this},s}();e.NoopContextManager=n}),Gc=A(e=>{"use strict";var t=e&&e.__spreadArray||function(c,u){for(var d=0,l=u.length,p=c.length;d<l;d++,p++)c[p]=u[d];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var r=Sv(),n=mi(),s=vi(),a="context",i=new r.NoopContextManager,o=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(u){return n.registerGlobal(a,u,s.DiagAPI.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(u,d,l){for(var p,f=[],g=3;g<arguments.length;g++)f[g-3]=arguments[g];return(p=this._getContextManager()).with.apply(p,t([u,d,l],f))},c.prototype.bind=function(u,d){return this._getContextManager().bind(u,d)},c.prototype._getContextManager=function(){return n.getGlobal(a)||i},c.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(a,s.DiagAPI.instance())},c}();e.ContextAPI=o}),Vc=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0;var t;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(t=e.TraceFlags||(e.TraceFlags={}))}),Rs=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var t=Vc();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:t.TraceFlags.NONE}}),ws=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var t=Rs(),r=function(){function n(s){s===void 0&&(s=t.INVALID_SPAN_CONTEXT),this._spanContext=s}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(s,a){return this},n.prototype.setAttributes=function(s){return this},n.prototype.addEvent=function(s,a){return this},n.prototype.setStatus=function(s){return this},n.prototype.updateName=function(s){return this},n.prototype.end=function(s){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(s,a){},n}();e.NonRecordingSpan=r}),Wc=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var t=co(),r=ws(),n=t.createContextKey("OpenTelemetry Context Key SPAN");function s(u){return u.getValue(n)||void 0}e.getSpan=s;function a(u,d){return u.setValue(n,d)}e.setSpan=a;function i(u){return u.deleteValue(n)}e.deleteSpan=i;function o(u,d){return a(u,new r.NonRecordingSpan(d))}e.setSpanContext=o;function c(u){var d;return(d=s(u))===null||d===void 0?void 0:d.spanContext()}e.getSpanContext=c}),Ps=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var t=Rs(),r=ws(),n=/^([0-9a-f]{32})$/i,s=/^[0-9a-f]{16}$/i;function a(u){return n.test(u)&&u!==t.INVALID_TRACEID}e.isValidTraceId=a;function i(u){return s.test(u)&&u!==t.INVALID_SPANID}e.isValidSpanId=i;function o(u){return a(u.traceId)&&i(u.spanId)}e.isSpanContextValid=o;function c(u){return new r.NonRecordingSpan(u)}e.wrapSpanContext=c}),Kc=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var t=Gc(),r=Wc(),n=ws(),s=Ps(),a=t.ContextAPI.getInstance(),i=function(){function c(){}return c.prototype.startSpan=function(u,d,l){var p=Boolean(d?.root);if(p)return new n.NonRecordingSpan;var f=l&&r.getSpanContext(l);return o(f)&&s.isSpanContextValid(f)?new n.NonRecordingSpan(f):new n.NonRecordingSpan},c.prototype.startActiveSpan=function(u,d,l,p){var f,g,m;if(!(arguments.length<2)){arguments.length===2?m=d:arguments.length===3?(f=d,m=l):(f=d,g=l,m=p);var v=g??a.active(),y=this.startSpan(u,f,v),T=r.setSpan(v,y);return a.with(T,m,void 0,y)}},c}();e.NoopTracer=i;function o(c){return typeof c=="object"&&typeof c.spanId=="string"&&typeof c.traceId=="string"&&typeof c.traceFlags=="number"}}),zc=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var t=Kc(),r=new t.NoopTracer,n=function(){function s(a,i,o){this._provider=a,this.name=i,this.version=o}return s.prototype.startSpan=function(a,i,o){return this._getTracer().startSpan(a,i,o)},s.prototype.startActiveSpan=function(a,i,o,c){var u=this._getTracer();return Reflect.apply(u.startActiveSpan,u,arguments)},s.prototype._getTracer=function(){if(this._delegate)return this._delegate;var a=this._provider.getDelegateTracer(this.name,this.version);return a?(this._delegate=a,this._delegate):r},s}();e.ProxyTracer=n}),Rv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var t=Kc(),r=function(){function n(){}return n.prototype.getTracer=function(s,a){return new t.NoopTracer},n}();e.NoopTracerProvider=r}),Xc=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var t=zc(),r=Rv(),n=new r.NoopTracerProvider,s=function(){function a(){}return a.prototype.getTracer=function(i,o){var c;return(c=this.getDelegateTracer(i,o))!==null&&c!==void 0?c:new t.ProxyTracer(this,i,o)},a.prototype.getDelegate=function(){var i;return(i=this._delegate)!==null&&i!==void 0?i:n},a.prototype.setDelegate=function(i){this._delegate=i},a.prototype.getDelegateTracer=function(i,o){var c;return(c=this._delegate)===null||c===void 0?void 0:c.getTracer(i,o)},a}();e.ProxyTracerProvider=s}),wv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Pv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0;var t;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(t=e.SamplingDecision||(e.SamplingDecision={}))}),Ov=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Iv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0;var t;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(t=e.SpanKind||(e.SpanKind={}))}),Dv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Av=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),xv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0;var t;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(t=e.SpanStatusCode||(e.SpanStatusCode={}))}),Nv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),kv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Mv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),qv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Lv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var t=mi(),r=Xc(),n=Ps(),s=Wc(),a=vi(),i="trace",o=function(){function c(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=s.deleteSpan,this.getSpan=s.getSpan,this.getSpanContext=s.getSpanContext,this.setSpan=s.setSpan,this.setSpanContext=s.setSpanContext}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalTracerProvider=function(u){var d=t.registerGlobal(i,this._proxyTracerProvider,a.DiagAPI.instance());return d&&this._proxyTracerProvider.setDelegate(u),d},c.prototype.getTracerProvider=function(){return t.getGlobal(i)||this._proxyTracerProvider},c.prototype.getTracer=function(u,d){return this.getTracerProvider().getTracer(u,d)},c.prototype.disable=function(){t.unregisterGlobal(i,a.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},c}();e.TraceAPI=o}),jv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var t=function(){function r(){}return r.prototype.inject=function(n,s){},r.prototype.extract=function(n,s){return n},r.prototype.fields=function(){return[]},r}();e.NoopTextMapPropagator=t}),Fv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var t=co(),r=t.createContextKey("OpenTelemetry Baggage Key");function n(i){return i.getValue(r)||void 0}e.getBaggage=n;function s(i,o){return i.setValue(r,o)}e.setBaggage=s;function a(i){return i.deleteValue(r)}e.deleteBaggage=a}),Hv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var t=mi(),r=jv(),n=Bc(),s=Fv(),a=Uc(),i=vi(),o="propagation",c=new r.NoopTextMapPropagator,u=function(){function d(){this.createBaggage=a.createBaggage,this.getBaggage=s.getBaggage,this.setBaggage=s.setBaggage,this.deleteBaggage=s.deleteBaggage}return d.getInstance=function(){return this._instance||(this._instance=new d),this._instance},d.prototype.setGlobalPropagator=function(l){return t.registerGlobal(o,l,i.DiagAPI.instance())},d.prototype.inject=function(l,p,f){return f===void 0&&(f=n.defaultTextMapSetter),this._getGlobalPropagator().inject(l,p,f)},d.prototype.extract=function(l,p,f){return f===void 0&&(f=n.defaultTextMapGetter),this._getGlobalPropagator().extract(l,p,f)},d.prototype.fields=function(){return this._getGlobalPropagator().fields()},d.prototype.disable=function(){t.unregisterGlobal(o,i.DiagAPI.instance())},d.prototype._getGlobalPropagator=function(){return t.getGlobal(o)||c},d}();e.PropagationAPI=u}),Et=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(d,l,p,f){f===void 0&&(f=p),Object.defineProperty(d,f,{enumerable:!0,get:function(){return l[p]}})}:function(d,l,p,f){f===void 0&&(f=p),d[f]=l[p]}),r=e&&e.__exportStar||function(d,l){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(l,p)&&t(l,d,p)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,r(uv(),e);var n=Uc();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(_v(),e),r(yv(),e),r(Cv(),e),r(Bc(),e),r(bv(),e),r(Tv(),e),r(zc(),e),r(Xc(),e),r(wv(),e),r(Pv(),e),r(Ov(),e),r(Iv(),e),r(Dv(),e),r(Av(),e),r(xv(),e),r(Vc(),e),r(Nv(),e),r(kv(),e),r(Mv(),e);var s=Ps();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return s.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return s.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return s.isValidSpanId}});var a=Rs();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return a.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return a.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return a.INVALID_SPAN_CONTEXT}}),r(co(),e),r(qv(),e);var i=Gc();e.context=i.ContextAPI.getInstance();var o=Lv();e.trace=o.TraceAPI.getInstance();var c=Hv();e.propagation=c.PropagationAPI.getInstance();var u=vi();e.diag=u.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}}),Os=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var t=Et(),r=t.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(i){return i.setValue(r,!0)}e.suppressTracing=n;function s(i){return i.deleteValue(r)}e.unsuppressTracing=s;function a(i){return i.getValue(r)===!0}e.isTracingSuppressed=a}),Yc=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192}),Qc=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var t=Et(),r=Yc(),n=o=>o.reduce((c,u)=>{let d=`${c}${c!==""?r.BAGGAGE_ITEMS_SEPARATOR:""}${u}`;return d.length>r.BAGGAGE_MAX_TOTAL_LENGTH?c:d},"");e.serializeKeyPairs=n;var s=o=>o.getAllEntries().map(([c,u])=>`${encodeURIComponent(c)}=${encodeURIComponent(u.value)}`);e.getKeyPairs=s;var a=o=>{let c=o.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(c.length<=0)return;let u=c.shift();if(!u)return;let d=u.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(d.length!==2)return;let l=decodeURIComponent(d[0].trim()),p=decodeURIComponent(d[1].trim()),f;return c.length>0&&(f=t.baggageEntryMetadataFromString(c.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:l,value:p,metadata:f}};e.parsePairKeyValue=a;var i=o=>typeof o!="string"||o.length===0?{}:o.split(r.BAGGAGE_ITEMS_SEPARATOR).map(c=>e.parsePairKeyValue(c)).filter(c=>c!==void 0&&c.value.length>0).reduce((c,u)=>(c[u.key]=u.value,c),{});e.parseKeyPairsIntoRecord=i}),$v=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var t=Et(),r=Os(),n=Yc(),s=Qc(),a=class{inject(i,o,c){let u=t.propagation.getBaggage(i);if(!u||r.isTracingSuppressed(i))return;let d=s.getKeyPairs(u).filter(p=>p.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),l=s.serializeKeyPairs(d);l.length>0&&c.set(o,n.BAGGAGE_HEADER,l)}extract(i,o,c){let u=c.get(o,n.BAGGAGE_HEADER);if(!u)return i;let d={};return u.length===0||(u.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(l=>{let p=s.parsePairKeyValue(l);if(p){let f={value:p.value};p.metadata&&(f.metadata=p.metadata),d[p.key]=f}}),Object.entries(d).length===0)?i:t.propagation.setBaggage(i,t.propagation.createBaggage(d))}fields(){return[n.BAGGAGE_HEADER]}};e.HttpBaggagePropagator=a}),Uv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0;function t(a){let i={};if(a==null||typeof a!="object")return i;for(let[o,c]of Object.entries(a))r(c)&&(Array.isArray(c)?i[o]=c.slice():i[o]=c);return i}e.sanitizeAttributes=t;function r(a){return a==null?!0:Array.isArray(a)?n(a):s(a)}e.isAttributeValue=r;function n(a){let i;for(let o of a)if(o!=null){if(!i){if(s(o)){i=typeof o;continue}return!1}if(typeof o!==i)return!1}return!0}function s(a){switch(typeof a){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),Jc=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var t=Et();function r(){return a=>{t.diag.error(n(a))}}e.loggingErrorHandler=r;function n(a){return typeof a=="string"?a:JSON.stringify(s(a))}function s(a){let i={},o=a;for(;o!==null;)Object.getOwnPropertyNames(o).forEach(c=>{if(i[c])return;let u=o[c];u&&(i[c]=String(u))}),o=Object.getPrototypeOf(o);return i}}),Zc=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var t=Jc(),r=t.loggingErrorHandler();function n(a){r=a}e.setGlobalErrorHandler=n;var s=a=>{try{r(a)}catch{}};e.globalErrorHandler=s}),eu=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0;var t;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(t=e.TracesSamplerValues||(e.TracesSamplerValues={}))}),tu=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var t=Et(),r=eu(),n=",",s=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function a(f){return s.indexOf(f)>-1}var i=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function o(f){return i.indexOf(f)>-1}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function c(f,g,m,v=-1/0,y=1/0){if(typeof m[f]<"u"){let T=Number(m[f]);isNaN(T)||(T<v?g[f]=v:T>y?g[f]=y:g[f]=T)}}function u(f,g,m,v=n){let y=m[f];typeof y=="string"&&(g[f]=y.split(v).map(T=>T.trim()))}var d={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function l(f,g,m){let v=m[f];if(typeof v=="string"){let y=d[v.toUpperCase()];y!=null&&(g[f]=y)}}function p(f){let g={};for(let m in e.DEFAULT_ENVIRONMENT){let v=m;switch(v){case"OTEL_LOG_LEVEL":l(v,g,f);break;default:if(a(v))c(v,g,f);else if(o(v))u(v,g,f);else{let y=f[v];typeof y<"u"&&y!==null&&(g[v]=String(y))}}}return g}e.parseEnvironment=p}),Bv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var t=require("os"),r=tu();function n(){let s=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:t.hostname()},r.DEFAULT_ENVIRONMENT,s)}e.getEnv=n}),Gv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0;function t(r){let n=r.length,s="";for(let a=0;a<n;a+=2){let i=r.substring(a,a+2),o=parseInt(i,16);s+=String.fromCharCode(o)}return Buffer.from(s,"ascii").toString("base64")}e.hexToBase64=t}),Vv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0;var t=8,r=16,n=class{constructor(){this.generateTraceId=a(r),this.generateSpanId=a(t)}};e.RandomIdGenerator=n;var s=Buffer.allocUnsafe(r);function a(i){return function(){for(let o=0;o<i/4;o++)s.writeUInt32BE(Math.random()*2**32>>>0,o*4);for(let o=0;o<i&&!(s[o]>0);o++)o===i-1&&(s[i-1]=1);return s.toString("hex",0,i)}}}),Wv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var t=require("perf_hooks");e.otperformance=t.performance}),Ts=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"}),Kv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var t;(function(l){l.OTHER_SQL="other_sql",l.MSSQL="mssql",l.MYSQL="mysql",l.ORACLE="oracle",l.DB2="db2",l.POSTGRESQL="postgresql",l.REDSHIFT="redshift",l.HIVE="hive",l.CLOUDSCAPE="cloudscape",l.HSQLDB="hsqldb",l.PROGRESS="progress",l.MAXDB="maxdb",l.HANADB="hanadb",l.INGRES="ingres",l.FIRSTSQL="firstsql",l.EDB="edb",l.CACHE="cache",l.ADABAS="adabas",l.FIREBIRD="firebird",l.DERBY="derby",l.FILEMAKER="filemaker",l.INFORMIX="informix",l.INSTANTDB="instantdb",l.INTERBASE="interbase",l.MARIADB="mariadb",l.NETEZZA="netezza",l.PERVASIVE="pervasive",l.POINTBASE="pointbase",l.SQLITE="sqlite",l.SYBASE="sybase",l.TERADATA="teradata",l.VERTICA="vertica",l.H2="h2",l.COLDFUSION="coldfusion",l.CASSANDRA="cassandra",l.HBASE="hbase",l.MONGODB="mongodb",l.REDIS="redis",l.COUCHBASE="couchbase",l.COUCHDB="couchdb",l.COSMOSDB="cosmosdb",l.DYNAMODB="dynamodb",l.NEO4J="neo4j",l.GEODE="geode",l.ELASTICSEARCH="elasticsearch",l.MEMCACHED="memcached",l.COCKROACHDB="cockroachdb"})(t=e.DbSystemValues||(e.DbSystemValues={}));var r;(function(l){l.ALL="all",l.EACH_QUORUM="each_quorum",l.QUORUM="quorum",l.LOCAL_QUORUM="local_quorum",l.ONE="one",l.TWO="two",l.THREE="three",l.LOCAL_ONE="local_one",l.ANY="any",l.SERIAL="serial",l.LOCAL_SERIAL="local_serial"})(r=e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={}));var n;(function(l){l.DATASOURCE="datasource",l.HTTP="http",l.PUBSUB="pubsub",l.TIMER="timer",l.OTHER="other"})(n=e.FaasTriggerValues||(e.FaasTriggerValues={}));var s;(function(l){l.INSERT="insert",l.EDIT="edit",l.DELETE="delete"})(s=e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={}));var a;(function(l){l.AWS="aws",l.AZURE="azure",l.GCP="gcp"})(a=e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={}));var i;(function(l){l.IP_TCP="ip_tcp",l.IP_UDP="ip_udp",l.IP="ip",l.UNIX="unix",l.PIPE="pipe",l.INPROC="inproc",l.OTHER="other"})(i=e.NetTransportValues||(e.NetTransportValues={}));var o;(function(l){l.HTTP_1_0="1.0",l.HTTP_1_1="1.1",l.HTTP_2_0="2.0",l.SPDY="SPDY",l.QUIC="QUIC"})(o=e.HttpFlavorValues||(e.HttpFlavorValues={}));var c;(function(l){l.QUEUE="queue",l.TOPIC="topic"})(c=e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={}));var u;(function(l){l.RECEIVE="receive",l.PROCESS="process"})(u=e.MessagingOperationValues||(e.MessagingOperationValues={}));var d;(function(l){l[l.OK=0]="OK",l[l.CANCELLED=1]="CANCELLED",l[l.UNKNOWN=2]="UNKNOWN",l[l.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",l[l.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",l[l.NOT_FOUND=5]="NOT_FOUND",l[l.ALREADY_EXISTS=6]="ALREADY_EXISTS",l[l.PERMISSION_DENIED=7]="PERMISSION_DENIED",l[l.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",l[l.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",l[l.ABORTED=10]="ABORTED",l[l.OUT_OF_RANGE=11]="OUT_OF_RANGE",l[l.UNIMPLEMENTED=12]="UNIMPLEMENTED",l[l.INTERNAL=13]="INTERNAL",l[l.UNAVAILABLE=14]="UNAVAILABLE",l[l.DATA_LOSS=15]="DATA_LOSS",l[l.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(d=e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))}),zv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Kv(),e)}),Xv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var t;(function(o){o.AWS="aws",o.AZURE="azure",o.GCP="gcp"})(t=e.CloudProviderValues||(e.CloudProviderValues={}));var r;(function(o){o.AWS_EC2="aws_ec2",o.AWS_ECS="aws_ecs",o.AWS_EKS="aws_eks",o.AWS_LAMBDA="aws_lambda",o.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",o.AZURE_VM="azure_vm",o.AZURE_CONTAINER_INSTANCES="azure_container_instances",o.AZURE_AKS="azure_aks",o.AZURE_FUNCTIONS="azure_functions",o.AZURE_APP_SERVICE="azure_app_service",o.GCP_COMPUTE_ENGINE="gcp_compute_engine",o.GCP_CLOUD_RUN="gcp_cloud_run",o.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",o.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",o.GCP_APP_ENGINE="gcp_app_engine"})(r=e.CloudPlatformValues||(e.CloudPlatformValues={}));var n;(function(o){o.EC2="ec2",o.FARGATE="fargate"})(n=e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={}));var s;(function(o){o.AMD64="amd64",o.ARM32="arm32",o.ARM64="arm64",o.IA64="ia64",o.PPC32="ppc32",o.PPC64="ppc64",o.X86="x86"})(s=e.HostArchValues||(e.HostArchValues={}));var a;(function(o){o.WINDOWS="windows",o.LINUX="linux",o.DARWIN="darwin",o.FREEBSD="freebsd",o.NETBSD="netbsd",o.OPENBSD="openbsd",o.DRAGONFLYBSD="dragonflybsd",o.HPUX="hpux",o.AIX="aix",o.SOLARIS="solaris",o.Z_OS="z_os"})(a=e.OsTypeValues||(e.OsTypeValues={}));var i;(function(o){o.CPP="cpp",o.DOTNET="dotnet",o.ERLANG="erlang",o.GO="go",o.JAVA="java",o.NODEJS="nodejs",o.PHP="php",o.PYTHON="python",o.RUBY="ruby",o.WEBJS="webjs"})(i=e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))}),Yv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Xv(),e)}),_i=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(zv(),e),r(Yv(),e)}),Qv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var t=Ts(),r=_i();e.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}}),Jv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0;function t(r){r.unref()}e.unrefTimer=t}),Zv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Bv(),e),r(Gv(),e),r(Vv(),e),r(Wv(),e),r(Qv(),e),r(Jv(),e)}),ru=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Zv(),e)}),e_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var t=ru(),r=9,n=Math.pow(10,r);function s(m){let v=m/1e3,y=Math.trunc(v),T=Number((v-y).toFixed(r))*n;return[y,T]}function a(){let m=t.otperformance.timeOrigin;if(typeof m!="number"){let v=t.otperformance;m=v.timing&&v.timing.fetchStart}return m}function i(m){let v=s(a()),y=s(typeof m=="number"?m:t.otperformance.now()),T=v[0]+y[0],w=v[1]+y[1];return w>n&&(w-=n,T+=1),[T,w]}e.hrTime=i;function o(m){if(f(m))return m;if(typeof m=="number")return m<a()?i(m):s(m);if(m instanceof Date)return s(m.getTime());throw TypeError("Invalid input type")}e.timeInputToHrTime=o;function c(m,v){let y=v[0]-m[0],T=v[1]-m[1];return T<0&&(y-=1,T+=n),[y,T]}e.hrTimeDuration=c;function u(m){let v=r,y=`${"0".repeat(v)}${m[1]}Z`,T=y.substr(y.length-v-1);return new Date(m[0]*1e3).toISOString().replace("000Z",T)}e.hrTimeToTimeStamp=u;function d(m){return m[0]*n+m[1]}e.hrTimeToNanoseconds=d;function l(m){return Math.round(m[0]*1e3+m[1]/1e6)}e.hrTimeToMilliseconds=l;function p(m){return Math.round(m[0]*1e6+m[1]/1e3)}e.hrTimeToMicroseconds=p;function f(m){return Array.isArray(m)&&m.length===2&&typeof m[0]=="number"&&typeof m[1]=="number"}e.isTimeInputHrTime=f;function g(m){return f(m)||typeof m=="number"||m instanceof Date}e.isTimeInput=g}),t_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),r_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0;var t;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(t=e.ExportResultCode||(e.ExportResultCode={}))}),n_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var t=Et(),r=class{constructor(n={}){var s;this._propagators=(s=n.propagators)!==null&&s!==void 0?s:[],this._fields=Array.from(new Set(this._propagators.map(a=>typeof a.fields=="function"?a.fields():[]).reduce((a,i)=>a.concat(i),[])))}inject(n,s,a){for(let i of this._propagators)try{i.inject(n,s,a)}catch(o){t.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${o.message}`)}}extract(n,s,a){return this._propagators.reduce((i,o)=>{try{return o.extract(i,s,a)}catch(c){t.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${c.message}`)}return i},n)}fields(){return this._fields.slice()}};e.CompositePropagator=r}),i_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var t="[_0-9a-z-*/]",r=`[a-z]${t}{0,255}`,n=`[a-z0-9]${t}{0,240}@[a-z]${t}{0,13}`,s=new RegExp(`^(?:${r}|${n})$`),a=/^[ -~]{0,255}[!-~]$/,i=/,|=/;function o(u){return s.test(u)}e.validateKey=o;function c(u){return a.test(u)&&!i.test(u)}e.validateValue=c}),nu=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var t=i_(),r=32,n=512,s=",",a="=",i=class{constructor(o){this._internalState=new Map,o&&this._parse(o)}set(o,c){let u=this._clone();return u._internalState.has(o)&&u._internalState.delete(o),u._internalState.set(o,c),u}unset(o){let c=this._clone();return c._internalState.delete(o),c}get(o){return this._internalState.get(o)}serialize(){return this._keys().reduce((o,c)=>(o.push(c+a+this.get(c)),o),[]).join(s)}_parse(o){o.length>n||(this._internalState=o.split(s).reverse().reduce((c,u)=>{let d=u.trim(),l=d.indexOf(a);if(l!==-1){let p=d.slice(0,l),f=d.slice(l+1,u.length);t.validateKey(p)&&t.validateValue(f)&&c.set(p,f)}return c},new Map),this._internalState.size>r&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,r))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let o=new i;return o._internalState=new Map(this._internalState),o}};e.TraceState=i}),o_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var t=Et(),r=Os(),n=nu();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var s="00",a="(?!ff)[\\da-f]{2}",i="(?![0]{32})[\\da-f]{32}",o="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",u=new RegExp(`^\\s?(${a})-(${i})-(${o})-(${c})(-.*)?\\s?$`);function d(p){let f=u.exec(p);return!f||f[1]==="00"&&f[5]?null:{traceId:f[2],spanId:f[3],traceFlags:parseInt(f[4],16)}}e.parseTraceParent=d;var l=class{inject(p,f,g){let m=t.trace.getSpanContext(p);if(!m||r.isTracingSuppressed(p)||!t.isSpanContextValid(m))return;let v=`${s}-${m.traceId}-${m.spanId}-0${Number(m.traceFlags||t.TraceFlags.NONE).toString(16)}`;g.set(f,e.TRACE_PARENT_HEADER,v),m.traceState&&g.set(f,e.TRACE_STATE_HEADER,m.traceState.serialize())}extract(p,f,g){let m=g.get(f,e.TRACE_PARENT_HEADER);if(!m)return p;let v=Array.isArray(m)?m[0]:m;if(typeof v!="string")return p;let y=d(v);if(!y)return p;y.isRemote=!0;let T=g.get(f,e.TRACE_STATE_HEADER);if(T){let w=Array.isArray(T)?T.join(","):T;y.traceState=new n.TraceState(typeof w=="string"?w:void 0)}return t.trace.setSpanContext(p,y)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}};e.HttpTraceContextPropagator=l}),s_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),a_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var t=Et(),r=t.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),n;(function(o){o.HTTP="http"})(n=e.RPCType||(e.RPCType={}));function s(o,c){return o.setValue(r,c)}e.setRPCMetadata=s;function a(o){return o.deleteValue(r)}e.deleteRPCMetadata=a;function i(o){return o.getValue(r)}e.getRPCMetadata=i}),iu=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var t=Et(),r=class{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};e.AlwaysOffSampler=r}),ou=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var t=Et(),r=class{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};e.AlwaysOnSampler=r}),c_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var t=Et(),r=Zc(),n=iu(),s=ou(),a=class{constructor(i){var o,c,u,d;this._root=i.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new s.AlwaysOnSampler),this._remoteParentSampled=(o=i.remoteParentSampled)!==null&&o!==void 0?o:new s.AlwaysOnSampler,this._remoteParentNotSampled=(c=i.remoteParentNotSampled)!==null&&c!==void 0?c:new n.AlwaysOffSampler,this._localParentSampled=(u=i.localParentSampled)!==null&&u!==void 0?u:new s.AlwaysOnSampler,this._localParentNotSampled=(d=i.localParentNotSampled)!==null&&d!==void 0?d:new n.AlwaysOffSampler}shouldSample(i,o,c,u,d,l){let p=t.trace.getSpanContext(i);return!p||!t.isSpanContextValid(p)?this._root.shouldSample(i,o,c,u,d,l):p.isRemote?p.traceFlags&t.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(i,o,c,u,d,l):this._remoteParentNotSampled.shouldSample(i,o,c,u,d,l):p.traceFlags&t.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(i,o,c,u,d,l):this._localParentNotSampled.shouldSample(i,o,c,u,d,l)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};e.ParentBasedSampler=a}),u_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var t=Et(),r=class{constructor(n=0){this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(n,s){return{decision:t.isValidTraceId(s)&&this._accumulate(s)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return typeof n!="number"||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let s=0;for(let a=0;a<n.length/8;a++){let i=a*8,o=parseInt(n.slice(i,i+8),16);s=(s^o)>>>0}return s}};e.TraceIdRatioBasedSampler=r}),l_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0;function t(n,s){return typeof s=="string"?n===s:s.test(n)}e.urlMatches=t;function r(n,s){if(!s)return!1;for(let a of s)if(t(n,a))return!0;return!1}e.isUrlIgnored=r}),d_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0;function t(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}e.isWrapped=t}),Pr=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,r($v(),e),r(Uv(),e),r(Zc(),e),r(Jc(),e),r(e_(),e),r(t_(),e),r(r_(),e),r(Ts(),e),e.baggageUtils=Qc(),r(ru(),e),r(n_(),e),r(o_(),e),r(s_(),e),r(a_(),e),r(iu(),e),r(ou(),e),r(c_(),e),r(u_(),e),r(Os(),e),r(nu(),e),r(tu(),e),r(eu(),e),r(l_(),e),r(d_(),e),r(Ts(),e)}),p_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"}),su=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var t=Et(),r=Pr(),n=_i(),s=p_(),a=class{constructor(i,o,c,u,d,l,p=[],f=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:t.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=c,this._spanContext=u,this.parentSpanId=l,this.kind=d,this.links=p,this.startTime=r.timeInputToHrTime(f),this.resource=i.resource,this.instrumentationLibrary=i.instrumentationLibrary,this._spanLimits=i.getSpanLimits(),this._spanProcessor=i.getActiveSpanProcessor(),this._spanProcessor.onStart(this,o)}spanContext(){return this._spanContext}setAttribute(i,o){return o==null||this._isSpanEnded()?this:i.length===0?(t.diag.warn(`Invalid attribute key: ${i}`),this):r.isAttributeValue(o)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,i)?this:(this.attributes[i]=o,this):(t.diag.warn(`Invalid attribute value set for key: ${i}`),this)}setAttributes(i){for(let[o,c]of Object.entries(i))this.setAttribute(o,c);return this}addEvent(i,o,c){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(t.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(o)&&(typeof c>"u"&&(c=o),o=void 0),typeof c>"u"&&(c=r.hrTime()),this.events.push({name:i,attributes:o,time:r.timeInputToHrTime(c)}),this)}setStatus(i){return this._isSpanEnded()?this:(this.status=i,this)}updateName(i){return this._isSpanEnded()?this:(this.name=i,this)}end(i=r.hrTime()){if(this._isSpanEnded()){t.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=r.timeInputToHrTime(i),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&t.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(i,o=r.hrTime()){let c={};typeof i=="string"?c[n.SemanticAttributes.EXCEPTION_MESSAGE]=i:i&&(i.code?c[n.SemanticAttributes.EXCEPTION_TYPE]=i.code.toString():i.name&&(c[n.SemanticAttributes.EXCEPTION_TYPE]=i.name),i.message&&(c[n.SemanticAttributes.EXCEPTION_MESSAGE]=i.message),i.stack&&(c[n.SemanticAttributes.EXCEPTION_STACKTRACE]=i.stack)),c[n.SemanticAttributes.EXCEPTION_TYPE]||c[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(s.ExceptionEventName,c,o):t.diag.warn(`Failed to record an exception ${i}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&t.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};e.Span=a}),au=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var t=Et(),r=Pr(),n=r.getEnv(),s=r.TracesSamplerValues.AlwaysOn;e.DEFAULT_CONFIG={sampler:a(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function a(c=r.getEnv()){switch(c.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(o(c));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(o(c))});default:return t.diag.error(`OTEL_TRACES_SAMPLER value "${c.OTEL_TRACES_SAMPLER} invalid, defaulting to ${s}".`),new r.AlwaysOnSampler}}e.buildSamplerFromEnv=a;var i=1;function o(c){if(c.OTEL_TRACES_SAMPLER_ARG===void 0||c.OTEL_TRACES_SAMPLER_ARG==="")return t.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${i}.`),i;let u=Number(c.OTEL_TRACES_SAMPLER_ARG);return isNaN(u)?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${i}.`),i):u<0||u>1?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${i}.`),i):u}}),f_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var t=au();function r(n){let s={sampler:t.buildSamplerFromEnv()},a=Object.assign({},t.DEFAULT_CONFIG,s,n);return a.spanLimits=Object.assign({},t.DEFAULT_CONFIG.spanLimits,n.spanLimits||{}),a}e.mergeConfig=r}),h_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var t=Et(),r=Pr(),n=su(),s=f_(),a=class{constructor(o,c,u){this._tracerProvider=u;let d=s.mergeConfig(c);this._sampler=d.sampler,this._spanLimits=d.spanLimits,this._idGenerator=c.idGenerator||new r.RandomIdGenerator,this.resource=u.resource,this.instrumentationLibrary=o}startSpan(o,c={},u=t.context.active()){var d,l;if(r.isTracingSuppressed(u))return t.diag.debug("Instrumentation suppressed, returning Noop Span"),t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);let p=i(c,u),f=this._idGenerator.generateSpanId(),g,m,v;!p||!t.trace.isSpanContextValid(p)?g=this._idGenerator.generateTraceId():(g=p.traceId,m=p.traceState,v=p.spanId);let y=(d=c.kind)!==null&&d!==void 0?d:t.SpanKind.INTERNAL,T=(l=c.links)!==null&&l!==void 0?l:[],w=r.sanitizeAttributes(c.attributes),R=this._sampler.shouldSample(c.root?t.trace.setSpanContext(u,t.INVALID_SPAN_CONTEXT):u,g,o,y,w,T),O=R.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE,F={traceId:g,spanId:f,traceFlags:O,traceState:m};if(R.decision===t.SamplingDecision.NOT_RECORD)return t.diag.debug("Recording is off, propagating context in a non-recording span"),t.trace.wrapSpanContext(F);let z=new n.Span(this,u,o,F,y,v,T,c.startTime);return z.setAttributes(Object.assign(w,R.attributes)),z}startActiveSpan(o,c,u,d){let l,p,f;if(arguments.length<2)return;arguments.length===2?f=c:arguments.length===3?(l=c,f=u):(l=c,p=u,f=d);let g=p??t.context.active(),m=this.startSpan(o,l,g),v=t.trace.setSpan(g,m);return t.context.with(v,f,void 0,m)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};e.Tracer=a;function i(o,c){if(!o.root)return t.trace.getSpanContext(c)}}),g_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0;function t(){return`unknown_service:${process.argv0}`}e.defaultServiceName=t}),m_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var t=uu(),r=Et(),n=require("util"),s=async(i={})=>{let o=Object.assign(i),c=await Promise.all((o.detectors||[]).map(async u=>{try{let d=await u.detect(o);return r.diag.debug(`${u.constructor.name} found resource.`,d),d}catch(d){return r.diag.debug(`${u.constructor.name} failed: ${d.message}`),t.Resource.empty()}}));return a(c),c.reduce((u,d)=>u.merge(d),t.Resource.empty())};e.detectResources=s;var a=i=>{i.forEach(o=>{if(Object.keys(o.attributes).length>0){let c=n.inspect(o.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(c)}})}}),v_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var t=Et(),r=Pr(),n=_i(),s=Is(),a=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(i){let o={},c=r.getEnv(),u=c.OTEL_RESOURCE_ATTRIBUTES,d=c.OTEL_SERVICE_NAME;if(u)try{let l=this._parseResourceAttributes(u);Object.assign(o,l)}catch(l){t.diag.debug(`EnvDetector failed: ${l.message}`)}return d&&(o[n.ResourceAttributes.SERVICE_NAME]=d),new s.Resource(o)}_parseResourceAttributes(i){if(!i)return{};let o={},c=i.split(this._COMMA_SEPARATOR,-1);for(let u of c){let d=u.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(d.length!==2)continue;let[l,p]=d;if(l=l.trim(),p=p.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(l))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(p))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);o[l]=p}return o}_isValid(i){return i.length<=this._MAX_LENGTH&&this._isPrintableString(i)}_isPrintableString(i){for(let o=0;o<i.length;o++){let c=i.charAt(o);if(c<=" "||c>="~")return!1}return!0}_isValidAndNotEmpty(i){return i.length>0&&this._isValid(i)}};e.envDetector=new a}),__=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var t=Et(),r=_i(),n=Is(),s=class{async detect(a){let i={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(i,a)}_getResourceAttributes(a,i){return a[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||a[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||a[r.ResourceAttributes.PROCESS_COMMAND]===""||a[r.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(t.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},a))}};e.processDetector=new s}),y_=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(v_(),e),r(__(),e)}),E_=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(g_(),e),r(m_(),e),r(y_(),e)}),cu=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(E_(),e)}),uu=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var t=_i(),r=Pr(),n=cu(),s=class{constructor(a){this.attributes=a}static empty(){return s.EMPTY}static default(){return new s({[t.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[t.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_NAME],[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(a){if(!a||!Object.keys(a.attributes).length)return this;let i=Object.assign({},this.attributes,a.attributes);return new s(i)}};e.Resource=s,s.EMPTY=new s({})}),C_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),b_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Is=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(uu(),e),r(cu(),e),r(C_(),e),r(b_(),e)}),T_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var t=Pr(),r=class{constructor(n){this._spanProcessors=n}forceFlush(){let n=[];for(let s of this._spanProcessors)n.push(s.forceFlush());return new Promise(s=>{Promise.all(n).then(()=>{s()}).catch(a=>{t.globalErrorHandler(a||new Error("MultiSpanProcessor: forceFlush failed")),s()})})}onStart(n,s){for(let a of this._spanProcessors)a.onStart(n,s)}onEnd(n){for(let s of this._spanProcessors)s.onEnd(n)}shutdown(){let n=[];for(let s of this._spanProcessors)n.push(s.shutdown());return new Promise((s,a)=>{Promise.all(n).then(()=>{s()},a)})}};e.MultiSpanProcessor=r}),lu=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0;var t=class{onStart(r,n){}onEnd(r){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};e.NoopSpanProcessor=t}),S_=A((e,t)=>{var r=200,n="__lodash_hash_undefined__",s=800,a=16,i=9007199254740991,o="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",l="[object Date]",p="[object Error]",f="[object Function]",g="[object GeneratorFunction]",m="[object Map]",v="[object Number]",y="[object Null]",T="[object Object]",w="[object Proxy]",R="[object RegExp]",O="[object Set]",F="[object String]",z="[object Undefined]",K="[object WeakMap]",J="[object ArrayBuffer]",te="[object DataView]",U="[object Float32Array]",G="[object Float64Array]",Q="[object Int8Array]",ne="[object Int16Array]",ve="[object Int32Array]",de="[object Uint8Array]",X="[object Uint8ClampedArray]",ce="[object Uint16Array]",ie="[object Uint32Array]",pe=/[\\^$.*+?()[\]{}|]/g,he=/^\[object .+?Constructor\]$/,Ce=/^(?:0|[1-9]\d*)$/,_e={};_e[U]=_e[G]=_e[Q]=_e[ne]=_e[ve]=_e[de]=_e[X]=_e[ce]=_e[ie]=!0,_e[o]=_e[c]=_e[J]=_e[d]=_e[te]=_e[l]=_e[p]=_e[f]=_e[m]=_e[v]=_e[T]=_e[R]=_e[O]=_e[F]=_e[K]=!1;var Be=typeof global=="object"&&global&&global.Object===Object&&global,Je=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Be||Je||Function("return this")(),je=typeof e=="object"&&e&&!e.nodeType&&e,xe=je&&typeof t=="object"&&t&&!t.nodeType&&t,it=xe&&xe.exports===je,ut=it&&Be.process,Oe=function(){try{var I=xe&&xe.require&&xe.require("util").types;return I||ut&&ut.binding&&ut.binding("util")}catch{}}(),me=Oe&&Oe.isTypedArray;function Ae(I,B,Y){switch(Y.length){case 0:return I.call(B);case 1:return I.call(B,Y[0]);case 2:return I.call(B,Y[0],Y[1]);case 3:return I.call(B,Y[0],Y[1],Y[2])}return I.apply(B,Y)}function ke(I,B){for(var Y=-1,Ee=Array(I);++Y<I;)Ee[Y]=B(Y);return Ee}function nr(I){return function(B){return I(B)}}function at(I,B){return I?.[B]}function re(I,B){return function(Y){return I(B(Y))}}var Qt=Array.prototype,ir=Function.prototype,ht=Object.prototype,rt=Ke["__core-js_shared__"],xt=ir.toString,lt=ht.hasOwnProperty,Ft=function(){var I=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),Pt=ht.toString,M=xt.call(Object),N=RegExp("^"+xt.call(lt).replace(pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=it?Ke.Buffer:void 0,q=Ke.Symbol,H=Ke.Uint8Array,E=P?P.allocUnsafe:void 0,C=re(Object.getPrototypeOf,Object),L=Object.create,V=ht.propertyIsEnumerable,ue=Qt.splice,fe=q?q.toStringTag:void 0,Re=function(){try{var I=hs(Object,"defineProperty");return I({},"",{}),I}catch{}}(),ye=P?P.isBuffer:void 0,Fe=Math.max,le=Date.now,Me=hs(Ke,"Map"),Nt=hs(Object,"create"),De=function(){function I(){}return function(B){if(!Cn(B))return{};if(L)return L(B);I.prototype=B;var Y=new I;return I.prototype=void 0,Y}}();function Ht(I){var B=-1,Y=I==null?0:I.length;for(this.clear();++B<Y;){var Ee=I[B];this.set(Ee[0],Ee[1])}}function $r(){this.__data__=Nt?Nt(null):{},this.size=0}function Ur(I){var B=this.has(I)&&delete this.__data__[I];return this.size-=B?1:0,B}function Br(I){var B=this.__data__;if(Nt){var Y=B[I];return Y===n?void 0:Y}return lt.call(B,I)?B[I]:void 0}function S(I){var B=this.__data__;return Nt?B[I]!==void 0:lt.call(B,I)}function Z(I,B){var Y=this.__data__;return this.size+=this.has(I)?0:1,Y[I]=Nt&&B===void 0?n:B,this}Ht.prototype.clear=$r,Ht.prototype.delete=Ur,Ht.prototype.get=Br,Ht.prototype.has=S,Ht.prototype.set=Z;function ge(I){var B=-1,Y=I==null?0:I.length;for(this.clear();++B<Y;){var Ee=I[B];this.set(Ee[0],Ee[1])}}function Ge(){this.__data__=[],this.size=0}function Qe(I){var B=this.__data__,Y=se(B,I);if(Y<0)return!1;var Ee=B.length-1;return Y==Ee?B.pop():ue.call(B,Y,1),--this.size,!0}function vt(I){var B=this.__data__,Y=se(B,I);return Y<0?void 0:B[Y][1]}function ur(I){return se(this.__data__,I)>-1}function gn(I,B){var Y=this.__data__,Ee=se(Y,I);return Ee<0?(++this.size,Y.push([I,B])):Y[Ee][1]=B,this}ge.prototype.clear=Ge,ge.prototype.delete=Qe,ge.prototype.get=vt,ge.prototype.has=ur,ge.prototype.set=gn;function mr(I){var B=-1,Y=I==null?0:I.length;for(this.clear();++B<Y;){var Ee=I[B];this.set(Ee[0],Ee[1])}}function mn(){this.size=0,this.__data__={hash:new Ht,map:new(Me||ge),string:new Ht}}function vn(I){var B=io(this,I).delete(I);return this.size-=B?1:0,B}function _n(I){return io(this,I).get(I)}function fr(I){return io(this,I).has(I)}function yn(I,B){var Y=io(this,I),Ee=Y.size;return Y.set(I,B),this.size+=Y.size==Ee?0:1,this}mr.prototype.clear=mn,mr.prototype.delete=vn,mr.prototype.get=_n,mr.prototype.has=fr,mr.prototype.set=yn;function vr(I){var B=this.__data__=new ge(I);this.size=B.size}function En(){this.__data__=new ge,this.size=0}function h(I){var B=this.__data__,Y=B.delete(I);return this.size=B.size,Y}function _(I){return this.__data__.get(I)}function b(I){return this.__data__.has(I)}function D(I,B){var Y=this.__data__;if(Y instanceof ge){var Ee=Y.__data__;if(!Me||Ee.length<r-1)return Ee.push([I,B]),this.size=++Y.size,this;Y=this.__data__=new mr(Ee)}return Y.set(I,B),this.size=Y.size,this}vr.prototype.clear=En,vr.prototype.delete=h,vr.prototype.get=_,vr.prototype.has=b,vr.prototype.set=D;function k(I,B){var Y=vs(I),Ee=!Y&&ms(I),tt=!Y&&!Ee&&Oc(I),gt=!Y&&!Ee&&!tt&&Dc(I),_t=Y||Ee||tt||gt,Ze=_t?ke(I.length,String):[],yt=Ze.length;for(var _r in I)(B||lt.call(I,_r))&&!(_t&&(_r=="length"||tt&&(_r=="offset"||_r=="parent")||gt&&(_r=="buffer"||_r=="byteLength"||_r=="byteOffset")||wc(_r,yt)))&&Ze.push(_r);return Ze}function $(I,B,Y){(Y!==void 0&&!oo(I[B],Y)||Y===void 0&&!(B in I))&&oe(I,B,Y)}function W(I,B,Y){var Ee=I[B];(!(lt.call(I,B)&&oo(Ee,Y))||Y===void 0&&!(B in I))&&oe(I,B,Y)}function se(I,B){for(var Y=I.length;Y--;)if(oo(I[Y][0],B))return Y;return-1}function oe(I,B,Y){B=="__proto__"&&Re?Re(I,B,{configurable:!0,enumerable:!0,value:Y,writable:!0}):I[B]=Y}var et=Im();function Ye(I){return I==null?I===void 0?z:y:fe&&fe in Object(I)?Dm(I):qm(I)}function Ve(I){return di(I)&&Ye(I)==o}function Le(I){if(!Cn(I)||km(I))return!1;var B=ys(I)?N:he;return B.test(Hm(I))}function dt(I){return di(I)&&Ic(I.length)&&!!_e[Ye(I)]}function ym(I){if(!Cn(I))return Mm(I);var B=Pc(I),Y=[];for(var Ee in I)Ee=="constructor"&&(B||!lt.call(I,Ee))||Y.push(Ee);return Y}function Rc(I,B,Y,Ee,tt){I!==B&&et(B,function(gt,_t){if(tt||(tt=new vr),Cn(gt))Em(I,B,_t,Y,Rc,Ee,tt);else{var Ze=Ee?Ee(gs(I,_t),gt,_t+"",I,B,tt):void 0;Ze===void 0&&(Ze=gt),$(I,_t,Ze)}},Ac)}function Em(I,B,Y,Ee,tt,gt,_t){var Ze=gs(I,Y),yt=gs(B,Y),_r=_t.get(yt);if(_r){$(I,Y,_r);return}var hr=gt?gt(Ze,yt,Y+"",I,B,_t):void 0,pi=hr===void 0;if(pi){var Es=vs(yt),Cs=!Es&&Oc(yt),Nc=!Es&&!Cs&&Dc(yt);hr=yt,Es||Cs||Nc?vs(Ze)?hr=Ze:$m(Ze)?hr=wm(Ze):Cs?(pi=!1,hr=Tm(yt,!0)):Nc?(pi=!1,hr=Rm(yt,!0)):hr=[]:Um(yt)||ms(yt)?(hr=Ze,ms(Ze)?hr=Bm(Ze):(!Cn(Ze)||ys(Ze))&&(hr=Am(yt))):pi=!1}pi&&(_t.set(yt,hr),tt(hr,yt,Ee,gt,_t),_t.delete(yt)),$(I,Y,hr)}function Cm(I,B){return jm(Lm(I,B,xc),I+"")}var bm=Re?function(I,B){return Re(I,"toString",{configurable:!0,enumerable:!1,value:Vm(B),writable:!0})}:xc;function Tm(I,B){if(B)return I.slice();var Y=I.length,Ee=E?E(Y):new I.constructor(Y);return I.copy(Ee),Ee}function Sm(I){var B=new I.constructor(I.byteLength);return new H(B).set(new H(I)),B}function Rm(I,B){var Y=B?Sm(I.buffer):I.buffer;return new I.constructor(Y,I.byteOffset,I.length)}function wm(I,B){var Y=-1,Ee=I.length;for(B||(B=Array(Ee));++Y<Ee;)B[Y]=I[Y];return B}function Pm(I,B,Y,Ee){var tt=!Y;Y||(Y={});for(var gt=-1,_t=B.length;++gt<_t;){var Ze=B[gt],yt=Ee?Ee(Y[Ze],I[Ze],Ze,Y,I):void 0;yt===void 0&&(yt=I[Ze]),tt?oe(Y,Ze,yt):W(Y,Ze,yt)}return Y}function Om(I){return Cm(function(B,Y){var Ee=-1,tt=Y.length,gt=tt>1?Y[tt-1]:void 0,_t=tt>2?Y[2]:void 0;for(gt=I.length>3&&typeof gt=="function"?(tt--,gt):void 0,_t&&xm(Y[0],Y[1],_t)&&(gt=tt<3?void 0:gt,tt=1),B=Object(B);++Ee<tt;){var Ze=Y[Ee];Ze&&I(B,Ze,Ee,gt)}return B})}function Im(I){return function(B,Y,Ee){for(var tt=-1,gt=Object(B),_t=Ee(B),Ze=_t.length;Ze--;){var yt=_t[I?Ze:++tt];if(Y(gt[yt],yt,gt)===!1)break}return B}}function io(I,B){var Y=I.__data__;return Nm(B)?Y[typeof B=="string"?"string":"hash"]:Y.map}function hs(I,B){var Y=at(I,B);return Le(Y)?Y:void 0}function Dm(I){var B=lt.call(I,fe),Y=I[fe];try{I[fe]=void 0;var Ee=!0}catch{}var tt=Pt.call(I);return Ee&&(B?I[fe]=Y:delete I[fe]),tt}function Am(I){return typeof I.constructor=="function"&&!Pc(I)?De(C(I)):{}}function wc(I,B){var Y=typeof I;return B=B??i,!!B&&(Y=="number"||Y!="symbol"&&Ce.test(I))&&I>-1&&I%1==0&&I<B}function xm(I,B,Y){if(!Cn(Y))return!1;var Ee=typeof B;return(Ee=="number"?_s(Y)&&wc(B,Y.length):Ee=="string"&&B in Y)?oo(Y[B],I):!1}function Nm(I){var B=typeof I;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?I!=="__proto__":I===null}function km(I){return!!Ft&&Ft in I}function Pc(I){var B=I&&I.constructor,Y=typeof B=="function"&&B.prototype||ht;return I===Y}function Mm(I){var B=[];if(I!=null)for(var Y in Object(I))B.push(Y);return B}function qm(I){return Pt.call(I)}function Lm(I,B,Y){return B=Fe(B===void 0?I.length-1:B,0),function(){for(var Ee=arguments,tt=-1,gt=Fe(Ee.length-B,0),_t=Array(gt);++tt<gt;)_t[tt]=Ee[B+tt];tt=-1;for(var Ze=Array(B+1);++tt<B;)Ze[tt]=Ee[tt];return Ze[B]=Y(_t),Ae(I,this,Ze)}}function gs(I,B){if(!(B==="constructor"&&typeof I[B]=="function")&&B!="__proto__")return I[B]}var jm=Fm(bm);function Fm(I){var B=0,Y=0;return function(){var Ee=le(),tt=a-(Ee-Y);if(Y=Ee,tt>0){if(++B>=s)return arguments[0]}else B=0;return I.apply(void 0,arguments)}}function Hm(I){if(I!=null){try{return xt.call(I)}catch{}try{return I+""}catch{}}return""}function oo(I,B){return I===B||I!==I&&B!==B}var ms=Ve(function(){return arguments}())?Ve:function(I){return di(I)&&lt.call(I,"callee")&&!V.call(I,"callee")},vs=Array.isArray;function _s(I){return I!=null&&Ic(I.length)&&!ys(I)}function $m(I){return di(I)&&_s(I)}var Oc=ye||Wm;function ys(I){if(!Cn(I))return!1;var B=Ye(I);return B==f||B==g||B==u||B==w}function Ic(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=i}function Cn(I){var B=typeof I;return I!=null&&(B=="object"||B=="function")}function di(I){return I!=null&&typeof I=="object"}function Um(I){if(!di(I)||Ye(I)!=T)return!1;var B=C(I);if(B===null)return!0;var Y=lt.call(B,"constructor")&&B.constructor;return typeof Y=="function"&&Y instanceof Y&&xt.call(Y)==M}var Dc=me?nr(me):dt;function Bm(I){return Pm(I,Ac(I))}function Ac(I){return _s(I)?k(I,!0):ym(I)}var Gm=Om(function(I,B,Y){Rc(I,B,Y)});function Vm(I){return function(){return I}}function xc(I){return I}function Wm(){return!1}t.exports=Gm}),R_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var t=Et(),r=Pr(),n=class{constructor(s,a){this._exporter=s,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let i=r.getEnv();this._maxExportBatchSize=typeof a?.maxExportBatchSize=="number"?a.maxExportBatchSize:i.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof a?.maxQueueSize=="number"?a.maxQueueSize:i.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof a?.scheduledDelayMillis=="number"?a.scheduledDelayMillis:i.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof a?.exportTimeoutMillis=="number"?a.exportTimeoutMillis:i.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(s){}onEnd(s){this._isShutdown||this._addToBuffer(s)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((s,a)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(s).catch(i=>{a(i)})}),this._shuttingDownPromise)}_addToBuffer(s){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(s),this._maybeStartTimer())}_flushAll(){return new Promise((s,a)=>{let i=[],o=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let c=0,u=o;c<u;c++)i.push(this._flushOneBatch());Promise.all(i).then(()=>{s()}).catch(a)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((s,a)=>{let i=setTimeout(()=>{a(new Error("Timeout"))},this._exportTimeoutMillis);t.context.with(r.suppressTracing(t.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),o=>{var c;clearTimeout(i),o.code===r.ExportResultCode.SUCCESS?s():a((c=o.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(s=>{r.globalErrorHandler(s)})},this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};e.BatchSpanProcessorBase=n}),w_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var t=R_(),r=class extends t.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=r}),P_=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(w_(),e)}),du=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(P_(),e)}),O_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var t=Et(),r=Pr(),n=Is(),s=pu(),a=au(),i=T_(),o=lu(),c=S_(),u=du(),d;(function(p){p[p.resolved=0]="resolved",p[p.timeout=1]="timeout",p[p.error=2]="error",p[p.unresolved=3]="unresolved"})(d=e.ForceFlushState||(e.ForceFlushState={}));var l=class{constructor(p={}){var f;this._registeredSpanProcessors=[],this._tracers=new Map;let g=c({},a.DEFAULT_CONFIG,p);this.resource=(f=g.resource)!==null&&f!==void 0?f:n.Resource.empty(),this.resource=n.Resource.default().merge(this.resource),this._config=Object.assign({},g,{resource:this.resource});let m=this._buildExporterFromEnv();if(m!==void 0){let v=new u.BatchSpanProcessor(m);this.activeSpanProcessor=v}else this.activeSpanProcessor=new o.NoopSpanProcessor}getTracer(p,f){let g=`${p}@${f||""}`;return this._tracers.has(g)||this._tracers.set(g,new s.Tracer({name:p,version:f},this._config,this)),this._tracers.get(g)}addSpanProcessor(p){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(f=>t.diag.error("Error while trying to shutdown current span processor",f)),this._registeredSpanProcessors.push(p),this.activeSpanProcessor=new i.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(p={}){t.trace.setGlobalTracerProvider(this),p.propagator===void 0&&(p.propagator=this._buildPropagatorFromEnv()),p.contextManager&&t.context.setGlobalContextManager(p.contextManager),p.propagator&&t.propagation.setGlobalPropagator(p.propagator)}forceFlush(){let p=this._config.forceFlushTimeoutMillis,f=this._registeredSpanProcessors.map(g=>new Promise(m=>{let v,y=setTimeout(()=>{m(new Error(`Span processor did not completed within timeout period of ${p} ms`)),v=d.timeout},p);g.forceFlush().then(()=>{clearTimeout(y),v!==d.timeout&&(v=d.resolved,m(v))}).catch(T=>{clearTimeout(y),v=d.error,m(T)})}));return new Promise((g,m)=>{Promise.all(f).then(v=>{let y=v.filter(T=>T!==d.resolved);y.length>0?m(y):g()}).catch(v=>m([v]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(p){var f;return(f=l._registeredPropagators.get(p))===null||f===void 0?void 0:f()}_getSpanExporter(p){var f;return(f=l._registeredExporters.get(p))===null||f===void 0?void 0:f()}_buildPropagatorFromEnv(){let p=Array.from(new Set(r.getEnv().OTEL_PROPAGATORS)),f=p.map(g=>{let m=this._getPropagator(g);return m||t.diag.warn(`Propagator "${g}" requested through environment variable is unavailable.`),m}).reduce((g,m)=>(m&&g.push(m),g),[]);if(f.length!==0)return p.length===1?f[0]:new r.CompositePropagator({propagators:f})}_buildExporterFromEnv(){let p=r.getEnv().OTEL_TRACES_EXPORTER;if(p==="none")return;let f=this._getSpanExporter(p);return f||t.diag.error(`Exporter "${p}" requested through environment variable is unavailable.`),f}};e.BasicTracerProvider=l,l._registeredPropagators=new Map([["tracecontext",()=>new r.HttpTraceContextPropagator],["baggage",()=>new r.HttpBaggagePropagator]]),l._registeredExporters=new Map}),I_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var t=Pr(),r=class{export(n,s){return this._sendSpans(n,s)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(n){return{traceId:n.spanContext().traceId,parentId:n.parentSpanId,name:n.name,id:n.spanContext().spanId,kind:n.kind,timestamp:t.hrTimeToMicroseconds(n.startTime),duration:t.hrTimeToMicroseconds(n.duration),attributes:n.attributes,status:n.status,events:n.events}}_sendSpans(n,s){for(let a of n)console.log(this._exportInfo(a));if(s)return s({code:t.ExportResultCode.SUCCESS})}};e.ConsoleSpanExporter=r}),D_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var t=Pr(),r=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(n,s){if(this._stopped)return s({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...n),setTimeout(()=>s({code:t.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};e.InMemorySpanExporter=r}),A_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),x_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var t=Et(),r=Pr(),n=class{constructor(s){this._exporter=s,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(s){}onEnd(s){this._isShutdown||t.context.with(r.suppressTracing(t.context.active()),()=>{this._exporter.export([s],a=>{var i;a.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler((i=a.error)!==null&&i!==void 0?i:new Error(`SimpleSpanProcessor: span export failed (status ${a})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((s,a)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(s).catch(i=>{a(i)})}),this._shuttingDownPromise)}};e.SimpleSpanProcessor=n}),N_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),k_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),M_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),q_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),pu=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(h_(),e),r(O_(),e),r(du(),e),r(I_(),e),r(D_(),e),r(A_(),e),r(x_(),e),r(N_(),e),r(lu(),e),r(su(),e),r(k_(),e),r(M_(),e),r(q_(),e)}),L_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var t=kt();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1,n=function(a){if(r)return a;try{var i=pu(),o=Et(),c=new i.BasicTracerProvider,u=c.getTracer("applicationinsights tracer"),d=a.setTracer;a.setTracer=function(l){var p=l.startSpan;l.startSpan=function(f,g,m){var v=p.call(this,f,g,m),y=v.end;return v.end=function(){var T=y.apply(this,arguments);return t.channel.publish("azure-coretracing",v),T},v},l[e.AzureMonitorSymbol]=!0,d.call(this,l)},o.trace.getSpan(o.context.active()),a.setTracer(u),r=!0}catch{}return a};e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:n};function s(){t.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}e.enable=s}),j_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var t=kt(),r=function(s){var a=s.prototype._emit;return s.prototype._emit=function(i,o){var c=a.apply(this,arguments);if(!o){var u=c;u||(u=a.call(this,i,!0)),t.channel.publish("bunyan",{level:i.level,result:u})}return c},s};e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("bunyan",e.bunyan)}e.enable=n}),F_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var t=kt(),r=require("stream"),n=function(a){var i=new r.Writable,o=new r.Writable;i.write=function(g){if(!g)return!0;var m=g.toString();return t.channel.publish("console",{message:m}),!0},o.write=function(g){if(!g)return!0;var m=g.toString();return t.channel.publish("console",{message:m,stderr:!0}),!0};for(var c=new a.Console(i,o),u=["log","info","warn","error","dir","time","timeEnd","trace","assert"],d=function(g){var m=a[g];m&&(a[g]=function(){if(c[g])try{c[g].apply(c,arguments)}catch{}return m.apply(a,arguments)})},l=0,p=u;l<p.length;l++){var f=p[l];d(f)}return a};e.console={versionSpecifier:">= 4.0.0",patch:n};function s(){t.channel.registerMonkeyPatch("console",e.console),require("console")}e.enable=s}),H_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var t=kt(),r=function(s){var a=s.Server.prototype.connect;return s.Server.prototype.connect=function(){var i=a.apply(this,arguments),o=this.s.pool.write;this.s.pool.write=function(){var u=typeof arguments[1]=="function"?1:2;return typeof arguments[u]=="function"&&(arguments[u]=t.channel.bindToContext(arguments[u])),o.apply(this,arguments)};var c=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=t.channel.bindToContext(arguments[1])),c.apply(this,arguments)},i},s};e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}e.enable=n}),$_=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(c){for(var u,d=1,l=arguments.length;d<l;d++){u=arguments[d];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(c[p]=u[p])}return c},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var r=kt(),n=function(c){var u=c.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(l){return l()})}}}),d={};return u.on("started",function(l){d[l.requestId]||(d[l.requestId]=t(t({},l),{time:new Date}))}),u.on("succeeded",function(l){var p=d[l.requestId];p&&delete d[l.requestId],typeof l.operationId=="function"?l.operationId(function(){return r.channel.publish("mongodb",{startedData:p,event:l,succeeded:!0})}):r.channel.publish("mongodb",{startedData:p,event:l,succeeded:!0})}),u.on("failed",function(l){var p=d[l.requestId];p&&delete d[l.requestId],typeof l.operationId=="function"?l.operationId(function(){return r.channel.publish("mongodb",{startedData:p,event:l,succeeded:!1})}):r.channel.publish("mongodb",{startedData:p,event:l,succeeded:!1})}),c},s=function(c){var u=c.instrument(),d={},l={};return u.on("started",function(p){d[p.requestId]||(l[p.requestId]=r.channel.bindToContext(function(f){return f()}),d[p.requestId]=t(t({},p),{time:new Date}))}),u.on("succeeded",function(p){var f=d[p.requestId];f&&delete d[p.requestId],typeof p=="object"&&typeof l[p.requestId]=="function"&&(l[p.requestId](function(){return r.channel.publish("mongodb",{startedData:f,event:p,succeeded:!0})}),delete l[p.requestId])}),u.on("failed",function(p){var f=d[p.requestId];f&&delete d[p.requestId],typeof p=="object"&&typeof l[p.requestId]=="function"&&(l[p.requestId](function(){return r.channel.publish("mongodb",{startedData:f,event:p,succeeded:!1})}),delete l[p.requestId])}),c},a=function(c){var u=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var d=u.apply(this,arguments),l=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var f=typeof arguments[1]=="function"?1:2;return typeof arguments[f]=="function"&&(arguments[f]=r.channel.bindToContext(arguments[f])),l.apply(this,arguments)};var p=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=r.channel.bindToContext(arguments[1])),p.apply(this,arguments)},d},c},i=function(c){a(c);var u=c.instrument(),d={},l={};return u.on("started",function(p){d[p.requestId]||(l[p.requestId]=r.channel.bindToContext(function(f){return f()}),d[p.requestId]=p)}),u.on("succeeded",function(p){var f=d[p.requestId];f&&delete d[p.requestId],typeof p=="object"&&typeof l[p.requestId]=="function"&&(l[p.requestId](function(){return r.channel.publish("mongodb",{startedData:f,event:p,succeeded:!0})}),delete l[p.requestId])}),u.on("failed",function(p){var f=d[p.requestId];f&&delete d[p.requestId],typeof p=="object"&&typeof l[p.requestId]=="function"&&(l[p.requestId](function(){return r.channel.publish("mongodb",{startedData:f,event:p,succeeded:!1})}),delete l[p.requestId])}),c};e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:n},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:s},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:i};function o(){r.channel.registerMonkeyPatch("mongodb",e.mongo2),r.channel.registerMonkeyPatch("mongodb",e.mongo3),r.channel.registerMonkeyPatch("mongodb",e.mongo330)}e.enable=o}),U_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var t=kt(),r=require("path"),n=function(a,i){var o=function(f,g){return function(m,v){var y=f[m];y&&(f[m]=function(){for(var T=arguments.length-1,w=arguments.length-1;w>=0;--w)if(typeof arguments[w]=="function"){T=w;break}else if(typeof arguments[w]<"u")break;var R=arguments[T],O={result:null,startTime:null,startDate:null};typeof R=="function"&&(v?(O.startTime=process.hrtime(),O.startDate=new Date,arguments[T]=t.channel.bindToContext(v(O,R))):arguments[T]=t.channel.bindToContext(R));var F=y.apply(this,arguments);return O.result=F,F})}},c=function(f,g){return o(f.prototype,g+".prototype")},u=["connect","changeUser","ping","statistics","end"],d=require(r.dirname(i)+"/lib/Connection");u.forEach(function(f){return c(d,"Connection")(f)}),o(d,"Connection")("createQuery",function(f,g){return function(m){var v=process.hrtime(f.startTime),y=v[0]*1e3+v[1]/1e6|0;t.channel.publish("mysql",{query:f.result,callbackArgs:arguments,err:m,duration:y,time:f.startDate}),g.apply(this,arguments)}});var l=["_enqueueCallback"],p=require(r.dirname(i)+"/lib/Pool");return l.forEach(function(f){return c(p,"Pool")(f)}),a};e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:n};function s(){t.channel.registerMonkeyPatch("mysql",e.mysql)}e.enable=s}),B_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var t=kt();function r(s){var a=s.prototype.connect;return s.prototype.connect=function(i){return i&&(arguments[0]=t.channel.bindToContext(i)),a.apply(this,arguments)},s}e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}e.enable=n}),G_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var t=kt(),r=require("events");function n(i,o){var c=i.Client.prototype.query,u="__diagnosticOriginalFunc";return i.Client.prototype.query=function(d,l,p){var f={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},g=process.hrtime(),m;function v(y){y&&y[u]&&(y=y[u]);var T=t.channel.bindToContext(function(w,R){var O=process.hrtime(g);if(f.result=R&&{rowCount:R.rowCount,command:R.command},f.error=w,f.duration=Math.ceil(O[0]*1e3+O[1]/1e6),t.channel.publish("postgres",f),w){if(y)return y.apply(this,arguments);m&&m instanceof r.EventEmitter&&m.emit("error",w)}else y&&y.apply(this,arguments)});try{return Object.defineProperty(T,u,{value:y}),T}catch{return y}}try{typeof d=="string"?l instanceof Array?(f.query.preparable={text:d,args:l},p=v(p)):(f.query.text=d,p?p=v(p):l=v(l)):(typeof d.name=="string"?f.query.plan=d.name:d.values instanceof Array?f.query.preparable={text:d.text,args:d.values}:f.query.text=d.text,p?p=v(p):l?l=v(l):d.callback=v(d.callback))}catch{return c.apply(this,arguments)}return arguments[0]=d,arguments[1]=l,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,m=c.apply(this,arguments),m},i}function s(i,o){var c=i.Client.prototype.query,u="__diagnosticOriginalFunc";return i.Client.prototype.query=function(d,l,p){var f=this,g=!!p,m={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},v=process.hrtime(),y;function T(w){w&&w[u]&&(w=w[u]);var R=t.channel.bindToContext(function(O,F){var z=process.hrtime(v);if(m.result=F&&{rowCount:F.rowCount,command:F.command},m.error=O,m.duration=Math.ceil(z[0]*1e3+z[1]/1e6),t.channel.publish("postgres",m),O){if(w)return w.apply(this,arguments);y&&y instanceof r.EventEmitter&&y.emit("error",O)}else w&&w.apply(this,arguments)});try{return Object.defineProperty(R,u,{value:w}),R}catch{return w}}try{typeof d=="string"?l instanceof Array?(m.query.preparable={text:d,args:l},g=typeof p=="function",p=g?T(p):p):(m.query.text=d,p?(g=typeof p=="function",p=g?T(p):p):(g=typeof l=="function",l=g?T(l):l)):(typeof d.name=="string"?m.query.plan=d.name:d.values instanceof Array?m.query.preparable={text:d.text,args:d.values}:m.query.text=d.text,p?(g=typeof p=="function",p=T(p)):l?(g=typeof l=="function",l=g?T(l):l):(g=typeof d.callback=="function",d.callback=g?T(d.callback):d.callback))}catch{return c.apply(this,arguments)}return arguments[0]=d,arguments[1]=l,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,y=c.apply(this,arguments),g?y:y.then(function(w){return T()(void 0,w),new f._Promise(function(R,O){R(w)})}).catch(function(w){return T()(w,void 0),new f._Promise(function(R,O){O(w)})})},i}e.postgres6={versionSpecifier:"6.*",patch:n},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:s};function a(){t.channel.registerMonkeyPatch("pg",e.postgres6),t.channel.registerMonkeyPatch("pg",e.postgres7)}e.enable=a}),V_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var t=kt(),r=function(s){var a=s.RedisClient.prototype.internal_send_command;return s.RedisClient.prototype.internal_send_command=function(i){if(i){var o=i.callback;if(!o||!o.pubsubBound){var c=this.address,u=process.hrtime(),d=new Date;i.callback=t.channel.bindToContext(function(l,p){var f=process.hrtime(u),g=f[0]*1e3+f[1]/1e6|0;t.channel.publish("redis",{duration:g,address:c,commandObj:i,err:l,result:p,time:d}),typeof o=="function"&&o.apply(this,arguments)}),i.callback.pubsubBound=!0}}return a.call(this,i)},s};e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("redis",e.redis)}e.enable=n}),W_=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(a){for(var i,o=1,c=arguments.length;o<c;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(a[u]=i[u])}return a},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var r=kt(),n=function(a){var i=a.Connection.prototype.makeRequest;return a.Connection.prototype.makeRequest=function(){function o(u){var d=process.hrtime(),l={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return r.channel.bindToContext(function(p,f,g){var m=process.hrtime(d);l=t(t({},l),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!p&&{rowCount:f,rows:g},query:{text:this.parametersByName.statement.value},error:p,duration:Math.ceil(m[0]*1e3+m[1]/1e6)}),r.channel.publish("tedious",l),u.call(this,p,f,g)})}var c=arguments[0];arguments[0].callback=o(c.callback),i.apply(this,arguments)},a};e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:n};function s(){r.channel.registerMonkeyPatch("tedious",e.tedious)}e.enable=s}),K_=A(e=>{"use strict";var t=e&&e.__extends||function(){var o=function(c,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,l){d.__proto__=l}||function(d,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(d[p]=l[p])},o(c,u)};return function(c,u){o(c,u);function d(){this.constructor=c}c.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}}(),r=e&&e.__rest||function(o,c){var u={};for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&c.indexOf(d)<0&&(u[d]=o[d]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,d=Object.getOwnPropertySymbols(o);l<d.length;l++)c.indexOf(d[l])<0&&Object.prototype.propertyIsEnumerable.call(o,d[l])&&(u[d[l]]=o[d[l]]);return u};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var n=kt(),s=function(o){var c=o.Logger.prototype.log,u,d=function(l,p,f){var g;return u===o.config.npm.levels?g="npm":u===o.config.syslog.levels?g="syslog":g="unknown",n.channel.publish("winston",{level:l,message:p,meta:f,levelKind:g}),p};return o.Logger.prototype.log=function(){return u=this.levels,!this.filters||this.filters.length===0?this.filters=[d]:this.filters[this.filters.length-1]!==d&&(this.filters=this.filters.filter(function(l){return l!==d}),this.filters.push(d)),c.apply(this,arguments)},o},a=function(o){var c=function(f,g){var m;return f.config.npm.levels[g]!=null?m="npm":f.config.syslog.levels[g]!=null?m="syslog":m="unknown",m},u=function(f){t(g,f);function g(m,v){var y=f.call(this,v)||this;return y.winston=m,y}return g.prototype.log=function(m,v){var y=m.message,T=m.level,w=m.meta,R=r(m,["message","level","meta"]);T=typeof Symbol.for=="function"?m[Symbol.for("level")]:T,y=m instanceof Error?m:y;var O=c(this.winston,T);w=w||{};for(var F in R)R.hasOwnProperty(F)&&(w[F]=R[F]);n.channel.publish("winston",{message:y,level:T,levelKind:O,meta:w}),v()},g}(o.Transport);function d(){var f=arguments[0].levels||o.config.npm.levels,g;for(var m in f)f.hasOwnProperty(m)&&(g=g===void 0||f[m]>f[g]?m:g);this.add(new u(o,{level:g}))}var l=o.createLogger;o.createLogger=function(){var f=arguments[0].levels||o.config.npm.levels,g;for(var m in f)f.hasOwnProperty(m)&&(g=g===void 0||f[m]>f[g]?m:g);var v=l.apply(this,arguments);v.add(new u(o,{level:g}));var y=v.configure;return v.configure=function(){y.apply(this,arguments),d.apply(this,arguments)},v};var p=o.configure;return o.configure=function(){p.apply(this,arguments),d.apply(this,arguments)},o.add(new u(o)),o};e.winston3={versionSpecifier:"3.x",patch:a},e.winston2={versionSpecifier:"2.x",patch:s};function i(){n.channel.registerMonkeyPatch("winston",e.winston2),n.channel.registerMonkeyPatch("winston",e.winston3)}e.enable=i}),z_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var t=L_();e.azuresdk=t;var r=j_();e.bunyan=r;var n=F_();e.console=n;var s=H_();e.mongodbCore=s;var a=$_();e.mongodb=a;var i=U_();e.mysql=i;var o=B_();e.pgPool=o;var c=G_();e.pg=c;var u=V_();e.redis=u;var d=W_();e.tedious=d;var l=K_();e.winston=l;function p(){r.enable(),n.enable(),s.enable(),a.enable(),i.enable(),c.enable(),o.enable(),u.enable(),l.enable(),t.enable(),d.enable()}e.enable=p}),Ds=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var t=Hc(),r=Kt();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n="DiagnosticChannel";if(e.IsInitialized){s=z_(),a=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",i=a.split(","),o={bunyan:s.bunyan,console:s.console,mongodb:s.mongodb,mongodbCore:s.mongodbCore,mysql:s.mysql,redis:s.redis,pg:s.pg,pgPool:s.pgPool,winston:s.winston,azuresdk:s.azuresdk};for(c in o)i.indexOf(c)===-1&&(o[c].enable(),r.info(n,"Subscribed to "+c+" events"));i.length>0&&r.info(n,"Some modules will not be patched",i)}else r.info(n,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var s,a,i,o,c;function u(d){if(e.IsInitialized){var l=kt();l.channel.addContextPreservation(d),l.channel.spanContextPropagator=t.AsyncScopeManager}}e.registerContextPreservation=u}),yi=A((e,t)=>{"use strict";t.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),yr=A((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(d){for(var l,p=1,f=arguments.length;p<f;p++){l=arguments[p];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(d[g]=l[g])}return d},r.apply(this,arguments)},n=require("http"),s=require("https"),a=require("url"),i=require("constants"),o=Kt(),c=yi(),u=function(){function d(){}return d.getCookie=function(l,p){var f="";if(l&&l.length&&typeof p=="string")for(var g=l+"=",m=p.split(";"),v=0;v<m.length;v++){var p=m[v];if(p=d.trim(p),p&&p.indexOf(g)===0){f=p.substring(g.length,m[v].length);break}}return f},d.trim=function(l){return typeof l=="string"?l.replace(/^\s+|\s+$/g,""):""},d.int32ArrayToBase64=function(l){var p=function(y,T){return String.fromCharCode(y>>T&255)},f=function(y){return p(y,24)+p(y,16)+p(y,8)+p(y,0)},g=l.map(f).join(""),m=Buffer.from?Buffer.from(g,"binary"):new Buffer(g,"binary"),v=m.toString("base64");return v.substr(0,v.indexOf("="))},d.random32=function(){return 4294967296*Math.random()|0},d.randomu32=function(){return d.random32()+2147483648},d.w3cTraceId=function(){for(var l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p="",f,g=0;g<4;g++)f=d.random32(),p+=l[f&15]+l[f>>4&15]+l[f>>8&15]+l[f>>12&15]+l[f>>16&15]+l[f>>20&15]+l[f>>24&15]+l[f>>28&15];var m=l[8+Math.random()*4|0];return p.substr(0,8)+p.substr(9,4)+"4"+p.substr(13,3)+m+p.substr(16,3)+p.substr(19,12)},d.w3cSpanId=function(){return d.w3cTraceId().substring(16)},d.isValidW3CId=function(l){return l.length===32&&l!=="00000000000000000000000000000000"},d.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},d.isError=function(l){return l instanceof Error},d.isPrimitive=function(l){var p=typeof l;return p==="string"||p==="number"||p==="boolean"},d.isDate=function(l){return Object.prototype.toString.call(l)==="[object Date]"},d.msToTimeSpan=function(l){(isNaN(l)||l<0)&&(l=0);var p=(l/1e3%60).toFixed(7).replace(/0{0,4}$/,""),f=""+Math.floor(l/(1e3*60))%60,g=""+Math.floor(l/(1e3*60*60))%24,m=Math.floor(l/(1e3*60*60*24));p=p.indexOf(".")<2?"0"+p:p,f=f.length<2?"0"+f:f,g=g.length<2?"0"+g:g;var v=m>0?m+".":"";return v+g+":"+f+":"+p},d.extractError=function(l){var p=l;return{message:l.message,code:p.code||p.id||""}},d.extractObject=function(l){return l instanceof Error?d.extractError(l):typeof l.toJSON=="function"?l.toJSON():l},d.validateStringMap=function(l){if(typeof l!="object"){o.info("Invalid properties dropped from payload");return}var p={};for(var f in l){var g="",m=l[f],v=typeof m;if(d.isPrimitive(m))g=m.toString();else if(m===null||v==="undefined")g="";else if(v==="function"){o.info("key: "+f+" was function; will not serialize");continue}else{var y=d.isArray(m)?m:d.extractObject(m);try{d.isPrimitive(y)?g=y:g=JSON.stringify(y)}catch(T){g=m.constructor.name.toString()+" (Error: "+T.message+")",o.info("key: "+f+", could not be serialized")}}p[f]=g.substring(0,d.MAX_PROPERTY_LENGTH)}return p},d.canIncludeCorrelationHeader=function(l,p){var f=l&&l.config&&l.config.correlationHeaderExcludedDomains;if(!f||f.length==0||!p)return!0;for(var g=0;g<f.length;g++){var m=new RegExp(f[g].replace(/\./g,".").replace(/\*/g,".*"));if(m.test(a.parse(p).hostname))return!1}return!0},d.getCorrelationContextTarget=function(l,p){var f=l.headers&&l.headers[c.requestContextHeader];if(f)for(var g=f.split(","),m=0;m<g.length;++m){var v=g[m].split("=");if(v.length==2&&v[0]==p)return v[1]}},d.makeRequest=function(l,p,f,g){p&&p.indexOf("//")===0&&(p="https:"+p);var m=a.parse(p),v=r(r({},f),{host:m.hostname,port:m.port,path:m.pathname}),y=void 0;if(m.protocol==="https:"&&(y=l.proxyHttpsUrl||void 0),m.protocol==="http:"&&(y=l.proxyHttpUrl||void 0),y){y.indexOf("//")===0&&(y="http:"+y);var T=a.parse(y);T.protocol==="https:"?(o.info("Proxies that use HTTPS are not supported"),y=void 0):v=r(r({},v),{host:T.hostname,port:T.port||"80",path:p,headers:r(r({},v.headers),{Host:m.hostname})})}var w=m.protocol==="https:"&&!y;return w&&l.httpsAgent!==void 0?v.agent=l.httpsAgent:!w&&l.httpAgent!==void 0?v.agent=l.httpAgent:w&&(v.agent=d.tlsRestrictedAgent),w?s.request(v,g):n.request(v,g)},d.safeIncludeCorrelationHeader=function(l,p,f){var g;if(typeof f=="string")g=f;else if(f instanceof Array)g=f.join(",");else if(f&&typeof f.toString=="function")try{g=f.toString()}catch(m){o.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",m,f)}g?d.addCorrelationIdHeaderFromString(l,p,g):p.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+l.config.correlationId)},d.dumpObj=function(l){var p=Object.prototype.toString.call(l),f="";return p==="[object Error]"?f="{ stack: '"+l.stack+"', message: '"+l.message+"', name: '"+l.name+"'":f=JSON.stringify(l),p+f},d.addCorrelationIdHeaderFromString=function(l,p,f){var g=f.split(","),m=c.requestContextSourceKey+"=",v=g.some(function(y){return y.substring(0,m.length)===m});v||p.setHeader(c.requestContextHeader,f+","+c.requestContextSourceKey+"="+l.config.correlationId)},d.MAX_PROPERTY_LENGTH=8192,d.tlsRestrictedAgent=new s.Agent({keepAlive:!0,maxSockets:25,secureOptions:i.SSL_OP_NO_SSLv2|i.SSL_OP_NO_SSLv3|i.SSL_OP_NO_TLSv1|i.SSL_OP_NO_TLSv1_1}),d}();t.exports=u}),Hn=A((e,t)=>{"use strict";var r=yr(),n=Kt(),s=function(){function a(){}return a.queryCorrelationId=function(i,o){var c=i.profileQueryEndpoint+"/api/profiles/"+i.instrumentationKey+"/appId";if(a.completedLookups.hasOwnProperty(c)){o(a.completedLookups[c]);return}else if(a.pendingLookups[c]){a.pendingLookups[c].push(o);return}a.pendingLookups[c]=[o];var u=function(){if(a.pendingLookups[c]){var d={method:"GET",disableAppInsightsAutoCollection:!0};n.info(a.TAG,d);var l=r.makeRequest(i,c,d,function(p){if(p.statusCode===200){var f="";p.setEncoding("utf-8"),p.on("data",function(g){f+=g}),p.on("end",function(){n.info(a.TAG,f);var g=a.correlationIdPrefix+f;a.completedLookups[c]=g,a.pendingLookups[c]&&a.pendingLookups[c].forEach(function(m){return m(g)}),delete a.pendingLookups[c]})}else p.statusCode>=400&&p.statusCode<500?(a.completedLookups[c]=void 0,delete a.pendingLookups[c]):setTimeout(u,i.correlationIdRetryIntervalMs)});l&&(l.on("error",function(p){n.warn(a.TAG,p)}),l.end())}};setTimeout(u,0)},a.cancelCorrelationIdQuery=function(i,o){var c=i.profileQueryEndpoint+"/api/profiles/"+i.instrumentationKey+"/appId",u=a.pendingLookups[c];u&&(a.pendingLookups[c]=u.filter(function(d){return d!=o}),a.pendingLookups[c].length==0&&delete a.pendingLookups[c])},a.generateRequestId=function(i){if(i){i=i[0]=="|"?i:"|"+i,i[i.length-1]!=="."&&(i+=".");var o=(a.currentRootId++).toString(16);return a.appendSuffix(i,o,"_")}else return a.generateRootId()},a.getRootId=function(i){var o=i.indexOf(".");o<0&&(o=i.length);var c=i[0]==="|"?1:0;return i.substring(c,o)},a.generateRootId=function(){return"|"+r.w3cTraceId()+"."},a.appendSuffix=function(i,o,c){if(i.length+o.length<a.requestIdMaxLength)return i+o+c;var u=a.requestIdMaxLength-9;if(i.length>u)for(;u>1;--u){var d=i[u-1];if(d==="."||d==="_")break}if(u<=1)return a.generateRootId();for(o=r.randomu32().toString(16);o.length<8;)o="0"+o;return i.substring(0,u)+o+"#"},a.TAG="CorrelationIdManager",a.correlationIdPrefix="cid-v1:",a.w3cEnabled=!0,a.pendingLookups={},a.completedLookups={},a.requestIdMaxLength=1024,a.currentRootId=r.randomu32(),a}();t.exports=s}),uo=A((e,t)=>{"use strict";var r=yr(),n=Hn(),s=function(){function a(i,o){if(this.traceFlag=a.DEFAULT_TRACE_FLAG,this.version=a.DEFAULT_VERSION,i&&typeof i=="string")if(i.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var c=i.trim().split("-"),u=c.length;u>=4?(this.version=c[0],this.traceId=c[1],this.spanId=c[2],this.traceFlag=c[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=a.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),this.version==="00"&&u!==4&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=a.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=a.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=a.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),a.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),a.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(o){this.parentId=o.slice();var d=n.getRootId(o);a.isValidTraceId(d)||(this.legacyRootId=d,d=r.w3cTraceId()),o.indexOf("|")!==-1&&(o=o.substring(1+o.substring(0,o.length-1).lastIndexOf("."),o.length-1)),this.traceId=d,this.spanId=o}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return a.isValidTraceId=function(i){return i.match(/^[0-9a-f]{32}$/)&&i!=="00000000000000000000000000000000"},a.isValidSpanId=function(i){return i.match(/^[0-9a-f]{16}$/)&&i!=="0000000000000000"},a.formatOpenTelemetryTraceFlags=function(i){var o="0"+i.toString(16);return o.substring(o.length-2)},a.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},a.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},a.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},a.DEFAULT_TRACE_FLAG="01",a.DEFAULT_VERSION="00",a}();t.exports=s}),fu=A((e,t)=>{"use strict";var r=function(){function n(s){this.fieldmap=[],s&&(this.fieldmap=this.parseHeader(s))}return n.prototype.toString=function(){var s=this.fieldmap;return!s||s.length==0?null:s.join(", ")},n.validateKeyChars=function(s){var a=s.split("@");if(a.length==2){var i=a[0].trim(),o=a[1].trim(),c=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),u=Boolean(o.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return c&&u}else if(a.length==1)return Boolean(s.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},n.prototype.parseHeader=function(s){var a=[],i={},o=s.split(",");if(o.length>32)return null;for(var c=0,u=o;c<u.length;c++){var d=u[c],l=d.trim();if(l.length!==0){var p=l.split("=");if(p.length!==2||!n.validateKeyChars(p[0])||i[p[0]])return null;i[p[0]]=!0,a.push(l)}}return a},n.strict=!0,n}();t.exports=r}),rn=A((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),X_=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,o)};return function(i,o){a(i,o);function c(){this.constructor=i}i.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}}(),n=rn(),s=function(a){r(i,a);function i(){var o=a.call(this)||this;return o.ver=2,o.properties={},o.measurements={},o}return i}(n);t.exports=s}),hu=A((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),Y_=A((e,t)=>{"use strict";var r=function(){function n(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return n}();t.exports=r}),Q_=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,o)};return function(i,o){a(i,o);function c(){this.constructor=i}i.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}}(),n=hu(),s=function(a){r(i,a);function i(){return a.call(this)||this}return i}(n);t.exports=s}),gu=A((e,t)=>{"use strict";var r;(function(n){n[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation"})(r||(r={})),t.exports=r}),J_=A((e,t)=>{"use strict";var r=gu(),n=function(){function s(){this.kind=r.Measurement}return s}();t.exports=n}),Z_=A((e,t)=>{"use strict";var r=function(){function n(){this.ver=1,this.sampleRate=100,this.tags={}}return n}();t.exports=r}),mu=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,o)};return function(i,o){a(i,o);function c(){this.constructor=i}i.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}}(),n=rn(),s=function(a){r(i,a);function i(){var o=a.call(this)||this;return o.ver=2,o.properties={},o.measurements={},o}return i}(n);t.exports=s}),ey=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,o)};return function(i,o){a(i,o);function c(){this.constructor=i}i.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}}(),n=rn(),s=function(a){r(i,a);function i(){var o=a.call(this)||this;return o.ver=2,o.exceptions=[],o.properties={},o.measurements={},o}return i}(n);t.exports=s}),ty=A((e,t)=>{"use strict";var r=function(){function n(){this.hasFullStack=!0,this.parsedStack=[]}return n}();t.exports=r}),ry=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,o)};return function(i,o){a(i,o);function c(){this.constructor=i}i.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}}(),n=rn(),s=function(a){r(i,a);function i(){var o=a.call(this)||this;return o.ver=2,o.properties={},o}return i}(n);t.exports=s}),ny=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,o)};return function(i,o){a(i,o);function c(){this.constructor=i}i.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}}(),n=rn(),s=function(a){r(i,a);function i(){var o=a.call(this)||this;return o.ver=2,o.metrics=[],o.properties={},o}return i}(n);t.exports=s}),iy=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,o)};return function(i,o){a(i,o);function c(){this.constructor=i}i.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}}(),n=mu(),s=function(a){r(i,a);function i(){var o=a.call(this)||this;return o.ver=2,o.properties={},o.measurements={},o}return i}(n);t.exports=s}),oy=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,o)};return function(i,o){a(i,o);function c(){this.constructor=i}i.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}}(),n=rn(),s=function(a){r(i,a);function i(){var o=a.call(this)||this;return o.ver=2,o.success=!0,o.properties={},o.measurements={},o}return i}(n);t.exports=s}),sy=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(c[d]=u[d])},a(i,o)};return function(i,o){a(i,o);function c(){this.constructor=i}i.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}}(),n=rn(),s=function(a){r(i,a);function i(){var o=a.call(this)||this;return o.ver=2,o.properties={},o.measurements={},o}return i}(n);t.exports=s}),ay=A((e,t)=>{"use strict";var r;(function(n){n[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical"})(r||(r={})),t.exports=r}),cy=A((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),vu=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=X_(),e.Base=hu(),e.ContextTagKeys=Y_(),e.Data=Q_(),e.DataPoint=J_(),e.DataPointType=gu(),e.Domain=rn(),e.Envelope=Z_(),e.EventData=mu(),e.ExceptionData=ey(),e.ExceptionDetails=ty(),e.MessageData=ry(),e.MetricData=ny(),e.PageViewData=iy(),e.RemoteDependencyData=oy(),e.RequestData=sy(),e.SeverityLevel=ay(),e.StackFrame=cy()}),uy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var t=vu(),r=function(){function s(){}return s.TYPE_HTTP="Http",s.TYPE_AI="Http (tracked component)",s}();e.RemoteDependencyDataConstants=r;function n(s){return"properties"in s||s instanceof t.EventData||s instanceof t.ExceptionData||s instanceof t.MessageData||s instanceof t.MetricData||s instanceof t.PageViewData||s instanceof t.RemoteDependencyData||s instanceof t.RequestData}e.domainSupportsProperties=n}),ly=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),dy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),py=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),fy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),hy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),gy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),my=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),vy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),_y=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),yy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ey=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Cy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),by=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0;function t(s){switch(s){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}}e.telemetryTypeToBaseType=t;function r(s){switch(s){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}}e.baseTypeToTelemetryType=r,e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var n;(function(s){s[s.Event=0]="Event",s[s.Exception=1]="Exception",s[s.Trace=2]="Trace",s[s.Metric=3]="Metric",s[s.Request=4]="Request",s[s.Dependency=5]="Dependency",s[s.Availability=6]="Availability",s[s.PageView=7]="PageView"})(n=e.TelemetryType||(e.TelemetryType={}))}),Ty=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(ly(),e),r(dy(),e),r(py(),e),r(fy(),e),r(hy(),e),r(gy(),e),r(my(),e),r(vy(),e),r(_y(),e),r(yy(),e),r(Ey(),e),r(Cy(),e),r(by(),e)}),Sy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ry=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),wy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Py=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Oy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Iy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Dy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ay=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),xy=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Sy(),e),r(Ry(),e),r(wy(),e),r(Py(),e),r(Oy(),e),r(Iy(),e),r(Dy(),e),r(Ay(),e)}),lr=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(uy(),e),r(vu(),e),r(Ty(),e),r(xy(),e)}),_u=A((e,t)=>{"use strict";var r=function(){function n(){}return n.prototype.getUrl=function(){return this.url},n.prototype.RequestParser=function(){this.startTime=+new Date},n.prototype._setStatus=function(s,a){var i=+new Date;this.duration=i-this.startTime,this.statusCode=s;var o=this.properties||{};if(a){if(typeof a=="string")o.error=a;else if(a instanceof Error)o.error=a.message;else if(typeof a=="object")for(var c in a)o[c]=a[c]&&a[c].toString&&a[c].toString()}this.properties=o},n.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},n}();t.exports=r}),yu=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var p=function(f,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,v){m.__proto__=v}||function(m,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y])},p(f,g)};return function(f,g){p(f,g);function m(){this.constructor=f}f.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}(),n=require("url"),s=lr(),a=yr(),i=yi(),o=_u(),c=Hn(),u=fu(),d=uo(),l=function(p){r(f,p);function f(g,m){var v=p.call(this)||this;return g&&(v.method=g.method,v.url=v._getAbsoluteUrl(g),v.startTime=+new Date,v.socketRemoteAddress=g.socket&&g.socket.remoteAddress,v.parseHeaders(g,m),g.connection&&(v.connectionRemoteAddress=g.connection.remoteAddress,v.legacySocketRemoteAddress=g.connection.socket&&g.connection.socket.remoteAddress)),v}return f.prototype.onError=function(g,m){this._setStatus(void 0,g),m&&(this.duration=m)},f.prototype.onResponse=function(g,m){this._setStatus(g.statusCode,void 0),m&&(this.duration=m)},f.prototype.getRequestTelemetry=function(g){var m={id:this.requestId,name:this.method+" "+n.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(g&&g.time?m.time=g.time:this.startTime&&(m.time=new Date(this.startTime)),g){for(var v in g)m[v]||(m[v]=g[v]);if(g.properties)for(var v in g.properties)m.properties[v]=g.properties[v]}return m},f.prototype.getRequestTags=function(g){var m={};for(var v in g)m[v]=g[v];return m[f.keys.locationIp]=g[f.keys.locationIp]||this._getIp(),m[f.keys.sessionId]=g[f.keys.sessionId]||this._getId("ai_session"),m[f.keys.userId]=g[f.keys.userId]||this._getId("ai_user"),m[f.keys.userAuthUserId]=g[f.keys.userAuthUserId]||this._getId("ai_authUser"),m[f.keys.operationName]=this.getOperationName(g),m[f.keys.operationParentId]=this.getOperationParentId(g),m[f.keys.operationId]=this.getOperationId(g),m},f.prototype.getOperationId=function(g){return g[f.keys.operationId]||this.operationId},f.prototype.getOperationParentId=function(g){return g[f.keys.operationParentId]||this.parentId||this.getOperationId(g)},f.prototype.getOperationName=function(g){return g[f.keys.operationName]||this.method+" "+n.parse(this.url).pathname},f.prototype.getRequestId=function(){return this.requestId},f.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},f.prototype.getTraceparent=function(){return this.traceparent},f.prototype.getTracestate=function(){return this.tracestate},f.prototype.getLegacyRootId=function(){return this.legacyRootId},f.prototype._getAbsoluteUrl=function(g){if(!g.headers)return g.url;var m=g.connection?g.connection.encrypted:null,v=n.parse(g.url),y=v.pathname,T=v.search,w=m||g.headers["x-forwarded-proto"]=="https"?"https":"http",R=n.format({protocol:w,host:g.headers.host,pathname:y,search:T});return R},f.prototype._getIp=function(){var g=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,m=function(y){var T=g.exec(y);if(T)return T[0]},v=m(this.rawHeaders["x-forwarded-for"])||m(this.rawHeaders["x-client-ip"])||m(this.rawHeaders["x-real-ip"])||m(this.connectionRemoteAddress)||m(this.socketRemoteAddress)||m(this.legacySocketRemoteAddress);return!v&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(v="127.0.0.1"),v},f.prototype._getId=function(g){var m=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",v=f.parseId(a.getCookie(g,m));return v},f.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},f.prototype.parseHeaders=function(g,m){if(this.rawHeaders=g.headers||g.rawHeaders,this.userAgent=g.headers&&g.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(g,i.requestContextSourceKey),g.headers){var v=g.headers[i.traceStateHeader]?g.headers[i.traceStateHeader].toString():null,y=g.headers[i.traceparentHeader]?g.headers[i.traceparentHeader].toString():null,T=g.headers[i.requestIdHeader]?g.headers[i.requestIdHeader].toString():null,w=g.headers[i.parentIdHeader]?g.headers[i.parentIdHeader].toString():null,R=g.headers[i.rootIdHeader]?g.headers[i.rootIdHeader].toString():null;this.correlationContextHeader=g.headers[i.correlationContextHeader]?g.headers[i.correlationContextHeader].toString():null,c.w3cEnabled&&(y||v)?(this.traceparent=new d(y?y.toString():null),this.tracestate=y&&v&&new u(v?v.toString():null),this.setBackCompatFromThisTraceContext()):T?c.w3cEnabled?(this.traceparent=new d(null,T),this.setBackCompatFromThisTraceContext()):(this.parentId=T,this.requestId=c.generateRequestId(this.parentId),this.operationId=c.getRootId(this.requestId)):c.w3cEnabled?(this.traceparent=new d,this.traceparent.parentId=w,this.traceparent.legacyRootId=R||w,this.setBackCompatFromThisTraceContext()):(this.parentId=w,this.requestId=c.generateRequestId(R||this.parentId),this.correlationContextHeader=null,this.operationId=c.getRootId(this.requestId)),m&&(this.requestId=m,this.operationId=c.getRootId(this.requestId))}},f.parseId=function(g){var m=g.split("|");return m.length>0?m[0]:""},f.keys=new s.ContextTagKeys,f}(o);t.exports=l}),Ny=A((e,t)=>{e=t.exports=re;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var h=Array.prototype.slice.call(arguments,0);h.unshift("SEMVER"),console.log.apply(console,h)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,i=e.re=[],o=e.src=[],c=0,u=c++;o[u]="0|[1-9]\\d*";var d=c++;o[d]="[0-9]+";var l=c++;o[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;o[p]="("+o[u]+")\\.("+o[u]+")\\.("+o[u]+")";var f=c++;o[f]="("+o[d]+")\\.("+o[d]+")\\.("+o[d]+")";var g=c++;o[g]="(?:"+o[u]+"|"+o[l]+")";var m=c++;o[m]="(?:"+o[d]+"|"+o[l]+")";var v=c++;o[v]="(?:-("+o[g]+"(?:\\."+o[g]+")*))";var y=c++;o[y]="(?:-?("+o[m]+"(?:\\."+o[m]+")*))";var T=c++;o[T]="[0-9A-Za-z-]+";var w=c++;o[w]="(?:\\+("+o[T]+"(?:\\."+o[T]+")*))";var R=c++,O="v?"+o[p]+o[v]+"?"+o[w]+"?";o[R]="^"+O+"$";var F="[v=\\s]*"+o[f]+o[y]+"?"+o[w]+"?",z=c++;o[z]="^"+F+"$";var K=c++;o[K]="((?:<|>)?=?)";var J=c++;o[J]=o[d]+"|x|X|\\*";var te=c++;o[te]=o[u]+"|x|X|\\*";var U=c++;o[U]="[v=\\s]*("+o[te]+")(?:\\.("+o[te]+")(?:\\.("+o[te]+")(?:"+o[v]+")?"+o[w]+"?)?)?";var G=c++;o[G]="[v=\\s]*("+o[J]+")(?:\\.("+o[J]+")(?:\\.("+o[J]+")(?:"+o[y]+")?"+o[w]+"?)?)?";var Q=c++;o[Q]="^"+o[K]+"\\s*"+o[U]+"$";var ne=c++;o[ne]="^"+o[K]+"\\s*"+o[G]+"$";var ve=c++;o[ve]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var de=c++;o[de]="(?:~>?)";var X=c++;o[X]="(\\s*)"+o[de]+"\\s+",i[X]=new RegExp(o[X],"g");var ce="$1~",ie=c++;o[ie]="^"+o[de]+o[U]+"$";var pe=c++;o[pe]="^"+o[de]+o[G]+"$";var he=c++;o[he]="(?:\\^)";var Ce=c++;o[Ce]="(\\s*)"+o[he]+"\\s+",i[Ce]=new RegExp(o[Ce],"g");var _e="$1^",Be=c++;o[Be]="^"+o[he]+o[U]+"$";var Je=c++;o[Je]="^"+o[he]+o[G]+"$";var Ke=c++;o[Ke]="^"+o[K]+"\\s*("+F+")$|^$";var je=c++;o[je]="^"+o[K]+"\\s*("+O+")$|^$";var xe=c++;o[xe]="(\\s*)"+o[K]+"\\s*("+F+"|"+o[U]+")",i[xe]=new RegExp(o[xe],"g");var it="$1$2$3",ut=c++;o[ut]="^\\s*("+o[U]+")\\s+-\\s+("+o[U]+")\\s*$";var Oe=c++;o[Oe]="^\\s*("+o[G]+")\\s+-\\s+("+o[G]+")\\s*$";var me=c++;for(o[me]="(<|>)?=?\\s*\\*",Ae=0;Ae<c;Ae++)r(Ae,o[Ae]),i[Ae]||(i[Ae]=new RegExp(o[Ae]));var Ae;e.parse=ke;function ke(h,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),h instanceof re)return h;if(typeof h!="string"||h.length>n)return null;var b=_.loose?i[z]:i[R];if(!b.test(h))return null;try{return new re(h,_)}catch{return null}}e.valid=nr;function nr(h,_){var b=ke(h,_);return b?b.version:null}e.clean=at;function at(h,_){var b=ke(h.trim().replace(/^[=v]+/,""),_);return b?b.version:null}e.SemVer=re;function re(h,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),h instanceof re){if(h.loose===_.loose)return h;h=h.version}else if(typeof h!="string")throw new TypeError("Invalid Version: "+h);if(h.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof re))return new re(h,_);r("SemVer",h,_),this.options=_,this.loose=!!_.loose;var b=h.trim().match(_.loose?i[z]:i[R]);if(!b)throw new TypeError("Invalid Version: "+h);if(this.raw=h,this.major=+b[1],this.minor=+b[2],this.patch=+b[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");b[4]?this.prerelease=b[4].split(".").map(function(D){if(/^[0-9]+$/.test(D)){var k=+D;if(k>=0&&k<s)return k}return D}):this.prerelease=[],this.build=b[5]?b[5].split("."):[],this.format()}re.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},re.prototype.toString=function(){return this.version},re.prototype.compare=function(h){return r("SemVer.compare",this.version,this.options,h),h instanceof re||(h=new re(h,this.options)),this.compareMain(h)||this.comparePre(h)},re.prototype.compareMain=function(h){return h instanceof re||(h=new re(h,this.options)),rt(this.major,h.major)||rt(this.minor,h.minor)||rt(this.patch,h.patch)},re.prototype.comparePre=function(h){if(h instanceof re||(h=new re(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;var _=0;do{var b=this.prerelease[_],D=h.prerelease[_];if(r("prerelease compare",_,b,D),b===void 0&&D===void 0)return 0;if(D===void 0)return 1;if(b===void 0)return-1;if(b!==D)return rt(b,D)}while(++_)},re.prototype.inc=function(h,_){switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var b=this.prerelease.length;--b>=0;)typeof this.prerelease[b]=="number"&&(this.prerelease[b]++,b=-2);b===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+h)}return this.format(),this.raw=this.version,this},e.inc=Qt;function Qt(h,_,b,D){typeof b=="string"&&(D=b,b=void 0);try{return new re(h,b).inc(_,D).version}catch{return null}}e.diff=ir;function ir(h,_){if(L(h,_))return null;var b=ke(h),D=ke(_),k="";if(b.prerelease.length||D.prerelease.length){k="pre";var $="prerelease"}for(var W in b)if((W==="major"||W==="minor"||W==="patch")&&b[W]!==D[W])return k+W;return $}e.compareIdentifiers=rt;var ht=/^[0-9]+$/;function rt(h,_){var b=ht.test(h),D=ht.test(_);return b&&D&&(h=+h,_=+_),h===_?0:b&&!D?-1:D&&!b?1:h<_?-1:1}e.rcompareIdentifiers=xt;function xt(h,_){return rt(_,h)}e.major=lt;function lt(h,_){return new re(h,_).major}e.minor=Ft;function Ft(h,_){return new re(h,_).minor}e.patch=Pt;function Pt(h,_){return new re(h,_).patch}e.compare=M;function M(h,_,b){return new re(h,b).compare(new re(_,b))}e.compareLoose=N;function N(h,_){return M(h,_,!0)}e.rcompare=P;function P(h,_,b){return M(_,h,b)}e.sort=q;function q(h,_){return h.sort(function(b,D){return e.compare(b,D,_)})}e.rsort=H;function H(h,_){return h.sort(function(b,D){return e.rcompare(b,D,_)})}e.gt=E;function E(h,_,b){return M(h,_,b)>0}e.lt=C;function C(h,_,b){return M(h,_,b)<0}e.eq=L;function L(h,_,b){return M(h,_,b)===0}e.neq=V;function V(h,_,b){return M(h,_,b)!==0}e.gte=ue;function ue(h,_,b){return M(h,_,b)>=0}e.lte=fe;function fe(h,_,b){return M(h,_,b)<=0}e.cmp=Re;function Re(h,_,b,D){switch(_){case"===":return typeof h=="object"&&(h=h.version),typeof b=="object"&&(b=b.version),h===b;case"!==":return typeof h=="object"&&(h=h.version),typeof b=="object"&&(b=b.version),h!==b;case"":case"=":case"==":return L(h,b,D);case"!=":return V(h,b,D);case">":return E(h,b,D);case">=":return ue(h,b,D);case"<":return C(h,b,D);case"<=":return fe(h,b,D);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=ye;function ye(h,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),h instanceof ye){if(h.loose===!!_.loose)return h;h=h.value}if(!(this instanceof ye))return new ye(h,_);r("comparator",h,_),this.options=_,this.loose=!!_.loose,this.parse(h),this.semver===Fe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Fe={};ye.prototype.parse=function(h){var _=this.options.loose?i[Ke]:i[je],b=h.match(_);if(!b)throw new TypeError("Invalid comparator: "+h);this.operator=b[1],this.operator==="="&&(this.operator=""),b[2]?this.semver=new re(b[2],this.options.loose):this.semver=Fe},ye.prototype.toString=function(){return this.value},ye.prototype.test=function(h){return r("Comparator.test",h,this.options.loose),this.semver===Fe?!0:(typeof h=="string"&&(h=new re(h,this.options)),Re(h,this.operator,this.semver,this.options))},ye.prototype.intersects=function(h,_){if(!(h instanceof ye))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var b;if(this.operator==="")return b=new le(h.value,_),vt(this.value,b,_);if(h.operator==="")return b=new le(this.value,_),vt(h.semver,b,_);var D=(this.operator===">="||this.operator===">")&&(h.operator===">="||h.operator===">"),k=(this.operator==="<="||this.operator==="<")&&(h.operator==="<="||h.operator==="<"),$=this.semver.version===h.semver.version,W=(this.operator===">="||this.operator==="<=")&&(h.operator===">="||h.operator==="<="),se=Re(this.semver,"<",h.semver,_)&&(this.operator===">="||this.operator===">")&&(h.operator==="<="||h.operator==="<"),oe=Re(this.semver,">",h.semver,_)&&(this.operator==="<="||this.operator==="<")&&(h.operator===">="||h.operator===">");return D||k||$&&W||se||oe},e.Range=le;function le(h,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),h instanceof le)return h.loose===!!_.loose&&h.includePrerelease===!!_.includePrerelease?h:new le(h.raw,_);if(h instanceof ye)return new le(h.value,_);if(!(this instanceof le))return new le(h,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=h,this.set=h.split(/\s*\|\|\s*/).map(function(b){return this.parseRange(b.trim())},this).filter(function(b){return b.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+h);this.format()}le.prototype.format=function(){return this.range=this.set.map(function(h){return h.join(" ").trim()}).join("||").trim(),this.range},le.prototype.toString=function(){return this.range},le.prototype.parseRange=function(h){var _=this.options.loose;h=h.trim();var b=_?i[Oe]:i[ut];h=h.replace(b,Ge),r("hyphen replace",h),h=h.replace(i[xe],it),r("comparator trim",h,i[xe]),h=h.replace(i[X],ce),h=h.replace(i[Ce],_e),h=h.split(/\s+/).join(" ");var D=_?i[Ke]:i[je],k=h.split(" ").map(function($){return Nt($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(k=k.filter(function($){return!!$.match(D)})),k=k.map(function($){return new ye($,this.options)},this),k},le.prototype.intersects=function(h,_){if(!(h instanceof le))throw new TypeError("a Range is required");return this.set.some(function(b){return b.every(function(D){return h.set.some(function(k){return k.every(function($){return D.intersects($,_)})})})})},e.toComparators=Me;function Me(h,_){return new le(h,_).set.map(function(b){return b.map(function(D){return D.value}).join(" ").trim().split(" ")})}function Nt(h,_){return r("comp",h,_),h=Ur(h,_),r("caret",h),h=Ht(h,_),r("tildes",h),h=S(h,_),r("xrange",h),h=ge(h,_),r("stars",h),h}function De(h){return!h||h.toLowerCase()==="x"||h==="*"}function Ht(h,_){return h.trim().split(/\s+/).map(function(b){return $r(b,_)}).join(" ")}function $r(h,_){var b=_.loose?i[pe]:i[ie];return h.replace(b,function(D,k,$,W,se){r("tilde",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":se?(r("replaceTilde pr",se),oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0"):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0",r("tilde return",oe),oe})}function Ur(h,_){return h.trim().split(/\s+/).map(function(b){return Br(b,_)}).join(" ")}function Br(h,_){r("caret",h,_);var b=_.loose?i[Je]:i[Be];return h.replace(b,function(D,k,$,W,se){r("caret",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?k==="0"?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+".0 <"+(+k+1)+".0.0":se?(r("replaceCaret pr",se),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+"-"+se+" <"+(+k+1)+".0.0"):(r("no pr"),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+" <"+(+k+1)+".0.0"),r("caret return",oe),oe})}function S(h,_){return r("replaceXRanges",h,_),h.split(/\s+/).map(function(b){return Z(b,_)}).join(" ")}function Z(h,_){h=h.trim();var b=_.loose?i[ne]:i[Q];return h.replace(b,function(D,k,$,W,se,oe){r("xRange",h,D,k,$,W,se,oe);var et=De($),Ye=et||De(W),Ve=Ye||De(se),Le=Ve;return k==="="&&Le&&(k=""),et?k===">"||k==="<"?D="<0.0.0":D="*":k&&Le?(Ye&&(W=0),se=0,k===">"?(k=">=",Ye?($=+$+1,W=0,se=0):(W=+W+1,se=0)):k==="<="&&(k="<",Ye?$=+$+1:W=+W+1),D=k+$+"."+W+"."+se):Ye?D=">="+$+".0.0 <"+(+$+1)+".0.0":Ve&&(D=">="+$+"."+W+".0 <"+$+"."+(+W+1)+".0"),r("xRange return",D),D})}function ge(h,_){return r("replaceStars",h,_),h.trim().replace(i[me],"")}function Ge(h,_,b,D,k,$,W,se,oe,et,Ye,Ve,Le){return De(b)?_="":De(D)?_=">="+b+".0.0":De(k)?_=">="+b+"."+D+".0":_=">="+_,De(oe)?se="":De(et)?se="<"+(+oe+1)+".0.0":De(Ye)?se="<"+oe+"."+(+et+1)+".0":Ve?se="<="+oe+"."+et+"."+Ye+"-"+Ve:se="<="+se,(_+" "+se).trim()}le.prototype.test=function(h){if(!h)return!1;typeof h=="string"&&(h=new re(h,this.options));for(var _=0;_<this.set.length;_++)if(Qe(this.set[_],h,this.options))return!0;return!1};function Qe(h,_,b){for(var D=0;D<h.length;D++)if(!h[D].test(_))return!1;if(_.prerelease.length&&!b.includePrerelease){for(D=0;D<h.length;D++)if(r(h[D].semver),h[D].semver!==Fe&&h[D].semver.prerelease.length>0){var k=h[D].semver;if(k.major===_.major&&k.minor===_.minor&&k.patch===_.patch)return!0}return!1}return!0}e.satisfies=vt;function vt(h,_,b){try{_=new le(_,b)}catch{return!1}return _.test(h)}e.maxSatisfying=ur;function ur(h,_,b){var D=null,k=null;try{var $=new le(_,b)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===-1)&&(D=W,k=new re(D,b))}),D}e.minSatisfying=gn;function gn(h,_,b){var D=null,k=null;try{var $=new le(_,b)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===1)&&(D=W,k=new re(D,b))}),D}e.minVersion=mr;function mr(h,_){h=new le(h,_);var b=new re("0.0.0");if(h.test(b)||(b=new re("0.0.0-0"),h.test(b)))return b;b=null;for(var D=0;D<h.set.length;++D){var k=h.set[D];k.forEach(function($){var W=new re($.semver.version);switch($.operator){case">":W.prerelease.length===0?W.patch++:W.prerelease.push(0),W.raw=W.format();case"":case">=":(!b||E(b,W))&&(b=W);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return b&&h.test(b)?b:null}e.validRange=mn;function mn(h,_){try{return new le(h,_).range||"*"}catch{return null}}e.ltr=vn;function vn(h,_,b){return fr(h,_,"<",b)}e.gtr=_n;function _n(h,_,b){return fr(h,_,">",b)}e.outside=fr;function fr(h,_,b,D){h=new re(h,D),_=new le(_,D);var k,$,W,se,oe;switch(b){case">":k=E,$=fe,W=C,se=">",oe=">=";break;case"<":k=C,$=ue,W=E,se="<",oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(vt(h,_,D))return!1;for(var et=0;et<_.set.length;++et){var Ye=_.set[et],Ve=null,Le=null;if(Ye.forEach(function(dt){dt.semver===Fe&&(dt=new ye(">=0.0.0")),Ve=Ve||dt,Le=Le||dt,k(dt.semver,Ve.semver,D)?Ve=dt:W(dt.semver,Le.semver,D)&&(Le=dt)}),Ve.operator===se||Ve.operator===oe||(!Le.operator||Le.operator===se)&&$(h,Le.semver)||Le.operator===oe&&W(h,Le.semver))return!1}return!0}e.prerelease=yn;function yn(h,_){var b=ke(h,_);return b&&b.prerelease.length?b.prerelease:null}e.intersects=vr;function vr(h,_,b){return h=new le(h,b),_=new le(_,b),h.intersects(_)}e.coerce=En;function En(h){if(h instanceof re)return h;if(typeof h!="string")return null;var _=h.match(i[ve]);return _==null?null:ke(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),As=A((e,t)=>{"use strict";function r(d){return typeof d=="function"}var n=console.error.bind(console);function s(d,l,p){var f=!!d[l]&&d.propertyIsEnumerable(l);Object.defineProperty(d,l,{configurable:!0,enumerable:f,writable:!0,value:p})}function a(d){d&&d.logger&&(r(d.logger)?n=d.logger:n("new logger isn't a function, not replacing"))}function i(d,l,p){if(!d||!d[l]){n("no original function "+l+" to wrap");return}if(!p){n("no wrapper function"),n(new Error().stack);return}if(!r(d[l])||!r(p)){n("original object and wrapper must be functions");return}var f=d[l],g=p(f,l);return s(g,"__original",f),s(g,"__unwrap",function(){d[l]===g&&s(d,l,f)}),s(g,"__wrapped",!0),s(d,l,g),g}function o(d,l,p){if(d)Array.isArray(d)||(d=[d]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(l&&Array.isArray(l))){n("must provide one or more functions to wrap on modules");return}d.forEach(function(f){l.forEach(function(g){i(f,g,p)})})}function c(d,l){if(!d||!d[l]){n("no function to unwrap."),n(new Error().stack);return}if(!d[l].__unwrap)n("no original to unwrap to -- has "+l+" already been unwrapped?");else return d[l].__unwrap()}function u(d,l){if(d)Array.isArray(d)||(d=[d]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(l&&Array.isArray(l))){n("must provide one or more functions to unwrap on modules");return}d.forEach(function(p){l.forEach(function(f){c(p,f)})})}a.wrap=i,a.massWrap=o,a.unwrap=c,a.massUnwrap=u,t.exports=a}),xs=A((e,t)=>{"use strict";var r=As(),n=r.wrap,s=r.unwrap,a="wrap@before";function i(l,p,f){var g=!!l[p]&&l.propertyIsEnumerable(p);Object.defineProperty(l,p,{configurable:!0,enumerable:g,writable:!0,value:f})}function o(l,p){for(var f=p.length,g=0;g<f;g++){var m=p[g],v=l[a];if(typeof v=="function")v(m);else if(Array.isArray(v))for(var y=v.length,T=0;T<y;T++)v[T](m)}}function c(l,p){var f;return f=l._events&&l._events[p],Array.isArray(f)||(f?f=[f]:f=[]),f}function u(l,p,f){var g=c(l,p),m=g.filter(function(v){return f.indexOf(v)===-1});m.length>0&&o(l,m)}function d(l,p){if(l){var f=l;if(typeof l=="function")f=p(l);else if(Array.isArray(l)){f=[];for(var g=0;g<l.length;g++)f[g]=p(l[g])}return f}}t.exports=function(l,p,f){if(!l||!l.on||!l.addListener||!l.removeListener||!l.emit)throw new Error("can only wrap real EEs");if(!p)throw new Error("must have function to run on listener addition");if(!f)throw new Error("must have function to wrap listeners when emitting");function g(v){return function(y,T){var w=c(this,y).slice();try{var R=v.call(this,y,T);return u(this,y,w),R}finally{this.on.__wrapped||n(this,"on",g),this.addListener.__wrapped||n(this,"addListener",g)}}}function m(v){return function(y){if(!this._events||!this._events[y])return v.apply(this,arguments);var T=this._events[y];function w(R){return function(){this._events[y]=T;try{return R.apply(this,arguments)}finally{T=this._events[y],this._events[y]=d(T,f)}}}n(this,"removeListener",w);try{return this._events[y]=d(T,f),v.apply(this,arguments)}finally{s(this,"removeListener"),this._events[y]=T}}}l[a]?typeof l[a]=="function"?i(l,a,[l[a],p]):Array.isArray(l[a])&&l[a].push(p):i(l,a,p),l.__wrapped||(n(l,"addListener",g),n(l,"on",g),n(l,"emit",m),i(l,"__unwrap",function(){s(l,"addListener"),s(l,"on"),s(l,"emit"),delete l[a],delete l.__wrapped}),i(l,"__wrapped",!0))}}),ky=A((e,t)=>{"use strict";var r=require("util"),n=require("assert"),s=xs(),a=require("async_hooks"),i="cls@contexts",o="error@context",c=process.env.DEBUG_CLS_HOOKED,u=-1;t.exports={getNamespace:l,createNamespace:p,destroyNamespace:f,reset:g,ERROR_SYMBOL:o};function d(v){this.name=v,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}d.prototype.set=function(v,y){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[v]=y,c){let T=" ".repeat(this._indent<0?0:this._indent);m(T+"CONTEXT-SET KEY:"+v+"="+y+" in ns:"+this.name+" currentUid:"+u+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return y},d.prototype.get=function(v){if(!this.active){if(c){let y=a.currentId(),T=a.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(`${w}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${v}=undefined currentUid:${u} asyncHooksCurrentId:${y} triggerId:${T} len:${this._set.length}`)}return}if(c){let y=a.executionAsyncId(),T=a.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(w+"CONTEXT-GETTING KEY:"+v+"="+this.active[v]+" ("+this.name+") currentUid:"+u+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),m(`${w}CONTEXT-GETTING KEY: (${this.name}) ${v}=${this.active[v]} currentUid:${u} asyncHooksCurrentId:${y} triggerId:${T} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[v]},d.prototype.createContext=function(){let v=Object.create(this.active?this.active:Object.prototype);if(v._ns_name=this.name,v.id=u,c){let y=a.executionAsyncId(),T=a.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(`${w}CONTEXT-CREATED Context: (${this.name}) currentUid:${u} asyncHooksCurrentId:${y} triggerId:${T} len:${this._set.length} context:${r.inspect(v,{showHidden:!0,depth:2,colors:!0})}`)}return v},d.prototype.run=function(v){let y=this.createContext();this.enter(y);try{if(c){let T=a.triggerAsyncId(),w=a.executionAsyncId(),R=" ".repeat(this._indent<0?0:this._indent);m(`${R}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${u} triggerId:${T} asyncHooksCurrentId:${w} len:${this._set.length} context:${r.inspect(y)}`)}return v(y),y}catch(T){throw T&&(T[o]=y),T}finally{if(c){let T=a.triggerAsyncId(),w=a.executionAsyncId(),R=" ".repeat(this._indent<0?0:this._indent);m(`${R}CONTEXT-RUN END: (${this.name}) currentUid:${u} triggerId:${T} asyncHooksCurrentId:${w} len:${this._set.length} ${r.inspect(y)}`)}this.exit(y)}},d.prototype.runAndReturn=function(v){let y;return this.run(function(T){y=v(T)}),y},d.prototype.runPromise=function(v){let y=this.createContext();this.enter(y);let T=v(y);if(!T||!T.then||!T.catch)throw new Error("fn must return a promise.");return c&&m("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(y)),T.then(w=>(c&&m("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(y)),this.exit(y),w)).catch(w=>{throw w[o]=y,c&&m("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(y)),this.exit(y),w})},d.prototype.bind=function(v,y){y||(this.active?y=this.active:y=this.createContext());let T=this;return function(){T.enter(y);try{return v.apply(this,arguments)}catch(w){throw w&&(w[o]=y),w}finally{T.exit(y)}}},d.prototype.enter=function(v){if(n.ok(v,"context must be provided for entering"),c){let y=a.executionAsyncId(),T=a.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(`${w}CONTEXT-ENTER: (${this.name}) currentUid:${u} triggerId:${T} asyncHooksCurrentId:${y} len:${this._set.length} ${r.inspect(v)}`)}this._set.push(this.active),this.active=v},d.prototype.exit=function(v){if(n.ok(v,"context must be provided for exiting"),c){let T=a.executionAsyncId(),w=a.triggerAsyncId(),R=" ".repeat(this._indent<0?0:this._indent);m(`${R}CONTEXT-EXIT: (${this.name}) currentUid:${u} triggerId:${w} asyncHooksCurrentId:${T} len:${this._set.length} ${r.inspect(v)}`)}if(this.active===v){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let y=this._set.lastIndexOf(v);y<0?(c&&m("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(v)),n.ok(y>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(v))):(n.ok(y,"can't remove top context"),this._set.splice(y,1))},d.prototype.bindEmitter=function(v){n.ok(v.on&&v.addListener&&v.emit,"can only bind real EEs");let y=this,T="context@"+this.name;function w(O){!O||(O[i]||(O[i]=Object.create(null)),O[i][T]={namespace:y,context:y.active})}function R(O){if(!(O&&O[i]))return O;let F=O,z=O[i];return Object.keys(z).forEach(function(K){let J=z[K];F=J.namespace.bind(F,J.context)}),F}s(v,w,R)},d.prototype.fromException=function(v){return v[o]};function l(v){return process.namespaces[v]}function p(v){n.ok(v,"namespace must be given a name."),c&&m(`NS-CREATING NAMESPACE (${v})`);let y=new d(v);return y.id=u,a.createHook({init(T,w,R,O){if(u=a.executionAsyncId(),y.active){if(y._contexts.set(T,y.active),c){let F=" ".repeat(y._indent<0?0:y._indent);m(`${F}INIT [${w}] (${v}) asyncId:${T} currentUid:${u} triggerId:${R} active:${r.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} resource:${O}`)}}else if(u===0){let F=a.triggerAsyncId(),z=y._contexts.get(F);if(z){if(y._contexts.set(T,z),c){let K=" ".repeat(y._indent<0?0:y._indent);m(`${K}INIT USING CONTEXT FROM TRIGGERID [${w}] (${v}) asyncId:${T} currentUid:${u} triggerId:${F} active:${r.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} resource:${O}`)}}else if(c){let K=" ".repeat(y._indent<0?0:y._indent);m(`${K}INIT MISSING CONTEXT [${w}] (${v}) asyncId:${T} currentUid:${u} triggerId:${F} active:${r.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} resource:${O}`)}}if(c&&w==="PROMISE"){m(r.inspect(O,{showHidden:!0}));let F=O.parentId,z=" ".repeat(y._indent<0?0:y._indent);m(`${z}INIT RESOURCE-PROMISE [${w}] (${v}) parentId:${F} asyncId:${T} currentUid:${u} triggerId:${R} active:${r.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} resource:${O}`)}},before(T){u=a.executionAsyncId();let w;if(w=y._contexts.get(T)||y._contexts.get(u),w){if(c){let R=a.triggerAsyncId(),O=" ".repeat(y._indent<0?0:y._indent);m(`${O}BEFORE (${v}) asyncId:${T} currentUid:${u} triggerId:${R} active:${r.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(w)}`),y._indent+=2}y.enter(w)}else if(c){let R=a.triggerAsyncId(),O=" ".repeat(y._indent<0?0:y._indent);m(`${O}BEFORE MISSING CONTEXT (${v}) asyncId:${T} currentUid:${u} triggerId:${R} active:${r.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(y._contexts,{showHidden:!0,depth:2,colors:!0})}`),y._indent+=2}},after(T){u=a.executionAsyncId();let w;if(w=y._contexts.get(T)||y._contexts.get(u),w){if(c){let R=a.triggerAsyncId();y._indent-=2;let O=" ".repeat(y._indent<0?0:y._indent);m(`${O}AFTER (${v}) asyncId:${T} currentUid:${u} triggerId:${R} active:${r.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(w)}`)}y.exit(w)}else if(c){let R=a.triggerAsyncId();y._indent-=2;let O=" ".repeat(y._indent<0?0:y._indent);m(`${O}AFTER MISSING CONTEXT (${v}) asyncId:${T} currentUid:${u} triggerId:${R} active:${r.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(w)}`)}},destroy(T){if(u=a.executionAsyncId(),c){let w=a.triggerAsyncId(),R=" ".repeat(y._indent<0?0:y._indent);m(`${R}DESTROY (${v}) currentUid:${u} asyncId:${T} triggerId:${w} active:${r.inspect(y.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(y._contexts.get(u))}`)}y._contexts.delete(T)}}).enable(),process.namespaces[v]=y,y}function f(v){let y=l(v);n.ok(y,`can't delete nonexistent namespace! "`+v+'"'),n.ok(y.id,"don't assign to process.namespaces directly! "+r.inspect(y)),process.namespaces[v]=null}function g(){process.namespaces&&Object.keys(process.namespaces).forEach(function(v){f(v)}),process.namespaces=Object.create(null)}process.namespaces={};function m(...v){c&&process._rawDebug(`${r.format(...v)}`)}}),My=A((e,t)=>{"use strict";function r(){}t.exports=function(){let n=this._hooks,s=this._state,a=process.nextTick;process.nextTick=function(){if(!s.enabled)return a.apply(process,arguments);let i=new Array(arguments.length);for(let d=0;d<arguments.length;d++)i[d]=arguments[d];let o=i[0];if(typeof o!="function")throw new TypeError("callback is not a function");let c=new r,u=--s.counter;return n.init.call(c,u,0,null,null),i[0]=function(){n.pre.call(c,u);let d=!0;try{o.apply(this,arguments),d=!1}finally{d&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){n.post.call(c,u,!0),n.destroy.call(null,u)})}n.post.call(c,u,!1),n.destroy.call(null,u)},a.apply(process,i)}}}),qy=A((e,t)=>{"use strict";function r(){}t.exports=function(){let n=this._hooks,s=this._state,a=global.Promise,i=a.prototype.then;a.prototype.then=d;function o(l,p,f,g){return typeof l!="function"?g?c(f):u(f):function(){n.pre.call(p,f);try{return l.apply(this,arguments)}finally{n.post.call(p,f,!1),n.destroy.call(null,f)}}}function c(l){return function(p){return n.destroy.call(null,l),p}}function u(l){return function(p){throw n.destroy.call(null,l),p}}function d(l,p){if(!s.enabled)return i.call(this,l,p);let f=new r,g=--s.counter;return n.init.call(f,g,0,null,null),i.call(this,o(l,f,g,!0),o(p,f,g,!1))}}}),Ly=A((e,t)=>{"use strict";var r=require("timers");function n(){}function s(){}function a(){}var i=new Map,o=new Map,c=new Map,u=null,d=!1;t.exports=function(){l(this._hooks,this._state,"setTimeout","clearTimeout",n,i,!0),l(this._hooks,this._state,"setInterval","clearInterval",s,o,!1),l(this._hooks,this._state,"setImmediate","clearImmediate",a,c,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate};function l(p,f,g,m,v,y,T){let w=r[g],R=r[m];r[g]=function(){if(!f.enabled)return w.apply(r,arguments);let O=new Array(arguments.length);for(let te=0;te<arguments.length;te++)O[te]=arguments[te];let F=O[0];if(typeof F!="function")throw new TypeError('"callback" argument must be a function');let z=new v,K=--f.counter,J;return p.init.call(z,K,0,null,null),O[0]=function(){u=J,p.pre.call(z,K);let te=!0;try{F.apply(this,arguments),te=!1}finally{te&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){p.post.call(z,K,!0),y.delete(J),p.destroy.call(null,K)})}p.post.call(z,K,!1),u=null,(T||d)&&(d=!1,y.delete(J),p.destroy.call(null,K))},J=w.apply(r,O),y.set(J,K),J},r[m]=function(O){if(u===O&&O!==null)d=!0;else if(y.has(O)){let F=y.get(O);y.delete(O),p.destroy.call(null,F)}R.apply(r,arguments)}}}),Eu=A((e,t)=>{t.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),jy=A((e,t)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,s={nextTick:My(),promise:qy(),timers:Ly()},a=new Set;function i(){this.enabled=!1,this.counter=0}function o(){let d=this.initFns=[],l=this.preFns=[],p=this.postFns=[],f=this.destroyFns=[];this.init=function(g,m,v,y){if(m===n){a.add(g);return}for(let T of d)T(g,this,m,v,y)},this.pre=function(g){if(!a.has(g))for(let m of l)m(g,this)},this.post=function(g,m){if(!a.has(g))for(let v of p)v(g,this,m)},this.destroy=function(g){if(a.has(g)){a.delete(g);return}for(let m of f)m(g)}}o.prototype.add=function(d){d.init&&this.initFns.push(d.init),d.pre&&this.preFns.push(d.pre),d.post&&this.postFns.push(d.post),d.destroy&&this.destroyFns.push(d.destroy)};function c(d,l){let p=d.indexOf(l);p!==-1&&d.splice(p,1)}o.prototype.remove=function(d){d.init&&c(this.initFns,d.init),d.pre&&c(this.preFns,d.pre),d.post&&c(this.postFns,d.post),d.destroy&&c(this.destroyFns,d.destroy)};function u(){this._state=new i,this._hooks=new o,this.version=Eu().version,this.providers=r.Providers;for(let d of Object.keys(s))s[d].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}t.exports=u,u.prototype.addHooks=function(d){this._hooks.add(d)},u.prototype.removeHooks=function(d){this._hooks.remove(d)},u.prototype.enable=function(){this._state.enabled=!0,r.enable()},u.prototype.disable=function(){this._state.enabled=!1,r.disable()}}),Cu=A((e,t)=>{t.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),Fy=A((e,t)=>{function r(n){try{return Error.prototype.toString.call(n)}catch(s){try{return"<error: "+s+">"}catch{return"<error>"}}}t.exports=function(n,s){var a=[];a.push(r(n));for(var i=0;i<s.length;i++){var o=s[i],c;try{c=o.toString()}catch(u){try{c="<error: "+u+">"}catch{c="<error>"}}a.push("    at "+c)}return a.join(`
`)}}),Hy=A((e,t)=>{var r=Fy();function n(){this.extend=new i,this.filter=new i,this.format=new o,this.version=Cu().version}var s=!1;n.prototype.callSite=function l(p){p||(p={}),s=!0;var f={};Error.captureStackTrace(f,l);var g=f.stack;return s=!1,g=g.slice(p.slice||0),p.extend&&(g=this.extend._modify(f,g)),p.filter&&(g=this.filter._modify(f,g)),g};var a=new n;function i(){this._modifiers=[]}i.prototype._modify=function(l,p){for(var f=0,g=this._modifiers.length;f<g;f++)p=this._modifiers[f](l,p);return p},i.prototype.attach=function(l){this._modifiers.push(l)},i.prototype.deattach=function(l){var p=this._modifiers.indexOf(l);return p===-1?!1:(this._modifiers.splice(p,1),!0)};function o(){this._formater=r,this._previous=void 0}o.prototype.replace=function(l){l?this._formater=l:this.restore()},o.prototype.restore=function(){this._formater=r,this._previous=void 0},o.prototype._backup=function(){this._previous=this._formater},o.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&a.format.replace(Error.prepareStackTrace);var c=!1;function u(l,p){if(s)return p;if(c)return r(l,p);var f=p.concat();f=a.extend._modify(l,f),f=a.filter._modify(l,f),f=f.slice(0,Error.stackTraceLimit),Object.isExtensible(l)&&Object.getOwnPropertyDescriptor(l,"callSite")===void 0&&(l.callSite={original:p,mutated:f}),c=!0;var g=a.format._formater(l,f);return c=!1,g}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return u},set:function(l){l===u?a.format._roolback():(a.format._backup(),a.format.replace(l))}});function d(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:d,set:function(l){Object.defineProperty(this,"callSite",{value:l,writable:!0,configurable:!0})},configurable:!0}),t.exports=a}),bu=A((e,t)=>{if(global._stackChain)if(global._stackChain.version===Cu().version)t.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else t.exports=global._stackChain=Hy()}),$y=A((e,t)=>{"use strict";var r=jy();if(global._asyncHook)if(global._asyncHook.version===Eu().version)t.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else bu().filter.attach(function(n,s){return s.filter(function(a){let i=a.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),t.exports=global._asyncHook=new r}),Uy=A((e,t)=>{"use strict";var r=require("util"),n=require("assert"),s=xs(),a=$y(),i="cls@contexts",o="error@context",c=[];for(let R in a.providers)c[a.providers[R]]=R;var u=process.env.DEBUG_CLS_HOOKED,d=-1;t.exports={getNamespace:p,createNamespace:f,destroyNamespace:g,reset:m,ERROR_SYMBOL:o};function l(R){this.name=R,this.active=null,this._set=[],this.id=null,this._contexts=new Map}l.prototype.set=function(R,O){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return u&&v("    SETTING KEY:"+R+"="+O+" in ns:"+this.name+" uid:"+d+" active:"+r.inspect(this.active,!0)),this.active[R]=O,O},l.prototype.get=function(R){if(!this.active){u&&v("    GETTING KEY:"+R+"=undefined "+this.name+" uid:"+d+" active:"+r.inspect(this.active,!0));return}return u&&v("    GETTING KEY:"+R+"="+this.active[R]+" "+this.name+" uid:"+d+" active:"+r.inspect(this.active,!0)),this.active[R]},l.prototype.createContext=function(){u&&v("   CREATING Context: "+this.name+" uid:"+d+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let R=Object.create(this.active?this.active:Object.prototype);return R._ns_name=this.name,R.id=d,u&&v("   CREATED Context: "+this.name+" uid:"+d+" len:"+this._set.length+"  context:"+r.inspect(R,!0,2,!0)),R},l.prototype.run=function(R){let O=this.createContext();this.enter(O);try{return u&&v(" BEFORE RUN: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(O)),R(O),O}catch(F){throw F&&(F[o]=O),F}finally{u&&v(" AFTER RUN: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(O)),this.exit(O)}},l.prototype.runAndReturn=function(R){var O;return this.run(function(F){O=R(F)}),O},l.prototype.runPromise=function(R){let O=this.createContext();this.enter(O);let F=R(O);if(!F||!F.then||!F.catch)throw new Error("fn must return a promise.");return u&&v(" BEFORE runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(O)),F.then(z=>(u&&v(" AFTER runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(O)),this.exit(O),z)).catch(z=>{throw z[o]=O,u&&v(" AFTER runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(O)),this.exit(O),z})},l.prototype.bind=function(R,O){O||(this.active?O=this.active:O=this.createContext());let F=this;return function(){F.enter(O);try{return R.apply(this,arguments)}catch(z){throw z&&(z[o]=O),z}finally{F.exit(O)}}},l.prototype.enter=function(R){n.ok(R,"context must be provided for entering"),u&&v("  ENTER "+this.name+" uid:"+d+" len:"+this._set.length+" context: "+r.inspect(R)),this._set.push(this.active),this.active=R},l.prototype.exit=function(R){if(n.ok(R,"context must be provided for exiting"),u&&v("  EXIT "+this.name+" uid:"+d+" len:"+this._set.length+" context: "+r.inspect(R)),this.active===R){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let O=this._set.lastIndexOf(R);O<0?(u&&v("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(R)),n.ok(O>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(R))):(n.ok(O,"can't remove top context"),this._set.splice(O,1))},l.prototype.bindEmitter=function(R){n.ok(R.on&&R.addListener&&R.emit,"can only bind real EEs");let O=this,F="context@"+this.name;function z(J){!J||(J[i]||(J[i]=Object.create(null)),J[i][F]={namespace:O,context:O.active})}function K(J){if(!(J&&J[i]))return J;let te=J,U=J[i];return Object.keys(U).forEach(function(G){let Q=U[G];te=Q.namespace.bind(te,Q.context)}),te}s(R,z,K)},l.prototype.fromException=function(R){return R[o]};function p(R){return process.namespaces[R]}function f(R){n.ok(R,"namespace must be given a name."),u&&v("CREATING NAMESPACE "+R);let O=new l(R);return O.id=d,a.addHooks({init(F,z,K,J,te){d=F,J?(O._contexts.set(F,O._contexts.get(J)),u&&v("PARENTID: "+R+" uid:"+F+" parent:"+J+" provider:"+K)):O._contexts.set(d,O.active),u&&v("INIT "+R+" uid:"+F+" parent:"+J+" provider:"+c[K]+" active:"+r.inspect(O.active,!0))},pre(F,z){d=F;let K=O._contexts.get(F);K?(u&&v(" PRE "+R+" uid:"+F+" handle:"+y(z)+" context:"+r.inspect(K)),O.enter(K)):u&&v(" PRE MISSING CONTEXT "+R+" uid:"+F+" handle:"+y(z))},post(F,z){d=F;let K=O._contexts.get(F);K?(u&&v(" POST "+R+" uid:"+F+" handle:"+y(z)+" context:"+r.inspect(K)),O.exit(K)):u&&v(" POST MISSING CONTEXT "+R+" uid:"+F+" handle:"+y(z))},destroy(F){d=F,u&&v("DESTROY "+R+" uid:"+F+" context:"+r.inspect(O._contexts.get(d))+" active:"+r.inspect(O.active,!0)),O._contexts.delete(F)}}),process.namespaces[R]=O,O}function g(R){let O=p(R);n.ok(O,`can't delete nonexistent namespace! "`+R+'"'),n.ok(O.id,"don't assign to process.namespaces directly! "+r.inspect(O)),process.namespaces[R]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(R){g(R)}),process.namespaces=Object.create(null)}process.namespaces={},a._state&&!a._state.enabled&&a.enable();function v(R){process.env.DEBUG&&process._rawDebug(R)}function y(R){if(!R)return R;if(typeof R=="function")return R.name?R.name:(R.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(R.constructor&&R.constructor.name)return R.constructor.name}if(u){T=bu();for(w in T.filter._modifiers)T.filter.deattach(w)}var T,w}),By=A((e,t)=>{"use strict";var r=Ny();process&&r.gte(process.versions.node,"8.0.0")?t.exports=ky():t.exports=Uy()}),Gy=A((e,t)=>{e=t.exports=re;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var h=Array.prototype.slice.call(arguments,0);h.unshift("SEMVER"),console.log.apply(console,h)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,i=e.re=[],o=e.src=[],c=0,u=c++;o[u]="0|[1-9]\\d*";var d=c++;o[d]="[0-9]+";var l=c++;o[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;o[p]="("+o[u]+")\\.("+o[u]+")\\.("+o[u]+")";var f=c++;o[f]="("+o[d]+")\\.("+o[d]+")\\.("+o[d]+")";var g=c++;o[g]="(?:"+o[u]+"|"+o[l]+")";var m=c++;o[m]="(?:"+o[d]+"|"+o[l]+")";var v=c++;o[v]="(?:-("+o[g]+"(?:\\."+o[g]+")*))";var y=c++;o[y]="(?:-?("+o[m]+"(?:\\."+o[m]+")*))";var T=c++;o[T]="[0-9A-Za-z-]+";var w=c++;o[w]="(?:\\+("+o[T]+"(?:\\."+o[T]+")*))";var R=c++,O="v?"+o[p]+o[v]+"?"+o[w]+"?";o[R]="^"+O+"$";var F="[v=\\s]*"+o[f]+o[y]+"?"+o[w]+"?",z=c++;o[z]="^"+F+"$";var K=c++;o[K]="((?:<|>)?=?)";var J=c++;o[J]=o[d]+"|x|X|\\*";var te=c++;o[te]=o[u]+"|x|X|\\*";var U=c++;o[U]="[v=\\s]*("+o[te]+")(?:\\.("+o[te]+")(?:\\.("+o[te]+")(?:"+o[v]+")?"+o[w]+"?)?)?";var G=c++;o[G]="[v=\\s]*("+o[J]+")(?:\\.("+o[J]+")(?:\\.("+o[J]+")(?:"+o[y]+")?"+o[w]+"?)?)?";var Q=c++;o[Q]="^"+o[K]+"\\s*"+o[U]+"$";var ne=c++;o[ne]="^"+o[K]+"\\s*"+o[G]+"$";var ve=c++;o[ve]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var de=c++;o[de]="(?:~>?)";var X=c++;o[X]="(\\s*)"+o[de]+"\\s+",i[X]=new RegExp(o[X],"g");var ce="$1~",ie=c++;o[ie]="^"+o[de]+o[U]+"$";var pe=c++;o[pe]="^"+o[de]+o[G]+"$";var he=c++;o[he]="(?:\\^)";var Ce=c++;o[Ce]="(\\s*)"+o[he]+"\\s+",i[Ce]=new RegExp(o[Ce],"g");var _e="$1^",Be=c++;o[Be]="^"+o[he]+o[U]+"$";var Je=c++;o[Je]="^"+o[he]+o[G]+"$";var Ke=c++;o[Ke]="^"+o[K]+"\\s*("+F+")$|^$";var je=c++;o[je]="^"+o[K]+"\\s*("+O+")$|^$";var xe=c++;o[xe]="(\\s*)"+o[K]+"\\s*("+F+"|"+o[U]+")",i[xe]=new RegExp(o[xe],"g");var it="$1$2$3",ut=c++;o[ut]="^\\s*("+o[U]+")\\s+-\\s+("+o[U]+")\\s*$";var Oe=c++;o[Oe]="^\\s*("+o[G]+")\\s+-\\s+("+o[G]+")\\s*$";var me=c++;for(o[me]="(<|>)?=?\\s*\\*",Ae=0;Ae<c;Ae++)r(Ae,o[Ae]),i[Ae]||(i[Ae]=new RegExp(o[Ae]));var Ae;e.parse=ke;function ke(h,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),h instanceof re)return h;if(typeof h!="string"||h.length>n)return null;var b=_.loose?i[z]:i[R];if(!b.test(h))return null;try{return new re(h,_)}catch{return null}}e.valid=nr;function nr(h,_){var b=ke(h,_);return b?b.version:null}e.clean=at;function at(h,_){var b=ke(h.trim().replace(/^[=v]+/,""),_);return b?b.version:null}e.SemVer=re;function re(h,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),h instanceof re){if(h.loose===_.loose)return h;h=h.version}else if(typeof h!="string")throw new TypeError("Invalid Version: "+h);if(h.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof re))return new re(h,_);r("SemVer",h,_),this.options=_,this.loose=!!_.loose;var b=h.trim().match(_.loose?i[z]:i[R]);if(!b)throw new TypeError("Invalid Version: "+h);if(this.raw=h,this.major=+b[1],this.minor=+b[2],this.patch=+b[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");b[4]?this.prerelease=b[4].split(".").map(function(D){if(/^[0-9]+$/.test(D)){var k=+D;if(k>=0&&k<s)return k}return D}):this.prerelease=[],this.build=b[5]?b[5].split("."):[],this.format()}re.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},re.prototype.toString=function(){return this.version},re.prototype.compare=function(h){return r("SemVer.compare",this.version,this.options,h),h instanceof re||(h=new re(h,this.options)),this.compareMain(h)||this.comparePre(h)},re.prototype.compareMain=function(h){return h instanceof re||(h=new re(h,this.options)),rt(this.major,h.major)||rt(this.minor,h.minor)||rt(this.patch,h.patch)},re.prototype.comparePre=function(h){if(h instanceof re||(h=new re(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;var _=0;do{var b=this.prerelease[_],D=h.prerelease[_];if(r("prerelease compare",_,b,D),b===void 0&&D===void 0)return 0;if(D===void 0)return 1;if(b===void 0)return-1;if(b!==D)return rt(b,D)}while(++_)},re.prototype.inc=function(h,_){switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var b=this.prerelease.length;--b>=0;)typeof this.prerelease[b]=="number"&&(this.prerelease[b]++,b=-2);b===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+h)}return this.format(),this.raw=this.version,this},e.inc=Qt;function Qt(h,_,b,D){typeof b=="string"&&(D=b,b=void 0);try{return new re(h,b).inc(_,D).version}catch{return null}}e.diff=ir;function ir(h,_){if(L(h,_))return null;var b=ke(h),D=ke(_),k="";if(b.prerelease.length||D.prerelease.length){k="pre";var $="prerelease"}for(var W in b)if((W==="major"||W==="minor"||W==="patch")&&b[W]!==D[W])return k+W;return $}e.compareIdentifiers=rt;var ht=/^[0-9]+$/;function rt(h,_){var b=ht.test(h),D=ht.test(_);return b&&D&&(h=+h,_=+_),h===_?0:b&&!D?-1:D&&!b?1:h<_?-1:1}e.rcompareIdentifiers=xt;function xt(h,_){return rt(_,h)}e.major=lt;function lt(h,_){return new re(h,_).major}e.minor=Ft;function Ft(h,_){return new re(h,_).minor}e.patch=Pt;function Pt(h,_){return new re(h,_).patch}e.compare=M;function M(h,_,b){return new re(h,b).compare(new re(_,b))}e.compareLoose=N;function N(h,_){return M(h,_,!0)}e.rcompare=P;function P(h,_,b){return M(_,h,b)}e.sort=q;function q(h,_){return h.sort(function(b,D){return e.compare(b,D,_)})}e.rsort=H;function H(h,_){return h.sort(function(b,D){return e.rcompare(b,D,_)})}e.gt=E;function E(h,_,b){return M(h,_,b)>0}e.lt=C;function C(h,_,b){return M(h,_,b)<0}e.eq=L;function L(h,_,b){return M(h,_,b)===0}e.neq=V;function V(h,_,b){return M(h,_,b)!==0}e.gte=ue;function ue(h,_,b){return M(h,_,b)>=0}e.lte=fe;function fe(h,_,b){return M(h,_,b)<=0}e.cmp=Re;function Re(h,_,b,D){switch(_){case"===":return typeof h=="object"&&(h=h.version),typeof b=="object"&&(b=b.version),h===b;case"!==":return typeof h=="object"&&(h=h.version),typeof b=="object"&&(b=b.version),h!==b;case"":case"=":case"==":return L(h,b,D);case"!=":return V(h,b,D);case">":return E(h,b,D);case">=":return ue(h,b,D);case"<":return C(h,b,D);case"<=":return fe(h,b,D);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=ye;function ye(h,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),h instanceof ye){if(h.loose===!!_.loose)return h;h=h.value}if(!(this instanceof ye))return new ye(h,_);r("comparator",h,_),this.options=_,this.loose=!!_.loose,this.parse(h),this.semver===Fe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Fe={};ye.prototype.parse=function(h){var _=this.options.loose?i[Ke]:i[je],b=h.match(_);if(!b)throw new TypeError("Invalid comparator: "+h);this.operator=b[1],this.operator==="="&&(this.operator=""),b[2]?this.semver=new re(b[2],this.options.loose):this.semver=Fe},ye.prototype.toString=function(){return this.value},ye.prototype.test=function(h){return r("Comparator.test",h,this.options.loose),this.semver===Fe?!0:(typeof h=="string"&&(h=new re(h,this.options)),Re(h,this.operator,this.semver,this.options))},ye.prototype.intersects=function(h,_){if(!(h instanceof ye))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var b;if(this.operator==="")return b=new le(h.value,_),vt(this.value,b,_);if(h.operator==="")return b=new le(this.value,_),vt(h.semver,b,_);var D=(this.operator===">="||this.operator===">")&&(h.operator===">="||h.operator===">"),k=(this.operator==="<="||this.operator==="<")&&(h.operator==="<="||h.operator==="<"),$=this.semver.version===h.semver.version,W=(this.operator===">="||this.operator==="<=")&&(h.operator===">="||h.operator==="<="),se=Re(this.semver,"<",h.semver,_)&&(this.operator===">="||this.operator===">")&&(h.operator==="<="||h.operator==="<"),oe=Re(this.semver,">",h.semver,_)&&(this.operator==="<="||this.operator==="<")&&(h.operator===">="||h.operator===">");return D||k||$&&W||se||oe},e.Range=le;function le(h,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),h instanceof le)return h.loose===!!_.loose&&h.includePrerelease===!!_.includePrerelease?h:new le(h.raw,_);if(h instanceof ye)return new le(h.value,_);if(!(this instanceof le))return new le(h,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=h,this.set=h.split(/\s*\|\|\s*/).map(function(b){return this.parseRange(b.trim())},this).filter(function(b){return b.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+h);this.format()}le.prototype.format=function(){return this.range=this.set.map(function(h){return h.join(" ").trim()}).join("||").trim(),this.range},le.prototype.toString=function(){return this.range},le.prototype.parseRange=function(h){var _=this.options.loose;h=h.trim();var b=_?i[Oe]:i[ut];h=h.replace(b,Ge),r("hyphen replace",h),h=h.replace(i[xe],it),r("comparator trim",h,i[xe]),h=h.replace(i[X],ce),h=h.replace(i[Ce],_e),h=h.split(/\s+/).join(" ");var D=_?i[Ke]:i[je],k=h.split(" ").map(function($){return Nt($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(k=k.filter(function($){return!!$.match(D)})),k=k.map(function($){return new ye($,this.options)},this),k},le.prototype.intersects=function(h,_){if(!(h instanceof le))throw new TypeError("a Range is required");return this.set.some(function(b){return b.every(function(D){return h.set.some(function(k){return k.every(function($){return D.intersects($,_)})})})})},e.toComparators=Me;function Me(h,_){return new le(h,_).set.map(function(b){return b.map(function(D){return D.value}).join(" ").trim().split(" ")})}function Nt(h,_){return r("comp",h,_),h=Ur(h,_),r("caret",h),h=Ht(h,_),r("tildes",h),h=S(h,_),r("xrange",h),h=ge(h,_),r("stars",h),h}function De(h){return!h||h.toLowerCase()==="x"||h==="*"}function Ht(h,_){return h.trim().split(/\s+/).map(function(b){return $r(b,_)}).join(" ")}function $r(h,_){var b=_.loose?i[pe]:i[ie];return h.replace(b,function(D,k,$,W,se){r("tilde",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":se?(r("replaceTilde pr",se),oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0"):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0",r("tilde return",oe),oe})}function Ur(h,_){return h.trim().split(/\s+/).map(function(b){return Br(b,_)}).join(" ")}function Br(h,_){r("caret",h,_);var b=_.loose?i[Je]:i[Be];return h.replace(b,function(D,k,$,W,se){r("caret",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?k==="0"?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+".0 <"+(+k+1)+".0.0":se?(r("replaceCaret pr",se),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+"-"+se+" <"+(+k+1)+".0.0"):(r("no pr"),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+" <"+(+k+1)+".0.0"),r("caret return",oe),oe})}function S(h,_){return r("replaceXRanges",h,_),h.split(/\s+/).map(function(b){return Z(b,_)}).join(" ")}function Z(h,_){h=h.trim();var b=_.loose?i[ne]:i[Q];return h.replace(b,function(D,k,$,W,se,oe){r("xRange",h,D,k,$,W,se,oe);var et=De($),Ye=et||De(W),Ve=Ye||De(se),Le=Ve;return k==="="&&Le&&(k=""),et?k===">"||k==="<"?D="<0.0.0":D="*":k&&Le?(Ye&&(W=0),se=0,k===">"?(k=">=",Ye?($=+$+1,W=0,se=0):(W=+W+1,se=0)):k==="<="&&(k="<",Ye?$=+$+1:W=+W+1),D=k+$+"."+W+"."+se):Ye?D=">="+$+".0.0 <"+(+$+1)+".0.0":Ve&&(D=">="+$+"."+W+".0 <"+$+"."+(+W+1)+".0"),r("xRange return",D),D})}function ge(h,_){return r("replaceStars",h,_),h.trim().replace(i[me],"")}function Ge(h,_,b,D,k,$,W,se,oe,et,Ye,Ve,Le){return De(b)?_="":De(D)?_=">="+b+".0.0":De(k)?_=">="+b+"."+D+".0":_=">="+_,De(oe)?se="":De(et)?se="<"+(+oe+1)+".0.0":De(Ye)?se="<"+oe+"."+(+et+1)+".0":Ve?se="<="+oe+"."+et+"."+Ye+"-"+Ve:se="<="+se,(_+" "+se).trim()}le.prototype.test=function(h){if(!h)return!1;typeof h=="string"&&(h=new re(h,this.options));for(var _=0;_<this.set.length;_++)if(Qe(this.set[_],h,this.options))return!0;return!1};function Qe(h,_,b){for(var D=0;D<h.length;D++)if(!h[D].test(_))return!1;if(_.prerelease.length&&!b.includePrerelease){for(D=0;D<h.length;D++)if(r(h[D].semver),h[D].semver!==Fe&&h[D].semver.prerelease.length>0){var k=h[D].semver;if(k.major===_.major&&k.minor===_.minor&&k.patch===_.patch)return!0}return!1}return!0}e.satisfies=vt;function vt(h,_,b){try{_=new le(_,b)}catch{return!1}return _.test(h)}e.maxSatisfying=ur;function ur(h,_,b){var D=null,k=null;try{var $=new le(_,b)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===-1)&&(D=W,k=new re(D,b))}),D}e.minSatisfying=gn;function gn(h,_,b){var D=null,k=null;try{var $=new le(_,b)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===1)&&(D=W,k=new re(D,b))}),D}e.minVersion=mr;function mr(h,_){h=new le(h,_);var b=new re("0.0.0");if(h.test(b)||(b=new re("0.0.0-0"),h.test(b)))return b;b=null;for(var D=0;D<h.set.length;++D){var k=h.set[D];k.forEach(function($){var W=new re($.semver.version);switch($.operator){case">":W.prerelease.length===0?W.patch++:W.prerelease.push(0),W.raw=W.format();case"":case">=":(!b||E(b,W))&&(b=W);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return b&&h.test(b)?b:null}e.validRange=mn;function mn(h,_){try{return new le(h,_).range||"*"}catch{return null}}e.ltr=vn;function vn(h,_,b){return fr(h,_,"<",b)}e.gtr=_n;function _n(h,_,b){return fr(h,_,">",b)}e.outside=fr;function fr(h,_,b,D){h=new re(h,D),_=new le(_,D);var k,$,W,se,oe;switch(b){case">":k=E,$=fe,W=C,se=">",oe=">=";break;case"<":k=C,$=ue,W=E,se="<",oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(vt(h,_,D))return!1;for(var et=0;et<_.set.length;++et){var Ye=_.set[et],Ve=null,Le=null;if(Ye.forEach(function(dt){dt.semver===Fe&&(dt=new ye(">=0.0.0")),Ve=Ve||dt,Le=Le||dt,k(dt.semver,Ve.semver,D)?Ve=dt:W(dt.semver,Le.semver,D)&&(Le=dt)}),Ve.operator===se||Ve.operator===oe||(!Le.operator||Le.operator===se)&&$(h,Le.semver)||Le.operator===oe&&W(h,Le.semver))return!1}return!0}e.prerelease=yn;function yn(h,_){var b=ke(h,_);return b&&b.prerelease.length?b.prerelease:null}e.intersects=vr;function vr(h,_,b){return h=new le(h,b),_=new le(_,b),h.intersects(_)}e.coerce=En;function En(h){if(h instanceof re)return h;if(typeof h!="string")return null;var _=h.match(i[ve]);return _==null?null:ke(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),Vy=A((e,t)=>{var r=As().wrap,n=1<<0,s=1<<1,a=1<<2,i=1<<3,o=[],c=0,u=!1,d=[],l,p;function f(z,K){var J=z.length,te=K.length,U=[];if(J===0&&te===0)return U;for(var G=0;G<J;G++)U[G]=z[G];if(te===0)return U;for(var Q=0;Q<te;Q++){var ne=!0;for(G=0;G<J;G++)if(z[G].uid===K[Q].uid){ne=!1;break}ne&&U.push(K[Q])}return U}process._fatalException?(g=!1,l=function(z){var K=o.length;if(g||K===0)return!1;var J=!1;g=!0;for(var te=0;te<K;++te){var U=o[te];if((U.flags&i)!==0){var G=m&&m[U.uid];J=U.error(G,z)||J}}return g=!1,d.length>0&&(o=d.pop()),m=void 0,J&&!u},p=function(z,K,J){var te=[];u=!0;for(var U=0;U<J;++U){var G=K[U];if(te[G.uid]=G.data,(G.flags&n)!==0){var Q=G.create(G.data);Q!==void 0&&(te[G.uid]=Q)}}return u=!1,function(){m=te,d.push(o),o=f(K,o),u=!0;for(var ne=0;ne<J;++ne)(K[ne].flags&s)>0&&K[ne].before(this,te[K[ne].uid]);u=!1;var ve=z.apply(this,arguments);for(u=!0,ne=0;ne<J;++ne)(K[ne].flags&a)>0&&K[ne].after(this,te[K[ne].uid]);return u=!1,o=d.pop(),m=void 0,ve}},r(process,"_fatalException",function(z){return function(K){return l(K)||z(K)}})):(v=!1,l=function(z){if(v)throw z;for(var K=!1,J=o.length,te=0;te<J;++te){var U=o[te];(U.flags&i)!==0&&(K=U.error(null,z)||K)}if(!K&&u)throw z},p=function(z,K,J){var te=[];u=!0;for(var U=0;U<J;++U){var G=K[U];if(te[G.uid]=G.data,(G.flags&n)!==0){var Q=G.create(G.data);Q!==void 0&&(te[G.uid]=Q)}}return u=!1,function(){var ne=!1,ve=!1;d.push(o),o=f(K,o),u=!0;for(var de=0;de<J;++de)(K[de].flags&s)>0&&K[de].before(this,te[K[de].uid]);u=!1;var X;try{X=z.apply(this,arguments)}catch(ce){ne=!0;for(var de=0;de<J;++de)if((o[de].flags&i)!=0)try{ve=o[de].error(te[K[de].uid],ce)||ve}catch(pe){throw v=!0,pe}if(!ve)throw process.removeListener("uncaughtException",l),process._originalNextTick(function(){process.addListener("uncaughtException",l)}),ce}finally{if(!ne||ve){for(u=!0,de=0;de<J;++de)(K[de].flags&a)>0&&K[de].after(this,te[K[de].uid]);u=!1}o=d.pop()}return X}},process.addListener("uncaughtException",l));var g,m,v;function y(z,K,J){u=!0;for(var te=0;te<J;++te){var U=K[te];U.create&&U.create(U.data)}return u=!1,function(){d.push(o),o=f(K,o);var G=z.apply(this,arguments);return o=d.pop(),G}}function T(z){var K=o.length;if(K===0)return z;for(var J=o.slice(),te=0;te<K;++te)if(J[te].flags>0)return p(z,J,K);return y(z,J,K)}function w(z,K){typeof z.create=="function"&&(this.create=z.create,this.flags|=n),typeof z.before=="function"&&(this.before=z.before,this.flags|=s),typeof z.after=="function"&&(this.after=z.after,this.flags|=a),typeof z.error=="function"&&(this.error=z.error,this.flags|=i),this.uid=++c,this.data=K===void 0?null:K}w.prototype.create=void 0,w.prototype.before=void 0,w.prototype.after=void 0,w.prototype.error=void 0,w.prototype.data=void 0,w.prototype.uid=0,w.prototype.flags=0;function R(z,K){if(typeof z!="object"||!z)throw new TypeError("callbacks argument must be an object");return z instanceof w?z:new w(z,K)}function O(z,K){var J;z instanceof w?J=z:J=R(z,K);for(var te=!1,U=0;U<o.length;U++)if(J===o[U]){te=!0;break}return te||o.push(J),J}function F(z){for(var K=0;K<o.length;K++)if(z===o[K]){o.splice(K,1);break}}process.createAsyncListener=R,process.addAsyncListener=O,process.removeAsyncListener=F,t.exports=T}),Wy=A((e,t)=>{"use strict";t.exports=(r,n)=>class extends r{constructor(s){var a,i;super(c);var o=this;try{s.apply(a,i)}catch(u){i[1](u)}return o;function c(u,d){a=this,i=[l,p];function l(f){return n(o,!1),u(f)}function p(f){return n(o,!1),d(f)}}}}}),Ky=A(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=As(),t=Gy(),r=e.wrap,n=e.massWrap,s=Vy(),a=require("util"),i=t.gte(process.version,"6.0.0"),o=t.gte(process.version,"7.0.0"),c=t.gte(process.version,"8.0.0"),u=t.gte(process.version,"11.0.0"),d=require("net");o&&!d._normalizeArgs?d._normalizeArgs=function(X){if(X.length===0)return[{},null];var ce=X[0],ie={};typeof ce=="object"&&ce!==null?ie=ce:de(ce)?ie.path=ce:(ie.port=ce,X.length>1&&typeof X[1]=="string"&&(ie.host=X[1]));var pe=X[X.length-1];return typeof pe!="function"?[ie,null]:[ie,pe]}:!o&&!d._normalizeConnectArgs&&(d._normalizeConnectArgs=function(X){var ce={};function ie(he){return(he=Number(he))>=0?he:!1}typeof X[0]=="object"&&X[0]!==null?ce=X[0]:typeof X[0]=="string"&&ie(X[0])===!1?ce.path=X[0]:(ce.port=X[0],typeof X[1]=="string"&&(ce.host=X[1]));var pe=X[X.length-1];return typeof pe=="function"?[ce,pe]:[ce]}),"_setUpListenHandle"in d.Server.prototype?r(d.Server.prototype,"_setUpListenHandle",l):r(d.Server.prototype,"_listen2",l);function l(X){return function(){this.on("connection",function(ce){ce._handle&&(ce._handle.onread=s(ce._handle.onread))});try{return X.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=s(this._handle.onconnection))}}}function p(X){if(X&&X._handle){var ce=X._handle;ce._originalOnread||(ce._originalOnread=ce.onread),ce.onread=s(ce._originalOnread)}}r(d.Socket.prototype,"connect",function(X){return function(){var ce;c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?ce=arguments[0]:ce=o?d._normalizeArgs(arguments):d._normalizeConnectArgs(arguments),ce[1]&&(ce[1]=s(ce[1]));var ie=X.apply(this,ce);return p(this),ie}});var f=require("http");r(f.Agent.prototype,"addRequest",function(X){return function(ce){var ie=ce.onSocket;return ce.onSocket=s(function(pe){return p(pe),ie.apply(this,arguments)}),X.apply(this,arguments)}});var g=require("child_process");function m(X){Array.isArray(X.stdio)&&X.stdio.forEach(function(ce){ce&&ce._handle&&(ce._handle.onread=s(ce._handle.onread),r(ce._handle,"close",ne))}),X._handle&&(X._handle.onexit=s(X._handle.onexit))}g.ChildProcess?r(g.ChildProcess.prototype,"spawn",function(X){return function(){var ce=X.apply(this,arguments);return m(this),ce}}):n(g,["execFile","fork","spawn"],function(X){return function(){var ce=X.apply(this,arguments);return m(ce),ce}}),process._fatalException||(process._originalNextTick=process.nextTick);var v=[];process._nextDomainTick&&v.push("_nextDomainTick"),process._tickDomainCallback&&v.push("_tickDomainCallback"),n(process,v,Q),r(process,"nextTick",ne);var y=["setTimeout","setInterval"];global.setImmediate&&y.push("setImmediate");var T=require("timers"),w=global.setTimeout===T.setTimeout;n(T,y,ne),w&&n(global,y,ne);var R=require("dns");n(R,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],Q),R.resolveNaptr&&r(R,"resolveNaptr",Q);var O=require("fs");n(O,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],Q),O.lchown&&r(O,"lchown",Q),O.lchmod&&r(O,"lchmod",Q),O.ftruncate&&r(O,"ftruncate",Q);var F;try{F=require("zlib")}catch{}F&&F.Deflate&&F.Deflate.prototype&&(z=Object.getPrototypeOf(F.Deflate.prototype),z._transform?r(z,"_transform",Q):z.write&&z.flush&&z.end&&n(z,["write","flush","end"],Q));var z,K;try{K=require("crypto")}catch{}K&&(J=["pbkdf2","randomBytes"],u||J.push("pseudoRandomBytes"),n(K,J,Q));var J,te=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";te&&(U=process.addAsyncListener({create:function(){te=!1}}),global.Promise.resolve(!0).then(function(){te=!1}),process.removeAsyncListener(U));var U;te&&G();function G(){var X=global.Promise;function ce(_e){if(!(this instanceof ce))return X(_e);if(typeof _e!="function")return new X(_e);var Be,Je,Ke=new X(je);Ke.__proto__=ce.prototype;try{_e.apply(Be,Je)}catch(xe){Je[1](xe)}return Ke;function je(xe,it){Be=this,Je=[ut,Oe];function ut(me){return pe(Ke,!1),xe(me)}function Oe(me){return pe(Ke,!1),it(me)}}}if(a.inherits(ce,X),r(X.prototype,"then",Ce),X.prototype.chain&&r(X.prototype,"chain",Ce),i)global.Promise=Wy()(X,pe);else{var ie=["all","race","reject","resolve","accept","defer"];ie.forEach(function(_e){typeof X[_e]=="function"&&(ce[_e]=X[_e])}),global.Promise=ce}function pe(_e,Be){(!_e.__asl_wrapper||Be)&&(_e.__asl_wrapper=s(he))}function he(_e,Be,Je,Ke){var je;try{return je=Be.call(_e,Je),{returnVal:je,error:!1}}catch(xe){return{errorVal:xe,error:!0}}finally{je instanceof X?Ke.__asl_wrapper=function(){var xe=je.__asl_wrapper||he;return xe.apply(this,arguments)}:pe(Ke,!0)}}function Ce(_e){return function(){var Be=this,Je=_e.apply(Be,Array.prototype.map.call(arguments,Ke));return Je.__asl_wrapper=function(je,xe,it,ut){return Be.__asl_wrapper?(Be.__asl_wrapper(je,function(){},null,Je),Je.__asl_wrapper(je,xe,it,ut)):he(je,xe,it,ut)},Je;function Ke(je){return typeof je!="function"?je:s(function(xe){var it=(Be.__asl_wrapper||he)(this,je,xe,Je);if(it.error)throw it.errorVal;return it.returnVal})}}}}function Q(X){var ce=function(){var ie,pe=arguments.length-1;if(typeof arguments[pe]=="function"){ie=Array(arguments.length);for(var he=0;he<arguments.length-1;he++)ie[he]=arguments[he];ie[pe]=s(arguments[pe])}return X.apply(this,ie||arguments)};switch(X.length){case 1:return function(ie){return arguments.length!==1?ce.apply(this,arguments):(typeof ie=="function"&&(ie=s(ie)),X.call(this,ie))};case 2:return function(ie,pe){return arguments.length!==2?ce.apply(this,arguments):(typeof pe=="function"&&(pe=s(pe)),X.call(this,ie,pe))};case 3:return function(ie,pe,he){return arguments.length!==3?ce.apply(this,arguments):(typeof he=="function"&&(he=s(he)),X.call(this,ie,pe,he))};case 4:return function(ie,pe,he,Ce){return arguments.length!==4?ce.apply(this,arguments):(typeof Ce=="function"&&(Ce=s(Ce)),X.call(this,ie,pe,he,Ce))};case 5:return function(ie,pe,he,Ce,_e){return arguments.length!==5?ce.apply(this,arguments):(typeof _e=="function"&&(_e=s(_e)),X.call(this,ie,pe,he,Ce,_e))};case 6:return function(ie,pe,he,Ce,_e,Be){return arguments.length!==6?ce.apply(this,arguments):(typeof Be=="function"&&(Be=s(Be)),X.call(this,ie,pe,he,Ce,_e,Be))};default:return ce}}function ne(X){var ce=function(){var ie;if(typeof arguments[0]=="function"){ie=Array(arguments.length),ie[0]=s(arguments[0]);for(var pe=1;pe<arguments.length;pe++)ie[pe]=arguments[pe]}return X.apply(this,ie||arguments)};switch(X.length){case 1:return function(ie){return arguments.length!==1?ce.apply(this,arguments):(typeof ie=="function"&&(ie=s(ie)),X.call(this,ie))};case 2:return function(ie,pe){return arguments.length!==2?ce.apply(this,arguments):(typeof ie=="function"&&(ie=s(ie)),X.call(this,ie,pe))};case 3:return function(ie,pe,he){return arguments.length!==3?ce.apply(this,arguments):(typeof ie=="function"&&(ie=s(ie)),X.call(this,ie,pe,he))};case 4:return function(ie,pe,he,Ce){return arguments.length!==4?ce.apply(this,arguments):(typeof ie=="function"&&(ie=s(ie)),X.call(this,ie,pe,he,Ce))};case 5:return function(ie,pe,he,Ce,_e){return arguments.length!==5?ce.apply(this,arguments):(typeof ie=="function"&&(ie=s(ie)),X.call(this,ie,pe,he,Ce,_e))};case 6:return function(ie,pe,he,Ce,_e,Be){return arguments.length!==6?ce.apply(this,arguments):(typeof ie=="function"&&(ie=s(ie)),X.call(this,ie,pe,he,Ce,_e,Be))};default:return ce}}function ve(X){return(X=Number(X))>=0?X:!1}function de(X){return typeof X=="string"&&ve(X)===!1}}),zy=A((e,t)=>{"use strict";var r=require("assert"),n=xs(),s="cls@contexts",a="error@context";process.addAsyncListener||Ky();function i(l){this.name=l,this.active=null,this._set=[],this.id=null}i.prototype.set=function(l,p){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[l]=p,p},i.prototype.get=function(l){if(this.active)return this.active[l]},i.prototype.createContext=function(){return Object.create(this.active)},i.prototype.run=function(l){var p=this.createContext();this.enter(p);try{return l(p),p}catch(f){throw f&&(f[a]=p),f}finally{this.exit(p)}},i.prototype.runAndReturn=function(l){var p;return this.run(function(f){p=l(f)}),p},i.prototype.bind=function(l,p){p||(this.active?p=this.active:p=this.createContext());var f=this;return function(){f.enter(p);try{return l.apply(this,arguments)}catch(g){throw g&&(g[a]=p),g}finally{f.exit(p)}}},i.prototype.enter=function(l){r.ok(l,"context must be provided for entering"),this._set.push(this.active),this.active=l},i.prototype.exit=function(l){if(r.ok(l,"context must be provided for exiting"),this.active===l){r.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var p=this._set.lastIndexOf(l);r.ok(p>=0,"context not currently entered; can't exit"),r.ok(p,"can't remove top context"),this._set.splice(p,1)},i.prototype.bindEmitter=function(l){r.ok(l.on&&l.addListener&&l.emit,"can only bind real EEs");var p=this,f="context@"+this.name;function g(v){!v||(v[s]||(v[s]=Object.create(null)),v[s][f]={namespace:p,context:p.active})}function m(v){if(!(v&&v[s]))return v;var y=v,T=v[s];return Object.keys(T).forEach(function(w){var R=T[w];y=R.namespace.bind(y,R.context)}),y}n(l,g,m)},i.prototype.fromException=function(l){return l[a]};function o(l){return process.namespaces[l]}function c(l){r.ok(l,"namespace must be given a name!");var p=new i(l);return p.id=process.addAsyncListener({create:function(){return p.active},before:function(f,g){g&&p.enter(g)},after:function(f,g){g&&p.exit(g)},error:function(f){f&&p.exit(f)}}),process.namespaces[l]=p,p}function u(l){var p=o(l);r.ok(p,"can't delete nonexistent namespace!"),r.ok(p.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(p.id),process.namespaces[l]=null}function d(){process.namespaces&&Object.keys(process.namespaces).forEach(function(l){u(l)}),process.namespaces=Object.create(null)}process.namespaces||d(),t.exports={getNamespace:o,createNamespace:c,destroyNamespace:u,reset:d}}),$n=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var t=Kt(),r=Ds(),n=uo(),s=fu(),a=yu(),i=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var u=c.session.get(c.CONTEXT_NAME);return u===void 0?null:u},c.generateContextObject=function(u,d,l,p,f,g){return d=d||u,this.enabled?{operation:{name:l,id:u,parentId:d,traceparent:f,tracestate:g},customProperties:new o(p)}:null},c.spanToContextObject=function(u,d,l){var p=new n;return p.traceId=u.traceId,p.spanId=u.spanId,p.traceFlag=n.formatOpenTelemetryTraceFlags(u.traceFlags)||n.DEFAULT_TRACE_FLAG,p.parentId=d,c.generateContextObject(p.traceId,p.parentId,l,null,p)},c.runWithContext=function(u,d){var l;return c.enabled?c.session.bind(d,(l={},l[c.CONTEXT_NAME]=u,l))():d()},c.wrapEmitter=function(u){c.enabled&&c.session.bindEmitter(u)},c.wrapCallback=function(u,d){var l;return c.enabled?c.session.bind(u,d?(l={},l[c.CONTEXT_NAME]=d,l):void 0):u},c.enable=function(u){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=u,this.hasEverEnabled=!0,typeof this.cls>"u"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=By():this.cls=zy()),c.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation(function(d){return c.session.bind(d)})),this.enabled=!0}},c.startOperation=function(u,d){var l=u&&u.traceContext||null,p=u&&u.traceId?u:null,f=u&&u.headers;if(p){var g=new n("00-"+p.traceId+"-"+p.spanId+"-01"),m=new s(p.traceState?p.traceState.serialize():null),v=c.generateContextObject(p.traceId,"|"+p.traceId+"."+p.spanId+".",typeof d=="string"?d:"",void 0,g,m);return v}if(l){var g=new n(l.traceparent),m=new s(l.tracestate),y=typeof d=="object"?new a(d):null,v=c.generateContextObject(g.traceId,g.parentId,typeof d=="string"?d:y.getOperationName({}),y&&y.getCorrelationContextHeader()||void 0,g,m);return v}if(f){var g=new n(f.traceparent?f.traceparent.toString():null),m=new s(f.tracestate?f.tracestate.toString():null),y=new a(u),v=c.generateContextObject(g.traceId,g.parentId,y.getOperationName({}),y.getCorrelationContextHeader(),g,m);return v}return t.warn("startOperation was called with invalid arguments",arguments),null},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var u=process.versions.node.split(".");return parseInt(u[0])>3||parseInt(u[0])>2&&parseInt(u[1])>2},c.shouldUseClsHooked=function(){var u=process.versions.node.split(".");return parseInt(u[0])>8||parseInt(u[0])>=8&&parseInt(u[1])>=2},c.canUseClsHooked=function(){var u=process.versions.node.split("."),d=parseInt(u[0])>8||parseInt(u[0])>=8&&parseInt(u[1])>=0,l=parseInt(u[0])<8||parseInt(u[0])<=8&&parseInt(u[1])<2,p=parseInt(u[0])>4||parseInt(u[0])>=4&&parseInt(u[1])>=7;return!(d&&l)&&p},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();e.CorrelationContextManager=i;var o=function(){function c(u){this.props=[],this.addHeaderData(u)}return c.prototype.addHeaderData=function(u){var d=u?u.split(", "):[];this.props=d.map(function(l){var p=l.split("=");return{key:p[0],value:p[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(u){return u.key+"="+u.value}).join(", ")},c.prototype.getProperty=function(u){for(var d=0;d<this.props.length;++d){var l=this.props[d];if(l.key===u)return l.value}},c.prototype.setProperty=function(u,d){if(c.bannedCharacters.test(u)||c.bannedCharacters.test(d)){t.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+u+" and value: "+d);return}for(var l=0;l<this.props.length;++l){var p=this.props[l];if(p.key===u){p.value=d;return}}this.props.push({key:u,value:d})},c.bannedCharacters=/[,=]/,c}()}),Xy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=lr(),r=kt(),n=[],s=function(o){var c=o.data.message;n.forEach(function(u){c instanceof Error?u.trackException({exception:c}):(c.lastIndexOf(`
`)==c.length-1&&(c=c.substring(0,c.length-1)),u.trackTrace({message:c,severity:o.data.stderr?t.SeverityLevel.Warning:t.SeverityLevel.Information}))})};function a(o,c){o?(n.length===0&&r.channel.subscribe("console",s),n.push(c)):(n=n.filter(function(u){return u!=c}),n.length===0&&r.channel.unsubscribe("console",s))}e.enable=a;function i(){r.channel.unsubscribe("console",s),n=[]}e.dispose=i}),Yy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=lr(),r=kt(),n=[],s={10:t.SeverityLevel.Verbose,20:t.SeverityLevel.Verbose,30:t.SeverityLevel.Information,40:t.SeverityLevel.Warning,50:t.SeverityLevel.Error,60:t.SeverityLevel.Critical},a=function(c){var u=c.data.result;n.forEach(function(d){var l=s[c.data.level];u instanceof Error?d.trackException({exception:u}):d.trackTrace({message:u,severity:l})})};function i(c,u){c?(n.length===0&&r.channel.subscribe("bunyan",a),n.push(u)):(n=n.filter(function(d){return d!=u}),n.length===0&&r.channel.unsubscribe("bunyan",a))}e.enable=i;function o(){r.channel.unsubscribe("bunyan",a),n=[]}e.dispose=o}),Qy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=lr(),r=kt(),n=[],s={syslog:function(c){var u={emerg:t.SeverityLevel.Critical,alert:t.SeverityLevel.Critical,crit:t.SeverityLevel.Critical,error:t.SeverityLevel.Error,warning:t.SeverityLevel.Warning,notice:t.SeverityLevel.Information,info:t.SeverityLevel.Information,debug:t.SeverityLevel.Verbose};return u[c]===void 0?t.SeverityLevel.Information:u[c]},npm:function(c){var u={error:t.SeverityLevel.Error,warn:t.SeverityLevel.Warning,info:t.SeverityLevel.Information,verbose:t.SeverityLevel.Verbose,debug:t.SeverityLevel.Verbose,silly:t.SeverityLevel.Verbose};return u[c]===void 0?t.SeverityLevel.Information:u[c]},unknown:function(c){return t.SeverityLevel.Information}},a=function(c){var u=c.data.message;n.forEach(function(d){if(u instanceof Error)d.trackException({exception:u,properties:c.data.meta});else{var l=s[c.data.levelKind](c.data.level);d.trackTrace({message:u,severity:l,properties:c.data.meta})}})};function i(c,u){c?(n.length===0&&r.channel.subscribe("winston",a),n.push(u)):(n=n.filter(function(d){return d!=u}),n.length===0&&r.channel.unsubscribe("winston",a))}e.enable=i;function o(){r.channel.unsubscribe("winston",a),n=[]}e.dispose=o}),Jy=A((e,t)=>{"use strict";var r=Ds(),n=function(){function s(a){if(s.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=a,s.INSTANCE=this}return s.prototype.enable=function(a,i){r.IsInitialized&&(Xy().enable(a&&i,this._client),Yy().enable(a,this._client),Qy().enable(a,this._client))},s.prototype.isInitialized=function(){return this._isInitialized},s.prototype.dispose=function(){s.INSTANCE=null,this.enable(!1,!1)},s._methodNames=["debug","info","log","warn","error"],s}();t.exports=n}),Zy=A((e,t)=>{"use strict";var r=function(){function n(s){if(n.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");n.INSTANCE=this,this._client=s;var a=process.versions.node.split(".");n._canUseUncaughtExceptionMonitor=parseInt(a[0])>13||parseInt(a[0])===13&&parseInt(a[1])>=7}return n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.enable=function(s){var a=this;if(s){this._isInitialized=!0;var i=this;if(!this._exceptionListenerHandle){var o=function(c,u,d){d===void 0&&(d=new Error(n._FALLBACK_ERROR_MESSAGE)),a._client.trackException({exception:d}),a._client.flush({isAppCrashing:!0}),c&&u&&process.listeners(u).length===1&&(console.error(d),process.exit(1))};n._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=o.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=o.bind(this,!0,n.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=o.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(n._canUseUncaughtExceptionMonitor?process.removeListener(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n.INSTANCE=null,n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",n.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",n.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",n._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",n._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",n._canUseUncaughtExceptionMonitor=!1,n}();t.exports=r}),nn=A(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var r;(function(a){a.COMMITTED_BYTES="\\Memory\\Committed Bytes",a.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",a.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",a.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",a.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",a.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",a.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",a.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",a.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(r=e.QuickPulseCounter||(e.QuickPulseCounter={}));var n;(function(a){a.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",a.AVAILABLE_BYTES="\\Memory\\Available Bytes",a.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",a.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",a.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",a.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(n=e.PerformanceCounter||(e.PerformanceCounter={}));var s;(function(a){a.REQUESTS_DURATION="requests/duration",a.DEPENDENCIES_DURATION="dependencies/duration",a.EXCEPTIONS_COUNT="exceptions/count",a.TRACES_COUNT="traces/count"})(s=e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=(t={},t[n.PROCESSOR_TIME]=r.PROCESSOR_TIME,t[n.REQUEST_RATE]=r.REQUEST_RATE,t[n.REQUEST_DURATION]=r.REQUEST_DURATION,t[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,t[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,t[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,t[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,t[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,t[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,t),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"}),Ns=A((e,t)=>{"use strict";var r=require("os"),n=nn(),s=function(){function a(i,o,c){o===void 0&&(o=6e4),c===void 0&&(c=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,this._client=i,this._collectionInterval=o,this._enableLiveMetricsCounters=c}return a.prototype.enable=function(i,o){var c=this;this._isEnabled=i,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),i?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:a._totalRequestCount,totalFailedRequestCount:a._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:a._totalDependencyCount,totalFailedDependencyCount:a._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:a._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=o||this._collectionInterval,this._handle=setInterval(function(){return c.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countRequest=function(i,o){var c;if(a.isEnabled()){if(typeof i=="string")c=+new Date("1970-01-01T"+i+"Z");else if(typeof i=="number")c=i;else return;a._intervalRequestExecutionTime+=c,o===!1&&a._totalFailedRequestCount++,a._totalRequestCount++}},a.countException=function(){a._totalExceptionCount++},a.countDependency=function(i,o){var c;if(a.isEnabled()){if(typeof i=="string")c=+new Date("1970-01-01T"+i+"Z");else if(typeof i=="number")c=i;else return;a._intervalDependencyExecutionTime+=c,o===!1&&a._totalFailedDependencyCount++,a._totalDependencyCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},a.prototype._trackCpu=function(){var i=r.cpus();if(i&&i.length&&this._lastCpus&&i.length===this._lastCpus.length){for(var o=0,c=0,u=0,d=0,l=0,p=0;!!i&&p<i.length;p++){var f=i[p],g=this._lastCpus[p],m="% cpu("+p+") ",v=f.model,y=f.speed,T=f.times,w=g.times,R=T.user-w.user||0;o+=R;var O=T.sys-w.sys||0;c+=O;var F=T.nice-w.nice||0;u+=F;var z=T.idle-w.idle||0;d+=z;var K=T.irq-w.irq||0;l+=K}var J=void 0;if(typeof process.cpuUsage=="function"){var te=process.cpuUsage(),U=process.hrtime(),G=te.user-this._lastAppCpuUsage.user+(te.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var Q=(U[0]-this._lastHrtime[0])*1e6+(U[1]-this._lastHrtime[1])/1e3||0;J=100*G/(Q*i.length)}this._lastAppCpuUsage=te,this._lastHrtime=U}var ne=o+c+u+d+l||1;this._client.trackMetric({name:n.PerformanceCounter.PROCESSOR_TIME,value:(ne-d)/ne*100}),this._client.trackMetric({name:n.PerformanceCounter.PROCESS_TIME,value:J||o/ne*100})}this._lastCpus=i},a.prototype._trackMemory=function(){var i=r.freemem(),o=process.memoryUsage().rss,c=r.totalmem()-i;this._client.trackMetric({name:n.PerformanceCounter.PRIVATE_BYTES,value:o}),this._client.trackMetric({name:n.PerformanceCounter.AVAILABLE_BYTES,value:i}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.COMMITTED_BYTES,value:c})},a.prototype._trackNetwork=function(){var i=this._lastRequests,o={totalRequestCount:a._totalRequestCount,totalFailedRequestCount:a._totalFailedRequestCount,time:+new Date},c=o.totalRequestCount-i.totalRequestCount||0,u=o.totalFailedRequestCount-i.totalFailedRequestCount||0,d=o.time-i.time,l=d/1e3,p=(a._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/c||0;if(this._lastIntervalRequestExecutionTime=a._intervalRequestExecutionTime,d>0){var f=c/l,g=u/l;this._client.trackMetric({name:n.PerformanceCounter.REQUEST_RATE,value:f}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.PerformanceCounter.REQUEST_DURATION,value:p}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.REQUEST_FAILURE_RATE,value:g})}this._lastRequests=o},a.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var i=this._lastDependencies,o={totalDependencyCount:a._totalDependencyCount,totalFailedDependencyCount:a._totalFailedDependencyCount,time:+new Date},c=o.totalDependencyCount-i.totalDependencyCount||0,u=o.totalFailedDependencyCount-i.totalFailedDependencyCount||0,d=o.time-i.time,l=d/1e3,p=(a._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/c||0;if(this._lastIntervalDependencyExecutionTime=a._intervalDependencyExecutionTime,d>0){var f=c/l,g=u/l;this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_RATE,value:f}),this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:g}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_DURATION,value:p})}this._lastDependencies=o}},a.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var i=this._lastExceptions,o={totalExceptionCount:a._totalExceptionCount,time:+new Date},c=o.totalExceptionCount-i.totalExceptionCount||0,u=o.time-i.time,d=u/1e3;if(u>0){var l=c/d;this._client.trackMetric({name:n.QuickPulseCounter.EXCEPTION_RATE,value:l})}this._lastExceptions=o}},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a._totalRequestCount=0,a._totalFailedRequestCount=0,a._totalDependencyCount=0,a._totalFailedDependencyCount=0,a._totalExceptionCount=0,a._intervalDependencyExecutionTime=0,a._intervalRequestExecutionTime=0,a}();t.exports=s}),eE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;var t=function(){function r(n){this.dimensions=n,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return r}();e.AggregatedMetricCounter=t}),tE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),Tu=A((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(o){for(var c,u=1,d=arguments.length;u<d;u++){c=arguments[u];for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(o[l]=c[l])}return o},r.apply(this,arguments)},n=nn(),s=eE(),a=tE(),i=function(){function o(c,u){u===void 0&&(u=6e4),o.INSTANCE||(o.INSTANCE=this),this._isInitialized=!1,o._dependencyCountersCollection=[],o._requestCountersCollection=[],o._exceptionCountersCollection=[],o._traceCountersCollection=[],this._client=c,this._collectionInterval=u}return o.prototype.enable=function(c,u){var d=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._collectionInterval=u||this._collectionInterval,this._handle=setInterval(function(){return d.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},o.countException=function(c){if(o.isEnabled()){var u=o._getAggregatedCounter(c,this._exceptionCountersCollection);u.totalCount++}},o.countTrace=function(c){if(o.isEnabled()){var u=o._getAggregatedCounter(c,this._traceCountersCollection);u.totalCount++}},o.countRequest=function(c,u){if(o.isEnabled()){var d,l=o._getAggregatedCounter(u,this._requestCountersCollection);if(typeof c=="string")d=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")d=c;else return;l.intervalExecutionTime+=d,l.totalCount++}},o.countDependency=function(c,u){if(o.isEnabled()){var d=o._getAggregatedCounter(u,this._dependencyCountersCollection),l;if(typeof c=="string")l=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")l=c;else return;d.intervalExecutionTime+=l,d.totalCount++}},o.prototype.isInitialized=function(){return this._isInitialized},o.isEnabled=function(){return o.INSTANCE&&o.INSTANCE._isEnabled},o.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},o._getAggregatedCounter=function(c,u){for(var d=!1,l=0;l<u.length;l++){if(c===u[l].dimensions)return u[l];if(Object.keys(c).length===Object.keys(u[l].dimensions).length){for(var p in c)if(c[p]!=u[l].dimensions[p]){d=!0;break}if(!d)return u[l];d=!1}}var f=new s.AggregatedMetricCounter(c);return u.push(f),f},o.prototype._trackRequestMetrics=function(){for(var c=0;c<o._requestCountersCollection.length;c++){var u=o._requestCountersCollection[c];u.time=+new Date;var d=u.totalCount-u.lastTotalCount||0,l=u.time-u.lastTime,p=(u.intervalExecutionTime-u.lastIntervalExecutionTime)/d||0;u.lastIntervalExecutionTime=u.intervalExecutionTime,l>0&&d>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:u.dimensions,value:p,count:d,aggregationInterval:l,metricType:n.MetricId.REQUESTS_DURATION}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},o.prototype._trackDependencyMetrics=function(){for(var c=0;c<o._dependencyCountersCollection.length;c++){var u=o._dependencyCountersCollection[c];u.time=+new Date;var d=u.totalCount-u.lastTotalCount||0,l=u.time-u.lastTime,p=(u.intervalExecutionTime-u.lastIntervalExecutionTime)/d||0;u.lastIntervalExecutionTime=u.intervalExecutionTime,l>0&&d>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:u.dimensions,value:p,count:d,aggregationInterval:l,metricType:n.MetricId.DEPENDENCIES_DURATION}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},o.prototype._trackExceptionMetrics=function(){for(var c=0;c<o._exceptionCountersCollection.length;c++){var u=o._exceptionCountersCollection[c],d=u.totalCount-u.lastTotalCount||0,l=u.time-u.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:u.dimensions,value:d,count:d,aggregationInterval:l,metricType:n.MetricId.EXCEPTIONS_COUNT}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},o.prototype._trackTraceMetrics=function(){for(var c=0;c<o._traceCountersCollection.length;c++){var u=o._traceCountersCollection[c],d=u.totalCount-u.lastTotalCount||0,l=u.time-u.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:u.dimensions,value:d,count:d,aggregationInterval:l,metricType:n.MetricId.TRACES_COUNT}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},o.prototype._trackPreAggregatedMetric=function(c){var u={};for(var d in c.dimensions)u[a.PreaggregatedMetricPropertyNames[d]]=c.dimensions[d];u=r(r({},u),{"_MS.MetricId":c.metricType,"_MS.AggregationIntervalMs":String(c.aggregationInterval),"_MS.IsAutocollected":"True"});var l={name:c.name,value:c.value,count:c.count,properties:u,kind:"Aggregation"};this._client.trackMetric(l)},o.prototype.dispose=function(){o.INSTANCE=null,this.enable(!1),this._isInitialized=!1},o}();t.exports=i}),lo=A((e,t)=>{"use strict";var r=require("os"),n=require("fs"),s=require("path"),a=lr(),i=Kt(),o=function(){function c(u){this.keys=new a.ContextTagKeys,this.tags={},this._loadApplicationContext(u),this._loadDeviceContext(),this._loadInternalContext()}return c.prototype._loadApplicationContext=function(u){if(u=u||s.resolve(__dirname,"../../../../package.json"),!c.appVersion[u]){c.appVersion[u]="unknown";try{var d=JSON.parse(n.readFileSync(u,"utf8"));d&&typeof d.version=="string"&&(c.appVersion[u]=d.version)}catch(l){i.info("unable to read app version: ",l)}}this.tags[this.keys.applicationVersion]=c.appVersion[u]},c.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=c.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},c.prototype._loadInternalContext=function(){var u=s.resolve(__dirname,"../../package.json");if(!c.sdkVersion){c.sdkVersion="unknown";try{var d=JSON.parse(n.readFileSync(u,"utf8"));d&&typeof d.version=="string"&&(c.sdkVersion=d.version)}catch(l){i.info("unable to read app version: ",l)}}this.tags[this.keys.internalSdkVersion]="node:"+c.sdkVersion},c.DefaultRoleName="Web",c.appVersion={},c.sdkVersion=null,c}();t.exports=o}),rE=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var d=function(l,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(f[m]=g[m])},d(l,p)};return function(l,p){d(l,p);function f(){this.constructor=l}l.prototype=p===null?Object.create(p):(f.prototype=p.prototype,new f)}}(),n=require("url"),s=lr(),a=yr(),i=yi(),o=_u(),c=Hn(),u=function(d){r(l,d);function l(p,f){var g=d.call(this)||this;return f&&f.method&&p&&(g.method=f.method,g.url=l._getUrlFromRequestOptions(p,f),g.startTime=+new Date),g}return l.prototype.onError=function(p){this._setStatus(void 0,p)},l.prototype.onResponse=function(p){this._setStatus(p.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(p,i.requestContextTargetKey)},l.prototype.getDependencyTelemetry=function(p,f){var g=n.parse(this.url);g.search=void 0,g.hash=void 0;var m=this.method.toUpperCase()+" "+g.pathname,v=s.RemoteDependencyDataConstants.TYPE_HTTP,y=g.hostname;g.port&&(y+=":"+g.port),this.correlationId?(v=s.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==c.correlationIdPrefix&&(y+=" | "+this.correlationId)):v=s.RemoteDependencyDataConstants.TYPE_HTTP;var T={id:f,name:m,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:v,target:y};if(p&&p.time?T.time=p.time:this.startTime&&(T.time=new Date(this.startTime)),p){for(var w in p)T[w]||(T[w]=p[w]);if(p.properties)for(var w in p.properties)T.properties[w]=p.properties[w]}return T},l._getUrlFromRequestOptions=function(p,f){if(typeof p=="string")if(p.indexOf("http://")===0||p.indexOf("https://")===0)p=n.parse(p);else{var g=n.parse(p);g.host==="443"?p=n.parse("https://"+p):p=n.parse("http://"+p)}else{if(p&&typeof n.URL=="function"&&p instanceof n.URL)return n.format(p);var m=p;p={},m&&Object.keys(m).forEach(function(T){p[T]=m[T]})}if(p.path){var v=n.parse(p.path);p.pathname=v.pathname,p.search=v.search}if(p.host&&p.port){var y=n.parse("http://"+p.host);!y.port&&p.port&&(p.hostname=p.host,delete p.host)}return p.protocol=p.protocol||f.agent&&f.agent.protocol||f.protocol||void 0,p.hostname=p.hostname||"localhost",n.format(p)},l}(o);t.exports=u}),nE=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var o,c=1,u=arguments.length;c<u;c++){o=arguments[c];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(i[d]=o[d])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var r=Et(),n=nn();function s(i){var o=t({},i);return Object.keys(n.SpanAttribute).forEach(function(c){delete o[c]}),o}function a(i){var o="|"+i.spanContext().traceId+"."+i.spanContext().spanId+".",c=Math.round(i._duration[0]*1e3+i._duration[1]/1e6),u=i.attributes["peer.address"]?i.attributes["peer.address"].toString():"",d=i.attributes.component?i.attributes.component.toString():"",l=d.toUpperCase()===n.DependencyTypeName.Http||!!i.attributes[n.SpanAttribute.HttpUrl],p=d.toLowerCase()===n.DependencyTypeName.Grpc;if(l){var f=i.attributes[n.SpanAttribute.HttpMethod]||"GET",g=new URL(i.attributes[n.SpanAttribute.HttpUrl].toString()),m=i.attributes[n.SpanAttribute.HttpHost]||g.host,v=i.attributes[n.SpanAttribute.HttpPort]||g.port||null,y=g.pathname||"/",T=f+" "+y,w=n.DependencyTypeName.Http,R=v?(m+":"+v).toString():m.toString(),O=g.toString(),F=i.attributes[n.SpanAttribute.HttpStatusCode]||i.status.code||0,z=F<400;return{id:o,name:T,dependencyTypeName:w,target:R,data:O,success:z,duration:c,url:O,resultCode:String(F),properties:s(i.attributes)}}else if(p){var f=i.attributes[n.SpanAttribute.GrpcMethod]||"rpc",K=i.attributes[n.SpanAttribute.GrpcService],J=K?f+" "+K:i.name;return{id:o,duration:c,name:J,target:K.toString(),data:K.toString()||J,url:K.toString()||J,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(i.status.code||0),success:i.status.code===0,properties:s(i.attributes)}}else{var te=i.name,U=i.links&&i.links.map(function(G){return{operation_Id:G.context.traceId,id:G.context.spanId}});return{id:o,duration:c,name:te,target:u,data:u||te,url:u||te,dependencyTypeName:i.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:d||i.name,resultCode:String(i.status.code||0),success:i.status.code===0,properties:t(t({},s(i.attributes)),{"_MS.links":U||void 0})}}}e.spanToTelemetryContract=a}),iE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Et(),r=kt(),n=uo(),s=nE(),a=Hc(),i=[],o=function(u){var d=u.data,l=s.spanToTelemetryContract(d),p=d.spanContext(),f=new n;f.traceId=p.traceId,f.spanId=p.spanId,f.traceFlag=n.formatOpenTelemetryTraceFlags(p.traceFlags),f.parentId=d.parentSpanId?"|"+p.traceId+"."+d.parentSpanId+".":null,a.AsyncScopeManager.with(d,function(){i.forEach(function(g){d.kind===t.SpanKind.SERVER?g.trackRequest(l):(d.kind===t.SpanKind.CLIENT||d.kind===t.SpanKind.INTERNAL)&&g.trackDependency(l)})})};e.subscriber=o;function c(u,d){u?(i.length===0&&r.channel.subscribe("azure-coretracing",e.subscriber),i.push(d)):(i=i.filter(function(l){return l!=d}),i.length===0&&r.channel.unsubscribe("azure-coretracing",e.subscriber))}e.enable=c}),oE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=kt(),r=[],n=function(a){a.data.event.commandName!=="ismaster"&&r.forEach(function(i){var o=a.data.startedData&&a.data.startedData.databaseName||"Unknown database";i.trackDependency({target:o,data:a.data.event.commandName,name:a.data.event.commandName,duration:a.data.event.duration,success:a.data.succeeded,resultCode:a.data.succeeded?"0":"1",time:a.data.startedData.time,dependencyTypeName:"mongodb"})})};e.subscriber=n;function s(a,i){a?(r.length===0&&t.channel.subscribe("mongodb",e.subscriber),r.push(i)):(r=r.filter(function(o){return o!=i}),r.length===0&&t.channel.unsubscribe("mongodb",e.subscriber))}e.enable=s}),sE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=kt(),r=[],n=function(a){r.forEach(function(i){var o=a.data.query||{},c=o.sql||"Unknown query",u=!a.data.err,d=o._connection||{},l=d.config||{},p=l.socketPath?l.socketPath:(l.host||"localhost")+":"+l.port;i.trackDependency({target:p,data:c,name:c,duration:a.data.duration,success:u,resultCode:u?"0":"1",time:a.data.time,dependencyTypeName:"mysql"})})};e.subscriber=n;function s(a,i){a?(r.length===0&&t.channel.subscribe("mysql",e.subscriber),r.push(i)):(r=r.filter(function(o){return o!=i}),r.length===0&&t.channel.unsubscribe("mysql",e.subscriber))}e.enable=s}),aE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=kt(),r=[],n=function(a){r.forEach(function(i){a.data.commandObj.command!=="info"&&i.trackDependency({target:a.data.address,name:a.data.commandObj.command,data:a.data.commandObj.command,duration:a.data.duration,success:!a.data.err,resultCode:a.data.err?"1":"0",time:a.data.time,dependencyTypeName:"redis"})})};e.subscriber=n;function s(a,i){a?(r.length===0&&t.channel.subscribe("redis",e.subscriber),r.push(i)):(r=r.filter(function(o){return o!=i}),r.length===0&&t.channel.unsubscribe("redis",e.subscriber))}e.enable=s}),cE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=kt(),r=[],n=function(a){r.forEach(function(i){var o=a.data.query,c=o.preparable&&o.preparable.text||o.plan||o.text||"unknown query",u=!a.data.error,d=a.data.database.host+":"+a.data.database.port;i.trackDependency({target:d,data:c,name:c,duration:a.data.duration,success:u,resultCode:u?"0":"1",time:a.data.time,dependencyTypeName:"postgres"})})};e.subscriber=n;function s(a,i){a?(r.length===0&&t.channel.subscribe("postgres",e.subscriber),r.push(i)):(r=r.filter(function(o){return o!=i}),r.length===0&&t.channel.unsubscribe("postgres",e.subscriber))}e.enable=s}),Ei=A((e,t)=>{"use strict";var r=e&&e.__spreadArrays||function(){for(var g=0,m=0,v=arguments.length;m<v;m++)g+=arguments[m].length;for(var y=Array(g),T=0,m=0;m<v;m++)for(var w=arguments[m],R=0,O=w.length;R<O;R++,T++)y[T]=w[R];return y},n=require("http"),s=require("https"),a=Kt(),i=yr(),o=yi(),c=rE(),u=$n(),d=Hn(),l=uo(),p=Ds(),f=function(){function g(m){if(g.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");g.INSTANCE=this,this._client=m}return g.prototype.enable=function(m){this._isEnabled=m,this._isEnabled&&!this._isInitialized&&this._initialize(),p.IsInitialized&&(iE().enable(!0,this._client),oE().enable(m,this._client),sE().enable(m,this._client),aE().enable(m,this._client),cE().enable(m,this._client))},g.prototype.isInitialized=function(){return this._isInitialized},g.prototype._initialize=function(){var m=this;this._isInitialized=!0;var v=n.request,y=s.request,T=function(w,R){var O=!R[g.disableCollectionRequestOption]&&!w[g.alreadyAutoCollectedFlag];R.headers&&R.headers["user-agent"]&&R.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(O=!1),w[g.alreadyAutoCollectedFlag]=!0,w&&R&&O&&(u.CorrelationContextManager.wrapEmitter(w),g.trackRequest(m._client,{options:R,request:w}))};n.request=function(w){for(var R=[],O=1;O<arguments.length;O++)R[O-1]=arguments[O];var F=v.call.apply(v,r([n,w],R));return T(F,w),F},s.request=function(w){for(var R=[],O=1;O<arguments.length;O++)R[O-1]=arguments[O];var F=y.call.apply(y,r([s,w],R));return T(F,w),F},n.get=function(w){for(var R,O=[],F=1;F<arguments.length;F++)O[F-1]=arguments[F];var z=(R=n.request).call.apply(R,r([n,w],O));return z.end(),z},s.get=function(w){for(var R,O=[],F=1;F<arguments.length;F++)O[F-1]=arguments[F];var z=(R=s.request).call.apply(R,r([s,w],O));return z.end(),z}},g.trackRequest=function(m,v){if(!v.options||!v.request||!m){a.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!v.options,!v.request,!m);return}var y=new c(v.options,v.request),T=u.CorrelationContextManager.getCurrentContext(),w,R;if(T&&T.operation&&T.operation.traceparent&&l.isValidTraceId(T.operation.traceparent.traceId))T.operation.traceparent.updateSpanId(),w=T.operation.traceparent.getBackCompatRequestId();else if(d.w3cEnabled){var O=new l;R=O.toString(),w=O.getBackCompatRequestId()}else w=T&&T.operation&&T.operation.parentId+g.requestNumber+++".";if(i.canIncludeCorrelationHeader(m,y.getUrl())&&v.request.getHeader&&v.request.setHeader&&m.config&&m.config.correlationId){var F=v.request.getHeader(o.requestContextHeader);try{i.safeIncludeCorrelationHeader(m,v.request,F)}catch(J){a.warn("Request-Context header could not be set. Correlation of requests may be lost",J)}if(T&&T.operation)try{if(v.request.setHeader(o.requestIdHeader,w),m.config.ignoreLegacyHeaders||(v.request.setHeader(o.parentIdHeader,T.operation.id),v.request.setHeader(o.rootIdHeader,w)),R||T.operation.traceparent)v.request.setHeader(o.traceparentHeader,R||T.operation.traceparent.toString());else if(d.w3cEnabled){var O=new l().toString();v.request.setHeader(o.traceparentHeader,O)}if(T.operation.tracestate){var z=T.operation.tracestate.toString();z&&v.request.setHeader(o.traceStateHeader,z)}var K=T.customProperties.serializeToHeader();K&&v.request.setHeader(o.correlationContextHeader,K)}catch(J){a.warn("Correlation headers could not be set. Correlation of requests may be lost.",J)}}v.request.on&&(v.request.on("response",function(J){y.onResponse(J);var te=y.getDependencyTelemetry(v,w);te.contextObjects=te.contextObjects||{},te.contextObjects["http.RequestOptions"]=v.options,te.contextObjects["http.ClientRequest"]=v.request,te.contextObjects["http.ClientResponse"]=J,m.trackDependency(te)}),v.request.on("error",function(J){y.onError(J);var te=y.getDependencyTelemetry(v,w);te.contextObjects=te.contextObjects||{},te.contextObjects["http.RequestOptions"]=v.options,te.contextObjects["http.ClientRequest"]=v.request,te.contextObjects.Error=J,m.trackDependency(te)}),v.request.on("abort",function(){y.onError(new Error);var J=y.getDependencyTelemetry(v,w);J.contextObjects=J.contextObjects||{},J.contextObjects["http.RequestOptions"]=v.options,J.contextObjects["http.ClientRequest"]=v.request,m.trackDependency(J)}))},g.prototype.dispose=function(){g.INSTANCE=null,this.enable(!1),this._isInitialized=!1},g.disableCollectionRequestOption="disableAppInsightsAutoCollection",g.requestNumber=1,g.alreadyAutoCollectedFlag="_appInsightsAutoCollected",g}();t.exports=f}),uE=A((e,t)=>{"use strict";var r=require("os"),n=nn(),s=yr(),a=lo(),i=Ei(),o="http://169.254.169.254/metadata/instance/compute",c="api-version=2017-12-01",u="format=json",d="ENETUNREACH",l=function(){function p(f){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",p.INSTANCE||(p.INSTANCE=this),this._isInitialized=!1,this._client=f}return p.prototype.enable=function(f,g){var m=this;this._isEnabled=f,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),f?this._handle||(this._handle=setInterval(function(){return m.trackHeartBeat(g,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},p.prototype.isInitialized=function(){return this._isInitialized},p.isEnabled=function(){return p.INSTANCE&&p.INSTANCE._isEnabled},p.prototype.trackHeartBeat=function(f,g){var m=this,v=!1,y={},T=a.sdkVersion;y.sdk=T,y.osType=r.type(),process.env.WEBSITE_SITE_NAME?(y.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",y.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",y.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?y.azfunction_appId=process.env.WEBSITE_HOSTNAME:f&&(this._isVM===void 0?(v=!0,this._getAzureComputeMetadata(f,function(){m._isVM&&Object.keys(m._vmData).length>0&&(y.azInst_vmId=m._vmData.vmId||"",y.azInst_subscriptionId=m._vmData.subscriptionId||"",y.azInst_osType=m._vmData.osType||"",m._azInst_vmId=m._vmData.vmId||"",m._azInst_subscriptionId=m._vmData.subscriptionId||"",m._azInst_osType=m._vmData.osType||""),m._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:y}),g()})):this._isVM&&(y.azInst_vmId=this._azInst_vmId,y.azInst_subscriptionId=this._azInst_subscriptionId,y.azInst_osType=this._azInst_osType)),v||(this._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:y}),g())},p.prototype.dispose=function(){p.INSTANCE=null,this.enable(!1),this._isInitialized=!1},p.prototype._getAzureComputeMetadata=function(f,g){var m,v=this,y=o+"?"+c+"&"+u,T=(m={method:"GET"},m[i.disableCollectionRequestOption]=!0,m.headers={Metadata:"True"},m),w=s.makeRequest(f,y,T,function(R){if(R.statusCode===200){v._isVM=!0;var O="";R.on("data",function(F){O+=F}),R.on("end",function(){v._vmData=v._isJSON(O)?JSON.parse(O):{},g()})}else g()});w&&(w.on("error",function(R){R&&R.message&&R.message.indexOf(d)>-1&&(v._isVM=!1),g()}),w.end())},p.prototype._isJSON=function(f){try{return JSON.parse(f)&&!!f}catch{return!1}},p}();t.exports=l}),Su=A((e,t)=>{"use strict";var r=require("http"),n=require("https"),s=Kt(),a=yr(),i=yi(),o=yu(),c=$n(),u=Ns(),d=function(){function l(p){if(l.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");l.INSTANCE=this,this._client=p}return l.prototype.enable=function(p){this._isEnabled=p,(this._isAutoCorrelating||this._isEnabled||u.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},l.prototype.useAutoCorrelation=function(p,f){p&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(f):!p&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=p},l.prototype.isInitialized=function(){return this._isInitialized},l.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},l.prototype._generateCorrelationContext=function(p){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(p.getOperationId(this._client.context.tags),p.getRequestId(),p.getOperationName(this._client.context.tags),p.getCorrelationContextHeader(),p.getTraceparent(),p.getTracestate())},l.prototype._initialize=function(){var p=this;this._isInitialized=!0;var f=function(y){if(y){if(typeof y!="function")throw new Error("onRequest handler must be a function");return function(T,w){c.CorrelationContextManager.wrapEmitter(T),c.CorrelationContextManager.wrapEmitter(w);var R=T&&!T[l.alreadyAutoCollectedFlag];if(T&&R){var O=new o(T),F=p._generateCorrelationContext(O);c.CorrelationContextManager.runWithContext(F,function(){p._isEnabled&&(T[l.alreadyAutoCollectedFlag]=!0,l.trackRequest(p._client,{request:T,response:w},O)),typeof y=="function"&&y(T,w)})}else typeof y=="function"&&y(T,w)}}},g=function(y){var T=y.addListener.bind(y);y.addListener=function(w,R){switch(w){case"request":case"checkContinue":return T(w,f(R));default:return T(w,R)}},y.on=y.addListener},m=r.createServer;r.createServer=function(y,T){if(T&&typeof T=="function"){var w=m(y,f(T));return g(w),w}else{var w=m(f(y));return g(w),w}};var v=n.createServer;n.createServer=function(y,T){var w=v(y,f(T));return g(w),w}},l.trackRequestSync=function(p,f){if(!f.request||!f.response||!p){s.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!f.request,!f.response,!p);return}l.addResponseCorrelationIdHeader(p,f.response);var g=c.CorrelationContextManager.getCurrentContext(),m=new o(f.request,g&&g.operation.parentId);g&&(g.operation.id=m.getOperationId(p.context.tags)||g.operation.id,g.operation.name=m.getOperationName(p.context.tags)||g.operation.name,g.operation.parentId=m.getRequestId()||g.operation.parentId,g.customProperties.addHeaderData(m.getCorrelationContextHeader())),l.endRequest(p,m,f,f.duration,f.error)},l.trackRequest=function(p,f,g){if(!f.request||!f.response||!p){s.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!f.request,!f.response,!p);return}var m=c.CorrelationContextManager.getCurrentContext(),v=g||new o(f.request,m&&m.operation.parentId);a.canIncludeCorrelationHeader(p,v.getUrl())&&l.addResponseCorrelationIdHeader(p,f.response),m&&!g&&(m.operation.id=v.getOperationId(p.context.tags)||m.operation.id,m.operation.name=v.getOperationName(p.context.tags)||m.operation.name,m.operation.parentId=v.getOperationParentId(p.context.tags)||m.operation.parentId,m.customProperties.addHeaderData(v.getCorrelationContextHeader())),f.response.once&&f.response.once("finish",function(){l.endRequest(p,v,f,null,null)}),f.request.on&&f.request.on("error",function(y){l.endRequest(p,v,f,null,y)}),f.request.on&&f.request.on("aborted",function(){var y="The request has been aborted and the network socket has closed.";l.endRequest(p,v,f,null,y)})},l.addResponseCorrelationIdHeader=function(p,f){if(p.config&&p.config.correlationId&&f.getHeader&&f.setHeader&&!f.headersSent){var g=f.getHeader(i.requestContextHeader);a.safeIncludeCorrelationHeader(p,f,g)}},l.endRequest=function(p,f,g,m,v){v?f.onError(v,m):f.onResponse(g.response,m);var y=f.getRequestTelemetry(g);if(y.tagOverrides=f.getRequestTags(p.context.tags),g.tagOverrides)for(var T in g.tagOverrides)y.tagOverrides[T]=g.tagOverrides[T];var w=f.getLegacyRootId();w&&(y.properties.ai_legacyRootId=w),y.contextObjects=y.contextObjects||{},y.contextObjects["http.ServerRequest"]=g.request,y.contextObjects["http.ServerResponse"]=g.response,p.trackRequest(y)},l.prototype.dispose=function(){l.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},l.alreadyAutoCollectedFlag="_appInsightsAutoCollected",l}();t.exports=d}),lE=A((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(d){for(var l,p=1,f=arguments.length;p<f;p++){l=arguments[p];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(d[g]=l[g])}return d},r.apply(this,arguments)},n=require("os"),s=lr(),a=nn(),i=yr(),o=Kt(),c=i.w3cTraceId(),u=function(){function d(){}return d.createQuickPulseEnvelope=function(l,p,f,g){var m=n&&typeof n.hostname=="function"&&n.hostname()||"Unknown",v=g.tags&&g.keys&&g.keys.cloudRoleInstance&&g.tags[g.keys.cloudRoleInstance]||m,y=g.tags&&g.keys&&g.keys.cloudRole&&g.tags[g.keys.cloudRole]||null,T={Documents:p.length>0?p:null,InstrumentationKey:f.instrumentationKey||"",Metrics:l.length>0?l:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:g.tags[g.keys.internalSdkVersion],StreamId:c,MachineName:m,Instance:v,RoleName:y};return T},d.createQuickPulseMetric=function(l){var p;return p={Name:l.name,Value:l.value,Weight:l.count||1},p},d.telemetryEnvelopeToQuickPulseDocument=function(l){switch(l.data.baseType){case s.TelemetryTypeString.Event:return d.createQuickPulseEventDocument(l);case s.TelemetryTypeString.Exception:return d.createQuickPulseExceptionDocument(l);case s.TelemetryTypeString.Trace:return d.createQuickPulseTraceDocument(l);case s.TelemetryTypeString.Dependency:return d.createQuickPulseDependencyDocument(l);case s.TelemetryTypeString.Request:return d.createQuickPulseRequestDocument(l)}return null},d.createQuickPulseEventDocument=function(l){var p=d.createQuickPulseDocument(l),f=l.data.baseData.name,g=r(r({},p),{Name:f});return g},d.createQuickPulseTraceDocument=function(l){var p=d.createQuickPulseDocument(l),f=l.data.baseData.severityLevel||0,g=r(r({},p),{Message:l.data.baseData.message,SeverityLevel:s.SeverityLevel[f]});return g},d.createQuickPulseExceptionDocument=function(l){var p=d.createQuickPulseDocument(l),f=l.data.baseData.exceptions,g="",m="",v="";f&&f.length>0&&(f[0].parsedStack&&f[0].parsedStack.length>0?f[0].parsedStack.forEach(function(T){g+=T.assembly+`
`}):f[0].stack&&f[0].stack.length>0&&(g=f[0].stack),m=f[0].message,v=f[0].typeName);var y=r(r({},p),{Exception:g,ExceptionMessage:m,ExceptionType:v});return y},d.createQuickPulseRequestDocument=function(l){var p=d.createQuickPulseDocument(l),f=l.data.baseData,g=r(r({},p),{Name:f.name,Success:f.success,Duration:f.duration,ResponseCode:f.responseCode,OperationName:f.name});return g},d.createQuickPulseDependencyDocument=function(l){var p=d.createQuickPulseDocument(l),f=l.data.baseData,g=r(r({},p),{Name:f.name,Target:f.target,Success:f.success,Duration:f.duration,ResultCode:f.resultCode,CommandName:f.data,OperationName:p.OperationId,DependencyTypeName:f.type});return g},d.createQuickPulseDocument=function(l){var p,f,g,m;l.data.baseType?(f=a.TelemetryTypeStringToQuickPulseType[l.data.baseType],p=a.TelemetryTypeStringToQuickPulseDocumentType[l.data.baseType]):o.warn("Document type invalid; not sending live metric document",l.data.baseType),g=l.tags[d.keys.operationId],m=d.aggregateProperties(l);var v={DocumentType:p,__type:f,OperationId:g,Version:"1.0",Properties:m};return v},d.aggregateProperties=function(l){var p=[],f=l.data.baseData.measurements||{};for(var g in f)if(f.hasOwnProperty(g)){var m=f[g],v={key:g,value:m};p.push(v)}var y=l.data.baseData.properties||{};for(var g in y)if(y.hasOwnProperty(g)){var m=y[g],v={key:g,value:m};p.push(v)}return p},d.keys=new s.ContextTagKeys,d}();t.exports=u}),dE=A((e,t)=>{"use strict";var r=function(){return(Date.now()+621355968e5)*1e4};t.exports={getTransmissionTime:r}}),pE=A((e,t)=>{"use strict";var r=e&&e.__awaiter||function(l,p,f,g){function m(v){return v instanceof f?v:new f(function(y){y(v)})}return new(f||(f=Promise))(function(v,y){function T(O){try{R(g.next(O))}catch(F){y(F)}}function w(O){try{R(g.throw(O))}catch(F){y(F)}}function R(O){O.done?v(O.value):m(O.value).then(T,w)}R((g=g.apply(l,p||[])).next())})},n=e&&e.__generator||function(l,p){var f={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},g,m,v,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(R){return function(O){return w([R,O])}}function w(R){if(g)throw new TypeError("Generator is already executing.");for(;f;)try{if(g=1,m&&(v=R[0]&2?m.return:R[0]?m.throw||((v=m.return)&&v.call(m),0):m.next)&&!(v=v.call(m,R[1])).done)return v;switch(m=0,v&&(R=[R[0]&2,v.value]),R[0]){case 0:case 1:v=R;break;case 4:return f.label++,{value:R[1],done:!1};case 5:f.label++,m=R[1],R=[0];continue;case 7:R=f.ops.pop(),f.trys.pop();continue;default:if(v=f.trys,!(v=v.length>0&&v[v.length-1])&&(R[0]===6||R[0]===2)){f=0;continue}if(R[0]===3&&(!v||R[1]>v[0]&&R[1]<v[3])){f.label=R[1];break}if(R[0]===6&&f.label<v[1]){f.label=v[1],v=R;break}if(v&&f.label<v[2]){f.label=v[2],f.ops.push(R);break}v[2]&&f.ops.pop(),f.trys.pop();continue}R=p.call(l,f)}catch(O){R=[6,O],m=0}finally{g=v=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},s=require("https"),a=Ei(),i=Kt(),o=dE(),c=yr(),u={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},d=function(){function l(p){this._config=p,this._consecutiveErrors=0}return l.prototype.ping=function(p,f,g){var m=[{name:u.streamId,value:p.StreamId},{name:u.machineName,value:p.MachineName},{name:u.roleName,value:p.RoleName},{name:u.instanceName,value:p.Instance},{name:u.invariantVersion,value:p.InvariantVersion.toString()}];this._submitData(p,f,g,"ping",m)},l.prototype.post=function(p,f,g){return r(this,void 0,void 0,function(){return n(this,function(m){switch(m.label){case 0:return[4,this._submitData([p],f,g,"post")];case 1:return m.sent(),[2]}})})},l.prototype._submitData=function(p,f,g,m,v){return r(this,void 0,void 0,function(){var y,T,w,R,O,F=this;return n(this,function(z){return y=JSON.stringify(p),T=(R={},R[a.disableCollectionRequestOption]=!0,R.host=f&&f.length>0?f:this._config.quickPulseHost,R.method=u.method,R.path="/QuickPulseService.svc/"+m+"?ikey="+this._config.instrumentationKey,R.headers=(O={Expect:"100-continue"},O[u.time]=o.getTransmissionTime(),O["Content-Type"]="application/json",O["Content-Length"]=Buffer.byteLength(y),O),R),v&&v.length>0&&v.forEach(function(K){return T.headers[K.name]=K.value}),this._config.httpsAgent?T.agent=this._config.httpsAgent:T.agent=c.tlsRestrictedAgent,w=s.request(T,function(K){if(K.statusCode==200){var J=K.headers[u.subscribed]==="true",te=K.headers[u.endpointRedirect]?K.headers[u.endpointRedirect].toString():null,U=K.headers[u.pollingIntervalHint]?parseInt(K.headers[u.pollingIntervalHint].toString()):null;F._consecutiveErrors=0,g(J,K,te,U)}else F._onError("StatusCode:"+K.statusCode+" StatusMessage:"+K.statusMessage),g()}),w.on("error",function(K){F._onError(K),g()}),w.write(y),w.end(),[2]})})},l.prototype._onError=function(p){this._consecutiveErrors++;var f="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%l.MAX_QPS_FAILURES_BEFORE_WARN===0?(f="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",i.warn(l.TAG,f,p)):i.info(l.TAG,f,p)},l.TAG="QuickPulseSender",l.MAX_QPS_FAILURES_BEFORE_WARN=25,l}();t.exports=d}),fE=A((e,t)=>{"use strict";var r=e&&e.__awaiter||function(d,l,p,f){function g(m){return m instanceof p?m:new p(function(v){v(m)})}return new(p||(p=Promise))(function(m,v){function y(R){try{w(f.next(R))}catch(O){v(O)}}function T(R){try{w(f.throw(R))}catch(O){v(O)}}function w(R){R.done?m(R.value):g(R.value).then(y,T)}w((f=f.apply(d,l||[])).next())})},n=e&&e.__generator||function(d,l){var p={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,g,m,v;return v={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function y(w){return function(R){return T([w,R])}}function T(w){if(f)throw new TypeError("Generator is already executing.");for(;p;)try{if(f=1,g&&(m=w[0]&2?g.return:w[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,w[1])).done)return m;switch(g=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return p.label++,{value:w[1],done:!1};case 5:p.label++,g=w[1],w=[0];continue;case 7:w=p.ops.pop(),p.trys.pop();continue;default:if(m=p.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){p=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){p.label=w[1];break}if(w[0]===6&&p.label<m[1]){p.label=m[1],m=w;break}if(m&&p.label<m[2]){p.label=m[2],p.ops.push(w);break}m[2]&&p.ops.pop(),p.trys.pop();continue}w=l.call(d,p)}catch(R){w=[6,R],g=0}finally{f=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},s=Kt(),a=lE(),i=pE(),o=nn(),c=lo(),u=function(){function d(l,p){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=l,this.context=p||new c,this._sender=new i(this.config),this._isEnabled=!1}return d.prototype.addCollector=function(l){this._collectors.push(l)},d.prototype.trackMetric=function(l){this._addMetric(l)},d.prototype.addDocument=function(l){var p=a.telemetryEnvelopeToQuickPulseDocument(l);p&&this._documents.push(p)},d.prototype.enable=function(l){l&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!l&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},d.prototype.enableCollectors=function(l){this._collectors.forEach(function(p){p.enable(l)})},d.prototype._addMetric=function(l){var p=l.value,f=l.count||1,g=o.PerformanceToQuickPulseCounter[l.name];g&&(this._metrics[g]?(this._metrics[g].Value=(this._metrics[g].Value*this._metrics[g].Weight+p*f)/(this._metrics[g].Weight+f),this._metrics[g].Weight+=f):(this._metrics[g]=a.createQuickPulseMetric(l),this._metrics[g].Name=g,this._metrics[g].Weight=1))},d.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},d.prototype._goQuickPulse=function(){return r(this,void 0,void 0,function(){var l,p,f,g,m=this;return n(this,function(v){switch(v.label){case 0:return l=Object.keys(this._metrics).map(function(y){return m._metrics[y]}),p=a.createQuickPulseEnvelope(l,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(p)]:[3,2];case 1:return v.sent(),[3,3];case 2:this._ping(p),v.label=3;case 3:return f=this._pollingIntervalHint>0?this._pollingIntervalHint:d.PING_INTERVAL,g=this._isCollectingData?d.POST_INTERVAL:f,this._isCollectingData&&Date.now()-this._lastSuccessTime>=d.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,g=d.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=d.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(g=d.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),g),this._handle.unref(),[2]}})})},d.prototype._ping=function(l){this._sender.ping(l,this._redirectedHost,this._quickPulseDone.bind(this))},d.prototype._post=function(l){return r(this,void 0,void 0,function(){return n(this,function(p){switch(p.label){case 0:return[4,this._sender.post(l,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return p.sent(),[2]}})})},d.prototype._quickPulseDone=function(l,p,f,g){l!=null?(this._isCollectingData!==l&&(s.info("Live Metrics sending data",l),this.enableCollectors(l)),this._isCollectingData=l,f&&f.length>0&&(this._redirectedHost=f,s.info("Redirecting endpoint to: ",f)),g&&g>0&&(this._pollingIntervalHint=g),p&&p.statusCode<300&&p.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},d.MAX_POST_WAIT_TIME=2e4,d.MAX_PING_WAIT_TIME=6e4,d.FALLBACK_INTERVAL=6e4,d.PING_INTERVAL=5e3,d.POST_INTERVAL=1e3,d}();t.exports=u}),hE=A((e,t)=>{"use strict";var r=nn(),n=function(){function s(){}return s.parse=function(a){if(!a)return{};var i=a.split(s._FIELDS_SEPARATOR),o=i.reduce(function(u,d){var l=d.split(s._FIELD_KEY_VALUE_SEPARATOR);if(l.length===2){var p=l[0].toLowerCase(),f=l[1];u[p]=f}return u},{});if(Object.keys(o).length>0){if(o.endpointsuffix){var c=o.location?o.location+".":"";o.ingestionendpoint=o.ingestionendpoint||"https://"+c+"dc."+o.endpointsuffix,o.liveendpoint=o.liveendpoint||"https://"+c+"live."+o.endpointsuffix}o.ingestionendpoint=o.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,o.liveendpoint=o.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return o},s._FIELDS_SEPARATOR=";",s._FIELD_KEY_VALUE_SEPARATOR="=",s}();t.exports=n}),Ru=A((e,t)=>{"use strict";var r=Hn(),n=hE(),s=Kt(),a=nn(),i=require("url"),o=function(){function c(u){var d=this;this.endpointBase=a.DEFAULT_BREEZE_ENDPOINT;var l=process.env[c.ENV_connectionString],p=n.parse(u),f=n.parse(l),g=!p.instrumentationkey&&Object.keys(p).length>0?null:u;this.instrumentationKey=p.instrumentationkey||g||f.instrumentationkey||c._getInstrumentationKey(),c._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(p.ingestionendpoint||f.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(m){return d.correlationId=m},this.proxyHttpUrl=process.env[c.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[c.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=p.ingestionendpoint||f.ingestionendpoint||process.env[c.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=p.liveendpoint||f.liveendpoint||process.env[c.ENV_quickPulseHost]||a.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=i.parse(this._quickPulseHost).host)}return Object.defineProperty(c.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(u){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=u,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(u){this._quickPulseHost=u},enumerable:!1,configurable:!0}),c._getInstrumentationKey=function(){var u=process.env[c.ENV_iKey]||process.env[c.ENV_azurePrefix+c.ENV_iKey]||process.env[c.legacy_ENV_iKey]||process.env[c.ENV_azurePrefix+c.legacy_ENV_iKey];if(!u||u=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return u},c._validateInstrumentationKey=function(u){var d="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",l=new RegExp(d);return l.test(u)},c.ENV_azurePrefix="APPSETTING_",c.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",c.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",c.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",c.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",c.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",c.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",c.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",c.ENV_http_proxy="http_proxy",c.ENV_https_proxy="https_proxy",c}();t.exports=o}),gE=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var o,c=1,u=arguments.length;c<u;c++){o=arguments[c];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(i[d]=o[d])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var r=Ru(),n=lo(),s=Kt(),a=function(){function i(o){this._disabledMetrics={},i.INSTANCE&&i.INSTANCE.dispose(),i.INSTANCE=this,this._client=o}return i.isNodeVersionCompatible=function(){var o=process.versions.node.split(".");return parseInt(o[0])>=6},i.prototype.enable=function(o,c,u){var d=this;if(c===void 0&&(c={}),u===void 0&&(u=6e4),!!i.isNodeVersionCompatible()){if(i._metricsAvailable==null&&o&&!this._isInitialized)try{var l=require("applicationinsights-native-metrics");i._emitter=new l,i._metricsAvailable=!0,s.info("Native metrics module successfully loaded!")}catch{i._metricsAvailable=!1;return}this._isEnabled=o,this._disabledMetrics=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&i._emitter?(i._emitter.enable(!0,u),this._handle||(this._handle=setInterval(function(){return d._trackNativeMetrics()},u),this._handle.unref())):i._emitter&&(i._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},i.prototype.dispose=function(){this.enable(!1)},i.parseEnabled=function(o){var c=process.env[r.ENV_nativeMetricsDisableAll],u=process.env[r.ENV_nativeMetricsDisablers];if(c)return{isEnabled:!1,disabledMetrics:{}};if(u){var d=u.split(","),l={};if(d.length>0)for(var p=0,f=d;p<f.length;p++){var g=f[p];l[g]=!0}return typeof o=="object"?{isEnabled:!0,disabledMetrics:t(t({},o),l)}:{isEnabled:o,disabledMetrics:l}}return typeof o=="boolean"?{isEnabled:o,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:o}},i.prototype._trackNativeMetrics=function(){var o=!0;typeof this._isEnabled!="object"&&(o=this._isEnabled),o&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},i.prototype._trackGarbageCollection=function(){var o;if(!this._disabledMetrics.gc){var c=i._emitter.getGCData();for(var u in c){var d=c[u].metrics,l=u+" Garbage Collection Duration",p=Math.sqrt(d.sumSquares/d.count-Math.pow(d.total/d.count,2))||0;this._client.trackMetric({name:l,value:d.total,count:d.count,max:d.max,min:d.min,stdDev:p,tagOverrides:(o={},o[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,o)})}}},i.prototype._trackEventLoop=function(){var o;if(!this._disabledMetrics.loop){var c=i._emitter.getLoopData(),u=c.loopUsage;if(u.count!=0){var d="Event Loop CPU Time",l=Math.sqrt(u.sumSquares/u.count-Math.pow(u.total/u.count,2))||0;this._client.trackMetric({name:d,value:u.total,count:u.count,min:u.min,max:u.max,stdDev:l,tagOverrides:(o={},o[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,o)})}}},i.prototype._trackHeapUsage=function(){var o,c,u;if(!this._disabledMetrics.heap){var d=process.memoryUsage(),l=d.heapUsed,p=d.heapTotal,f=d.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:l,count:1,tagOverrides:(o={},o[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,o)}),this._client.trackMetric({name:"Memory Total (Heap)",value:p,count:1,tagOverrides:(c={},c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,c)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:f-p,count:1,tagOverrides:(u={},u[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,u)})}},i}();e.AutoCollectNativePerformance=a}),mE=A((e,t)=>{"use strict";var r=Kt(),n=function(){function s(a,i,o,c){this._buffer=[],this._lastSend=0,this._isDisabled=a,this._getBatchSize=i,this._getBatchIntervalMs=o,this._sender=c}return s.prototype.setUseDiskRetryCaching=function(a,i,o){this._sender.setDiskRetryMode(a,i,o)},s.prototype.send=function(a){var i=this;if(!this._isDisabled()){if(!a){r.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(a),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){i._timeoutHandle=null,i.triggerSend(!1)},this._getBatchIntervalMs()))}},s.prototype.triggerSend=function(a,i){var o=this._buffer.length<1;o||(a?(this._sender.saveOnCrash(this._buffer),typeof i=="function"&&i("data saved on crash")):this._sender.send(this._buffer,i)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,o&&typeof i=="function"&&i("no data to send")},s}();t.exports=n}),vE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0;function t(r,n){process.env.WEBSITE_SITE_NAME&&(r.tags[n.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}e.azureRoleEnvironmentTelemetryProcessor=t}),_E=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var t=lr();function r(s,a){var i=s.sampleRate,o=!1;return i==null||i>=100||s.data&&t.TelemetryType.Metric===t.baseTypeToTelemetryType(s.data.baseType)?!0:(a.correlationContext&&a.correlationContext.operation?o=n(a.correlationContext.operation.id)<i:o=Math.random()*100<i,o)}e.samplingTelemetryProcessor=r;function n(s){var a=-2147483648,i=2147483647,o=5381;if(!s)return 0;for(;s.length<8;)s=s+s;for(var c=0;c<s.length;c++)o=((o<<5)+o|0)+s.charCodeAt(c)|0;return o=o<=a?i:Math.abs(o),o/i*100}e.getSamplingHashCode=n}),yE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var t=Ns(),r=lr();function n(s,a){switch(a&&a.addDocument(s),s.data.baseType){case r.TelemetryTypeString.Exception:t.countException();break;case r.TelemetryTypeString.Request:var i=s.data.baseData;t.countRequest(i.duration,i.success);break;case r.TelemetryTypeString.Dependency:var o=s.data.baseData;t.countDependency(o.duration,o.success);break}return!0}e.performanceMetricsTelemetryProcessor=n}),EE=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var o,c=1,u=arguments.length;c<u;c++){o=arguments[c];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(i[d]=o[d])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var r=lr(),n=Tu(),s=lr();function a(i,o){if(n.isEnabled())switch(i.data.baseType){case s.TelemetryTypeString.Exception:var c=i.data.baseData;c.properties=t(t({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var u={cloudRoleInstance:i.tags[o.keys.cloudRoleInstance],cloudRoleName:i.tags[o.keys.cloudRole]};n.countException(u);break;case s.TelemetryTypeString.Trace:var d=i.data.baseData;d.properties=t(t({},d.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var l={cloudRoleInstance:i.tags[o.keys.cloudRoleInstance],cloudRoleName:i.tags[o.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[d.severity]};n.countTrace(l);break;case s.TelemetryTypeString.Request:var p=i.data.baseData;p.properties=t(t({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var f={cloudRoleInstance:i.tags[o.keys.cloudRoleInstance],cloudRoleName:i.tags[o.keys.cloudRole],operationSynthetic:i.tags[o.keys.operationSyntheticSource],requestSuccess:p.success,requestResultCode:p.responseCode};n.countRequest(p.duration,f);break;case s.TelemetryTypeString.Dependency:var g=i.data.baseData;g.properties=t(t({},g.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var m={cloudRoleInstance:i.tags[o.keys.cloudRoleInstance],cloudRoleName:i.tags[o.keys.cloudRole],operationSynthetic:i.tags[o.keys.operationSyntheticSource],dependencySuccess:g.success,dependencyType:g.type,dependencyTarget:g.target,dependencyResultCode:g.resultCode};n.countDependency(g.duration,m);break}return!0}e.preAggregatedMetricsTelemetryProcessor=a}),CE=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,s,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return s[a]}})}:function(n,s,a,i){i===void 0&&(i=a),n[i]=s[a]}),r=e&&e.__exportStar||function(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(vE(),e),r(_E(),e),r(yE(),e),r(EE(),e)}),bE=A((e,t)=>{"use strict";var r=e&&e.__awaiter||function(f,g,m,v){function y(T){return T instanceof m?T:new m(function(w){w(T)})}return new(m||(m=Promise))(function(T,w){function R(z){try{F(v.next(z))}catch(K){w(K)}}function O(z){try{F(v.throw(z))}catch(K){w(K)}}function F(z){z.done?T(z.value):y(z.value).then(R,O)}F((v=v.apply(f,g||[])).next())})},n=e&&e.__generator||function(f,g){var m={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},v,y,T,w;return w={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function R(F){return function(z){return O([F,z])}}function O(F){if(v)throw new TypeError("Generator is already executing.");for(;m;)try{if(v=1,y&&(T=F[0]&2?y.return:F[0]?y.throw||((T=y.return)&&T.call(y),0):y.next)&&!(T=T.call(y,F[1])).done)return T;switch(y=0,T&&(F=[F[0]&2,T.value]),F[0]){case 0:case 1:T=F;break;case 4:return m.label++,{value:F[1],done:!1};case 5:m.label++,y=F[1],F=[0];continue;case 7:F=m.ops.pop(),m.trys.pop();continue;default:if(T=m.trys,!(T=T.length>0&&T[T.length-1])&&(F[0]===6||F[0]===2)){m=0;continue}if(F[0]===3&&(!T||F[1]>T[0]&&F[1]<T[3])){m.label=F[1];break}if(F[0]===6&&m.label<T[1]){m.label=T[1],T=F;break}if(T&&m.label<T[2]){m.label=T[2],m.ops.push(F);break}T[2]&&m.ops.pop(),m.trys.pop();continue}F=g.call(f,m)}catch(z){F=[6,z],y=0}finally{v=T=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}},s=require("fs"),a=require("os"),i=require("path"),o=require("zlib"),c=require("child_process"),u=Kt(),d=Ei(),l=yr(),p=function(){function f(g,m,v){if(this._redirectedHost=null,this._config=g,this._onSuccess=m,this._onError=v,this._enableDiskRetryMode=!1,this._resendInterval=f.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=f.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=i.join(a.tmpdir(),f.TEMPDIR_PREFIX+this._config.instrumentationKey),!f.OS_PROVIDES_FILE_PROTECTION)if(f.USE_ICACLS){try{f.OS_PROVIDES_FILE_PROTECTION=s.existsSync(f.ICACLS_PATH)}catch{}f.OS_PROVIDES_FILE_PROTECTION||u.warn(f.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else f.OS_PROVIDES_FILE_PROTECTION=!0}return f.prototype.setDiskRetryMode=function(g,m,v){var y=this;this._enableDiskRetryMode=f.OS_PROVIDES_FILE_PROTECTION&&g,typeof m=="number"&&m>=0&&(this._resendInterval=Math.floor(m)),typeof v=="number"&&v>=0&&(this._maxBytesOnDisk=Math.floor(v)),g&&!f.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,u.warn(f.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){y._fileCleanupTask()},f.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},f.prototype.send=function(g,m){return r(this,void 0,void 0,function(){var v,y,T,w,R=this;return n(this,function(O){return g&&(v=this._redirectedHost||this._config.endpointUrl,y={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},T="",g.forEach(function(F){var z=R._stringify(F);typeof z=="string"&&(T+=z+`
`)}),T.length>0&&(T=T.substring(0,T.length-1)),w=Buffer.from?Buffer.from(T):new Buffer(T),o.gzip(w,function(F,z){var K=z;F?(u.warn(F),K=w,y.headers["Content-Length"]=w.length.toString()):(y.headers["Content-Encoding"]="gzip",y.headers["Content-Length"]=z.length.toString()),u.info(f.TAG,y),y[d.disableCollectionRequestOption]=!0;var J=function(U){U.setEncoding("utf-8");var G="";U.on("data",function(Q){G+=Q}),U.on("end",function(){if(R._numConsecutiveFailures=0,R._enableDiskRetryMode){if(U.statusCode===200)R._resendTimer||(R._resendTimer=setTimeout(function(){R._resendTimer=null,R._sendFirstFileOnDisk()},R._resendInterval),R._resendTimer.unref());else if(R._isRetriable(U.statusCode))try{var Q=JSON.parse(G),ne=[];Q.errors.forEach(function(de){R._isRetriable(de.statusCode)&&ne.push(g[de.index])}),ne.length>0&&R._storeToDisk(ne)}catch{R._storeToDisk(g)}}if(U.statusCode===307||U.statusCode===308)if(R._numConsecutiveRedirects++,R._numConsecutiveRedirects<10){var ve=U.headers.location?U.headers.location.toString():null;ve&&(R._redirectedHost=ve,R.send(g,m))}else typeof m=="function"&&m("Error sending telemetry because of circular redirects.");else R._numConsecutiveRedirects=0,typeof m=="function"&&m(G),u.info(f.TAG,G),typeof R._onSuccess=="function"&&R._onSuccess(G)})},te=l.makeRequest(R._config,v,y,J);te.on("error",function(U){if(R._numConsecutiveFailures++,!R._enableDiskRetryMode||R._numConsecutiveFailures>0&&R._numConsecutiveFailures%f.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var G="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";R._enableDiskRetryMode&&(G="Ingestion endpoint could not be reached "+R._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),u.warn(f.TAG,G,l.dumpObj(U))}else{var G="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";u.info(f.TAG,G,l.dumpObj(U))}R._onErrorHelper(U),typeof m=="function"&&(U&&m(l.dumpObj(U)),m("Error sending telemetry")),R._enableDiskRetryMode&&R._storeToDisk(g)}),te.write(K),te.end()})),[2]})})},f.prototype.saveOnCrash=function(g){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(g))},f.prototype._isRetriable=function(g){return g===206||g===408||g===429||g===439||g===500||g===503},f.prototype._runICACLS=function(g,m){var v=c.spawn(f.ICACLS_PATH,g,{windowsHide:!0});v.on("error",function(y){return m(y)}),v.on("close",function(y,T){return m(y===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+y+")"))})},f.prototype._runICACLSSync=function(g){if(c.spawnSync){var m=c.spawnSync(f.ICACLS_PATH,g,{windowsHide:!0});if(m.error)throw m.error;if(m.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+m.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},f.prototype._getACLIdentity=function(g){if(f.ACL_IDENTITY)return g(null,f.ACL_IDENTITY);var m=c.spawn(f.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),v="";m.stdout.on("data",function(y){return v+=y}),m.on("error",function(y){return g(y,null)}),m.on("close",function(y,T){return f.ACL_IDENTITY=v&&v.trim(),g(y===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+y+")"),f.ACL_IDENTITY)})},f.prototype._getACLIdentitySync=function(){if(f.ACL_IDENTITY)return f.ACL_IDENTITY;if(c.spawnSync){var g=c.spawnSync(f.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(g.error)throw g.error;if(g.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+g.status+")");return f.ACL_IDENTITY=g.stdout&&g.stdout.toString().trim(),f.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},f.prototype._getACLArguments=function(g,m){return[g,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",m+":(OI)(CI)F","/inheritance:r"]},f.prototype._applyACLRules=function(g,m){var v=this;if(!f.USE_ICACLS)return m(null);if(f.ACLED_DIRECTORIES[g]===void 0)f.ACLED_DIRECTORIES[g]=!1,this._getACLIdentity(function(y,T){if(y)return f.ACLED_DIRECTORIES[g]=!1,m(y);v._runICACLS(v._getACLArguments(g,T),function(w){return f.ACLED_DIRECTORIES[g]=!w,m(w)})});else return m(f.ACLED_DIRECTORIES[g]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},f.prototype._applyACLRulesSync=function(g){if(f.USE_ICACLS){if(f.ACLED_DIRECTORIES[g]===void 0){this._runICACLSSync(this._getACLArguments(g,this._getACLIdentitySync())),f.ACLED_DIRECTORIES[g]=!0;return}else if(!f.ACLED_DIRECTORIES[g])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},f.prototype._confirmDirExists=function(g,m){var v=this;s.lstat(g,function(y,T){y&&y.code==="ENOENT"?s.mkdir(g,function(w){w&&w.code!=="EEXIST"?m(w):v._applyACLRules(g,m)}):!y&&T.isDirectory()?v._applyACLRules(g,m):m(y||new Error("Path existed but was not a directory"))})},f.prototype._getShallowDirectorySize=function(g,m){s.readdir(g,function(v,y){if(v)return m(v,-1);var T=null,w=0,R=0;if(y.length===0){m(null,0);return}for(var O=0;O<y.length;O++)s.stat(i.join(g,y[O]),function(F,z){R++,F?T=F:z.isFile()&&(w+=z.size),R===y.length&&(T?m(T,-1):m(T,w))})})},f.prototype._getShallowDirectorySizeSync=function(g){for(var m=s.readdirSync(g),v=0,y=0;y<m.length;y++)v+=s.statSync(i.join(g,m[y])).size;return v},f.prototype._storeToDisk=function(g){var m=this;u.info(f.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(v){if(v){u.warn(f.TAG,"Error while checking/creating directory: "+(v&&v.message)),m._onErrorHelper(v);return}m._getShallowDirectorySize(m._tempDir,function(y,T){if(y||T<0){u.warn(f.TAG,"Error while checking directory size: "+(y&&y.message)),m._onErrorHelper(y);return}else if(T>m._maxBytesOnDisk){u.warn(f.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+T);return}var w=new Date().getTime()+".ai.json",R=i.join(m._tempDir,w);u.info(f.TAG,"saving data to disk at: "+R),s.writeFile(R,m._stringify(g),{mode:384},function(O){return m._onErrorHelper(O)})})})},f.prototype._storeToDiskSync=function(g){try{u.info(f.TAG,"Checking existence of data storage directory: "+this._tempDir),s.existsSync(this._tempDir)||s.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var m=this._getShallowDirectorySizeSync(this._tempDir);if(m>this._maxBytesOnDisk){u.info(f.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+m);return}var v=new Date().getTime()+".ai.json",y=i.join(this._tempDir,v);u.info(f.TAG,"saving data before crash to disk at: "+y),s.writeFileSync(y,g,{mode:384})}catch(T){u.warn(f.TAG,"Error while saving data to disk: "+(T&&T.message)),this._onErrorHelper(T)}},f.prototype._sendFirstFileOnDisk=function(){var g=this;s.exists(this._tempDir,function(m){m&&s.readdir(g._tempDir,function(v,y){if(v)g._onErrorHelper(v);else if(y=y.filter(function(R){return i.basename(R).indexOf(".ai.json")>-1}),y.length>0){var T=y[0],w=i.join(g._tempDir,T);s.readFile(w,function(R,O){R?g._onErrorHelper(R):s.unlink(w,function(F){if(F)g._onErrorHelper(F);else try{var z=JSON.parse(O.toString());g.send(z)}catch(K){u.warn("Failed to read persisted file",K)}})})}})})},f.prototype._onErrorHelper=function(g){typeof this._onError=="function"&&this._onError(g)},f.prototype._stringify=function(g){try{return JSON.stringify(g)}catch(m){u.warn("Failed to serialize payload",m,g)}},f.prototype._fileCleanupTask=function(){var g=this;s.exists(this._tempDir,function(m){m&&s.readdir(g._tempDir,function(v,y){v?g._onErrorHelper(v):(y=y.filter(function(T){return i.basename(T).indexOf(".ai.json")>-1}),y.length>0&&y.forEach(function(T){var w=new Date(parseInt(T.split(".ai.json")[0])),R=new Date(+new Date-f.FILE_RETEMPTION_PERIOD)>w;if(R){var O=i.join(g._tempDir,T);s.unlink(O,function(F){F&&g._onErrorHelper(F)})}}))})})},f.TAG="Sender",f.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",f.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",f.ACLED_DIRECTORIES={},f.ACL_IDENTITY=null,f.WAIT_BETWEEN_RESEND=60*1e3,f.MAX_BYTES_ON_DISK=50*1024*1024,f.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,f.CLEANUP_TIMEOUT=60*60*1e3,f.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,f.TEMPDIR_PREFIX="appInsights-node",f.OS_PROVIDES_FILE_PROTECTION=!1,f.USE_ICACLS=a.type()==="Windows_NT",f}();t.exports=p}),TE=A((e,t)=>{"use strict";var r=lr(),n=yr(),s=$n(),a=function(){function o(){}return o.createEnvelope=function(c,u,d,l,p){var f=null;switch(u){case r.TelemetryType.Trace:f=o.createTraceData(c);break;case r.TelemetryType.Dependency:f=o.createDependencyData(c);break;case r.TelemetryType.Event:f=o.createEventData(c);break;case r.TelemetryType.Exception:f=o.createExceptionData(c);break;case r.TelemetryType.Request:f=o.createRequestData(c);break;case r.TelemetryType.Metric:f=o.createMetricData(c);break;case r.TelemetryType.Availability:f=o.createAvailabilityData(c);break;case r.TelemetryType.PageView:f=o.createPageViewData(c);break}if(d&&r.domainSupportsProperties(f.baseData)){if(f&&f.baseData)if(!f.baseData.properties)f.baseData.properties=d;else for(var g in d)f.baseData.properties[g]||(f.baseData.properties[g]=d[g]);f.baseData.properties=n.validateStringMap(f.baseData.properties)}var m=p&&p.instrumentationKey||"",v=new r.Envelope;return v.data=f,v.iKey=m,v.name="Microsoft.ApplicationInsights."+m.replace(/-/g,"")+"."+f.baseType.substr(0,f.baseType.length-4),v.tags=this.getTags(l,c.tagOverrides),v.time=new Date().toISOString(),v.ver=1,v.sampleRate=p?p.samplingPercentage:100,u===r.TelemetryType.Metric&&(v.sampleRate=100),v},o.createTraceData=function(c){var u=new r.MessageData;u.message=c.message,u.properties=c.properties,isNaN(c.severity)?u.severityLevel=r.SeverityLevel.Information:u.severityLevel=c.severity;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),d.baseData=u,d},o.createDependencyData=function(c){var u=new r.RemoteDependencyData;typeof c.name=="string"&&(u.name=c.name.length>1024?c.name.slice(0,1021)+"...":c.name),u.data=c.data,u.target=c.target,u.duration=n.msToTimeSpan(c.duration),u.success=c.success,u.type=c.dependencyTypeName,u.properties=c.properties,u.resultCode=c.resultCode?c.resultCode+"":"",c.id?u.id=c.id:u.id=n.w3cTraceId();var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),d.baseData=u,d},o.createEventData=function(c){var u=new r.EventData;u.name=c.name,u.properties=c.properties,u.measurements=c.measurements;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),d.baseData=u,d},o.createExceptionData=function(c){var u=new r.ExceptionData;u.properties=c.properties,isNaN(c.severity)?u.severityLevel=r.SeverityLevel.Error:u.severityLevel=c.severity,u.measurements=c.measurements,u.exceptions=[];var d=c.exception.stack,l=new r.ExceptionDetails;l.message=c.exception.message,l.typeName=c.exception.name,l.parsedStack=this.parseStack(d),l.hasFullStack=n.isArray(l.parsedStack)&&l.parsedStack.length>0,u.exceptions.push(l);var p=new r.Data;return p.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),p.baseData=u,p},o.createRequestData=function(c){var u=new r.RequestData;c.id?u.id=c.id:u.id=n.w3cTraceId(),u.name=c.name,u.url=c.url,u.source=c.source,u.duration=n.msToTimeSpan(c.duration),u.responseCode=c.resultCode?c.resultCode+"":"",u.success=c.success,u.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),d.baseData=u,d},o.createMetricData=function(c){var u=new r.MetricData;u.metrics=[];var d=new r.DataPoint;d.count=isNaN(c.count)?1:c.count,d.kind=r.DataPointType.Aggregation,d.max=isNaN(c.max)?c.value:c.max,d.min=isNaN(c.min)?c.value:c.min,d.name=c.name,d.stdDev=isNaN(c.stdDev)?0:c.stdDev,d.value=c.value,u.metrics.push(d),u.properties=c.properties;var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),l.baseData=u,l},o.createAvailabilityData=function(c){var u=new r.AvailabilityData;c.id?u.id=c.id:u.id=n.w3cTraceId(),u.name=c.name,u.duration=n.msToTimeSpan(c.duration),u.success=c.success,u.runLocation=c.runLocation,u.message=c.message,u.measurements=c.measurements,u.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),d.baseData=u,d},o.createPageViewData=function(c){var u=new r.PageViewData;u.name=c.name,u.duration=n.msToTimeSpan(c.duration),u.url=c.url,u.measurements=c.measurements,u.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),d.baseData=u,d},o.getTags=function(c,u){var d=s.CorrelationContextManager.getCurrentContext(),l={};if(c&&c.tags)for(var p in c.tags)l[p]=c.tags[p];if(u)for(var p in u)l[p]=u[p];return d&&(l[c.keys.operationId]=l[c.keys.operationId]||d.operation.id,l[c.keys.operationName]=l[c.keys.operationName]||d.operation.name,l[c.keys.operationParentId]=l[c.keys.operationParentId]||d.operation.parentId),l},o.parseStack=function(c){var u=void 0;if(typeof c=="string"){var d=c.split(`
`);u=[];for(var l=0,p=0,f=0;f<=d.length;f++){var g=d[f];if(i.regex.test(g)){var m=new i(d[f],l++);p+=m.sizeInBytes,u.push(m)}}var v=32*1024;if(p>v)for(var y=0,T=u.length-1,w=0,R=y,O=T;y<T;){var F=u[y].sizeInBytes,z=u[T].sizeInBytes;if(w+=F+z,w>v){var K=O-R+1;u.splice(R,K);break}R=y,O=T,y++,T--}}return u},o}(),i=function(){function o(c,u){this.sizeInBytes=0,this.level=u,this.method="<no_method>",this.assembly=n.trim(c);var d=c.match(o.regex);d&&d.length>=5&&(this.method=n.trim(d[2])||this.method,this.fileName=n.trim(d[4])||"<no_filename>",this.line=parseInt(d[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=o.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return o.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,o.baseSize=58,o}();t.exports=a}),SE=A((e,t)=>{"use strict";var r=require("url"),n=Ru(),s=lo(),a=lr(),i=mE(),o=CE(),c=$n(),u=bE(),d=yr(),l=Kt(),p=TE(),f=function(){function g(m){this._telemetryProcessors=[],this._enableAzureProperties=!1;var v=new n(m);this.config=v,this.context=new s,this.commonProperties={};var y=new u(this.config);this.channel=new i(function(){return v.disableAppInsights},function(){return v.maxBatchSize},function(){return v.maxBatchIntervalMs},y)}return g.prototype.trackAvailability=function(m){this.track(m,a.TelemetryType.Availability)},g.prototype.trackPageView=function(m){this.track(m,a.TelemetryType.PageView)},g.prototype.trackTrace=function(m){this.track(m,a.TelemetryType.Trace)},g.prototype.trackMetric=function(m){this.track(m,a.TelemetryType.Metric)},g.prototype.trackException=function(m){m&&m.exception&&!d.isError(m.exception)&&(m.exception=new Error(m.exception.toString())),this.track(m,a.TelemetryType.Exception)},g.prototype.trackEvent=function(m){this.track(m,a.TelemetryType.Event)},g.prototype.trackRequest=function(m){this.track(m,a.TelemetryType.Request)},g.prototype.trackDependency=function(m){m&&!m.target&&m.data&&(m.target=r.parse(m.data).host),this.track(m,a.TelemetryType.Dependency)},g.prototype.flush=function(m){this.channel.triggerSend(m?!!m.isAppCrashing:!1,m?m.callback:void 0)},g.prototype.track=function(m,v){if(m&&a.telemetryTypeToBaseType(v)){var y=p.createEnvelope(m,v,this.commonProperties,this.context,this.config);m.time&&(y.time=m.time.toISOString()),this._enableAzureProperties&&o.azureRoleEnvironmentTelemetryProcessor(y,this.context);var T=this.runTelemetryProcessors(y,m.contextObjects);T=T&&o.samplingTelemetryProcessor(y,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),o.preAggregatedMetricsTelemetryProcessor(y,this.context),T&&(o.performanceMetricsTelemetryProcessor(y,this.quickPulseClient),this.channel.send(y))}else l.warn("track() requires telemetry object and telemetryType to be specified.")},g.prototype.setAutoPopulateAzureProperties=function(m){this._enableAzureProperties=m},g.prototype.addTelemetryProcessor=function(m){this._telemetryProcessors.push(m)},g.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},g.prototype.runTelemetryProcessors=function(m,v){var y=!0,T=this._telemetryProcessors.length;if(T===0)return y;v=v||{},v.correlationContext=c.CorrelationContextManager.getCurrentContext();for(var w=0;w<T;++w)try{var R=this._telemetryProcessors[w];if(R&&R.apply(null,[m,v])===!1){y=!1;break}}catch(O){y=!0,l.warn("One of telemetry processors failed, telemetry item will be sent.",O,m)}return y&&(m&&m.tags&&(m.tags=d.validateStringMap(m.tags)),m&&m.data&&m.data.baseData&&m.data.baseData.properties&&(m.data.baseData.properties=d.validateStringMap(m.data.baseData.properties))),y},g}();t.exports=f}),RE=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var c=function(u,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var f in p)Object.prototype.hasOwnProperty.call(p,f)&&(l[f]=p[f])},c(u,d)};return function(u,d){c(u,d);function l(){this.constructor=u}u.prototype=d===null?Object.create(d):(l.prototype=d.prototype,new l)}}(),n=SE(),s=Su(),a=Ei(),i=Kt(),o=function(c){r(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.prototype.trackNodeHttpRequestSync=function(d){d&&d.request&&d.response&&d.duration?s.trackRequestSync(this,d):i.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},u.prototype.trackNodeHttpRequest=function(d){(d.duration||d.error)&&i.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),d&&d.request&&d.response?s.trackRequest(this,d):i.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},u.prototype.trackNodeHttpDependency=function(d){d&&d.request?a.trackRequest(this,d):i.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},u}(n);t.exports=o}),wE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),PE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var t=$n(),r=Jy(),n=Zy(),s=Ns(),a=Tu(),i=uE(),o=Ei(),c=Su(),u=Hn(),d=Kt(),l=fE(),p=gE();e.TelemetryClient=RE(),e.Contracts=lr(),e.azureFunctionsTypes=wE();var f;(function(Oe){Oe[Oe.AI=0]="AI",Oe[Oe.AI_AND_W3C=1]="AI_AND_W3C"})(f=e.DistributedTracingModes||(e.DistributedTracingModes={}));var g=!0,m=!1,v=!0,y=!0,T=!0,w=!1,R=!0,O=!0,F=!0,z=!0,K,J=!1,te=!0,U,G=void 0,Q=void 0,ne,ve,de,X,ce,ie,pe,he,Ce=!1,_e;function Be(Oe){return e.defaultClient?d.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(Oe),ne=new r(e.defaultClient),ve=new n(e.defaultClient),de=new s(e.defaultClient),X=new a(e.defaultClient),ce=new i(e.defaultClient),pe=new c(e.defaultClient),he=new o(e.defaultClient),ie||(ie=new p.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(F,G,Q),it}e.setup=Be;function Je(){return e.defaultClient?(Ce=!0,ne.enable(g,m),ve.enable(v),de.enable(y),X.enable(T),ce.enable(w,e.defaultClient.config),ie.enable(te,U),pe.useAutoCorrelation(z,K),pe.enable(R),he.enable(O),e.liveMetricsClient&&J&&e.liveMetricsClient.enable(J)):d.warn("Start cannot be called before setup"),it}e.start=Je;function Ke(){return z?t.CorrelationContextManager.getCurrentContext():null}e.getCorrelationContext=Ke;function je(Oe,me){return t.CorrelationContextManager.startOperation(Oe,me)}e.startOperation=je;function xe(Oe,me){return t.CorrelationContextManager.wrapCallback(Oe,me)}e.wrapWithCorrelationContext=xe;var it=function(){function Oe(){}return Oe.setDistributedTracingMode=function(me){return u.w3cEnabled=me===f.AI_AND_W3C,Oe},Oe.setAutoCollectConsole=function(me,Ae){return Ae===void 0&&(Ae=!1),g=me,m=Ae,Ce&&ne.enable(me,Ae),Oe},Oe.setAutoCollectExceptions=function(me){return v=me,Ce&&ve.enable(me),Oe},Oe.setAutoCollectPerformance=function(me,Ae){Ae===void 0&&(Ae=!0),y=me;var ke=p.AutoCollectNativePerformance.parseEnabled(Ae);return te=ke.isEnabled,U=ke.disabledMetrics,Ce&&(de.enable(me),ie.enable(ke.isEnabled,ke.disabledMetrics)),Oe},Oe.setAutoCollectPreAggregatedMetrics=function(me){return T=me,Ce&&X.enable(me),Oe},Oe.setAutoCollectHeartbeat=function(me){return w=me,Ce&&ce.enable(me,e.defaultClient.config),Oe},Oe.setAutoCollectRequests=function(me){return R=me,Ce&&pe.enable(me),Oe},Oe.setAutoCollectDependencies=function(me){return O=me,Ce&&he.enable(me),Oe},Oe.setAutoDependencyCorrelation=function(me,Ae){return z=me,K=Ae,Ce&&pe.useAutoCorrelation(me,Ae),Oe},Oe.setUseDiskRetryCaching=function(me,Ae,ke){return F=me,G=Ae,Q=ke,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(me,Ae,ke),Oe},Oe.setInternalLogging=function(me,Ae){return me===void 0&&(me=!1),Ae===void 0&&(Ae=!0),d.enableDebug=me,d.disableWarnings=!Ae,Oe},Oe.setSendLiveMetrics=function(me){return me===void 0&&(me=!1),e.defaultClient?(!e.liveMetricsClient&&me?(e.liveMetricsClient=new l(e.defaultClient.config,null),_e=new s(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(_e),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(me),J=me,Oe):(d.warn("Live metrics client cannot be setup without the default client"),Oe)},Oe.start=Je,Oe}();e.Configuration=it;function ut(){u.w3cEnabled=!0,e.defaultClient=null,Ce=!1,ne&&ne.dispose(),ve&&ve.dispose(),de&&de.dispose(),X&&X.dispose(),ce&&ce.dispose(),ie&&ie.dispose(),pe&&pe.dispose(),he&&he.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),J=!1,e.liveMetricsClient=void 0)}e.dispose=ut}),wu={};ov(wu,{default:()=>AE});Pu.exports=sv(wu);var bs=gi(require("os")),Fn=gi(require("vscode")),Ot=gi(require("vscode")),ao=gi(require("vscode"));function fi(){let e="telemetry",t="enableTelemetry";try{let r=ao.env.telemetryConfiguration;return r.isUsageEnabled&&r.isErrorsEnabled&&r.isCrashEnabled?"on":r.isErrorsEnabled&&r.isCrashEnabled?"error":"off"}catch{return ao.env.isTelemetryEnabled!==void 0?ao.env.isTelemetryEnabled?"on":"off":ao.workspace.getConfiguration(e).get(t)?"on":"off"}}var OE=class{constructor(e,t,r,n,s){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!s,this.updateUserOptStatus(),Ot.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(Ot.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(Ot.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(Ot.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let e=fi();this.userOptIn=e==="on",this.errorOptIn=e==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(r=>{e.indexOf(`${r}`)===0&&(t=r)}),t}get extension(){return this._extension===void 0&&(this._extension=Ot.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(e===null||typeof e!="object"||typeof t!="function")return e;let r={};for(let n in e)r[n]=t(n,e[n]);return r}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(Ot.env.remoteName&&this.cleanRemoteName(Ot.env.remoteName)==="other"):!0}getCommonProperties(){let e=Object.create(null);if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,Ot&&Ot.env){switch(e["common.vscodemachineid"]=Ot.env.machineId,e["common.vscodesessionid"]=Ot.env.sessionId,e["common.vscodeversion"]=Ot.version,e["common.isnewappinstall"]=Ot.env.isNewAppInstall?Ot.env.isNewAppInstall.toString():"false",e["common.product"]=Ot.env.appHost,Ot.env.uiKind){case Ot.UIKind.Web:e["common.uikind"]="web";break;case Ot.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(Ot.env.remoteName)}return e}anonymizeFilePaths(e,t){let r;if(e==null)return"";let n=[];Ot.env.appRoot!==""&&n.push(new RegExp(Ot.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let s=e;if(t){let a=[];for(let u of n)for(;(r=u.exec(e))&&r;)a.push([r.index,u.lastIndex]);let i=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,o=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(s="";(r=o.exec(e))&&r;)r[0]&&!i.test(r[0])&&a.every(([u,d])=>r.index<u||r.index>=d)&&(s+=e.substring(c,r.index)+"<REDACTED: user-file-path>",c=o.lastIndex);c<e.length&&(s+=e.substr(c))}for(let a of n)s=s.replace(a,"");return s}removePropertiesWithPossibleUserInfo(e){if(typeof e!="object")return;let t=Object.create(null);for(let r of Object.keys(e)){let n=e[r];if(!n)continue;let s=/@[a-zA-Z0-9-.]+/,a=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,i=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;a.test(n.toLowerCase())?t[r]="<REDACTED: secret>":s.test(n)?t[r]="<REDACTED: email>":i.test(n)?t[r]="<REDACTED: token>":t[r]=n}return t}get telemetryLevel(){switch(fi()){case"on":return"all";case"error":return"error";case"off":return"off"}}sendTelemetryEvent(e,t,r){if(this.userOptIn&&e!==""){t=tn(tn({},t),this.getCommonProperties());let n=this.cloneAndChange(t,(s,a)=>this.anonymizeFilePaths(a,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}sendRawTelemetryEvent(e,t,r){this.userOptIn&&e!==""&&(t=tn(tn({},t),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:t,measurements:r}))}sendTelemetryErrorEvent(e,t,r,n){if(this.errorOptIn&&e!==""){t=tn(tn({},t),this.getCommonProperties());let s=this.cloneAndChange(t,(a,i)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(i,this.firstParty):n===void 0||n.indexOf(a)!==-1?"REDACTED":this.anonymizeFilePaths(i,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(s),measurements:r})}}sendTelemetryException(e,t,r){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&e){t=tn(tn({},t),this.getCommonProperties());let n=this.cloneAndChange(t,(s,a)=>this.anonymizeFilePaths(a,this.firstParty));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),this.telemetryAppender.logException(e,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(e=>e.dispose()))}},IE=class{constructor(e,t){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e,fi()!=="off"&&this.instantiateAppender()}logEvent(e,t){if(!this._telemetryClient){!this._isInstantiated&&fi()==="on"&&this._eventQueue.push({eventName:e,data:t});return}this._telemetryClient.logEvent(e,t)}logException(e,t){if(!this._telemetryClient){!this._isInstantiated&&fi()!=="off"&&this._exceptionQueue.push({exception:e,data:t});return}this._telemetryClient.logException(e,t)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:t})=>this.logEvent(e,t)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:t})=>this.logException(e,t)),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._isInstantiated=!0,this._flushQueues()}).catch(e=>{console.error(e)})}},DE=async e=>{let t;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let r=await Promise.resolve().then(()=>gi(PE()));r.defaultClient?(t=new r.TelemetryClient(e),t.channel.setUseDiskRetryCaching(!0)):(r.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),t=r.defaultClient),Fn&&Fn.env&&(t.context.tags[t.context.keys.userId]=Fn.env.machineId,t.context.tags[t.context.keys.sessionId]=Fn.env.sessionId,t.context.tags[t.context.keys.cloudRole]=Fn.env.appName,t.context.tags[t.context.keys.cloudRoleInstance]=Fn.env.appName),e&&e.indexOf("AIF-")===0&&(t.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}catch(r){return Promise.reject(`Failed to initialize app insights!
`+r.message)}return{logEvent:(r,n)=>{try{t?.trackEvent({name:r,properties:n?.properties,measurements:n?.measurements})}catch(s){throw new Error(`Failed to log event to app insights!
`+s.message)}},logException:(r,n)=>{try{t?.trackException({exception:r,properties:n?.properties,measurements:n?.measurements})}catch(s){throw new Error(`Failed to log exception to app insights!
`+s.message)}},flush:async()=>{try{t?.flush()}catch(r){throw new Error(`Failed to flush app insights!
`+r.message)}}}},AE=class extends OE{constructor(e,t,r,n){let s=new IE(r,DE);r&&r.indexOf("AIF-")===0&&(n=!0);super(e,t,s,{release:bs.release(),platform:bs.platform(),architecture:bs.arch()},n)}}});var Ci=ee((sP,Iu)=>{var xE="2.0.0",NE=Number.MAX_SAFE_INTEGER||9007199254740991,kE=16;Iu.exports={SEMVER_SPEC_VERSION:xE,MAX_LENGTH:256,MAX_SAFE_INTEGER:NE,MAX_SAFE_COMPONENT_LENGTH:kE}});var bi=ee((aP,Du)=>{var ME=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};Du.exports=ME});var bn=ee((on,Au)=>{var{MAX_SAFE_COMPONENT_LENGTH:ks}=Ci(),qE=bi();on=Au.exports={};var LE=on.re=[],Te=on.src=[],Se=on.t={},jE=0,We=(e,t,r)=>{let n=jE++;qE(n,t),Se[e]=n,Te[n]=t,LE[n]=new RegExp(t,r?"g":void 0)};We("NUMERICIDENTIFIER","0|[1-9]\\d*");We("NUMERICIDENTIFIERLOOSE","[0-9]+");We("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");We("MAINVERSION",`(${Te[Se.NUMERICIDENTIFIER]})\\.(${Te[Se.NUMERICIDENTIFIER]})\\.(${Te[Se.NUMERICIDENTIFIER]})`);We("MAINVERSIONLOOSE",`(${Te[Se.NUMERICIDENTIFIERLOOSE]})\\.(${Te[Se.NUMERICIDENTIFIERLOOSE]})\\.(${Te[Se.NUMERICIDENTIFIERLOOSE]})`);We("PRERELEASEIDENTIFIER",`(?:${Te[Se.NUMERICIDENTIFIER]}|${Te[Se.NONNUMERICIDENTIFIER]})`);We("PRERELEASEIDENTIFIERLOOSE",`(?:${Te[Se.NUMERICIDENTIFIERLOOSE]}|${Te[Se.NONNUMERICIDENTIFIER]})`);We("PRERELEASE",`(?:-(${Te[Se.PRERELEASEIDENTIFIER]}(?:\\.${Te[Se.PRERELEASEIDENTIFIER]})*))`);We("PRERELEASELOOSE",`(?:-?(${Te[Se.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Te[Se.PRERELEASEIDENTIFIERLOOSE]})*))`);We("BUILDIDENTIFIER","[0-9A-Za-z-]+");We("BUILD",`(?:\\+(${Te[Se.BUILDIDENTIFIER]}(?:\\.${Te[Se.BUILDIDENTIFIER]})*))`);We("FULLPLAIN",`v?${Te[Se.MAINVERSION]}${Te[Se.PRERELEASE]}?${Te[Se.BUILD]}?`);We("FULL",`^${Te[Se.FULLPLAIN]}$`);We("LOOSEPLAIN",`[v=\\s]*${Te[Se.MAINVERSIONLOOSE]}${Te[Se.PRERELEASELOOSE]}?${Te[Se.BUILD]}?`);We("LOOSE",`^${Te[Se.LOOSEPLAIN]}$`);We("GTLT","((?:<|>)?=?)");We("XRANGEIDENTIFIERLOOSE",`${Te[Se.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);We("XRANGEIDENTIFIER",`${Te[Se.NUMERICIDENTIFIER]}|x|X|\\*`);We("XRANGEPLAIN",`[v=\\s]*(${Te[Se.XRANGEIDENTIFIER]})(?:\\.(${Te[Se.XRANGEIDENTIFIER]})(?:\\.(${Te[Se.XRANGEIDENTIFIER]})(?:${Te[Se.PRERELEASE]})?${Te[Se.BUILD]}?)?)?`);We("XRANGEPLAINLOOSE",`[v=\\s]*(${Te[Se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Te[Se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Te[Se.XRANGEIDENTIFIERLOOSE]})(?:${Te[Se.PRERELEASELOOSE]})?${Te[Se.BUILD]}?)?)?`);We("XRANGE",`^${Te[Se.GTLT]}\\s*${Te[Se.XRANGEPLAIN]}$`);We("XRANGELOOSE",`^${Te[Se.GTLT]}\\s*${Te[Se.XRANGEPLAINLOOSE]}$`);We("COERCE",`(^|[^\\d])(\\d{1,${ks}})(?:\\.(\\d{1,${ks}}))?(?:\\.(\\d{1,${ks}}))?(?:$|[^\\d])`);We("COERCERTL",Te[Se.COERCE],!0);We("LONETILDE","(?:~>?)");We("TILDETRIM",`(\\s*)${Te[Se.LONETILDE]}\\s+`,!0);on.tildeTrimReplace="$1~";We("TILDE",`^${Te[Se.LONETILDE]}${Te[Se.XRANGEPLAIN]}$`);We("TILDELOOSE",`^${Te[Se.LONETILDE]}${Te[Se.XRANGEPLAINLOOSE]}$`);We("LONECARET","(?:\\^)");We("CARETTRIM",`(\\s*)${Te[Se.LONECARET]}\\s+`,!0);on.caretTrimReplace="$1^";We("CARET",`^${Te[Se.LONECARET]}${Te[Se.XRANGEPLAIN]}$`);We("CARETLOOSE",`^${Te[Se.LONECARET]}${Te[Se.XRANGEPLAINLOOSE]}$`);We("COMPARATORLOOSE",`^${Te[Se.GTLT]}\\s*(${Te[Se.LOOSEPLAIN]})$|^$`);We("COMPARATOR",`^${Te[Se.GTLT]}\\s*(${Te[Se.FULLPLAIN]})$|^$`);We("COMPARATORTRIM",`(\\s*)${Te[Se.GTLT]}\\s*(${Te[Se.LOOSEPLAIN]}|${Te[Se.XRANGEPLAIN]})`,!0);on.comparatorTrimReplace="$1$2$3";We("HYPHENRANGE",`^\\s*(${Te[Se.XRANGEPLAIN]})\\s+-\\s+(${Te[Se.XRANGEPLAIN]})\\s*$`);We("HYPHENRANGELOOSE",`^\\s*(${Te[Se.XRANGEPLAINLOOSE]})\\s+-\\s+(${Te[Se.XRANGEPLAINLOOSE]})\\s*$`);We("STAR","(<|>)?=?\\s*\\*");We("GTE0","^\\s*>=\\s*0.0.0\\s*$");We("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var Ti=ee((cP,xu)=>{var FE=["includePrerelease","loose","rtl"],HE=e=>e?typeof e!="object"?{loose:!0}:FE.filter(t=>e[t]).reduce((t,r)=>(t[r]=!0,t),{}):{};xu.exports=HE});var po=ee((uP,Mu)=>{var Nu=/^[0-9]+$/,ku=(e,t)=>{let r=Nu.test(e),n=Nu.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},$E=(e,t)=>ku(t,e);Mu.exports={compareIdentifiers:ku,rcompareIdentifiers:$E}});var Jt=ee((lP,Fu)=>{var fo=bi(),{MAX_LENGTH:qu,MAX_SAFE_INTEGER:ho}=Ci(),{re:Lu,t:ju}=bn(),UE=Ti(),{compareIdentifiers:Si}=po(),Er=class{constructor(t,r){if(r=UE(r),t instanceof Er){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>qu)throw new TypeError(`version is longer than ${qu} characters`);fo("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?Lu[ju.LOOSE]:Lu[ju.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ho||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ho||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ho||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let a=+s;if(a>=0&&a<ho)return a}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(fo("SemVer.compare",this.version,this.options,t),!(t instanceof Er)){if(typeof t=="string"&&t===this.version)return 0;t=new Er(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Er||(t=new Er(t,this.options)),Si(this.major,t.major)||Si(this.minor,t.minor)||Si(this.patch,t.patch)}comparePre(t){if(t instanceof Er||(t=new Er(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=t.prerelease[r];if(fo("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Si(n,s)}while(++r)}compareBuild(t){t instanceof Er||(t=new Er(t,this.options));let r=0;do{let n=this.build[r],s=t.build[r];if(fo("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Si(n,s)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};Fu.exports=Er});var Tn=ee((dP,Bu)=>{var{MAX_LENGTH:BE}=Ci(),{re:Hu,t:$u}=bn(),Uu=Jt(),GE=Ti(),VE=(e,t)=>{if(t=GE(t),e instanceof Uu)return e;if(typeof e!="string"||e.length>BE||!(t.loose?Hu[$u.LOOSE]:Hu[$u.FULL]).test(e))return null;try{return new Uu(e,t)}catch{return null}};Bu.exports=VE});var Vu=ee((pP,Gu)=>{var WE=Tn(),KE=(e,t)=>{let r=WE(e,t);return r?r.version:null};Gu.exports=KE});var Ku=ee((fP,Wu)=>{var zE=Tn(),XE=(e,t)=>{let r=zE(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};Wu.exports=XE});var Xu=ee((hP,zu)=>{var YE=Jt(),QE=(e,t,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new YE(e,r).inc(t,n).version}catch{return null}};zu.exports=QE});var Cr=ee((gP,Qu)=>{var Yu=Jt(),JE=(e,t,r)=>new Yu(e,r).compare(new Yu(t,r));Qu.exports=JE});var go=ee((mP,Ju)=>{var ZE=Cr(),eC=(e,t,r)=>ZE(e,t,r)===0;Ju.exports=eC});var tl=ee((vP,el)=>{var Zu=Tn(),tC=go(),rC=(e,t)=>{if(tC(e,t))return null;{let r=Zu(e),n=Zu(t),s=r.prerelease.length||n.prerelease.length,a=s?"pre":"",i=s?"prerelease":"";for(let o in r)if((o==="major"||o==="minor"||o==="patch")&&r[o]!==n[o])return a+o;return i}};el.exports=rC});var nl=ee((_P,rl)=>{var nC=Jt(),iC=(e,t)=>new nC(e,t).major;rl.exports=iC});var ol=ee((yP,il)=>{var oC=Jt(),sC=(e,t)=>new oC(e,t).minor;il.exports=sC});var al=ee((EP,sl)=>{var aC=Jt(),cC=(e,t)=>new aC(e,t).patch;sl.exports=cC});var ul=ee((CP,cl)=>{var uC=Tn(),lC=(e,t)=>{let r=uC(e,t);return r&&r.prerelease.length?r.prerelease:null};cl.exports=lC});var dl=ee((bP,ll)=>{var dC=Cr(),pC=(e,t,r)=>dC(t,e,r);ll.exports=pC});var fl=ee((TP,pl)=>{var fC=Cr(),hC=(e,t)=>fC(e,t,!0);pl.exports=hC});var mo=ee((SP,gl)=>{var hl=Jt(),gC=(e,t,r)=>{let n=new hl(e,r),s=new hl(t,r);return n.compare(s)||n.compareBuild(s)};gl.exports=gC});var vl=ee((RP,ml)=>{var mC=mo(),vC=(e,t)=>e.sort((r,n)=>mC(r,n,t));ml.exports=vC});var yl=ee((wP,_l)=>{var _C=mo(),yC=(e,t)=>e.sort((r,n)=>_C(n,r,t));_l.exports=yC});var Ri=ee((PP,El)=>{var EC=Cr(),CC=(e,t,r)=>EC(e,t,r)>0;El.exports=CC});var vo=ee((OP,Cl)=>{var bC=Cr(),TC=(e,t,r)=>bC(e,t,r)<0;Cl.exports=TC});var Ms=ee((IP,bl)=>{var SC=Cr(),RC=(e,t,r)=>SC(e,t,r)!==0;bl.exports=RC});var _o=ee((DP,Tl)=>{var wC=Cr(),PC=(e,t,r)=>wC(e,t,r)>=0;Tl.exports=PC});var yo=ee((AP,Sl)=>{var OC=Cr(),IC=(e,t,r)=>OC(e,t,r)<=0;Sl.exports=IC});var qs=ee((xP,Rl)=>{var DC=go(),AC=Ms(),xC=Ri(),NC=_o(),kC=vo(),MC=yo(),qC=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return DC(e,r,n);case"!=":return AC(e,r,n);case">":return xC(e,r,n);case">=":return NC(e,r,n);case"<":return kC(e,r,n);case"<=":return MC(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};Rl.exports=qC});var Pl=ee((NP,wl)=>{var LC=Jt(),jC=Tn(),{re:Eo,t:Co}=bn(),FC=(e,t)=>{if(e instanceof LC)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(Eo[Co.COERCE]);else{let n;for(;(n=Eo[Co.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Eo[Co.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Eo[Co.COERCERTL].lastIndex=-1}return r===null?null:jC(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};wl.exports=FC});var Il=ee((kP,Ol)=>{"use strict";Ol.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var Al=ee((MP,Dl)=>{"use strict";Dl.exports=nt;nt.Node=Sn;nt.create=nt;function nt(e){var t=this;if(t instanceof nt||(t=new nt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(s){t.push(s)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}nt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};nt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};nt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};nt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)$C(this,arguments[e]);return this.length};nt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)UC(this,arguments[e]);return this.length};nt.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};nt.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};nt.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};nt.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};nt.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};nt.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};nt.prototype.map=function(e,t){t=t||this;for(var r=new nt,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};nt.prototype.mapReverse=function(e,t){t=t||this;for(var r=new nt,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};nt.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)r=e(r,n.value,s),n=n.next;return r};nt.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)r=e(r,n.value,s),n=n.prev;return r};nt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};nt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};nt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new nt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,s=this.head;s!==null&&n<e;n++)s=s.next;for(;s!==null&&n<t;n++,s=s.next)r.push(s.value);return r};nt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new nt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,s=this.tail;s!==null&&n>t;n--)s=s.prev;for(;s!==null&&n>e;n--,s=s.prev)r.push(s.value);return r};nt.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,s=this.head;s!==null&&n<e;n++)s=s.next;for(var a=[],n=0;s&&n<t;n++)a.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<r.length;n++)s=HC(this,s,r[n]);return a};nt.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function HC(e,t,r){var n=t===e.head?new Sn(r,null,t,e):new Sn(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function $C(e,t){e.tail=new Sn(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function UC(e,t){e.head=new Sn(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Sn(e,t,r,n){if(!(this instanceof Sn))return new Sn(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Il()(nt)}catch{}});var jl=ee((qP,Ll)=>{"use strict";var BC=Al(),Rn=Symbol("max"),Vr=Symbol("length"),Un=Symbol("lengthCalculator"),Pi=Symbol("allowStale"),wn=Symbol("maxAge"),Gr=Symbol("dispose"),xl=Symbol("noDisposeOnSet"),$t=Symbol("lruList"),Or=Symbol("cache"),kl=Symbol("updateAgeOnGet"),Ls=()=>1,Ml=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let r=this[Rn]=t.max||1/0,n=t.length||Ls;if(this[Un]=typeof n!="function"?Ls:n,this[Pi]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[wn]=t.maxAge||0,this[Gr]=t.dispose,this[xl]=t.noDisposeOnSet||!1,this[kl]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Rn]=t||1/0,wi(this)}get max(){return this[Rn]}set allowStale(t){this[Pi]=!!t}get allowStale(){return this[Pi]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[wn]=t,wi(this)}get maxAge(){return this[wn]}set lengthCalculator(t){typeof t!="function"&&(t=Ls),t!==this[Un]&&(this[Un]=t,this[Vr]=0,this[$t].forEach(r=>{r.length=this[Un](r.value,r.key),this[Vr]+=r.length})),wi(this)}get lengthCalculator(){return this[Un]}get length(){return this[Vr]}get itemCount(){return this[$t].length}rforEach(t,r){r=r||this;for(let n=this[$t].tail;n!==null;){let s=n.prev;Nl(this,t,n,r),n=s}}forEach(t,r){r=r||this;for(let n=this[$t].head;n!==null;){let s=n.next;Nl(this,t,n,r),n=s}}keys(){return this[$t].toArray().map(t=>t.key)}values(){return this[$t].toArray().map(t=>t.value)}reset(){this[Gr]&&this[$t]&&this[$t].length&&this[$t].forEach(t=>this[Gr](t.key,t.value)),this[Or]=new Map,this[$t]=new BC,this[Vr]=0}dump(){return this[$t].map(t=>bo(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[$t]}set(t,r,n){if(n=n||this[wn],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let s=n?Date.now():0,a=this[Un](r,t);if(this[Or].has(t)){if(a>this[Rn])return Bn(this,this[Or].get(t)),!1;let c=this[Or].get(t).value;return this[Gr]&&(this[xl]||this[Gr](t,c.value)),c.now=s,c.maxAge=n,c.value=r,this[Vr]+=a-c.length,c.length=a,this.get(t),wi(this),!0}let i=new ql(t,r,a,s,n);return i.length>this[Rn]?(this[Gr]&&this[Gr](t,r),!1):(this[Vr]+=i.length,this[$t].unshift(i),this[Or].set(t,this[$t].head),wi(this),!0)}has(t){if(!this[Or].has(t))return!1;let r=this[Or].get(t).value;return!bo(this,r)}get(t){return js(this,t,!0)}peek(t){return js(this,t,!1)}pop(){let t=this[$t].tail;return t?(Bn(this,t),t.value):null}del(t){Bn(this,this[Or].get(t))}load(t){this.reset();let r=Date.now();for(let n=t.length-1;n>=0;n--){let s=t[n],a=s.e||0;if(a===0)this.set(s.k,s.v);else{let i=a-r;i>0&&this.set(s.k,s.v,i)}}}prune(){this[Or].forEach((t,r)=>js(this,r,!1))}},js=(e,t,r)=>{let n=e[Or].get(t);if(n){let s=n.value;if(bo(e,s)){if(Bn(e,n),!e[Pi])return}else r&&(e[kl]&&(n.value.now=Date.now()),e[$t].unshiftNode(n));return s.value}},bo=(e,t)=>{if(!t||!t.maxAge&&!e[wn])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[wn]&&r>e[wn]},wi=e=>{if(e[Vr]>e[Rn])for(let t=e[$t].tail;e[Vr]>e[Rn]&&t!==null;){let r=t.prev;Bn(e,t),t=r}},Bn=(e,t)=>{if(t){let r=t.value;e[Gr]&&e[Gr](r.key,r.value),e[Vr]-=r.length,e[Or].delete(r.key),e[$t].removeNode(t)}},ql=class{constructor(t,r,n,s,a){this.key=t,this.value=r,this.length=n,this.now=s,this.maxAge=a||0}},Nl=(e,t,r,n)=>{let s=r.value;bo(e,s)&&(Bn(e,r),e[Pi]||(s=void 0)),s&&t.call(n,s.value,s.key,e)};Ll.exports=Ml});var br=ee((LP,Ul)=>{var Gn=class{constructor(t,r){if(r=VC(r),t instanceof Gn)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new Gn(t.raw,r);if(t instanceof Fs)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!Hl(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&YC(s[0])){this.set=[s];break}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${t}`,s=Fl.get(n);if(s)return s;let a=this.options.loose,i=a?Zt[zt.HYPHENRANGELOOSE]:Zt[zt.HYPHENRANGE];t=t.replace(i,sb(this.options.includePrerelease)),It("hyphen replace",t),t=t.replace(Zt[zt.COMPARATORTRIM],KC),It("comparator trim",t,Zt[zt.COMPARATORTRIM]),t=t.replace(Zt[zt.TILDETRIM],zC),t=t.replace(Zt[zt.CARETTRIM],XC),t=t.split(/\s+/).join(" ");let o=a?Zt[zt.COMPARATORLOOSE]:Zt[zt.COMPARATOR],c=t.split(" ").map(p=>QC(p,this.options)).join(" ").split(/\s+/).map(p=>ob(p,this.options)).filter(this.options.loose?p=>!!p.match(o):()=>!0).map(p=>new Fs(p,this.options)),u=c.length,d=new Map;for(let p of c){if(Hl(p))return[p];d.set(p.value,p)}d.size>1&&d.has("")&&d.delete("");let l=[...d.values()];return Fl.set(n,l),l}intersects(t,r){if(!(t instanceof Gn))throw new TypeError("a Range is required");return this.set.some(n=>$l(n,r)&&t.set.some(s=>$l(s,r)&&n.every(a=>s.every(i=>a.intersects(i,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new WC(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(ab(this.set[r],t,this.options))return!0;return!1}};Ul.exports=Gn;var GC=jl(),Fl=new GC({max:1e3}),VC=Ti(),Fs=Oi(),It=bi(),WC=Jt(),{re:Zt,t:zt,comparatorTrimReplace:KC,tildeTrimReplace:zC,caretTrimReplace:XC}=bn(),Hl=e=>e.value==="<0.0.0-0",YC=e=>e.value==="",$l=(e,t)=>{let r=!0,n=e.slice(),s=n.pop();for(;r&&n.length;)r=n.every(a=>s.intersects(a,t)),s=n.pop();return r},QC=(e,t)=>(It("comp",e,t),e=eb(e,t),It("caret",e),e=JC(e,t),It("tildes",e),e=rb(e,t),It("xrange",e),e=ib(e,t),It("stars",e),e),or=e=>!e||e.toLowerCase()==="x"||e==="*",JC=(e,t)=>e.trim().split(/\s+/).map(r=>ZC(r,t)).join(" "),ZC=(e,t)=>{let r=t.loose?Zt[zt.TILDELOOSE]:Zt[zt.TILDE];return e.replace(r,(n,s,a,i,o)=>{It("tilde",e,n,s,a,i,o);let c;return or(s)?c="":or(a)?c=`>=${s}.0.0 <${+s+1}.0.0-0`:or(i)?c=`>=${s}.${a}.0 <${s}.${+a+1}.0-0`:o?(It("replaceTilde pr",o),c=`>=${s}.${a}.${i}-${o} <${s}.${+a+1}.0-0`):c=`>=${s}.${a}.${i} <${s}.${+a+1}.0-0`,It("tilde return",c),c})},eb=(e,t)=>e.trim().split(/\s+/).map(r=>tb(r,t)).join(" "),tb=(e,t)=>{It("caret",e,t);let r=t.loose?Zt[zt.CARETLOOSE]:Zt[zt.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(s,a,i,o,c)=>{It("caret",e,s,a,i,o,c);let u;return or(a)?u="":or(i)?u=`>=${a}.0.0${n} <${+a+1}.0.0-0`:or(o)?a==="0"?u=`>=${a}.${i}.0${n} <${a}.${+i+1}.0-0`:u=`>=${a}.${i}.0${n} <${+a+1}.0.0-0`:c?(It("replaceCaret pr",c),a==="0"?i==="0"?u=`>=${a}.${i}.${o}-${c} <${a}.${i}.${+o+1}-0`:u=`>=${a}.${i}.${o}-${c} <${a}.${+i+1}.0-0`:u=`>=${a}.${i}.${o}-${c} <${+a+1}.0.0-0`):(It("no pr"),a==="0"?i==="0"?u=`>=${a}.${i}.${o}${n} <${a}.${i}.${+o+1}-0`:u=`>=${a}.${i}.${o}${n} <${a}.${+i+1}.0-0`:u=`>=${a}.${i}.${o} <${+a+1}.0.0-0`),It("caret return",u),u})},rb=(e,t)=>(It("replaceXRanges",e,t),e.split(/\s+/).map(r=>nb(r,t)).join(" ")),nb=(e,t)=>{e=e.trim();let r=t.loose?Zt[zt.XRANGELOOSE]:Zt[zt.XRANGE];return e.replace(r,(n,s,a,i,o,c)=>{It("xRange",e,n,s,a,i,o,c);let u=or(a),d=u||or(i),l=d||or(o),p=l;return s==="="&&p&&(s=""),c=t.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&p?(d&&(i=0),o=0,s===">"?(s=">=",d?(a=+a+1,i=0,o=0):(i=+i+1,o=0)):s==="<="&&(s="<",d?a=+a+1:i=+i+1),s==="<"&&(c="-0"),n=`${s+a}.${i}.${o}${c}`):d?n=`>=${a}.0.0${c} <${+a+1}.0.0-0`:l&&(n=`>=${a}.${i}.0${c} <${a}.${+i+1}.0-0`),It("xRange return",n),n})},ib=(e,t)=>(It("replaceStars",e,t),e.trim().replace(Zt[zt.STAR],"")),ob=(e,t)=>(It("replaceGTE0",e,t),e.trim().replace(Zt[t.includePrerelease?zt.GTE0PRE:zt.GTE0],"")),sb=e=>(t,r,n,s,a,i,o,c,u,d,l,p,f)=>(or(n)?r="":or(s)?r=`>=${n}.0.0${e?"-0":""}`:or(a)?r=`>=${n}.${s}.0${e?"-0":""}`:i?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,or(u)?c="":or(d)?c=`<${+u+1}.0.0-0`:or(l)?c=`<${u}.${+d+1}.0-0`:p?c=`<=${u}.${d}.${l}-${p}`:e?c=`<${u}.${d}.${+l+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),ab=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(It(e[n].semver),e[n].semver!==Fs.ANY&&e[n].semver.prerelease.length>0){let s=e[n].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0}});var Oi=ee((jP,Kl)=>{var Ii=Symbol("SemVer ANY"),Di=class{static get ANY(){return Ii}constructor(t,r){if(r=cb(r),t instanceof Di){if(t.loose===!!r.loose)return t;t=t.value}$s("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===Ii?this.value="":this.value=this.operator+this.semver.version,$s("comp",this)}parse(t){let r=this.options.loose?Bl[Gl.COMPARATORLOOSE]:Bl[Gl.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Vl(n[2],this.options.loose):this.semver=Ii}toString(){return this.value}test(t){if($s("Comparator.test",t,this.options.loose),this.semver===Ii||t===Ii)return!0;if(typeof t=="string")try{t=new Vl(t,this.options)}catch{return!1}return Hs(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof Di))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Wl(t.value,r).test(this.value);if(t.operator==="")return t.value===""?!0:new Wl(this.value,r).test(t.semver);let n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),s=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),a=this.semver.version===t.semver.version,i=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),o=Hs(this.semver,"<",t.semver,r)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=Hs(this.semver,">",t.semver,r)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||s||a&&i||o||c}};Kl.exports=Di;var cb=Ti(),{re:Bl,t:Gl}=bn(),Hs=qs(),$s=bi(),Vl=Jt(),Wl=br()});var Ai=ee((FP,zl)=>{var ub=br(),lb=(e,t,r)=>{try{t=new ub(t,r)}catch{return!1}return t.test(e)};zl.exports=lb});var Yl=ee((HP,Xl)=>{var db=br(),pb=(e,t)=>new db(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Xl.exports=pb});var Jl=ee(($P,Ql)=>{var fb=Jt(),hb=br(),gb=(e,t,r)=>{let n=null,s=null,a=null;try{a=new hb(t,r)}catch{return null}return e.forEach(i=>{a.test(i)&&(!n||s.compare(i)===-1)&&(n=i,s=new fb(n,r))}),n};Ql.exports=gb});var ed=ee((UP,Zl)=>{var mb=Jt(),vb=br(),_b=(e,t,r)=>{let n=null,s=null,a=null;try{a=new vb(t,r)}catch{return null}return e.forEach(i=>{a.test(i)&&(!n||s.compare(i)===1)&&(n=i,s=new mb(n,r))}),n};Zl.exports=_b});var nd=ee((BP,rd)=>{var Us=Jt(),yb=br(),td=Ri(),Eb=(e,t)=>{e=new yb(e,t);let r=new Us("0.0.0");if(e.test(r)||(r=new Us("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let s=e.set[n],a=null;s.forEach(i=>{let o=new Us(i.semver.version);switch(i.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!a||td(o,a))&&(a=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),a&&(!r||td(r,a))&&(r=a)}return r&&e.test(r)?r:null};rd.exports=Eb});var od=ee((GP,id)=>{var Cb=br(),bb=(e,t)=>{try{return new Cb(e,t).range||"*"}catch{return null}};id.exports=bb});var To=ee((VP,ud)=>{var Tb=Jt(),cd=Oi(),{ANY:Sb}=cd,Rb=br(),wb=Ai(),sd=Ri(),ad=vo(),Pb=yo(),Ob=_o(),Ib=(e,t,r,n)=>{e=new Tb(e,n),t=new Rb(t,n);let s,a,i,o,c;switch(r){case">":s=sd,a=Pb,i=ad,o=">",c=">=";break;case"<":s=ad,a=Ob,i=sd,o="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(wb(e,t,n))return!1;for(let u=0;u<t.set.length;++u){let d=t.set[u],l=null,p=null;if(d.forEach(f=>{f.semver===Sb&&(f=new cd(">=0.0.0")),l=l||f,p=p||f,s(f.semver,l.semver,n)?l=f:i(f.semver,p.semver,n)&&(p=f)}),l.operator===o||l.operator===c||(!p.operator||p.operator===o)&&a(e,p.semver))return!1;if(p.operator===c&&i(e,p.semver))return!1}return!0};ud.exports=Ib});var dd=ee((WP,ld)=>{var Db=To(),Ab=(e,t,r)=>Db(e,t,">",r);ld.exports=Ab});var fd=ee((KP,pd)=>{var xb=To(),Nb=(e,t,r)=>xb(e,t,"<",r);pd.exports=Nb});var md=ee((zP,gd)=>{var hd=br(),kb=(e,t,r)=>(e=new hd(e,r),t=new hd(t,r),e.intersects(t));gd.exports=kb});var _d=ee((XP,vd)=>{var Mb=Ai(),qb=Cr();vd.exports=(e,t,r)=>{let n=[],s=null,a=null,i=e.sort((d,l)=>qb(d,l,r));for(let d of i)Mb(d,t,r)?(a=d,s||(s=d)):(a&&n.push([s,a]),a=null,s=null);s&&n.push([s,null]);let o=[];for(let[d,l]of n)d===l?o.push(d):!l&&d===i[0]?o.push("*"):l?d===i[0]?o.push(`<=${l}`):o.push(`${d} - ${l}`):o.push(`>=${d}`);let c=o.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return c.length<u.length?c:t}});var Td=ee((YP,bd)=>{var yd=br(),So=Oi(),{ANY:Bs}=So,xi=Ai(),Gs=Cr(),Lb=(e,t,r={})=>{if(e===t)return!0;e=new yd(e,r),t=new yd(t,r);let n=!1;e:for(let s of e.set){for(let a of t.set){let i=jb(s,a,r);if(n=n||i!==null,i)continue e}if(n)return!1}return!0},jb=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Bs){if(t.length===1&&t[0].semver===Bs)return!0;r.includePrerelease?e=[new So(">=0.0.0-0")]:e=[new So(">=0.0.0")]}if(t.length===1&&t[0].semver===Bs){if(r.includePrerelease)return!0;t=[new So(">=0.0.0")]}let n=new Set,s,a;for(let f of e)f.operator===">"||f.operator===">="?s=Ed(s,f,r):f.operator==="<"||f.operator==="<="?a=Cd(a,f,r):n.add(f.semver);if(n.size>1)return null;let i;if(s&&a){if(i=Gs(s.semver,a.semver,r),i>0)return null;if(i===0&&(s.operator!==">="||a.operator!=="<="))return null}for(let f of n){if(s&&!xi(f,String(s),r)||a&&!xi(f,String(a),r))return null;for(let g of t)if(!xi(f,String(g),r))return!1;return!0}let o,c,u,d,l=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1,p=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;l&&l.prerelease.length===1&&a.operator==="<"&&l.prerelease[0]===0&&(l=!1);for(let f of t){if(d=d||f.operator===">"||f.operator===">=",u=u||f.operator==="<"||f.operator==="<=",s){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(o=Ed(s,f,r),o===f&&o!==s)return!1}else if(s.operator===">="&&!xi(s.semver,String(f),r))return!1}if(a){if(l&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===l.major&&f.semver.minor===l.minor&&f.semver.patch===l.patch&&(l=!1),f.operator==="<"||f.operator==="<="){if(c=Cd(a,f,r),c===f&&c!==a)return!1}else if(a.operator==="<="&&!xi(a.semver,String(f),r))return!1}if(!f.operator&&(a||s)&&i!==0)return!1}return!(s&&u&&!a&&i!==0||a&&d&&!s&&i!==0||p||l)},Ed=(e,t,r)=>{if(!e)return t;let n=Gs(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Cd=(e,t,r)=>{if(!e)return t;let n=Gs(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};bd.exports=Lb});var Rd=ee((QP,Sd)=>{var Vs=bn();Sd.exports={re:Vs.re,src:Vs.src,tokens:Vs.t,SEMVER_SPEC_VERSION:Ci().SEMVER_SPEC_VERSION,SemVer:Jt(),compareIdentifiers:po().compareIdentifiers,rcompareIdentifiers:po().rcompareIdentifiers,parse:Tn(),valid:Vu(),clean:Ku(),inc:Xu(),diff:tl(),major:nl(),minor:ol(),patch:al(),prerelease:ul(),compare:Cr(),rcompare:dl(),compareLoose:fl(),compareBuild:mo(),sort:vl(),rsort:yl(),gt:Ri(),lt:vo(),eq:go(),neq:Ms(),gte:_o(),lte:yo(),cmp:qs(),coerce:Pl(),Comparator:Oi(),Range:br(),satisfies:Ai(),toComparators:Yl(),maxSatisfying:Jl(),minSatisfying:ed(),minVersion:nd(),validRange:od(),outside:To(),gtr:dd(),ltr:fd(),intersects:md(),simplifyRange:_d(),subset:Td()}});var sn=ee(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.asPromise=wt.thenable=wt.typedArray=wt.stringArray=wt.array=wt.func=wt.error=wt.number=wt.string=wt.boolean=void 0;function Fb(e){return e===!0||e===!1}wt.boolean=Fb;function wd(e){return typeof e=="string"||e instanceof String}wt.string=wd;function Hb(e){return typeof e=="number"||e instanceof Number}wt.number=Hb;function $b(e){return e instanceof Error}wt.error=$b;function Pd(e){return typeof e=="function"}wt.func=Pd;function Od(e){return Array.isArray(e)}wt.array=Od;function Ub(e){return Od(e)&&e.every(t=>wd(t))}wt.stringArray=Ub;function Bb(e,t){return Array.isArray(e)&&e.every(t)}wt.typedArray=Bb;function Id(e){return e&&Pd(e.then)}wt.thenable=Id;function Gb(e){return e instanceof Promise?e:Id(e)?new Promise((t,r)=>{e.then(n=>t(n),n=>r(n))}):Promise.resolve(e)}wt.asPromise=Gb});var Wr=ee(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});var Ws;function Ks(){if(Ws===void 0)throw new Error("No runtime abstraction layer installed");return Ws}(function(e){function t(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");Ws=r}e.install=t})(Ks||(Ks={}));zs.default=Ks});var Xs=ee(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.Disposable=void 0;var Vb;(function(e){function t(r){return{dispose:r}}e.create=t})(Vb=Ni.Disposable||(Ni.Disposable={}))});var Ad=ee(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.AbstractMessageBuffer=void 0;var Wb=13,Kb=10,zb=`\r
`,Dd=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){let r=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let t=0,r=0,n=0,s=0;e:for(;r<this._chunks.length;){let c=this._chunks[r];n=0;t:for(;n<c.length;){switch(c[n]){case Wb:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case Kb:switch(t){case 1:t=2;break;case 3:t=4,n++;break e;default:t=0}break;default:t=0}n++}s+=c.byteLength,r++}if(t!==4)return;let a=this._read(s+n),i=new Map,o=this.toString(a,"ascii").split(zb);if(o.length<2)return i;for(let c=0;c<o.length-2;c++){let u=o[c],d=u.indexOf(":");if(d===-1)throw new Error("Message header must separate key and value using :");let l=u.substr(0,d),p=u.substr(d+1).trim();i.set(l,p)}return i}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let a=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(a)}if(this._chunks[0].byteLength>t){let a=this._chunks[0],i=this.asNative(a,t);return this._chunks[0]=a.slice(t),this._totalLength-=t,i}let r=this.allocNative(t),n=0,s=0;for(;t>0;){let a=this._chunks[s];if(a.byteLength>t){let i=a.slice(0,t);r.set(i,n),n+=t,this._chunks[s]=a.slice(t),this._totalLength-=t,t-=t}else r.set(a,n),n+=a.byteLength,this._chunks.shift(),this._totalLength-=a.byteLength,t-=a.byteLength}return r}};Ro.AbstractMessageBuffer=Dd});var qd=ee(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var Xb=Wr(),xd=require("util"),Pn=Xs(),Yb=Ad(),ki=class extends Yb.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return ki.emptyBuffer}fromString(t,r){return Buffer.from(t,r)}toString(t,r){return t instanceof Buffer?t.toString(r):new xd.TextDecoder(r).decode(t)}asNative(t,r){return r===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,r):Buffer.from(t,0,r)}allocNative(t){return Buffer.allocUnsafe(t)}};ki.emptyBuffer=Buffer.allocUnsafe(0);var Nd=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Pn.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Pn.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Pn.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),Pn.Disposable.create(()=>this.stream.off("data",t))}},kd=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Pn.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Pn.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Pn.Disposable.create(()=>this.stream.off("end",t))}write(t,r){return new Promise((n,s)=>{let a=i=>{i==null?n():s(i)};typeof t=="string"?this.stream.write(t,r,a):this.stream.write(t,a)})}end(){this.stream.end()}},Md=Object.freeze({messageBuffer:Object.freeze({create:e=>new ki(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new xd.TextDecoder(t.charset).decode(e)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:e=>new Nd(e),asWritableStream:e=>new kd(e)}),console,timer:Object.freeze({setTimeout(e,t,...r){return setTimeout(e,t,...r)},clearTimeout(e){clearTimeout(e)},setImmediate(e,...t){return setImmediate(e,...t)},clearImmediate(e){clearImmediate(e)}})});function Ys(){return Md}(function(e){function t(){Xb.default.install(Md)}e.install=t})(Ys||(Ys={}));Qs.default=Ys});var Vn=ee(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.stringArray=er.array=er.func=er.error=er.number=er.string=er.boolean=void 0;function Qb(e){return e===!0||e===!1}er.boolean=Qb;function Ld(e){return typeof e=="string"||e instanceof String}er.string=Ld;function Jb(e){return typeof e=="number"||e instanceof Number}er.number=Jb;function Zb(e){return e instanceof Error}er.error=Zb;function eT(e){return typeof e=="function"}er.func=eT;function jd(e){return Array.isArray(e)}er.array=jd;function tT(e){return jd(e)&&e.every(t=>Ld(t))}er.stringArray=tT});var Js=ee(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.isResponseMessage=we.isNotificationMessage=we.isRequestMessage=we.NotificationType9=we.NotificationType8=we.NotificationType7=we.NotificationType6=we.NotificationType5=we.NotificationType4=we.NotificationType3=we.NotificationType2=we.NotificationType1=we.NotificationType0=we.NotificationType=we.RequestType9=we.RequestType8=we.RequestType7=we.RequestType6=we.RequestType5=we.RequestType4=we.RequestType3=we.RequestType2=we.RequestType1=we.RequestType=we.RequestType0=we.AbstractMessageSignature=we.ParameterStructures=we.ResponseError=we.ErrorCodes=void 0;var On=Vn(),Fd;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=e.jsonrpcReservedErrorRangeStart,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=e.jsonrpcReservedErrorRangeEnd})(Fd=we.ErrorCodes||(we.ErrorCodes={}));var wo=class extends Error{constructor(t,r,n){super(r);this.code=On.number(t)?t:Fd.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,wo.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};we.ResponseError=wo;var Xt=class{constructor(t){this.kind=t}static is(t){return t===Xt.auto||t===Xt.byName||t===Xt.byPosition}toString(){return this.kind}};we.ParameterStructures=Xt;Xt.auto=new Xt("auto");Xt.byPosition=new Xt("byPosition");Xt.byName=new Xt("byName");var Ct=class{constructor(t,r){this.method=t,this.numberOfParams=r}get parameterStructures(){return Xt.auto}};we.AbstractMessageSignature=Ct;var Hd=class extends Ct{constructor(t){super(t,0)}};we.RequestType0=Hd;var $d=class extends Ct{constructor(t,r=Xt.auto){super(t,1);this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};we.RequestType=$d;var Ud=class extends Ct{constructor(t,r=Xt.auto){super(t,1);this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};we.RequestType1=Ud;var Bd=class extends Ct{constructor(t){super(t,2)}};we.RequestType2=Bd;var Gd=class extends Ct{constructor(t){super(t,3)}};we.RequestType3=Gd;var Vd=class extends Ct{constructor(t){super(t,4)}};we.RequestType4=Vd;var Wd=class extends Ct{constructor(t){super(t,5)}};we.RequestType5=Wd;var Kd=class extends Ct{constructor(t){super(t,6)}};we.RequestType6=Kd;var zd=class extends Ct{constructor(t){super(t,7)}};we.RequestType7=zd;var Xd=class extends Ct{constructor(t){super(t,8)}};we.RequestType8=Xd;var Yd=class extends Ct{constructor(t){super(t,9)}};we.RequestType9=Yd;var Qd=class extends Ct{constructor(t,r=Xt.auto){super(t,1);this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};we.NotificationType=Qd;var Jd=class extends Ct{constructor(t){super(t,0)}};we.NotificationType0=Jd;var Zd=class extends Ct{constructor(t,r=Xt.auto){super(t,1);this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};we.NotificationType1=Zd;var ep=class extends Ct{constructor(t){super(t,2)}};we.NotificationType2=ep;var tp=class extends Ct{constructor(t){super(t,3)}};we.NotificationType3=tp;var rp=class extends Ct{constructor(t){super(t,4)}};we.NotificationType4=rp;var np=class extends Ct{constructor(t){super(t,5)}};we.NotificationType5=np;var ip=class extends Ct{constructor(t){super(t,6)}};we.NotificationType6=ip;var op=class extends Ct{constructor(t){super(t,7)}};we.NotificationType7=op;var sp=class extends Ct{constructor(t){super(t,8)}};we.NotificationType8=sp;var ap=class extends Ct{constructor(t){super(t,9)}};we.NotificationType9=ap;function rT(e){let t=e;return t&&On.string(t.method)&&(On.string(t.id)||On.number(t.id))}we.isRequestMessage=rT;function nT(e){let t=e;return t&&On.string(t.method)&&e.id===void 0}we.isNotificationMessage=nT;function iT(e){let t=e;return t&&(t.result!==void 0||!!t.error)&&(On.string(t.id)||On.number(t.id)||t.id===null)}we.isResponseMessage=iT});var Wn=ee(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.Emitter=In.Event=void 0;var oT=Wr(),sT;(function(e){let t={dispose(){}};e.None=function(){return t}})(sT=In.Event||(In.Event={}));var cp=class{add(t,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(t,r)})}remove(t,r=null){if(!this._callbacks)return;let n=!1;for(let s=0,a=this._callbacks.length;s<a;s++)if(this._callbacks[s]===t)if(this._contexts[s]===r){this._callbacks.splice(s,1),this._contexts.splice(s,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),s=this._contexts.slice(0);for(let a=0,i=n.length;a<i;a++)try{r.push(n[a].apply(s[a],t))}catch(o){oT.default().console.error(o)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Mi=class{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,r,n)=>{this._callbacks||(this._callbacks=new cp),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,r);let s={dispose:()=>{!this._callbacks||(this._callbacks.remove(t,r),s.dispose=Mi._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(s),s}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};In.Emitter=Mi;Mi._noop=function(){}});var ra=ee(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.CancellationTokenSource=Dn.CancellationToken=void 0;var up=Wr(),aT=Vn(),Zs=Wn(),ea;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Zs.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Zs.Event.None});function t(r){let n=r;return n&&(n===e.None||n===e.Cancelled||aT.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}e.is=t})(ea=Dn.CancellationToken||(Dn.CancellationToken={}));var cT=Object.freeze(function(e,t){let r=up.default().timer.setTimeout(e.bind(t),0);return{dispose(){up.default().timer.clearTimeout(r)}}}),ta=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?cT:(this._emitter||(this._emitter=new Zs.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},lp=class{get token(){return this._token||(this._token=new ta),this._token}cancel(){this._token?this._token.cancel():this._token=ea.Cancelled}dispose(){this._token?this._token instanceof ta&&this._token.dispose():this._token=ea.None}};Dn.CancellationTokenSource=lp});var pp=ee(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.ReadableStreamMessageReader=Kr.AbstractMessageReader=Kr.MessageReader=void 0;var Po=Wr(),Kn=Vn(),na=Wn(),uT;(function(e){function t(r){let n=r;return n&&Kn.func(n.listen)&&Kn.func(n.dispose)&&Kn.func(n.onError)&&Kn.func(n.onClose)&&Kn.func(n.onPartialMessage)}e.is=t})(uT=Kr.MessageReader||(Kr.MessageReader={}));var oa=class{constructor(){this.errorEmitter=new na.Emitter,this.closeEmitter=new na.Emitter,this.partialMessageEmitter=new na.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t)}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${Kn.string(t.message)?t.message:"unknown"}`)}};Kr.AbstractMessageReader=oa;var ia;(function(e){function t(r){var n;let s,a,i,o=new Map,c,u=new Map;if(r===void 0||typeof r=="string")s=r??"utf-8";else{if(s=(n=r.charset)!==null&&n!==void 0?n:"utf-8",r.contentDecoder!==void 0&&(i=r.contentDecoder,o.set(i.name,i)),r.contentDecoders!==void 0)for(let d of r.contentDecoders)o.set(d.name,d);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,u.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let d of r.contentTypeDecoders)u.set(d.name,d)}return c===void 0&&(c=Po.default().applicationJson.decoder,u.set(c.name,c)),{charset:s,contentDecoder:i,contentDecoders:o,contentTypeDecoder:c,contentTypeDecoders:u}}e.fromOptions=t})(ia||(ia={}));var dp=class extends oa{constructor(t,r){super();this.readable=t,this.options=ia.fromOptions(r),this.buffer=Po.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(t){this._partialMessageTimeout=t}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(t){for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let s=this.buffer.tryReadHeaders();if(!s)return;let a=s.get("Content-Length");if(!a)throw new Error("Header must provide a Content-Length property.");let i=parseInt(a);if(isNaN(i))throw new Error("Content-Length value must be a number.");this.nextMessageLength=i}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let n;this.options.contentDecoder!==void 0?n=this.options.contentDecoder.decode(r):n=Promise.resolve(r),n.then(s=>{this.options.contentTypeDecoder.decode(s,this.options).then(a=>{this.callback(a)},a=>{this.fireError(a)})},s=>{this.fireError(s)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(Po.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=Po.default().timer.setTimeout((t,r)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Kr.ReadableStreamMessageReader=dp});var hp=ee(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.Semaphore=void 0;var lT=Wr(),fp=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((r,n)=>{this._waiting.push({thunk:t,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||lT.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=t.thunk();r instanceof Promise?r.then(n=>{this._active--,t.resolve(n),this.runNext()},n=>{this._active--,t.reject(n),this.runNext()}):(this._active--,t.resolve(r),this.runNext())}catch(r){this._active--,t.reject(r),this.runNext()}}};Oo.Semaphore=fp});var yp=ee(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.WriteableStreamMessageWriter=zr.AbstractMessageWriter=zr.MessageWriter=void 0;var gp=Wr(),qi=Vn(),dT=hp(),mp=Wn(),pT="Content-Length: ",vp=`\r
`,fT;(function(e){function t(r){let n=r;return n&&qi.func(n.dispose)&&qi.func(n.onClose)&&qi.func(n.onError)&&qi.func(n.write)}e.is=t})(fT=zr.MessageWriter||(zr.MessageWriter={}));var aa=class{constructor(){this.errorEmitter=new mp.Emitter,this.closeEmitter=new mp.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t,r,n){this.errorEmitter.fire([this.asError(t),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${qi.string(t.message)?t.message:"unknown"}`)}};zr.AbstractMessageWriter=aa;var sa;(function(e){function t(r){var n,s;return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:gp.default().applicationJson.encoder}:{charset:(n=r.charset)!==null&&n!==void 0?n:"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:(s=r.contentTypeEncoder)!==null&&s!==void 0?s:gp.default().applicationJson.encoder}}e.fromOptions=t})(sa||(sa={}));var _p=class extends aa{constructor(t,r){super();this.writable=t,this.options=sa.fromOptions(r),this.errorCount=0,this.writeSemaphore=new dT.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let s=[];return s.push(pT,n.byteLength.toString(),vp),s.push(vp),this.doWrite(t,s,n)},n=>{throw this.fireError(n),n}))}async doWrite(t,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(s){return this.handleError(s,t),Promise.reject(s)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount)}end(){this.writable.end()}};zr.WriteableStreamMessageWriter=_p});var Cp=ee(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.LRUCache=Xr.LinkedMap=Xr.Touch=void 0;var sr;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(sr=Xr.Touch||(Xr.Touch={}));var ca=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var t;return(t=this._head)===null||t===void 0?void 0:t.value}get last(){var t;return(t=this._tail)===null||t===void 0?void 0:t.value}has(t){return this._map.has(t)}get(t,r=sr.None){let n=this._map.get(t);if(!!n)return r!==sr.None&&this.touch(n,r),n.value}set(t,r,n=sr.None){let s=this._map.get(t);if(s)s.value=r,n!==sr.None&&this.touch(s,n);else{switch(s={key:t,value:r,next:void 0,previous:void 0},n){case sr.None:this.addItemLast(s);break;case sr.First:this.addItemFirst(s);break;case sr.Last:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(t,s),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){let r=this._map.get(t);if(!!r)return this._map.delete(t),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,r){let n=this._state,s=this._head;for(;s;){if(r?t.bind(r)(s.value,s.key,this):t(s.value,s.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){let t=this,r=this._state,n=this._head,s={[Symbol.iterator](){return s},next(){if(t._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let a={value:n.key,done:!1};return n=n.next,a}else return{value:void 0,done:!0}}};return s}values(){let t=this,r=this._state,n=this._head,s={[Symbol.iterator](){return s},next(){if(t._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let a={value:n.value,done:!1};return n=n.next,a}else return{value:void 0,done:!0}}};return s}entries(){let t=this,r=this._state,n=this._head,s={[Symbol.iterator](){return s},next(){if(t._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let a={value:[n.key,n.value],done:!1};return n=n.next,a}else return{value:void 0,done:!0}}};return s}[Symbol.iterator](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>t;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{let r=t.next,n=t.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}t.next=void 0,t.previous=void 0,this._state++}touch(t,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==sr.First&&r!==sr.Last)){if(r===sr.First){if(t===this._head)return;let n=t.next,s=t.previous;t===this._tail?(s.next=void 0,this._tail=s):(n.previous=s,s.next=n),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(r===sr.Last){if(t===this._tail)return;let n=t.next,s=t.previous;t===this._head?(n.previous=void 0,this._head=n):(n.previous=s,s.next=n),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){let t=[];return this.forEach((r,n)=>{t.push([n,r])}),t}fromJSON(t){this.clear();for(let[r,n]of t)this.set(r,n)}};Xr.LinkedMap=ca;var Ep=class extends ca{constructor(t,r=1){super();this._limit=t,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,r=sr.AsNew){return super.get(t,r)}peek(t){return super.get(t,sr.None)}set(t,r){return super.set(t,r,sr.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Xr.LRUCache=Ep});var Pp=ee(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.createMessageConnection=qe.ConnectionOptions=qe.CancellationStrategy=qe.CancellationSenderStrategy=qe.CancellationReceiverStrategy=qe.ConnectionStrategy=qe.ConnectionError=qe.ConnectionErrors=qe.LogTraceNotification=qe.SetTraceNotification=qe.TraceFormat=qe.Trace=qe.NullLogger=qe.ProgressType=void 0;var bp=Wr(),Ut=Vn(),Ne=Js(),Tp=Cp(),Li=Wn(),ua=ra(),ji;(function(e){e.type=new Ne.NotificationType("$/cancelRequest")})(ji||(ji={}));var Do;(function(e){e.type=new Ne.NotificationType("$/progress")})(Do||(Do={}));var Sp=class{constructor(){}};qe.ProgressType=Sp;var la;(function(e){function t(r){return Ut.func(r)}e.is=t})(la||(la={}));qe.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Mt;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"})(Mt=qe.Trace||(qe.Trace={}));(function(e){function t(n){if(!Ut.string(n))return e.Off;switch(n=n.toLowerCase(),n){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function r(n){switch(n){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}e.toString=r})(Mt=qe.Trace||(qe.Trace={}));var Ir;(function(e){e.Text="text",e.JSON="json"})(Ir=qe.TraceFormat||(qe.TraceFormat={}));(function(e){function t(r){return r=r.toLowerCase(),r==="json"?e.JSON:e.Text}e.fromString=t})(Ir=qe.TraceFormat||(qe.TraceFormat={}));var Rp;(function(e){e.type=new Ne.NotificationType("$/setTrace")})(Rp=qe.SetTraceNotification||(qe.SetTraceNotification={}));var da;(function(e){e.type=new Ne.NotificationType("$/logTrace")})(da=qe.LogTraceNotification||(qe.LogTraceNotification={}));var Io;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"})(Io=qe.ConnectionErrors||(qe.ConnectionErrors={}));var An=class extends Error{constructor(t,r){super(r);this.code=t,Object.setPrototypeOf(this,An.prototype)}};qe.ConnectionError=An;var wp;(function(e){function t(r){let n=r;return n&&Ut.func(n.cancelUndispatched)}e.is=t})(wp=qe.ConnectionStrategy||(qe.ConnectionStrategy={}));var pa;(function(e){e.Message=Object.freeze({createCancellationTokenSource(r){return new ua.CancellationTokenSource}});function t(r){let n=r;return n&&Ut.func(n.createCancellationTokenSource)}e.is=t})(pa=qe.CancellationReceiverStrategy||(qe.CancellationReceiverStrategy={}));var fa;(function(e){e.Message=Object.freeze({sendCancellation(r,n){r.sendNotification(ji.type,{id:n})},cleanup(r){}});function t(r){let n=r;return n&&Ut.func(n.sendCancellation)&&Ut.func(n.cleanup)}e.is=t})(fa=qe.CancellationSenderStrategy||(qe.CancellationSenderStrategy={}));var ha;(function(e){e.Message=Object.freeze({receiver:pa.Message,sender:fa.Message});function t(r){let n=r;return n&&pa.is(n.receiver)&&fa.is(n.sender)}e.is=t})(ha=qe.CancellationStrategy||(qe.CancellationStrategy={}));var hT;(function(e){function t(r){let n=r;return n&&(ha.is(n.cancellationStrategy)||wp.is(n.connectionStrategy))}e.is=t})(hT=qe.ConnectionOptions||(qe.ConnectionOptions={}));var Dr;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"})(Dr||(Dr={}));function gT(e,t,r,n){let s=r!==void 0?r:qe.NullLogger,a=0,i=0,o=0,c="2.0",u,d=Object.create(null),l,p=Object.create(null),f=new Map,g,m=new Tp.LinkedMap,v=Object.create(null),y=Object.create(null),T=Mt.Off,w=Ir.Text,R,O=Dr.New,F=new Li.Emitter,z=new Li.Emitter,K=new Li.Emitter,J=new Li.Emitter,te=new Li.Emitter,U=n&&n.cancellationStrategy?n.cancellationStrategy:ha.Message;function G(M){if(M===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+M.toString()}function Q(M){return M===null?"res-unknown-"+(++o).toString():"res-"+M.toString()}function ne(){return"not-"+(++i).toString()}function ve(M,N){Ne.isRequestMessage(N)?M.set(G(N.id),N):Ne.isResponseMessage(N)?M.set(Q(N.id),N):M.set(ne(),N)}function de(M){}function X(){return O===Dr.Listening}function ce(){return O===Dr.Closed}function ie(){return O===Dr.Disposed}function pe(){(O===Dr.New||O===Dr.Listening)&&(O=Dr.Closed,z.fire(void 0))}function he(M){F.fire([M,void 0,void 0])}function Ce(M){F.fire(M)}e.onClose(pe),e.onError(he),t.onClose(pe),t.onError(Ce);function _e(){g||m.size===0||(g=bp.default().timer.setImmediate(()=>{g=void 0,Be()}))}function Be(){if(m.size===0)return;let M=m.shift();try{Ne.isRequestMessage(M)?Ke(M):Ne.isNotificationMessage(M)?xe(M):Ne.isResponseMessage(M)?je(M):it(M)}finally{_e()}}let Je=M=>{try{if(Ne.isNotificationMessage(M)&&M.method===ji.type.method){let N=G(M.params.id),P=m.get(N);if(Ne.isRequestMessage(P)){let q=n?.connectionStrategy,H=q&&q.cancelUndispatched?q.cancelUndispatched(P,de):void 0;if(H&&(H.error!==void 0||H.result!==void 0)){m.delete(N),H.id=P.id,me(H,M.method,Date.now()),t.write(H);return}}}ve(m,M)}finally{_e()}};function Ke(M){if(ie())return;function N(V,ue,fe){let Re={jsonrpc:c,id:M.id};V instanceof Ne.ResponseError?Re.error=V.toJson():Re.result=V===void 0?null:V,me(Re,ue,fe),t.write(Re)}function P(V,ue,fe){let Re={jsonrpc:c,id:M.id,error:V.toJson()};me(Re,ue,fe),t.write(Re)}function q(V,ue,fe){V===void 0&&(V=null);let Re={jsonrpc:c,id:M.id,result:V};me(Re,ue,fe),t.write(Re)}Ae(M);let H=d[M.method],E,C;H&&(E=H.type,C=H.handler);let L=Date.now();if(C||u){let V=String(M.id),ue=U.receiver.createCancellationTokenSource(V);y[V]=ue;try{let fe;if(C)if(M.params===void 0){if(E!==void 0&&E.numberOfParams!==0){P(new Ne.ResponseError(Ne.ErrorCodes.InvalidParams,`Request ${M.method} defines ${E.numberOfParams} params but recevied none.`),M.method,L);return}fe=C(ue.token)}else if(Array.isArray(M.params)){if(E!==void 0&&E.parameterStructures===Ne.ParameterStructures.byName){P(new Ne.ResponseError(Ne.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by name but received parameters by position`),M.method,L);return}fe=C(...M.params,ue.token)}else{if(E!==void 0&&E.parameterStructures===Ne.ParameterStructures.byPosition){P(new Ne.ResponseError(Ne.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by position but received parameters by name`),M.method,L);return}fe=C(M.params,ue.token)}else u&&(fe=u(M.method,M.params,ue.token));let Re=fe;fe?Re.then?Re.then(ye=>{delete y[V],N(ye,M.method,L)},ye=>{delete y[V],ye instanceof Ne.ResponseError?P(ye,M.method,L):ye&&Ut.string(ye.message)?P(new Ne.ResponseError(Ne.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${ye.message}`),M.method,L):P(new Ne.ResponseError(Ne.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,L)}):(delete y[V],N(fe,M.method,L)):(delete y[V],q(fe,M.method,L))}catch(fe){delete y[V],fe instanceof Ne.ResponseError?N(fe,M.method,L):fe&&Ut.string(fe.message)?P(new Ne.ResponseError(Ne.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${fe.message}`),M.method,L):P(new Ne.ResponseError(Ne.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,L)}}else P(new Ne.ResponseError(Ne.ErrorCodes.MethodNotFound,`Unhandled method ${M.method}`),M.method,L)}function je(M){if(!ie())if(M.id===null)M.error?s.error(`Received response message without id: Error is: 
${JSON.stringify(M.error,void 0,4)}`):s.error("Received response message without id. No further error information provided.");else{let N=String(M.id),P=v[N];if(nr(M,P),P){delete v[N];try{if(M.error){let q=M.error;P.reject(new Ne.ResponseError(q.code,q.message,q.data))}else if(M.result!==void 0)P.resolve(M.result);else throw new Error("Should never happen.")}catch(q){q.message?s.error(`Response handler '${P.method}' failed with message: ${q.message}`):s.error(`Response handler '${P.method}' failed unexpectedly.`)}}}}function xe(M){if(ie())return;let N,P;if(M.method===ji.type.method)P=q=>{let H=q.id,E=y[String(H)];E&&E.cancel()};else{let q=p[M.method];q&&(P=q.handler,N=q.type)}if(P||l)try{ke(M),P?M.params===void 0?(N!==void 0&&N.numberOfParams!==0&&N.parameterStructures!==Ne.ParameterStructures.byName&&s.error(`Notification ${M.method} defines ${N.numberOfParams} params but recevied none.`),P()):Array.isArray(M.params)?(N!==void 0&&(N.parameterStructures===Ne.ParameterStructures.byName&&s.error(`Notification ${M.method} defines parameters by name but received parameters by position`),N.numberOfParams!==M.params.length&&s.error(`Notification ${M.method} defines ${N.numberOfParams} params but received ${M.params.length} argumennts`)),P(...M.params)):(N!==void 0&&N.parameterStructures===Ne.ParameterStructures.byPosition&&s.error(`Notification ${M.method} defines parameters by position but received parameters by name`),P(M.params)):l&&l(M.method,M.params)}catch(q){q.message?s.error(`Notification handler '${M.method}' failed with message: ${q.message}`):s.error(`Notification handler '${M.method}' failed unexpectedly.`)}else K.fire(M)}function it(M){if(!M){s.error("Received empty message.");return}s.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(M,null,4)}`);let N=M;if(Ut.string(N.id)||Ut.number(N.id)){let P=String(N.id),q=v[P];q&&q.reject(new Error("The received response has neither a result nor an error property."))}}function ut(M){if(!(T===Mt.Off||!R))if(w===Ir.Text){let N;T===Mt.Verbose&&M.params&&(N=`Params: ${JSON.stringify(M.params,null,4)}

`),R.log(`Sending request '${M.method} - (${M.id})'.`,N)}else at("send-request",M)}function Oe(M){if(!(T===Mt.Off||!R))if(w===Ir.Text){let N;T===Mt.Verbose&&(M.params?N=`Params: ${JSON.stringify(M.params,null,4)}

`:N=`No parameters provided.

`),R.log(`Sending notification '${M.method}'.`,N)}else at("send-notification",M)}function me(M,N,P){if(!(T===Mt.Off||!R))if(w===Ir.Text){let q;T===Mt.Verbose&&(M.error&&M.error.data?q=`Error data: ${JSON.stringify(M.error.data,null,4)}

`:M.result?q=`Result: ${JSON.stringify(M.result,null,4)}

`:M.error===void 0&&(q=`No result returned.

`)),R.log(`Sending response '${N} - (${M.id})'. Processing request took ${Date.now()-P}ms`,q)}else at("send-response",M)}function Ae(M){if(!(T===Mt.Off||!R))if(w===Ir.Text){let N;T===Mt.Verbose&&M.params&&(N=`Params: ${JSON.stringify(M.params,null,4)}

`),R.log(`Received request '${M.method} - (${M.id})'.`,N)}else at("receive-request",M)}function ke(M){if(!(T===Mt.Off||!R||M.method===da.type.method))if(w===Ir.Text){let N;T===Mt.Verbose&&(M.params?N=`Params: ${JSON.stringify(M.params,null,4)}

`:N=`No parameters provided.

`),R.log(`Received notification '${M.method}'.`,N)}else at("receive-notification",M)}function nr(M,N){if(!(T===Mt.Off||!R))if(w===Ir.Text){let P;if(T===Mt.Verbose&&(M.error&&M.error.data?P=`Error data: ${JSON.stringify(M.error.data,null,4)}

`:M.result?P=`Result: ${JSON.stringify(M.result,null,4)}

`:M.error===void 0&&(P=`No result returned.

`)),N){let q=M.error?` Request failed: ${M.error.message} (${M.error.code}).`:"";R.log(`Received response '${N.method} - (${M.id})' in ${Date.now()-N.timerStart}ms.${q}`,P)}else R.log(`Received response ${M.id} without active response promise.`,P)}else at("receive-response",M)}function at(M,N){if(!R||T===Mt.Off)return;let P={isLSPMessage:!0,type:M,message:N,timestamp:Date.now()};R.log(P)}function re(){if(ce())throw new An(Io.Closed,"Connection is closed.");if(ie())throw new An(Io.Disposed,"Connection is disposed.")}function Qt(){if(X())throw new An(Io.AlreadyListening,"Connection is already listening")}function ir(){if(!X())throw new Error("Call listen() first.")}function ht(M){return M===void 0?null:M}function rt(M){if(M!==null)return M}function xt(M){return M!=null&&!Array.isArray(M)&&typeof M=="object"}function lt(M,N){switch(M){case Ne.ParameterStructures.auto:return xt(N)?rt(N):[ht(N)];case Ne.ParameterStructures.byName:if(!xt(N))throw new Error("Recevied parameters by name but param is not an object literal.");return rt(N);case Ne.ParameterStructures.byPosition:return[ht(N)];default:throw new Error(`Unknown parameter structure ${M.toString()}`)}}function Ft(M,N){let P,q=M.numberOfParams;switch(q){case 0:P=void 0;break;case 1:P=lt(M.parameterStructures,N[0]);break;default:P=[];for(let H=0;H<N.length&&H<q;H++)P.push(ht(N[H]));if(N.length<q)for(let H=N.length;H<q;H++)P.push(null);break}return P}let Pt={sendNotification:(M,...N)=>{re();let P,q;if(Ut.string(M)){P=M;let E=N[0],C=0,L=Ne.ParameterStructures.auto;Ne.ParameterStructures.is(E)&&(C=1,L=E);let V=N.length,ue=V-C;switch(ue){case 0:q=void 0;break;case 1:q=lt(L,N[C]);break;default:if(L===Ne.ParameterStructures.byName)throw new Error(`Recevied ${ue} parameters for 'by Name' notification parameter structure.`);q=N.slice(C,V).map(fe=>ht(fe));break}}else{let E=N;P=M.method,q=Ft(M,E)}let H={jsonrpc:c,method:P,params:q};Oe(H),t.write(H)},onNotification:(M,N)=>{re();let P;return Ut.func(M)?l=M:N&&(Ut.string(M)?(P=M,p[M]={type:void 0,handler:N}):(P=M.method,p[M.method]={type:M,handler:N})),{dispose:()=>{P!==void 0?delete p[P]:l=void 0}}},onProgress:(M,N,P)=>{if(f.has(N))throw new Error(`Progress handler for token ${N} already registered`);return f.set(N,P),{dispose:()=>{f.delete(N)}}},sendProgress:(M,N,P)=>{Pt.sendNotification(Do.type,{token:N,value:P})},onUnhandledProgress:J.event,sendRequest:(M,...N)=>{re(),ir();let P,q,H;if(Ut.string(M)){P=M;let V=N[0],ue=N[N.length-1],fe=0,Re=Ne.ParameterStructures.auto;Ne.ParameterStructures.is(V)&&(fe=1,Re=V);let ye=N.length;ua.CancellationToken.is(ue)&&(ye=ye-1,H=ue);let Fe=ye-fe;switch(Fe){case 0:q=void 0;break;case 1:q=lt(Re,N[fe]);break;default:if(Re===Ne.ParameterStructures.byName)throw new Error(`Recevied ${Fe} parameters for 'by Name' request parameter structure.`);q=N.slice(fe,ye).map(le=>ht(le));break}}else{let V=N;P=M.method,q=Ft(M,V);let ue=M.numberOfParams;H=ua.CancellationToken.is(V[ue])?V[ue]:void 0}let E=a++,C;return H&&(C=H.onCancellationRequested(()=>{U.sender.sendCancellation(Pt,E)})),new Promise((V,ue)=>{let fe={jsonrpc:c,id:E,method:P,params:q},Re=le=>{V(le),U.sender.cleanup(E),C?.dispose()},ye=le=>{ue(le),U.sender.cleanup(E),C?.dispose()},Fe={method:P,timerStart:Date.now(),resolve:Re,reject:ye};ut(fe);try{t.write(fe)}catch(le){Fe.reject(new Ne.ResponseError(Ne.ErrorCodes.MessageWriteError,le.message?le.message:"Unknown reason")),Fe=null}Fe&&(v[String(E)]=Fe)})},onRequest:(M,N)=>{re();let P=null;return la.is(M)?(P=void 0,u=M):Ut.string(M)?(P=null,N!==void 0&&(P=M,d[M]={handler:N,type:void 0})):N!==void 0&&(P=M.method,d[M.method]={type:M,handler:N}),{dispose:()=>{P!==null&&(P!==void 0?delete d[P]:u=void 0)}}},trace:(M,N,P)=>{let q=!1,H=Ir.Text;P!==void 0&&(Ut.boolean(P)?q=P:(q=P.sendNotification||!1,H=P.traceFormat||Ir.Text)),T=M,w=H,T===Mt.Off?R=void 0:R=N,q&&!ce()&&!ie()&&Pt.sendNotification(Rp.type,{value:Mt.toString(M)})},onError:F.event,onClose:z.event,onUnhandledNotification:K.event,onDispose:te.event,end:()=>{t.end()},dispose:()=>{if(ie())return;O=Dr.Disposed,te.fire(void 0);let M=new Error("Connection got disposed.");Object.keys(v).forEach(N=>{v[N].reject(M)}),v=Object.create(null),y=Object.create(null),m=new Tp.LinkedMap,Ut.func(t.dispose)&&t.dispose(),Ut.func(e.dispose)&&e.dispose()},listen:()=>{re(),Qt(),O=Dr.Listening,e.listen(Je)},inspect:()=>{bp.default().console.log("inspect")}};return Pt.onNotification(da.type,M=>{T===Mt.Off||!R||R.log(M.message,T===Mt.Verbose?M.verbose:void 0)}),Pt.onNotification(Do.type,M=>{let N=f.get(M.token);N?N(M.value):J.fire(M)}),Pt}qe.createMessageConnection=gT});var va=ee(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.CancellationSenderStrategy=ae.CancellationReceiverStrategy=ae.ConnectionError=ae.ConnectionErrors=ae.LogTraceNotification=ae.SetTraceNotification=ae.TraceFormat=ae.Trace=ae.ProgressType=ae.createMessageConnection=ae.NullLogger=ae.ConnectionOptions=ae.ConnectionStrategy=ae.WriteableStreamMessageWriter=ae.AbstractMessageWriter=ae.MessageWriter=ae.ReadableStreamMessageReader=ae.AbstractMessageReader=ae.MessageReader=ae.CancellationToken=ae.CancellationTokenSource=ae.Emitter=ae.Event=ae.Disposable=ae.ParameterStructures=ae.NotificationType9=ae.NotificationType8=ae.NotificationType7=ae.NotificationType6=ae.NotificationType5=ae.NotificationType4=ae.NotificationType3=ae.NotificationType2=ae.NotificationType1=ae.NotificationType0=ae.NotificationType=ae.ErrorCodes=ae.ResponseError=ae.RequestType9=ae.RequestType8=ae.RequestType7=ae.RequestType6=ae.RequestType5=ae.RequestType4=ae.RequestType3=ae.RequestType2=ae.RequestType1=ae.RequestType0=ae.RequestType=ae.RAL=void 0;ae.CancellationStrategy=void 0;var mt=Js();Object.defineProperty(ae,"RequestType",{enumerable:!0,get:function(){return mt.RequestType}});Object.defineProperty(ae,"RequestType0",{enumerable:!0,get:function(){return mt.RequestType0}});Object.defineProperty(ae,"RequestType1",{enumerable:!0,get:function(){return mt.RequestType1}});Object.defineProperty(ae,"RequestType2",{enumerable:!0,get:function(){return mt.RequestType2}});Object.defineProperty(ae,"RequestType3",{enumerable:!0,get:function(){return mt.RequestType3}});Object.defineProperty(ae,"RequestType4",{enumerable:!0,get:function(){return mt.RequestType4}});Object.defineProperty(ae,"RequestType5",{enumerable:!0,get:function(){return mt.RequestType5}});Object.defineProperty(ae,"RequestType6",{enumerable:!0,get:function(){return mt.RequestType6}});Object.defineProperty(ae,"RequestType7",{enumerable:!0,get:function(){return mt.RequestType7}});Object.defineProperty(ae,"RequestType8",{enumerable:!0,get:function(){return mt.RequestType8}});Object.defineProperty(ae,"RequestType9",{enumerable:!0,get:function(){return mt.RequestType9}});Object.defineProperty(ae,"ResponseError",{enumerable:!0,get:function(){return mt.ResponseError}});Object.defineProperty(ae,"ErrorCodes",{enumerable:!0,get:function(){return mt.ErrorCodes}});Object.defineProperty(ae,"NotificationType",{enumerable:!0,get:function(){return mt.NotificationType}});Object.defineProperty(ae,"NotificationType0",{enumerable:!0,get:function(){return mt.NotificationType0}});Object.defineProperty(ae,"NotificationType1",{enumerable:!0,get:function(){return mt.NotificationType1}});Object.defineProperty(ae,"NotificationType2",{enumerable:!0,get:function(){return mt.NotificationType2}});Object.defineProperty(ae,"NotificationType3",{enumerable:!0,get:function(){return mt.NotificationType3}});Object.defineProperty(ae,"NotificationType4",{enumerable:!0,get:function(){return mt.NotificationType4}});Object.defineProperty(ae,"NotificationType5",{enumerable:!0,get:function(){return mt.NotificationType5}});Object.defineProperty(ae,"NotificationType6",{enumerable:!0,get:function(){return mt.NotificationType6}});Object.defineProperty(ae,"NotificationType7",{enumerable:!0,get:function(){return mt.NotificationType7}});Object.defineProperty(ae,"NotificationType8",{enumerable:!0,get:function(){return mt.NotificationType8}});Object.defineProperty(ae,"NotificationType9",{enumerable:!0,get:function(){return mt.NotificationType9}});Object.defineProperty(ae,"ParameterStructures",{enumerable:!0,get:function(){return mt.ParameterStructures}});var mT=Xs();Object.defineProperty(ae,"Disposable",{enumerable:!0,get:function(){return mT.Disposable}});var Op=Wn();Object.defineProperty(ae,"Event",{enumerable:!0,get:function(){return Op.Event}});Object.defineProperty(ae,"Emitter",{enumerable:!0,get:function(){return Op.Emitter}});var Ip=ra();Object.defineProperty(ae,"CancellationTokenSource",{enumerable:!0,get:function(){return Ip.CancellationTokenSource}});Object.defineProperty(ae,"CancellationToken",{enumerable:!0,get:function(){return Ip.CancellationToken}});var ga=pp();Object.defineProperty(ae,"MessageReader",{enumerable:!0,get:function(){return ga.MessageReader}});Object.defineProperty(ae,"AbstractMessageReader",{enumerable:!0,get:function(){return ga.AbstractMessageReader}});Object.defineProperty(ae,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return ga.ReadableStreamMessageReader}});var ma=yp();Object.defineProperty(ae,"MessageWriter",{enumerable:!0,get:function(){return ma.MessageWriter}});Object.defineProperty(ae,"AbstractMessageWriter",{enumerable:!0,get:function(){return ma.AbstractMessageWriter}});Object.defineProperty(ae,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return ma.WriteableStreamMessageWriter}});var dr=Pp();Object.defineProperty(ae,"ConnectionStrategy",{enumerable:!0,get:function(){return dr.ConnectionStrategy}});Object.defineProperty(ae,"ConnectionOptions",{enumerable:!0,get:function(){return dr.ConnectionOptions}});Object.defineProperty(ae,"NullLogger",{enumerable:!0,get:function(){return dr.NullLogger}});Object.defineProperty(ae,"createMessageConnection",{enumerable:!0,get:function(){return dr.createMessageConnection}});Object.defineProperty(ae,"ProgressType",{enumerable:!0,get:function(){return dr.ProgressType}});Object.defineProperty(ae,"Trace",{enumerable:!0,get:function(){return dr.Trace}});Object.defineProperty(ae,"TraceFormat",{enumerable:!0,get:function(){return dr.TraceFormat}});Object.defineProperty(ae,"SetTraceNotification",{enumerable:!0,get:function(){return dr.SetTraceNotification}});Object.defineProperty(ae,"LogTraceNotification",{enumerable:!0,get:function(){return dr.LogTraceNotification}});Object.defineProperty(ae,"ConnectionErrors",{enumerable:!0,get:function(){return dr.ConnectionErrors}});Object.defineProperty(ae,"ConnectionError",{enumerable:!0,get:function(){return dr.ConnectionError}});Object.defineProperty(ae,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return dr.CancellationReceiverStrategy}});Object.defineProperty(ae,"CancellationSenderStrategy",{enumerable:!0,get:function(){return dr.CancellationSenderStrategy}});Object.defineProperty(ae,"CancellationStrategy",{enumerable:!0,get:function(){return dr.CancellationStrategy}});var vT=Wr();ae.RAL=vT.default});var Qn=ee(ot=>{"use strict";var _T=ot&&ot.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),yT=ot&&ot.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&_T(t,e,r)};Object.defineProperty(ot,"__esModule",{value:!0});ot.createMessageConnection=ot.createServerSocketTransport=ot.createClientSocketTransport=ot.createServerPipeTransport=ot.createClientPipeTransport=ot.generateRandomPipeName=ot.StreamMessageWriter=ot.StreamMessageReader=ot.SocketMessageWriter=ot.SocketMessageReader=ot.IPCMessageWriter=ot.IPCMessageReader=void 0;var zn=qd();zn.default.install();var qr=va(),Dp=require("path"),ET=require("os"),CT=require("crypto"),Ao=require("net");yT(va(),ot);var xp=class extends qr.AbstractMessageReader{constructor(t){super();this.process=t;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(t){return this.process.on("message",t),qr.Disposable.create(()=>this.process.off("message",t))}};ot.IPCMessageReader=xp;var Np=class extends qr.AbstractMessageWriter{constructor(t){super();this.process=t,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,t)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,t),Promise.reject(r)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount)}end(){}};ot.IPCMessageWriter=Np;var Xn=class extends qr.ReadableStreamMessageReader{constructor(t,r="utf-8"){super(zn.default().stream.asReadableStream(t),r)}};ot.SocketMessageReader=Xn;var Yn=class extends qr.WriteableStreamMessageWriter{constructor(t,r){super(zn.default().stream.asWritableStream(t),r);this.socket=t}dispose(){super.dispose(),this.socket.destroy()}};ot.SocketMessageWriter=Yn;var _a=class extends qr.ReadableStreamMessageReader{constructor(t,r){super(zn.default().stream.asReadableStream(t),r)}};ot.StreamMessageReader=_a;var ya=class extends qr.WriteableStreamMessageWriter{constructor(t,r){super(zn.default().stream.asWritableStream(t),r)}};ot.StreamMessageWriter=ya;var Ap=process.env.XDG_RUNTIME_DIR,bT=new Map([["linux",107],["darwin",103]]);function TT(){let e=CT.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;Ap?t=Dp.join(Ap,`vscode-ipc-${e}.sock`):t=Dp.join(ET.tmpdir(),`vscode-${e}.sock`);let r=bT.get(process.platform);return r!==void 0&&t.length>=r&&zn.default().console.warn(`WARNING: IPC handle "${t}" is longer than ${r} characters.`),t}ot.generateRandomPipeName=TT;function ST(e,t="utf-8"){let r,n=new Promise((s,a)=>{r=s});return new Promise((s,a)=>{let i=Ao.createServer(o=>{i.close(),r([new Xn(o,t),new Yn(o,t)])});i.on("error",a),i.listen(e,()=>{i.removeListener("error",a),s({onConnected:()=>n})})})}ot.createClientPipeTransport=ST;function RT(e,t="utf-8"){let r=Ao.createConnection(e);return[new Xn(r,t),new Yn(r,t)]}ot.createServerPipeTransport=RT;function wT(e,t="utf-8"){let r,n=new Promise((s,a)=>{r=s});return new Promise((s,a)=>{let i=Ao.createServer(o=>{i.close(),r([new Xn(o,t),new Yn(o,t)])});i.on("error",a),i.listen(e,"127.0.0.1",()=>{i.removeListener("error",a),s({onConnected:()=>n})})})}ot.createClientSocketTransport=wT;function PT(e,t="utf-8"){let r=Ao.createConnection(e,"127.0.0.1");return[new Xn(r,t),new Yn(r,t)]}ot.createServerSocketTransport=PT;function OT(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function IT(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function DT(e,t,r,n){r||(r=qr.NullLogger);let s=OT(e)?new _a(e):e,a=IT(t)?new ya(t):t;return qr.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),qr.createMessageConnection(s,a,r,n)}ot.createMessageConnection=DT});var Ea=ee((hO,kp)=>{"use strict";kp.exports=Qn()});var qp=ee((Mp,xo)=>{(function(e){if(typeof xo=="object"&&typeof xo.exports=="object"){var t=e(require,Mp);t!==void 0&&(xo.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionKind=t.DocumentSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=void 0;var r;(function(P){P.MIN_VALUE=-2147483648,P.MAX_VALUE=2147483647})(r=t.integer||(t.integer={}));var n;(function(P){P.MIN_VALUE=0,P.MAX_VALUE=2147483647})(n=t.uinteger||(t.uinteger={}));var s;(function(P){function q(E,C){return E===Number.MAX_VALUE&&(E=n.MAX_VALUE),C===Number.MAX_VALUE&&(C=n.MAX_VALUE),{line:E,character:C}}P.create=q;function H(E){var C=E;return N.objectLiteral(C)&&N.uinteger(C.line)&&N.uinteger(C.character)}P.is=H})(s=t.Position||(t.Position={}));var a;(function(P){function q(E,C,L,V){if(N.uinteger(E)&&N.uinteger(C)&&N.uinteger(L)&&N.uinteger(V))return{start:s.create(E,C),end:s.create(L,V)};if(s.is(E)&&s.is(C))return{start:E,end:C};throw new Error("Range#create called with invalid arguments["+E+", "+C+", "+L+", "+V+"]")}P.create=q;function H(E){var C=E;return N.objectLiteral(C)&&s.is(C.start)&&s.is(C.end)}P.is=H})(a=t.Range||(t.Range={}));var i;(function(P){function q(E,C){return{uri:E,range:C}}P.create=q;function H(E){var C=E;return N.defined(C)&&a.is(C.range)&&(N.string(C.uri)||N.undefined(C.uri))}P.is=H})(i=t.Location||(t.Location={}));var o;(function(P){function q(E,C,L,V){return{targetUri:E,targetRange:C,targetSelectionRange:L,originSelectionRange:V}}P.create=q;function H(E){var C=E;return N.defined(C)&&a.is(C.targetRange)&&N.string(C.targetUri)&&(a.is(C.targetSelectionRange)||N.undefined(C.targetSelectionRange))&&(a.is(C.originSelectionRange)||N.undefined(C.originSelectionRange))}P.is=H})(o=t.LocationLink||(t.LocationLink={}));var c;(function(P){function q(E,C,L,V){return{red:E,green:C,blue:L,alpha:V}}P.create=q;function H(E){var C=E;return N.numberRange(C.red,0,1)&&N.numberRange(C.green,0,1)&&N.numberRange(C.blue,0,1)&&N.numberRange(C.alpha,0,1)}P.is=H})(c=t.Color||(t.Color={}));var u;(function(P){function q(E,C){return{range:E,color:C}}P.create=q;function H(E){var C=E;return a.is(C.range)&&c.is(C.color)}P.is=H})(u=t.ColorInformation||(t.ColorInformation={}));var d;(function(P){function q(E,C,L){return{label:E,textEdit:C,additionalTextEdits:L}}P.create=q;function H(E){var C=E;return N.string(C.label)&&(N.undefined(C.textEdit)||w.is(C))&&(N.undefined(C.additionalTextEdits)||N.typedArray(C.additionalTextEdits,w.is))}P.is=H})(d=t.ColorPresentation||(t.ColorPresentation={}));var l;(function(P){P.Comment="comment",P.Imports="imports",P.Region="region"})(l=t.FoldingRangeKind||(t.FoldingRangeKind={}));var p;(function(P){function q(E,C,L,V,ue){var fe={startLine:E,endLine:C};return N.defined(L)&&(fe.startCharacter=L),N.defined(V)&&(fe.endCharacter=V),N.defined(ue)&&(fe.kind=ue),fe}P.create=q;function H(E){var C=E;return N.uinteger(C.startLine)&&N.uinteger(C.startLine)&&(N.undefined(C.startCharacter)||N.uinteger(C.startCharacter))&&(N.undefined(C.endCharacter)||N.uinteger(C.endCharacter))&&(N.undefined(C.kind)||N.string(C.kind))}P.is=H})(p=t.FoldingRange||(t.FoldingRange={}));var f;(function(P){function q(E,C){return{location:E,message:C}}P.create=q;function H(E){var C=E;return N.defined(C)&&i.is(C.location)&&N.string(C.message)}P.is=H})(f=t.DiagnosticRelatedInformation||(t.DiagnosticRelatedInformation={}));var g;(function(P){P.Error=1,P.Warning=2,P.Information=3,P.Hint=4})(g=t.DiagnosticSeverity||(t.DiagnosticSeverity={}));var m;(function(P){P.Unnecessary=1,P.Deprecated=2})(m=t.DiagnosticTag||(t.DiagnosticTag={}));var v;(function(P){function q(H){var E=H;return E!=null&&N.string(E.href)}P.is=q})(v=t.CodeDescription||(t.CodeDescription={}));var y;(function(P){function q(E,C,L,V,ue,fe){var Re={range:E,message:C};return N.defined(L)&&(Re.severity=L),N.defined(V)&&(Re.code=V),N.defined(ue)&&(Re.source=ue),N.defined(fe)&&(Re.relatedInformation=fe),Re}P.create=q;function H(E){var C,L=E;return N.defined(L)&&a.is(L.range)&&N.string(L.message)&&(N.number(L.severity)||N.undefined(L.severity))&&(N.integer(L.code)||N.string(L.code)||N.undefined(L.code))&&(N.undefined(L.codeDescription)||N.string((C=L.codeDescription)===null||C===void 0?void 0:C.href))&&(N.string(L.source)||N.undefined(L.source))&&(N.undefined(L.relatedInformation)||N.typedArray(L.relatedInformation,f.is))}P.is=H})(y=t.Diagnostic||(t.Diagnostic={}));var T;(function(P){function q(E,C){for(var L=[],V=2;V<arguments.length;V++)L[V-2]=arguments[V];var ue={title:E,command:C};return N.defined(L)&&L.length>0&&(ue.arguments=L),ue}P.create=q;function H(E){var C=E;return N.defined(C)&&N.string(C.title)&&N.string(C.command)}P.is=H})(T=t.Command||(t.Command={}));var w;(function(P){function q(L,V){return{range:L,newText:V}}P.replace=q;function H(L,V){return{range:{start:L,end:L},newText:V}}P.insert=H;function E(L){return{range:L,newText:""}}P.del=E;function C(L){var V=L;return N.objectLiteral(V)&&N.string(V.newText)&&a.is(V.range)}P.is=C})(w=t.TextEdit||(t.TextEdit={}));var R;(function(P){function q(E,C,L){var V={label:E};return C!==void 0&&(V.needsConfirmation=C),L!==void 0&&(V.description=L),V}P.create=q;function H(E){var C=E;return C!==void 0&&N.objectLiteral(C)&&N.string(C.label)&&(N.boolean(C.needsConfirmation)||C.needsConfirmation===void 0)&&(N.string(C.description)||C.description===void 0)}P.is=H})(R=t.ChangeAnnotation||(t.ChangeAnnotation={}));var O;(function(P){function q(H){var E=H;return typeof E=="string"}P.is=q})(O=t.ChangeAnnotationIdentifier||(t.ChangeAnnotationIdentifier={}));var F;(function(P){function q(L,V,ue){return{range:L,newText:V,annotationId:ue}}P.replace=q;function H(L,V,ue){return{range:{start:L,end:L},newText:V,annotationId:ue}}P.insert=H;function E(L,V){return{range:L,newText:"",annotationId:V}}P.del=E;function C(L){var V=L;return w.is(V)&&(R.is(V.annotationId)||O.is(V.annotationId))}P.is=C})(F=t.AnnotatedTextEdit||(t.AnnotatedTextEdit={}));var z;(function(P){function q(E,C){return{textDocument:E,edits:C}}P.create=q;function H(E){var C=E;return N.defined(C)&&X.is(C.textDocument)&&Array.isArray(C.edits)}P.is=H})(z=t.TextDocumentEdit||(t.TextDocumentEdit={}));var K;(function(P){function q(E,C,L){var V={kind:"create",uri:E};return C!==void 0&&(C.overwrite!==void 0||C.ignoreIfExists!==void 0)&&(V.options=C),L!==void 0&&(V.annotationId=L),V}P.create=q;function H(E){var C=E;return C&&C.kind==="create"&&N.string(C.uri)&&(C.options===void 0||(C.options.overwrite===void 0||N.boolean(C.options.overwrite))&&(C.options.ignoreIfExists===void 0||N.boolean(C.options.ignoreIfExists)))&&(C.annotationId===void 0||O.is(C.annotationId))}P.is=H})(K=t.CreateFile||(t.CreateFile={}));var J;(function(P){function q(E,C,L,V){var ue={kind:"rename",oldUri:E,newUri:C};return L!==void 0&&(L.overwrite!==void 0||L.ignoreIfExists!==void 0)&&(ue.options=L),V!==void 0&&(ue.annotationId=V),ue}P.create=q;function H(E){var C=E;return C&&C.kind==="rename"&&N.string(C.oldUri)&&N.string(C.newUri)&&(C.options===void 0||(C.options.overwrite===void 0||N.boolean(C.options.overwrite))&&(C.options.ignoreIfExists===void 0||N.boolean(C.options.ignoreIfExists)))&&(C.annotationId===void 0||O.is(C.annotationId))}P.is=H})(J=t.RenameFile||(t.RenameFile={}));var te;(function(P){function q(E,C,L){var V={kind:"delete",uri:E};return C!==void 0&&(C.recursive!==void 0||C.ignoreIfNotExists!==void 0)&&(V.options=C),L!==void 0&&(V.annotationId=L),V}P.create=q;function H(E){var C=E;return C&&C.kind==="delete"&&N.string(C.uri)&&(C.options===void 0||(C.options.recursive===void 0||N.boolean(C.options.recursive))&&(C.options.ignoreIfNotExists===void 0||N.boolean(C.options.ignoreIfNotExists)))&&(C.annotationId===void 0||O.is(C.annotationId))}P.is=H})(te=t.DeleteFile||(t.DeleteFile={}));var U;(function(P){function q(H){var E=H;return E&&(E.changes!==void 0||E.documentChanges!==void 0)&&(E.documentChanges===void 0||E.documentChanges.every(function(C){return N.string(C.kind)?K.is(C)||J.is(C)||te.is(C):z.is(C)}))}P.is=q})(U=t.WorkspaceEdit||(t.WorkspaceEdit={}));var G=function(){function P(q,H){this.edits=q,this.changeAnnotations=H}return P.prototype.insert=function(q,H,E){var C,L;if(E===void 0?C=w.insert(q,H):O.is(E)?(L=E,C=F.insert(q,H,E)):(this.assertChangeAnnotations(this.changeAnnotations),L=this.changeAnnotations.manage(E),C=F.insert(q,H,L)),this.edits.push(C),L!==void 0)return L},P.prototype.replace=function(q,H,E){var C,L;if(E===void 0?C=w.replace(q,H):O.is(E)?(L=E,C=F.replace(q,H,E)):(this.assertChangeAnnotations(this.changeAnnotations),L=this.changeAnnotations.manage(E),C=F.replace(q,H,L)),this.edits.push(C),L!==void 0)return L},P.prototype.delete=function(q,H){var E,C;if(H===void 0?E=w.del(q):O.is(H)?(C=H,E=F.del(q,H)):(this.assertChangeAnnotations(this.changeAnnotations),C=this.changeAnnotations.manage(H),E=F.del(q,C)),this.edits.push(E),C!==void 0)return C},P.prototype.add=function(q){this.edits.push(q)},P.prototype.all=function(){return this.edits},P.prototype.clear=function(){this.edits.splice(0,this.edits.length)},P.prototype.assertChangeAnnotations=function(q){if(q===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},P}(),Q=function(){function P(q){this._annotations=q===void 0?Object.create(null):q,this._counter=0,this._size=0}return P.prototype.all=function(){return this._annotations},Object.defineProperty(P.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),P.prototype.manage=function(q,H){var E;if(O.is(q)?E=q:(E=this.nextId(),H=q),this._annotations[E]!==void 0)throw new Error("Id "+E+" is already in use.");if(H===void 0)throw new Error("No annotation provided for id "+E);return this._annotations[E]=H,this._size++,E},P.prototype.nextId=function(){return this._counter++,this._counter.toString()},P}(),ne=function(){function P(q){var H=this;this._textEditChanges=Object.create(null),q!==void 0?(this._workspaceEdit=q,q.documentChanges?(this._changeAnnotations=new Q(q.changeAnnotations),q.changeAnnotations=this._changeAnnotations.all(),q.documentChanges.forEach(function(E){if(z.is(E)){var C=new G(E.edits,H._changeAnnotations);H._textEditChanges[E.textDocument.uri]=C}})):q.changes&&Object.keys(q.changes).forEach(function(E){var C=new G(q.changes[E]);H._textEditChanges[E]=C})):this._workspaceEdit={}}return Object.defineProperty(P.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),P.prototype.getTextEditChange=function(q){if(X.is(q)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var H={uri:q.uri,version:q.version},E=this._textEditChanges[H.uri];if(!E){var C=[],L={textDocument:H,edits:C};this._workspaceEdit.documentChanges.push(L),E=new G(C,this._changeAnnotations),this._textEditChanges[H.uri]=E}return E}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var E=this._textEditChanges[q];if(!E){var C=[];this._workspaceEdit.changes[q]=C,E=new G(C),this._textEditChanges[q]=E}return E}},P.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Q,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},P.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},P.prototype.createFile=function(q,H,E){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var C;R.is(H)||O.is(H)?C=H:E=H;var L,V;if(C===void 0?L=K.create(q,E):(V=O.is(C)?C:this._changeAnnotations.manage(C),L=K.create(q,E,V)),this._workspaceEdit.documentChanges.push(L),V!==void 0)return V},P.prototype.renameFile=function(q,H,E,C){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var L;R.is(E)||O.is(E)?L=E:C=E;var V,ue;if(L===void 0?V=J.create(q,H,C):(ue=O.is(L)?L:this._changeAnnotations.manage(L),V=J.create(q,H,C,ue)),this._workspaceEdit.documentChanges.push(V),ue!==void 0)return ue},P.prototype.deleteFile=function(q,H,E){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var C;R.is(H)||O.is(H)?C=H:E=H;var L,V;if(C===void 0?L=te.create(q,E):(V=O.is(C)?C:this._changeAnnotations.manage(C),L=te.create(q,E,V)),this._workspaceEdit.documentChanges.push(L),V!==void 0)return V},P}();t.WorkspaceChange=ne;var ve;(function(P){function q(E){return{uri:E}}P.create=q;function H(E){var C=E;return N.defined(C)&&N.string(C.uri)}P.is=H})(ve=t.TextDocumentIdentifier||(t.TextDocumentIdentifier={}));var de;(function(P){function q(E,C){return{uri:E,version:C}}P.create=q;function H(E){var C=E;return N.defined(C)&&N.string(C.uri)&&N.integer(C.version)}P.is=H})(de=t.VersionedTextDocumentIdentifier||(t.VersionedTextDocumentIdentifier={}));var X;(function(P){function q(E,C){return{uri:E,version:C}}P.create=q;function H(E){var C=E;return N.defined(C)&&N.string(C.uri)&&(C.version===null||N.integer(C.version))}P.is=H})(X=t.OptionalVersionedTextDocumentIdentifier||(t.OptionalVersionedTextDocumentIdentifier={}));var ce;(function(P){function q(E,C,L,V){return{uri:E,languageId:C,version:L,text:V}}P.create=q;function H(E){var C=E;return N.defined(C)&&N.string(C.uri)&&N.string(C.languageId)&&N.integer(C.version)&&N.string(C.text)}P.is=H})(ce=t.TextDocumentItem||(t.TextDocumentItem={}));var ie;(function(P){P.PlainText="plaintext",P.Markdown="markdown"})(ie=t.MarkupKind||(t.MarkupKind={})),function(P){function q(H){var E=H;return E===P.PlainText||E===P.Markdown}P.is=q}(ie=t.MarkupKind||(t.MarkupKind={}));var pe;(function(P){function q(H){var E=H;return N.objectLiteral(H)&&ie.is(E.kind)&&N.string(E.value)}P.is=q})(pe=t.MarkupContent||(t.MarkupContent={}));var he;(function(P){P.Text=1,P.Method=2,P.Function=3,P.Constructor=4,P.Field=5,P.Variable=6,P.Class=7,P.Interface=8,P.Module=9,P.Property=10,P.Unit=11,P.Value=12,P.Enum=13,P.Keyword=14,P.Snippet=15,P.Color=16,P.File=17,P.Reference=18,P.Folder=19,P.EnumMember=20,P.Constant=21,P.Struct=22,P.Event=23,P.Operator=24,P.TypeParameter=25})(he=t.CompletionItemKind||(t.CompletionItemKind={}));var Ce;(function(P){P.PlainText=1,P.Snippet=2})(Ce=t.InsertTextFormat||(t.InsertTextFormat={}));var _e;(function(P){P.Deprecated=1})(_e=t.CompletionItemTag||(t.CompletionItemTag={}));var Be;(function(P){function q(E,C,L){return{newText:E,insert:C,replace:L}}P.create=q;function H(E){var C=E;return C&&N.string(C.newText)&&a.is(C.insert)&&a.is(C.replace)}P.is=H})(Be=t.InsertReplaceEdit||(t.InsertReplaceEdit={}));var Je;(function(P){P.asIs=1,P.adjustIndentation=2})(Je=t.InsertTextMode||(t.InsertTextMode={}));var Ke;(function(P){function q(H){return{label:H}}P.create=q})(Ke=t.CompletionItem||(t.CompletionItem={}));var je;(function(P){function q(H,E){return{items:H||[],isIncomplete:!!E}}P.create=q})(je=t.CompletionList||(t.CompletionList={}));var xe;(function(P){function q(E){return E.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}P.fromPlainText=q;function H(E){var C=E;return N.string(C)||N.objectLiteral(C)&&N.string(C.language)&&N.string(C.value)}P.is=H})(xe=t.MarkedString||(t.MarkedString={}));var it;(function(P){function q(H){var E=H;return!!E&&N.objectLiteral(E)&&(pe.is(E.contents)||xe.is(E.contents)||N.typedArray(E.contents,xe.is))&&(H.range===void 0||a.is(H.range))}P.is=q})(it=t.Hover||(t.Hover={}));var ut;(function(P){function q(H,E){return E?{label:H,documentation:E}:{label:H}}P.create=q})(ut=t.ParameterInformation||(t.ParameterInformation={}));var Oe;(function(P){function q(H,E){for(var C=[],L=2;L<arguments.length;L++)C[L-2]=arguments[L];var V={label:H};return N.defined(E)&&(V.documentation=E),N.defined(C)?V.parameters=C:V.parameters=[],V}P.create=q})(Oe=t.SignatureInformation||(t.SignatureInformation={}));var me;(function(P){P.Text=1,P.Read=2,P.Write=3})(me=t.DocumentHighlightKind||(t.DocumentHighlightKind={}));var Ae;(function(P){function q(H,E){var C={range:H};return N.number(E)&&(C.kind=E),C}P.create=q})(Ae=t.DocumentHighlight||(t.DocumentHighlight={}));var ke;(function(P){P.File=1,P.Module=2,P.Namespace=3,P.Package=4,P.Class=5,P.Method=6,P.Property=7,P.Field=8,P.Constructor=9,P.Enum=10,P.Interface=11,P.Function=12,P.Variable=13,P.Constant=14,P.String=15,P.Number=16,P.Boolean=17,P.Array=18,P.Object=19,P.Key=20,P.Null=21,P.EnumMember=22,P.Struct=23,P.Event=24,P.Operator=25,P.TypeParameter=26})(ke=t.SymbolKind||(t.SymbolKind={}));var nr;(function(P){P.Deprecated=1})(nr=t.SymbolTag||(t.SymbolTag={}));var at;(function(P){function q(H,E,C,L,V){var ue={name:H,kind:E,location:{uri:L,range:C}};return V&&(ue.containerName=V),ue}P.create=q})(at=t.SymbolInformation||(t.SymbolInformation={}));var re;(function(P){function q(E,C,L,V,ue,fe){var Re={name:E,detail:C,kind:L,range:V,selectionRange:ue};return fe!==void 0&&(Re.children=fe),Re}P.create=q;function H(E){var C=E;return C&&N.string(C.name)&&N.number(C.kind)&&a.is(C.range)&&a.is(C.selectionRange)&&(C.detail===void 0||N.string(C.detail))&&(C.deprecated===void 0||N.boolean(C.deprecated))&&(C.children===void 0||Array.isArray(C.children))&&(C.tags===void 0||Array.isArray(C.tags))}P.is=H})(re=t.DocumentSymbol||(t.DocumentSymbol={}));var Qt;(function(P){P.Empty="",P.QuickFix="quickfix",P.Refactor="refactor",P.RefactorExtract="refactor.extract",P.RefactorInline="refactor.inline",P.RefactorRewrite="refactor.rewrite",P.Source="source",P.SourceOrganizeImports="source.organizeImports",P.SourceFixAll="source.fixAll"})(Qt=t.CodeActionKind||(t.CodeActionKind={}));var ir;(function(P){function q(E,C){var L={diagnostics:E};return C!=null&&(L.only=C),L}P.create=q;function H(E){var C=E;return N.defined(C)&&N.typedArray(C.diagnostics,y.is)&&(C.only===void 0||N.typedArray(C.only,N.string))}P.is=H})(ir=t.CodeActionContext||(t.CodeActionContext={}));var ht;(function(P){function q(E,C,L){var V={title:E},ue=!0;return typeof C=="string"?(ue=!1,V.kind=C):T.is(C)?V.command=C:V.edit=C,ue&&L!==void 0&&(V.kind=L),V}P.create=q;function H(E){var C=E;return C&&N.string(C.title)&&(C.diagnostics===void 0||N.typedArray(C.diagnostics,y.is))&&(C.kind===void 0||N.string(C.kind))&&(C.edit!==void 0||C.command!==void 0)&&(C.command===void 0||T.is(C.command))&&(C.isPreferred===void 0||N.boolean(C.isPreferred))&&(C.edit===void 0||U.is(C.edit))}P.is=H})(ht=t.CodeAction||(t.CodeAction={}));var rt;(function(P){function q(E,C){var L={range:E};return N.defined(C)&&(L.data=C),L}P.create=q;function H(E){var C=E;return N.defined(C)&&a.is(C.range)&&(N.undefined(C.command)||T.is(C.command))}P.is=H})(rt=t.CodeLens||(t.CodeLens={}));var xt;(function(P){function q(E,C){return{tabSize:E,insertSpaces:C}}P.create=q;function H(E){var C=E;return N.defined(C)&&N.uinteger(C.tabSize)&&N.boolean(C.insertSpaces)}P.is=H})(xt=t.FormattingOptions||(t.FormattingOptions={}));var lt;(function(P){function q(E,C,L){return{range:E,target:C,data:L}}P.create=q;function H(E){var C=E;return N.defined(C)&&a.is(C.range)&&(N.undefined(C.target)||N.string(C.target))}P.is=H})(lt=t.DocumentLink||(t.DocumentLink={}));var Ft;(function(P){function q(E,C){return{range:E,parent:C}}P.create=q;function H(E){var C=E;return C!==void 0&&a.is(C.range)&&(C.parent===void 0||P.is(C.parent))}P.is=H})(Ft=t.SelectionRange||(t.SelectionRange={})),t.EOL=[`
`,`\r
`,"\r"];var Pt;(function(P){function q(L,V,ue,fe){return new M(L,V,ue,fe)}P.create=q;function H(L){var V=L;return!!(N.defined(V)&&N.string(V.uri)&&(N.undefined(V.languageId)||N.string(V.languageId))&&N.uinteger(V.lineCount)&&N.func(V.getText)&&N.func(V.positionAt)&&N.func(V.offsetAt))}P.is=H;function E(L,V){for(var ue=L.getText(),fe=C(V,function(Nt,De){var Ht=Nt.range.start.line-De.range.start.line;return Ht===0?Nt.range.start.character-De.range.start.character:Ht}),Re=ue.length,ye=fe.length-1;ye>=0;ye--){var Fe=fe[ye],le=L.offsetAt(Fe.range.start),Me=L.offsetAt(Fe.range.end);if(Me<=Re)ue=ue.substring(0,le)+Fe.newText+ue.substring(Me,ue.length);else throw new Error("Overlapping edit");Re=le}return ue}P.applyEdits=E;function C(L,V){if(L.length<=1)return L;var ue=L.length/2|0,fe=L.slice(0,ue),Re=L.slice(ue);C(fe,V),C(Re,V);for(var ye=0,Fe=0,le=0;ye<fe.length&&Fe<Re.length;){var Me=V(fe[ye],Re[Fe]);Me<=0?L[le++]=fe[ye++]:L[le++]=Re[Fe++]}for(;ye<fe.length;)L[le++]=fe[ye++];for(;Fe<Re.length;)L[le++]=Re[Fe++];return L}})(Pt=t.TextDocument||(t.TextDocument={}));var M=function(){function P(q,H,E,C){this._uri=q,this._languageId=H,this._version=E,this._content=C,this._lineOffsets=void 0}return Object.defineProperty(P.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),P.prototype.getText=function(q){if(q){var H=this.offsetAt(q.start),E=this.offsetAt(q.end);return this._content.substring(H,E)}return this._content},P.prototype.update=function(q,H){this._content=q.text,this._version=H,this._lineOffsets=void 0},P.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var q=[],H=this._content,E=!0,C=0;C<H.length;C++){E&&(q.push(C),E=!1);var L=H.charAt(C);E=L==="\r"||L===`
`,L==="\r"&&C+1<H.length&&H.charAt(C+1)===`
`&&C++}E&&H.length>0&&q.push(H.length),this._lineOffsets=q}return this._lineOffsets},P.prototype.positionAt=function(q){q=Math.max(Math.min(q,this._content.length),0);var H=this.getLineOffsets(),E=0,C=H.length;if(C===0)return s.create(0,q);for(;E<C;){var L=Math.floor((E+C)/2);H[L]>q?C=L:E=L+1}var V=E-1;return s.create(V,q-H[V])},P.prototype.offsetAt=function(q){var H=this.getLineOffsets();if(q.line>=H.length)return this._content.length;if(q.line<0)return 0;var E=H[q.line],C=q.line+1<H.length?H[q.line+1]:this._content.length;return Math.max(Math.min(E+q.character,C),E)},Object.defineProperty(P.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),P}(),N;(function(P){var q=Object.prototype.toString;function H(Me){return typeof Me<"u"}P.defined=H;function E(Me){return typeof Me>"u"}P.undefined=E;function C(Me){return Me===!0||Me===!1}P.boolean=C;function L(Me){return q.call(Me)==="[object String]"}P.string=L;function V(Me){return q.call(Me)==="[object Number]"}P.number=V;function ue(Me,Nt,De){return q.call(Me)==="[object Number]"&&Nt<=Me&&Me<=De}P.numberRange=ue;function fe(Me){return q.call(Me)==="[object Number]"&&-2147483648<=Me&&Me<=2147483647}P.integer=fe;function Re(Me){return q.call(Me)==="[object Number]"&&0<=Me&&Me<=2147483647}P.uinteger=Re;function ye(Me){return q.call(Me)==="[object Function]"}P.func=ye;function Fe(Me){return Me!==null&&typeof Me=="object"}P.objectLiteral=Fe;function le(Me,Nt){return Array.isArray(Me)&&Me.every(Nt)}P.typedArray=le})(N||(N={}))})});var Bt=ee(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.ProtocolNotificationType=Tr.ProtocolNotificationType0=Tr.ProtocolRequestType=Tr.ProtocolRequestType0=Tr.RegistrationType=void 0;var Jn=Qn(),Lp=class{constructor(t){this.method=t}};Tr.RegistrationType=Lp;var jp=class extends Jn.RequestType0{constructor(t){super(t)}};Tr.ProtocolRequestType0=jp;var Fp=class extends Jn.RequestType{constructor(t){super(t,Jn.ParameterStructures.byName)}};Tr.ProtocolRequestType=Fp;var Hp=class extends Jn.NotificationType0{constructor(t){super(t)}};Tr.ProtocolNotificationType0=Hp;var $p=class extends Jn.NotificationType{constructor(t){super(t,Jn.ParameterStructures.byName)}};Tr.ProtocolNotificationType=$p});var Gp=ee(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.objectLiteral=qt.typedArray=qt.stringArray=qt.array=qt.func=qt.error=qt.number=qt.string=qt.boolean=void 0;function AT(e){return e===!0||e===!1}qt.boolean=AT;function Up(e){return typeof e=="string"||e instanceof String}qt.string=Up;function xT(e){return typeof e=="number"||e instanceof Number}qt.number=xT;function NT(e){return e instanceof Error}qt.error=NT;function kT(e){return typeof e=="function"}qt.func=kT;function Bp(e){return Array.isArray(e)}qt.array=Bp;function MT(e){return Bp(e)&&e.every(t=>Up(t))}qt.stringArray=MT;function qT(e,t){return Array.isArray(e)&&e.every(t)}qt.typedArray=qT;function LT(e){return e!==null&&typeof e=="object"}qt.objectLiteral=LT});var Vp=ee(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.ImplementationRequest=void 0;var jT=Bt(),FT;(function(e){e.method="textDocument/implementation",e.type=new jT.ProtocolRequestType(e.method)})(FT=Fi.ImplementationRequest||(Fi.ImplementationRequest={}))});var Wp=ee(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.TypeDefinitionRequest=void 0;var HT=Bt(),$T;(function(e){e.method="textDocument/typeDefinition",e.type=new HT.ProtocolRequestType(e.method)})($T=Hi.TypeDefinitionRequest||(Hi.TypeDefinitionRequest={}))});var zp=ee(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.DidChangeWorkspaceFoldersNotification=an.WorkspaceFoldersRequest=void 0;var Kp=Bt(),UT;(function(e){e.type=new Kp.ProtocolRequestType0("workspace/workspaceFolders")})(UT=an.WorkspaceFoldersRequest||(an.WorkspaceFoldersRequest={}));var BT;(function(e){e.type=new Kp.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(BT=an.DidChangeWorkspaceFoldersNotification||(an.DidChangeWorkspaceFoldersNotification={}))});var Xp=ee($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.ConfigurationRequest=void 0;var GT=Bt(),VT;(function(e){e.type=new GT.ProtocolRequestType("workspace/configuration")})(VT=$i.ConfigurationRequest||($i.ConfigurationRequest={}))});var Qp=ee(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.ColorPresentationRequest=cn.DocumentColorRequest=void 0;var Yp=Bt(),WT;(function(e){e.method="textDocument/documentColor",e.type=new Yp.ProtocolRequestType(e.method)})(WT=cn.DocumentColorRequest||(cn.DocumentColorRequest={}));var KT;(function(e){e.type=new Yp.ProtocolRequestType("textDocument/colorPresentation")})(KT=cn.ColorPresentationRequest||(cn.ColorPresentationRequest={}))});var Jp=ee(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.FoldingRangeRequest=un.FoldingRangeKind=void 0;var zT=Bt(),XT;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(XT=un.FoldingRangeKind||(un.FoldingRangeKind={}));var YT;(function(e){e.method="textDocument/foldingRange",e.type=new zT.ProtocolRequestType(e.method)})(YT=un.FoldingRangeRequest||(un.FoldingRangeRequest={}))});var Zp=ee(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.DeclarationRequest=void 0;var QT=Bt(),JT;(function(e){e.method="textDocument/declaration",e.type=new QT.ProtocolRequestType(e.method)})(JT=Ui.DeclarationRequest||(Ui.DeclarationRequest={}))});var ef=ee(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.SelectionRangeRequest=void 0;var ZT=Bt(),eS;(function(e){e.method="textDocument/selectionRange",e.type=new ZT.ProtocolRequestType(e.method)})(eS=Bi.SelectionRangeRequest||(Bi.SelectionRangeRequest={}))});var rf=ee(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.WorkDoneProgressCancelNotification=Ar.WorkDoneProgressCreateRequest=Ar.WorkDoneProgress=void 0;var tS=Qn(),tf=Bt(),rS;(function(e){e.type=new tS.ProgressType;function t(r){return r===e.type}e.is=t})(rS=Ar.WorkDoneProgress||(Ar.WorkDoneProgress={}));var nS;(function(e){e.type=new tf.ProtocolRequestType("window/workDoneProgress/create")})(nS=Ar.WorkDoneProgressCreateRequest||(Ar.WorkDoneProgressCreateRequest={}));var iS;(function(e){e.type=new tf.ProtocolNotificationType("window/workDoneProgress/cancel")})(iS=Ar.WorkDoneProgressCancelNotification||(Ar.WorkDoneProgressCancelNotification={}))});var nf=ee(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.CallHierarchyOutgoingCallsRequest=xr.CallHierarchyIncomingCallsRequest=xr.CallHierarchyPrepareRequest=void 0;var Ca=Bt(),oS;(function(e){e.method="textDocument/prepareCallHierarchy",e.type=new Ca.ProtocolRequestType(e.method)})(oS=xr.CallHierarchyPrepareRequest||(xr.CallHierarchyPrepareRequest={}));var sS;(function(e){e.method="callHierarchy/incomingCalls",e.type=new Ca.ProtocolRequestType(e.method)})(sS=xr.CallHierarchyIncomingCallsRequest||(xr.CallHierarchyIncomingCallsRequest={}));var aS;(function(e){e.method="callHierarchy/outgoingCalls",e.type=new Ca.ProtocolRequestType(e.method)})(aS=xr.CallHierarchyOutgoingCallsRequest||(xr.CallHierarchyOutgoingCallsRequest={}))});var of=ee(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.SemanticTokensRefreshRequest=ct.SemanticTokensRangeRequest=ct.SemanticTokensDeltaRequest=ct.SemanticTokensRequest=ct.SemanticTokensRegistrationType=ct.TokenFormat=ct.SemanticTokens=ct.SemanticTokenModifiers=ct.SemanticTokenTypes=void 0;var Gi=Bt(),cS;(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator"})(cS=ct.SemanticTokenTypes||(ct.SemanticTokenTypes={}));var uS;(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"})(uS=ct.SemanticTokenModifiers||(ct.SemanticTokenModifiers={}));var lS;(function(e){function t(r){let n=r;return n!==void 0&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}e.is=t})(lS=ct.SemanticTokens||(ct.SemanticTokens={}));var dS;(function(e){e.Relative="relative"})(dS=ct.TokenFormat||(ct.TokenFormat={}));var pS;(function(e){e.method="textDocument/semanticTokens",e.type=new Gi.RegistrationType(e.method)})(pS=ct.SemanticTokensRegistrationType||(ct.SemanticTokensRegistrationType={}));var fS;(function(e){e.method="textDocument/semanticTokens/full",e.type=new Gi.ProtocolRequestType(e.method)})(fS=ct.SemanticTokensRequest||(ct.SemanticTokensRequest={}));var hS;(function(e){e.method="textDocument/semanticTokens/full/delta",e.type=new Gi.ProtocolRequestType(e.method)})(hS=ct.SemanticTokensDeltaRequest||(ct.SemanticTokensDeltaRequest={}));var gS;(function(e){e.method="textDocument/semanticTokens/range",e.type=new Gi.ProtocolRequestType(e.method)})(gS=ct.SemanticTokensRangeRequest||(ct.SemanticTokensRangeRequest={}));var mS;(function(e){e.method="workspace/semanticTokens/refresh",e.type=new Gi.ProtocolRequestType0(e.method)})(mS=ct.SemanticTokensRefreshRequest||(ct.SemanticTokensRefreshRequest={}))});var sf=ee(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.ShowDocumentRequest=void 0;var vS=Bt(),_S;(function(e){e.method="window/showDocument",e.type=new vS.ProtocolRequestType(e.method)})(_S=Vi.ShowDocumentRequest||(Vi.ShowDocumentRequest={}))});var af=ee(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.LinkedEditingRangeRequest=void 0;var yS=Bt(),ES;(function(e){e.method="textDocument/linkedEditingRange",e.type=new yS.ProtocolRequestType(e.method)})(ES=Wi.LinkedEditingRangeRequest||(Wi.LinkedEditingRangeRequest={}))});var cf=ee(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.WillDeleteFilesRequest=Tt.DidDeleteFilesNotification=Tt.DidRenameFilesNotification=Tt.WillRenameFilesRequest=Tt.DidCreateFilesNotification=Tt.WillCreateFilesRequest=Tt.FileOperationPatternKind=void 0;var Zn=Bt(),CS;(function(e){e.file="file",e.folder="folder"})(CS=Tt.FileOperationPatternKind||(Tt.FileOperationPatternKind={}));var bS;(function(e){e.method="workspace/willCreateFiles",e.type=new Zn.ProtocolRequestType(e.method)})(bS=Tt.WillCreateFilesRequest||(Tt.WillCreateFilesRequest={}));var TS;(function(e){e.method="workspace/didCreateFiles",e.type=new Zn.ProtocolNotificationType(e.method)})(TS=Tt.DidCreateFilesNotification||(Tt.DidCreateFilesNotification={}));var SS;(function(e){e.method="workspace/willRenameFiles",e.type=new Zn.ProtocolRequestType(e.method)})(SS=Tt.WillRenameFilesRequest||(Tt.WillRenameFilesRequest={}));var RS;(function(e){e.method="workspace/didRenameFiles",e.type=new Zn.ProtocolNotificationType(e.method)})(RS=Tt.DidRenameFilesNotification||(Tt.DidRenameFilesNotification={}));var wS;(function(e){e.method="workspace/didDeleteFiles",e.type=new Zn.ProtocolNotificationType(e.method)})(wS=Tt.DidDeleteFilesNotification||(Tt.DidDeleteFilesNotification={}));var PS;(function(e){e.method="workspace/willDeleteFiles",e.type=new Zn.ProtocolRequestType(e.method)})(PS=Tt.WillDeleteFilesRequest||(Tt.WillDeleteFilesRequest={}))});var uf=ee(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.MonikerRequest=Nr.MonikerKind=Nr.UniquenessLevel=void 0;var OS=Bt(),IS;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"})(IS=Nr.UniquenessLevel||(Nr.UniquenessLevel={}));var DS;(function(e){e.import="import",e.export="export",e.local="local"})(DS=Nr.MonikerKind||(Nr.MonikerKind={}));var AS;(function(e){e.method="textDocument/moniker",e.type=new OS.ProtocolRequestType(e.method)})(AS=Nr.MonikerRequest||(Nr.MonikerRequest={}))});var hf=ee(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.DocumentLinkRequest=x.CodeLensRefreshRequest=x.CodeLensResolveRequest=x.CodeLensRequest=x.WorkspaceSymbolRequest=x.CodeActionResolveRequest=x.CodeActionRequest=x.DocumentSymbolRequest=x.DocumentHighlightRequest=x.ReferencesRequest=x.DefinitionRequest=x.SignatureHelpRequest=x.SignatureHelpTriggerKind=x.HoverRequest=x.CompletionResolveRequest=x.CompletionRequest=x.CompletionTriggerKind=x.PublishDiagnosticsNotification=x.WatchKind=x.FileChangeType=x.DidChangeWatchedFilesNotification=x.WillSaveTextDocumentWaitUntilRequest=x.WillSaveTextDocumentNotification=x.TextDocumentSaveReason=x.DidSaveTextDocumentNotification=x.DidCloseTextDocumentNotification=x.DidChangeTextDocumentNotification=x.TextDocumentContentChangeEvent=x.DidOpenTextDocumentNotification=x.TextDocumentSyncKind=x.TelemetryEventNotification=x.LogMessageNotification=x.ShowMessageRequest=x.ShowMessageNotification=x.MessageType=x.DidChangeConfigurationNotification=x.ExitNotification=x.ShutdownRequest=x.InitializedNotification=x.InitializeError=x.InitializeRequest=x.WorkDoneProgressOptions=x.TextDocumentRegistrationOptions=x.StaticRegistrationOptions=x.FailureHandlingKind=x.ResourceOperationKind=x.UnregistrationRequest=x.RegistrationRequest=x.DocumentSelector=x.DocumentFilter=void 0;x.MonikerRequest=x.MonikerKind=x.UniquenessLevel=x.WillDeleteFilesRequest=x.DidDeleteFilesNotification=x.WillRenameFilesRequest=x.DidRenameFilesNotification=x.WillCreateFilesRequest=x.DidCreateFilesNotification=x.FileOperationPatternKind=x.LinkedEditingRangeRequest=x.ShowDocumentRequest=x.SemanticTokensRegistrationType=x.SemanticTokensRefreshRequest=x.SemanticTokensRangeRequest=x.SemanticTokensDeltaRequest=x.SemanticTokensRequest=x.TokenFormat=x.SemanticTokens=x.SemanticTokenModifiers=x.SemanticTokenTypes=x.CallHierarchyPrepareRequest=x.CallHierarchyOutgoingCallsRequest=x.CallHierarchyIncomingCallsRequest=x.WorkDoneProgressCancelNotification=x.WorkDoneProgressCreateRequest=x.WorkDoneProgress=x.SelectionRangeRequest=x.DeclarationRequest=x.FoldingRangeRequest=x.ColorPresentationRequest=x.DocumentColorRequest=x.ConfigurationRequest=x.DidChangeWorkspaceFoldersNotification=x.WorkspaceFoldersRequest=x.TypeDefinitionRequest=x.ImplementationRequest=x.ApplyWorkspaceEditRequest=x.ExecuteCommandRequest=x.PrepareRenameRequest=x.RenameRequest=x.PrepareSupportDefaultBehavior=x.DocumentOnTypeFormattingRequest=x.DocumentRangeFormattingRequest=x.DocumentFormattingRequest=x.DocumentLinkResolveRequest=void 0;var ln=Gp(),He=Bt(),xS=Vp();Object.defineProperty(x,"ImplementationRequest",{enumerable:!0,get:function(){return xS.ImplementationRequest}});var NS=Wp();Object.defineProperty(x,"TypeDefinitionRequest",{enumerable:!0,get:function(){return NS.TypeDefinitionRequest}});var lf=zp();Object.defineProperty(x,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return lf.WorkspaceFoldersRequest}});Object.defineProperty(x,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return lf.DidChangeWorkspaceFoldersNotification}});var kS=Xp();Object.defineProperty(x,"ConfigurationRequest",{enumerable:!0,get:function(){return kS.ConfigurationRequest}});var df=Qp();Object.defineProperty(x,"DocumentColorRequest",{enumerable:!0,get:function(){return df.DocumentColorRequest}});Object.defineProperty(x,"ColorPresentationRequest",{enumerable:!0,get:function(){return df.ColorPresentationRequest}});var MS=Jp();Object.defineProperty(x,"FoldingRangeRequest",{enumerable:!0,get:function(){return MS.FoldingRangeRequest}});var qS=Zp();Object.defineProperty(x,"DeclarationRequest",{enumerable:!0,get:function(){return qS.DeclarationRequest}});var LS=ef();Object.defineProperty(x,"SelectionRangeRequest",{enumerable:!0,get:function(){return LS.SelectionRangeRequest}});var ba=rf();Object.defineProperty(x,"WorkDoneProgress",{enumerable:!0,get:function(){return ba.WorkDoneProgress}});Object.defineProperty(x,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return ba.WorkDoneProgressCreateRequest}});Object.defineProperty(x,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return ba.WorkDoneProgressCancelNotification}});var Ta=nf();Object.defineProperty(x,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Ta.CallHierarchyIncomingCallsRequest}});Object.defineProperty(x,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Ta.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(x,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ta.CallHierarchyPrepareRequest}});var Yr=of();Object.defineProperty(x,"SemanticTokenTypes",{enumerable:!0,get:function(){return Yr.SemanticTokenTypes}});Object.defineProperty(x,"SemanticTokenModifiers",{enumerable:!0,get:function(){return Yr.SemanticTokenModifiers}});Object.defineProperty(x,"SemanticTokens",{enumerable:!0,get:function(){return Yr.SemanticTokens}});Object.defineProperty(x,"TokenFormat",{enumerable:!0,get:function(){return Yr.TokenFormat}});Object.defineProperty(x,"SemanticTokensRequest",{enumerable:!0,get:function(){return Yr.SemanticTokensRequest}});Object.defineProperty(x,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Yr.SemanticTokensDeltaRequest}});Object.defineProperty(x,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Yr.SemanticTokensRangeRequest}});Object.defineProperty(x,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Yr.SemanticTokensRefreshRequest}});Object.defineProperty(x,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Yr.SemanticTokensRegistrationType}});var jS=sf();Object.defineProperty(x,"ShowDocumentRequest",{enumerable:!0,get:function(){return jS.ShowDocumentRequest}});var FS=af();Object.defineProperty(x,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return FS.LinkedEditingRangeRequest}});var xn=cf();Object.defineProperty(x,"FileOperationPatternKind",{enumerable:!0,get:function(){return xn.FileOperationPatternKind}});Object.defineProperty(x,"DidCreateFilesNotification",{enumerable:!0,get:function(){return xn.DidCreateFilesNotification}});Object.defineProperty(x,"WillCreateFilesRequest",{enumerable:!0,get:function(){return xn.WillCreateFilesRequest}});Object.defineProperty(x,"DidRenameFilesNotification",{enumerable:!0,get:function(){return xn.DidRenameFilesNotification}});Object.defineProperty(x,"WillRenameFilesRequest",{enumerable:!0,get:function(){return xn.WillRenameFilesRequest}});Object.defineProperty(x,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return xn.DidDeleteFilesNotification}});Object.defineProperty(x,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return xn.WillDeleteFilesRequest}});var Sa=uf();Object.defineProperty(x,"UniquenessLevel",{enumerable:!0,get:function(){return Sa.UniquenessLevel}});Object.defineProperty(x,"MonikerKind",{enumerable:!0,get:function(){return Sa.MonikerKind}});Object.defineProperty(x,"MonikerRequest",{enumerable:!0,get:function(){return Sa.MonikerRequest}});var pf;(function(e){function t(r){let n=r;return ln.string(n.language)||ln.string(n.scheme)||ln.string(n.pattern)}e.is=t})(pf=x.DocumentFilter||(x.DocumentFilter={}));var ff;(function(e){function t(r){if(!Array.isArray(r))return!1;for(let n of r)if(!ln.string(n)&&!pf.is(n))return!1;return!0}e.is=t})(ff=x.DocumentSelector||(x.DocumentSelector={}));var HS;(function(e){e.type=new He.ProtocolRequestType("client/registerCapability")})(HS=x.RegistrationRequest||(x.RegistrationRequest={}));var $S;(function(e){e.type=new He.ProtocolRequestType("client/unregisterCapability")})($S=x.UnregistrationRequest||(x.UnregistrationRequest={}));var US;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete"})(US=x.ResourceOperationKind||(x.ResourceOperationKind={}));var BS;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"})(BS=x.FailureHandlingKind||(x.FailureHandlingKind={}));var GS;(function(e){function t(r){let n=r;return n&&ln.string(n.id)&&n.id.length>0}e.hasId=t})(GS=x.StaticRegistrationOptions||(x.StaticRegistrationOptions={}));var VS;(function(e){function t(r){let n=r;return n&&(n.documentSelector===null||ff.is(n.documentSelector))}e.is=t})(VS=x.TextDocumentRegistrationOptions||(x.TextDocumentRegistrationOptions={}));var WS;(function(e){function t(n){let s=n;return ln.objectLiteral(s)&&(s.workDoneProgress===void 0||ln.boolean(s.workDoneProgress))}e.is=t;function r(n){let s=n;return s&&ln.boolean(s.workDoneProgress)}e.hasWorkDoneProgress=r})(WS=x.WorkDoneProgressOptions||(x.WorkDoneProgressOptions={}));var KS;(function(e){e.type=new He.ProtocolRequestType("initialize")})(KS=x.InitializeRequest||(x.InitializeRequest={}));var zS;(function(e){e.unknownProtocolVersion=1})(zS=x.InitializeError||(x.InitializeError={}));var XS;(function(e){e.type=new He.ProtocolNotificationType("initialized")})(XS=x.InitializedNotification||(x.InitializedNotification={}));var YS;(function(e){e.type=new He.ProtocolRequestType0("shutdown")})(YS=x.ShutdownRequest||(x.ShutdownRequest={}));var QS;(function(e){e.type=new He.ProtocolNotificationType0("exit")})(QS=x.ExitNotification||(x.ExitNotification={}));var JS;(function(e){e.type=new He.ProtocolNotificationType("workspace/didChangeConfiguration")})(JS=x.DidChangeConfigurationNotification||(x.DidChangeConfigurationNotification={}));var ZS;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4})(ZS=x.MessageType||(x.MessageType={}));var e0;(function(e){e.type=new He.ProtocolNotificationType("window/showMessage")})(e0=x.ShowMessageNotification||(x.ShowMessageNotification={}));var t0;(function(e){e.type=new He.ProtocolRequestType("window/showMessageRequest")})(t0=x.ShowMessageRequest||(x.ShowMessageRequest={}));var r0;(function(e){e.type=new He.ProtocolNotificationType("window/logMessage")})(r0=x.LogMessageNotification||(x.LogMessageNotification={}));var n0;(function(e){e.type=new He.ProtocolNotificationType("telemetry/event")})(n0=x.TelemetryEventNotification||(x.TelemetryEventNotification={}));var i0;(function(e){e.None=0,e.Full=1,e.Incremental=2})(i0=x.TextDocumentSyncKind||(x.TextDocumentSyncKind={}));var o0;(function(e){e.method="textDocument/didOpen",e.type=new He.ProtocolNotificationType(e.method)})(o0=x.DidOpenTextDocumentNotification||(x.DidOpenTextDocumentNotification={}));var s0;(function(e){function t(n){let s=n;return s!=null&&typeof s.text=="string"&&s.range!==void 0&&(s.rangeLength===void 0||typeof s.rangeLength=="number")}e.isIncremental=t;function r(n){let s=n;return s!=null&&typeof s.text=="string"&&s.range===void 0&&s.rangeLength===void 0}e.isFull=r})(s0=x.TextDocumentContentChangeEvent||(x.TextDocumentContentChangeEvent={}));var a0;(function(e){e.method="textDocument/didChange",e.type=new He.ProtocolNotificationType(e.method)})(a0=x.DidChangeTextDocumentNotification||(x.DidChangeTextDocumentNotification={}));var c0;(function(e){e.method="textDocument/didClose",e.type=new He.ProtocolNotificationType(e.method)})(c0=x.DidCloseTextDocumentNotification||(x.DidCloseTextDocumentNotification={}));var u0;(function(e){e.method="textDocument/didSave",e.type=new He.ProtocolNotificationType(e.method)})(u0=x.DidSaveTextDocumentNotification||(x.DidSaveTextDocumentNotification={}));var l0;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(l0=x.TextDocumentSaveReason||(x.TextDocumentSaveReason={}));var d0;(function(e){e.method="textDocument/willSave",e.type=new He.ProtocolNotificationType(e.method)})(d0=x.WillSaveTextDocumentNotification||(x.WillSaveTextDocumentNotification={}));var p0;(function(e){e.method="textDocument/willSaveWaitUntil",e.type=new He.ProtocolRequestType(e.method)})(p0=x.WillSaveTextDocumentWaitUntilRequest||(x.WillSaveTextDocumentWaitUntilRequest={}));var f0;(function(e){e.type=new He.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(f0=x.DidChangeWatchedFilesNotification||(x.DidChangeWatchedFilesNotification={}));var h0;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(h0=x.FileChangeType||(x.FileChangeType={}));var g0;(function(e){e.Create=1,e.Change=2,e.Delete=4})(g0=x.WatchKind||(x.WatchKind={}));var m0;(function(e){e.type=new He.ProtocolNotificationType("textDocument/publishDiagnostics")})(m0=x.PublishDiagnosticsNotification||(x.PublishDiagnosticsNotification={}));var v0;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(v0=x.CompletionTriggerKind||(x.CompletionTriggerKind={}));var _0;(function(e){e.method="textDocument/completion",e.type=new He.ProtocolRequestType(e.method)})(_0=x.CompletionRequest||(x.CompletionRequest={}));var y0;(function(e){e.method="completionItem/resolve",e.type=new He.ProtocolRequestType(e.method)})(y0=x.CompletionResolveRequest||(x.CompletionResolveRequest={}));var E0;(function(e){e.method="textDocument/hover",e.type=new He.ProtocolRequestType(e.method)})(E0=x.HoverRequest||(x.HoverRequest={}));var C0;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(C0=x.SignatureHelpTriggerKind||(x.SignatureHelpTriggerKind={}));var b0;(function(e){e.method="textDocument/signatureHelp",e.type=new He.ProtocolRequestType(e.method)})(b0=x.SignatureHelpRequest||(x.SignatureHelpRequest={}));var T0;(function(e){e.method="textDocument/definition",e.type=new He.ProtocolRequestType(e.method)})(T0=x.DefinitionRequest||(x.DefinitionRequest={}));var S0;(function(e){e.method="textDocument/references",e.type=new He.ProtocolRequestType(e.method)})(S0=x.ReferencesRequest||(x.ReferencesRequest={}));var R0;(function(e){e.method="textDocument/documentHighlight",e.type=new He.ProtocolRequestType(e.method)})(R0=x.DocumentHighlightRequest||(x.DocumentHighlightRequest={}));var w0;(function(e){e.method="textDocument/documentSymbol",e.type=new He.ProtocolRequestType(e.method)})(w0=x.DocumentSymbolRequest||(x.DocumentSymbolRequest={}));var P0;(function(e){e.method="textDocument/codeAction",e.type=new He.ProtocolRequestType(e.method)})(P0=x.CodeActionRequest||(x.CodeActionRequest={}));var O0;(function(e){e.method="codeAction/resolve",e.type=new He.ProtocolRequestType(e.method)})(O0=x.CodeActionResolveRequest||(x.CodeActionResolveRequest={}));var I0;(function(e){e.method="workspace/symbol",e.type=new He.ProtocolRequestType(e.method)})(I0=x.WorkspaceSymbolRequest||(x.WorkspaceSymbolRequest={}));var D0;(function(e){e.method="textDocument/codeLens",e.type=new He.ProtocolRequestType(e.method)})(D0=x.CodeLensRequest||(x.CodeLensRequest={}));var A0;(function(e){e.method="codeLens/resolve",e.type=new He.ProtocolRequestType(e.method)})(A0=x.CodeLensResolveRequest||(x.CodeLensResolveRequest={}));var x0;(function(e){e.method="workspace/codeLens/refresh",e.type=new He.ProtocolRequestType0(e.method)})(x0=x.CodeLensRefreshRequest||(x.CodeLensRefreshRequest={}));var N0;(function(e){e.method="textDocument/documentLink",e.type=new He.ProtocolRequestType(e.method)})(N0=x.DocumentLinkRequest||(x.DocumentLinkRequest={}));var k0;(function(e){e.method="documentLink/resolve",e.type=new He.ProtocolRequestType(e.method)})(k0=x.DocumentLinkResolveRequest||(x.DocumentLinkResolveRequest={}));var M0;(function(e){e.method="textDocument/formatting",e.type=new He.ProtocolRequestType(e.method)})(M0=x.DocumentFormattingRequest||(x.DocumentFormattingRequest={}));var q0;(function(e){e.method="textDocument/rangeFormatting",e.type=new He.ProtocolRequestType(e.method)})(q0=x.DocumentRangeFormattingRequest||(x.DocumentRangeFormattingRequest={}));var L0;(function(e){e.method="textDocument/onTypeFormatting",e.type=new He.ProtocolRequestType(e.method)})(L0=x.DocumentOnTypeFormattingRequest||(x.DocumentOnTypeFormattingRequest={}));var j0;(function(e){e.Identifier=1})(j0=x.PrepareSupportDefaultBehavior||(x.PrepareSupportDefaultBehavior={}));var F0;(function(e){e.method="textDocument/rename",e.type=new He.ProtocolRequestType(e.method)})(F0=x.RenameRequest||(x.RenameRequest={}));var H0;(function(e){e.method="textDocument/prepareRename",e.type=new He.ProtocolRequestType(e.method)})(H0=x.PrepareRenameRequest||(x.PrepareRenameRequest={}));var $0;(function(e){e.type=new He.ProtocolRequestType("workspace/executeCommand")})($0=x.ExecuteCommandRequest||(x.ExecuteCommandRequest={}));var U0;(function(e){e.type=new He.ProtocolRequestType("workspace/applyEdit")})(U0=x.ApplyWorkspaceEditRequest||(x.ApplyWorkspaceEditRequest={}))});var mf=ee(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.createProtocolConnection=void 0;var gf=Qn();function B0(e,t,r,n){return gf.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),gf.createMessageConnection(e,t,r,n)}No.createProtocolConnection=B0});var vf=ee(ar=>{"use strict";var G0=ar&&ar.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ko=ar&&ar.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&G0(t,e,r)};Object.defineProperty(ar,"__esModule",{value:!0});ar.LSPErrorCodes=ar.createProtocolConnection=void 0;ko(Qn(),ar);ko(qp(),ar);ko(Bt(),ar);ko(hf(),ar);var V0=mf();Object.defineProperty(ar,"createProtocolConnection",{enumerable:!0,get:function(){return V0.createProtocolConnection}});var W0;(function(e){e.lspReservedErrorRangeStart=-32899,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(W0=ar.LSPErrorCodes||(ar.LSPErrorCodes={}))});var St=ee(Lr=>{"use strict";var K0=Lr&&Lr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),_f=Lr&&Lr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&K0(t,e,r)};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.createProtocolConnection=void 0;var z0=Ea();_f(Ea(),Lr);_f(vf(),Lr);function X0(e,t,r,n){return z0.createMessageConnection(e,t,r,n)}Lr.createProtocolConnection=X0});var wa=ee(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.toJSONObject=ti.ConfigurationFeature=void 0;var Ra=require("vscode"),Y0=St(),yf=class{constructor(t){this._client=t}fillClientCapabilities(t){t.workspace=t.workspace||{},t.workspace.configuration=!0}initialize(){let t=this._client;t.onRequest(Y0.ConfigurationRequest.type,(r,n)=>{let s=i=>{let o=[];for(let c of i.items){let u=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;o.push(this.getConfiguration(u,c.section!==null?c.section:void 0))}return o},a=t.clientOptions.middleware.workspace;return a&&a.configuration?a.configuration(r,n,s):s(r,n)})}getConfiguration(t,r){let n=null;if(r){let s=r.lastIndexOf(".");if(s===-1)n=ei(Ra.workspace.getConfiguration(void 0,t).get(r));else{let a=Ra.workspace.getConfiguration(r.substr(0,s),t);a&&(n=ei(a.get(r.substr(s+1))))}}else{let s=Ra.workspace.getConfiguration(void 0,t);n={};for(let a of Object.keys(s))s.has(a)&&(n[a]=ei(s.get(a)))}return n===void 0&&(n=null),n}dispose(){}};ti.ConfigurationFeature=yf;function ei(e){if(e){if(Array.isArray(e))return e.map(ei);if(typeof e=="object"){let t=Object.create(null);for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=ei(e[r]));return t}}return e}ti.toJSONObject=ei});var Oa=ee(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});var Q0=require("vscode"),Ef=class extends Q0.CompletionItem{constructor(t){super(t)}};Pa.default=Ef});var Da=ee(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});var J0=require("vscode"),Cf=class extends J0.CodeLens{constructor(t){super(t)}};Ia.default=Cf});var xa=ee(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});var Z0=require("vscode"),bf=class extends Z0.DocumentLink{constructor(t,r){super(t,r)}};Aa.default=bf});var ka=ee(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});var eR=require("vscode"),Tf=class extends eR.CodeAction{constructor(t,r){super(t);this.data=r}};Na.default=Tf});var qa=ee(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.ProtocolDiagnostic=Nn.DiagnosticCode=void 0;var tR=require("vscode"),Ma=sn(),rR;(function(e){function t(r){let n=r;return n!=null&&(Ma.number(n.value)||Ma.string(n.value))&&Ma.string(n.target)}e.is=t})(rR=Nn.DiagnosticCode||(Nn.DiagnosticCode={}));var Sf=class extends tR.Diagnostic{constructor(t,r,n,s){super(t,r,n);this.data=s,this.hasDiagnosticCode=!1}};Nn.ProtocolDiagnostic=Sf});var ja=ee(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});var nR=require("vscode"),Rf=class extends nR.CallHierarchyItem{constructor(t,r,n,s,a,i,o){super(t,r,n,s,a,i);o!==void 0&&(this.data=o)}};La.default=Rf});var Pf=ee(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.createConverter=void 0;var Gt=require("vscode"),st=St(),Ki=sn(),iR=Oa(),oR=Da(),sR=xa(),aR=ka(),wf=qa(),cR=ja(),uR=St(),Fa;(function(e){function t(r){let n=r;return n&&!!n.inserting&&!!n.replacing}e.is=t})(Fa||(Fa={}));function lR(e){let r=e||(E=>E.toString());function n(E){return r(E)}function s(E){return{uri:r(E.uri)}}function a(E){return{uri:r(E.uri),version:E.version}}function i(E){return{textDocument:{uri:r(E.uri),languageId:E.languageId,version:E.version,text:E.getText()}}}function o(E){let C=E;return!!C.document&&!!C.contentChanges}function c(E){let C=E;return!!C.uri&&!!C.version}function u(E){if(c(E))return{textDocument:{uri:r(E.uri),version:E.version},contentChanges:[{text:E.getText()}]};if(o(E)){let C=E.document;return{textDocument:{uri:r(C.uri),version:C.version},contentChanges:E.contentChanges.map(V=>{let ue=V.range;return{range:{start:{line:ue.start.line,character:ue.start.character},end:{line:ue.end.line,character:ue.end.character}},rangeLength:V.rangeLength,text:V.text}})}}else throw Error("Unsupported text document change parameter")}function d(E){return{textDocument:s(E)}}function l(E,C=!1){let L={textDocument:s(E)};return C&&(L.text=E.getText()),L}function p(E){switch(E){case Gt.TextDocumentSaveReason.Manual:return st.TextDocumentSaveReason.Manual;case Gt.TextDocumentSaveReason.AfterDelay:return st.TextDocumentSaveReason.AfterDelay;case Gt.TextDocumentSaveReason.FocusOut:return st.TextDocumentSaveReason.FocusOut}return st.TextDocumentSaveReason.Manual}function f(E){return{textDocument:s(E.document),reason:p(E.reason)}}function g(E){return{files:E.files.map(C=>({uri:r(C)}))}}function m(E){return{files:E.files.map(C=>({oldUri:r(C.oldUri),newUri:r(C.newUri)}))}}function v(E){return{files:E.files.map(C=>({uri:r(C)}))}}function y(E){return{files:E.files.map(C=>({uri:r(C)}))}}function T(E){return{files:E.files.map(C=>({oldUri:r(C.oldUri),newUri:r(C.newUri)}))}}function w(E){return{files:E.files.map(C=>({uri:r(C)}))}}function R(E,C){return{textDocument:s(E),position:ne(C)}}function O(E){switch(E){case Gt.CompletionTriggerKind.TriggerCharacter:return st.CompletionTriggerKind.TriggerCharacter;case Gt.CompletionTriggerKind.TriggerForIncompleteCompletions:return st.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return st.CompletionTriggerKind.Invoked}}function F(E,C,L){return{textDocument:s(E),position:ne(C),context:{triggerKind:O(L.triggerKind),triggerCharacter:L.triggerCharacter}}}function z(E){switch(E){case Gt.SignatureHelpTriggerKind.Invoke:return st.SignatureHelpTriggerKind.Invoked;case Gt.SignatureHelpTriggerKind.TriggerCharacter:return st.SignatureHelpTriggerKind.TriggerCharacter;case Gt.SignatureHelpTriggerKind.ContentChange:return st.SignatureHelpTriggerKind.ContentChange}}function K(E){return{label:E.label}}function J(E){return E.map(K)}function te(E){return{label:E.label,parameters:J(E.parameters)}}function U(E){return E.map(te)}function G(E){return E===void 0?E:{signatures:U(E.signatures),activeSignature:E.activeSignature,activeParameter:E.activeParameter}}function Q(E,C,L){return{textDocument:s(E),position:ne(C),context:{isRetrigger:L.isRetrigger,triggerCharacter:L.triggerCharacter,triggerKind:z(L.triggerKind),activeSignatureHelp:G(L.activeSignatureHelp)}}}function ne(E){return{line:E.line,character:E.character}}function ve(E){return E==null?E:{line:E.line,character:E.character}}function de(E){let C=[];for(let L of E)C.push(ve(L));return C}function X(E){return E==null?E:{start:ve(E.start),end:ve(E.end)}}function ce(E){return E==null?E:st.Location.create(n(E.uri),X(E.range))}function ie(E){switch(E){case Gt.DiagnosticSeverity.Error:return st.DiagnosticSeverity.Error;case Gt.DiagnosticSeverity.Warning:return st.DiagnosticSeverity.Warning;case Gt.DiagnosticSeverity.Information:return st.DiagnosticSeverity.Information;case Gt.DiagnosticSeverity.Hint:return st.DiagnosticSeverity.Hint}}function pe(E){if(!E)return;let C=[];for(let L of E){let V=he(L);V!==void 0&&C.push(V)}return C.length>0?C:void 0}function he(E){switch(E){case Gt.DiagnosticTag.Unnecessary:return st.DiagnosticTag.Unnecessary;case Gt.DiagnosticTag.Deprecated:return st.DiagnosticTag.Deprecated;default:return}}function Ce(E){return{message:E.message,location:ce(E.location)}}function _e(E){return E.map(Ce)}function Be(E){if(E!=null)return Ki.number(E)||Ki.string(E)?E:{value:E.value,target:n(E.target)}}function Je(E){let C=st.Diagnostic.create(X(E.range),E.message),L=E instanceof wf.ProtocolDiagnostic?E:void 0;L!==void 0&&L.data!==void 0&&(C.data=L.data);let V=Be(E.code);return wf.DiagnosticCode.is(V)?L!==void 0&&L.hasDiagnosticCode?C.code=V:(C.code=V.value,C.codeDescription={href:V.target}):C.code=V,Ki.number(E.severity)&&(C.severity=ie(E.severity)),Array.isArray(E.tags)&&(C.tags=pe(E.tags)),E.relatedInformation&&(C.relatedInformation=_e(E.relatedInformation)),E.source&&(C.source=E.source),C}function Ke(E){return E==null?E:E.map(Je)}function je(E,C){switch(E){case"$string":return C;case st.MarkupKind.PlainText:return{kind:E,value:C};case st.MarkupKind.Markdown:return{kind:E,value:C.value};default:return`Unsupported Markup content received. Kind is: ${E}`}}function xe(E){switch(E){case Gt.CompletionItemTag.Deprecated:return st.CompletionItemTag.Deprecated}}function it(E){if(E===void 0)return E;let C=[];for(let L of E){let V=xe(L);V!==void 0&&C.push(V)}return C}function ut(E,C){return C!==void 0?C:E+1}function Oe(E){let C={label:E.label},L=E instanceof iR.default?E:void 0;E.detail&&(C.detail=E.detail),E.documentation&&(!L||L.documentationFormat==="$string"?C.documentation=E.documentation:C.documentation=je(L.documentationFormat,E.documentation)),E.filterText&&(C.filterText=E.filterText),me(C,E),Ki.number(E.kind)&&(C.kind=ut(E.kind,L&&L.originalItemKind)),E.sortText&&(C.sortText=E.sortText),E.additionalTextEdits&&(C.additionalTextEdits=nr(E.additionalTextEdits)),E.commitCharacters&&(C.commitCharacters=E.commitCharacters.slice()),E.command&&(C.command=lt(E.command)),(E.preselect===!0||E.preselect===!1)&&(C.preselect=E.preselect);let V=it(E.tags);if(L){if(L.data!==void 0&&(C.data=L.data),L.deprecated===!0||L.deprecated===!1){if(L.deprecated===!0&&V!==void 0&&V.length>0){let ue=V.indexOf(Gt.CompletionItemTag.Deprecated);ue!==-1&&V.splice(ue,1)}C.deprecated=L.deprecated}L.insertTextMode!==void 0&&(C.insertTextMode=L.insertTextMode)}return V!==void 0&&V.length>0&&(C.tags=V),C.insertTextMode===void 0&&E.keepWhitespace===!0&&(C.insertTextMode=uR.InsertTextMode.adjustIndentation),C}function me(E,C){let L=st.InsertTextFormat.PlainText,V,ue;C.textEdit?(V=C.textEdit.newText,ue=C.textEdit.range):C.insertText instanceof Gt.SnippetString?(L=st.InsertTextFormat.Snippet,V=C.insertText.value):V=C.insertText,C.range&&(ue=C.range),E.insertTextFormat=L,C.fromEdit&&V!==void 0&&ue!==void 0?E.textEdit=Ae(V,ue):E.insertText=V}function Ae(E,C){return Fa.is(C)?st.InsertReplaceEdit.create(E,X(C.inserting),X(C.replacing)):{newText:E,range:X(C)}}function ke(E){return{range:X(E.range),newText:E.newText}}function nr(E){return E==null?E:E.map(ke)}function at(E){return E<=Gt.SymbolKind.TypeParameter?E+1:st.SymbolKind.Property}function re(E){return E}function Qt(E){return E.map(re)}function ir(E,C,L){return{textDocument:s(E),position:ne(C),context:{includeDeclaration:L.includeDeclaration}}}function ht(E){let C=st.CodeAction.create(E.title);if(E instanceof aR.default&&E.data!==void 0&&(C.data=E.data),E.kind!==void 0&&(C.kind=xt(E.kind)),E.diagnostics!==void 0&&(C.diagnostics=Ke(E.diagnostics)),E.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return E.command!==void 0&&(C.command=lt(E.command)),E.isPreferred!==void 0&&(C.isPreferred=E.isPreferred),E.disabled!==void 0&&(C.disabled={reason:E.disabled.reason}),C}function rt(E){if(E==null)return E;let C;return E.only&&Ki.string(E.only.value)&&(C=[E.only.value]),st.CodeActionContext.create(Ke(E.diagnostics),C)}function xt(E){if(E!=null)return E.value}function lt(E){let C=st.Command.create(E.title,E.command);return E.arguments&&(C.arguments=E.arguments),C}function Ft(E){let C=st.CodeLens.create(X(E.range));return E.command&&(C.command=lt(E.command)),E instanceof oR.default&&E.data&&(C.data=E.data),C}function Pt(E,C){let L={tabSize:E.tabSize,insertSpaces:E.insertSpaces};return C.trimTrailingWhitespace&&(L.trimTrailingWhitespace=!0),C.trimFinalNewlines&&(L.trimFinalNewlines=!0),C.insertFinalNewline&&(L.insertFinalNewline=!0),L}function M(E){return{textDocument:s(E)}}function N(E){return{textDocument:s(E)}}function P(E){let C=st.DocumentLink.create(X(E.range));E.target&&(C.target=n(E.target)),E.tooltip!==void 0&&(C.tooltip=E.tooltip);let L=E instanceof sR.default?E:void 0;return L&&L.data&&(C.data=L.data),C}function q(E){return{textDocument:s(E)}}function H(E){let C={name:E.name,kind:at(E.kind),uri:n(E.uri),range:X(E.range),selectionRange:X(E.selectionRange)};return E.detail!==void 0&&E.detail.length>0&&(C.detail=E.detail),E.tags!==void 0&&(C.tags=Qt(E.tags)),E instanceof cR.default&&E.data!==void 0&&(C.data=E.data),C}return{asUri:n,asTextDocumentIdentifier:s,asVersionedTextDocumentIdentifier:a,asOpenTextDocumentParams:i,asChangeTextDocumentParams:u,asCloseTextDocumentParams:d,asSaveTextDocumentParams:l,asWillSaveTextDocumentParams:f,asDidCreateFilesParams:g,asDidRenameFilesParams:m,asDidDeleteFilesParams:v,asWillCreateFilesParams:y,asWillRenameFilesParams:T,asWillDeleteFilesParams:w,asTextDocumentPositionParams:R,asCompletionParams:F,asSignatureHelpParams:Q,asWorkerPosition:ne,asRange:X,asPosition:ve,asPositions:de,asLocation:ce,asDiagnosticSeverity:ie,asDiagnosticTag:he,asDiagnostic:Je,asDiagnostics:Ke,asCompletionItem:Oe,asTextEdit:ke,asSymbolKind:at,asSymbolTag:re,asSymbolTags:Qt,asReferenceParams:ir,asCodeAction:ht,asCodeActionContext:rt,asCommand:lt,asCodeLens:Ft,asFormattingOptions:Pt,asDocumentSymbolParams:M,asCodeLensParams:N,asDocumentLink:P,asDocumentLinkParams:q,asCallHierarchyItem:H}}Mo.createConverter=lR});var Df=ee(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.createConverter=void 0;var Pe=require("vscode"),ze=St(),kr=sn(),dR=Oa(),pR=Da(),fR=xa(),hR=ka(),Of=qa(),gR=ja(),If=St(),qo;(function(e){function t(r){let n=r;return n&&kr.string(n.language)&&kr.string(n.value)}e.is=t})(qo||(qo={}));function mR(e,t){let n=e||(S=>Pe.Uri.parse(S));function s(S){return n(S)}function a(S){return S.map(i)}function i(S){let Z=new Of.ProtocolDiagnostic(p(S.range),S.message,g(S.severity),S.data);return S.code!==void 0&&(ze.CodeDescription.is(S.codeDescription)?Z.code={value:S.code,target:s(S.codeDescription.href)}:Of.DiagnosticCode.is(S.code)?(Z.hasDiagnosticCode=!0,Z.code={value:S.code.value,target:s(S.code.target)}):Z.code=S.code),S.source&&(Z.source=S.source),S.relatedInformation&&(Z.relatedInformation=o(S.relatedInformation)),Array.isArray(S.tags)&&(Z.tags=u(S.tags)),Z}function o(S){return S.map(c)}function c(S){return new Pe.DiagnosticRelatedInformation(X(S.location),S.message)}function u(S){if(!S)return;let Z=[];for(let ge of S){let Ge=d(ge);Ge!==void 0&&Z.push(Ge)}return Z.length>0?Z:void 0}function d(S){switch(S){case ze.DiagnosticTag.Unnecessary:return Pe.DiagnosticTag.Unnecessary;case ze.DiagnosticTag.Deprecated:return Pe.DiagnosticTag.Deprecated;default:return}}function l(S){if(!!S)return new Pe.Position(S.line,S.character)}function p(S){if(!!S)return new Pe.Range(l(S.start),l(S.end))}function f(S){return S.map(Z=>p(Z))}function g(S){if(S==null)return Pe.DiagnosticSeverity.Error;switch(S){case ze.DiagnosticSeverity.Error:return Pe.DiagnosticSeverity.Error;case ze.DiagnosticSeverity.Warning:return Pe.DiagnosticSeverity.Warning;case ze.DiagnosticSeverity.Information:return Pe.DiagnosticSeverity.Information;case ze.DiagnosticSeverity.Hint:return Pe.DiagnosticSeverity.Hint}return Pe.DiagnosticSeverity.Error}function m(S){if(kr.string(S))return y(S);if(qo.is(S))return y().appendCodeblock(S.value,S.language);if(Array.isArray(S)){let Z=[];for(let ge of S){let Ge=y();qo.is(ge)?Ge.appendCodeblock(ge.value,ge.language):Ge.appendMarkdown(ge),Z.push(Ge)}return Z}else{let Z;switch(S.kind){case ze.MarkupKind.Markdown:return y(S.value);case ze.MarkupKind.PlainText:return Z=y(),Z.appendText(S.value),Z;default:return Z=y(),Z.appendText(`Unsupported Markup content received. Kind is: ${S.kind}`),Z}}}function v(S){if(kr.string(S))return S;switch(S.kind){case ze.MarkupKind.Markdown:return y(S.value);case ze.MarkupKind.PlainText:return S.value;default:return`Unsupported Markup content received. Kind is: ${S.kind}`}}function y(S){let Z=new Pe.MarkdownString(S);return t===!0&&(Z.isTrusted=t),Z}function T(S){if(!!S)return new Pe.Hover(m(S.contents),p(S.range))}function w(S){if(!S)return;if(Array.isArray(S))return S.map(z);let Z=S;return new Pe.CompletionList(Z.items.map(z),Z.isIncomplete)}function R(S){return ze.CompletionItemKind.Text<=S&&S<=ze.CompletionItemKind.TypeParameter?[S-1,void 0]:[Pe.CompletionItemKind.Text,S]}function O(S){switch(S){case ze.CompletionItemTag.Deprecated:return Pe.CompletionItemTag.Deprecated}}function F(S){if(S==null)return[];let Z=[];for(let ge of S){let Ge=O(ge);Ge!==void 0&&Z.push(Ge)}return Z}function z(S){let Z=F(S.tags),ge=new dR.default(S.label);S.detail&&(ge.detail=S.detail),S.documentation&&(ge.documentation=v(S.documentation),ge.documentationFormat=kr.string(S.documentation)?"$string":S.documentation.kind),S.filterText&&(ge.filterText=S.filterText);let Ge=K(S);if(Ge&&(ge.insertText=Ge.text,ge.range=Ge.range,ge.fromEdit=Ge.fromEdit),kr.number(S.kind)){let[Qe,vt]=R(S.kind);ge.kind=Qe,vt&&(ge.originalItemKind=vt)}return S.sortText&&(ge.sortText=S.sortText),S.additionalTextEdits&&(ge.additionalTextEdits=U(S.additionalTextEdits)),kr.stringArray(S.commitCharacters)&&(ge.commitCharacters=S.commitCharacters.slice()),S.command&&(ge.command=ke(S.command)),(S.deprecated===!0||S.deprecated===!1)&&(ge.deprecated=S.deprecated,S.deprecated===!0&&Z.push(Pe.CompletionItemTag.Deprecated)),(S.preselect===!0||S.preselect===!1)&&(ge.preselect=S.preselect),S.data!==void 0&&(ge.data=S.data),Z.length>0&&(ge.tags=Z),S.insertTextMode!==void 0&&(ge.insertTextMode=S.insertTextMode,S.insertTextMode===If.InsertTextMode.asIs&&(ge.keepWhitespace=!0)),ge}function K(S){return S.textEdit?S.insertTextFormat===ze.InsertTextFormat.Snippet?{text:new Pe.SnippetString(S.textEdit.newText),range:J(S.textEdit),fromEdit:!0}:{text:S.textEdit.newText,range:J(S.textEdit),fromEdit:!0}:S.insertText?S.insertTextFormat===ze.InsertTextFormat.Snippet?{text:new Pe.SnippetString(S.insertText),fromEdit:!1}:{text:S.insertText,fromEdit:!1}:void 0}function J(S){return ze.InsertReplaceEdit.is(S)?{inserting:p(S.insert),replacing:p(S.replace)}:p(S.range)}function te(S){if(!!S)return new Pe.TextEdit(p(S.range),S.newText)}function U(S){if(!!S)return S.map(te)}function G(S){if(!S)return;let Z=new Pe.SignatureHelp;return kr.number(S.activeSignature)?Z.activeSignature=S.activeSignature:Z.activeSignature=0,kr.number(S.activeParameter)?Z.activeParameter=S.activeParameter:Z.activeParameter=0,S.signatures&&(Z.signatures=Q(S.signatures)),Z}function Q(S){return S.map(ne)}function ne(S){let Z=new Pe.SignatureInformation(S.label);return S.documentation!==void 0&&(Z.documentation=v(S.documentation)),S.parameters!==void 0&&(Z.parameters=ve(S.parameters)),S.activeParameter!==void 0&&(Z.activeParameter=S.activeParameter),Z}function ve(S){return S.map(de)}function de(S){let Z=new Pe.ParameterInformation(S.label);return S.documentation&&(Z.documentation=v(S.documentation)),Z}function X(S){if(!!S)return new Pe.Location(n(S.uri),p(S.range))}function ce(S){if(!!S)return he(S)}function ie(S){if(!!S)return he(S)}function pe(S){if(!S)return;let Z={targetUri:n(S.targetUri),targetRange:p(S.targetRange),originSelectionRange:p(S.originSelectionRange),targetSelectionRange:p(S.targetSelectionRange)};if(!Z.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return Z}function he(S){if(!!S)return kr.array(S)?S.length===0?[]:ze.LocationLink.is(S[0])?S.map(ge=>pe(ge)):S.map(ge=>X(ge)):ze.LocationLink.is(S)?[pe(S)]:X(S)}function Ce(S){if(!!S)return S.map(Z=>X(Z))}function _e(S){if(!!S)return S.map(Be)}function Be(S){let Z=new Pe.DocumentHighlight(p(S.range));return kr.number(S.kind)&&(Z.kind=Je(S.kind)),Z}function Je(S){switch(S){case ze.DocumentHighlightKind.Text:return Pe.DocumentHighlightKind.Text;case ze.DocumentHighlightKind.Read:return Pe.DocumentHighlightKind.Read;case ze.DocumentHighlightKind.Write:return Pe.DocumentHighlightKind.Write}return Pe.DocumentHighlightKind.Text}function Ke(S,Z){if(!!S)return S.map(ge=>ut(ge,Z))}function je(S){return S<=ze.SymbolKind.TypeParameter?S-1:Pe.SymbolKind.Property}function xe(S){switch(S){case ze.SymbolTag.Deprecated:return Pe.SymbolTag.Deprecated;default:return}}function it(S){if(S==null)return;let Z=[];for(let ge of S){let Ge=xe(ge);Ge!==void 0&&Z.push(Ge)}return Z.length===0?void 0:Z}function ut(S,Z){let ge=new Pe.SymbolInformation(S.name,je(S.kind),p(S.location.range),S.location.uri?n(S.location.uri):Z);return Ae(ge,S),S.containerName&&(ge.containerName=S.containerName),ge}function Oe(S){if(S!=null)return S.map(me)}function me(S){let Z=new Pe.DocumentSymbol(S.name,S.detail||"",je(S.kind),p(S.range),p(S.selectionRange));if(Ae(Z,S),S.children!==void 0&&S.children.length>0){let ge=[];for(let Ge of S.children)ge.push(me(Ge));Z.children=ge}return Z}function Ae(S,Z){S.tags=it(Z.tags),Z.deprecated&&(S.tags?S.tags.includes(Pe.SymbolTag.Deprecated)||(S.tags=S.tags.concat(Pe.SymbolTag.Deprecated)):S.tags=[Pe.SymbolTag.Deprecated])}function ke(S){let Z={title:S.title,command:S.command};return S.arguments&&(Z.arguments=S.arguments),Z}function nr(S){if(!!S)return S.map(ke)}let at=new Map;at.set(ze.CodeActionKind.Empty,Pe.CodeActionKind.Empty),at.set(ze.CodeActionKind.QuickFix,Pe.CodeActionKind.QuickFix),at.set(ze.CodeActionKind.Refactor,Pe.CodeActionKind.Refactor),at.set(ze.CodeActionKind.RefactorExtract,Pe.CodeActionKind.RefactorExtract),at.set(ze.CodeActionKind.RefactorInline,Pe.CodeActionKind.RefactorInline),at.set(ze.CodeActionKind.RefactorRewrite,Pe.CodeActionKind.RefactorRewrite),at.set(ze.CodeActionKind.Source,Pe.CodeActionKind.Source),at.set(ze.CodeActionKind.SourceOrganizeImports,Pe.CodeActionKind.SourceOrganizeImports);function re(S){if(S==null)return;let Z=at.get(S);if(Z)return Z;let ge=S.split(".");Z=Pe.CodeActionKind.Empty;for(let Ge of ge)Z=Z.append(Ge);return Z}function Qt(S){if(S!=null)return S.map(Z=>re(Z))}function ir(S){if(S==null)return;let Z=new hR.default(S.title,S.data);return S.kind!==void 0&&(Z.kind=re(S.kind)),S.diagnostics!==void 0&&(Z.diagnostics=a(S.diagnostics)),S.edit!==void 0&&(Z.edit=xt(S.edit)),S.command!==void 0&&(Z.command=ke(S.command)),S.isPreferred!==void 0&&(Z.isPreferred=S.isPreferred),S.disabled!==void 0&&(Z.disabled={reason:S.disabled.reason}),Z}function ht(S){if(!S)return;let Z=new pR.default(p(S.range));return S.command&&(Z.command=ke(S.command)),S.data!==void 0&&S.data!==null&&(Z.data=S.data),Z}function rt(S){if(!!S)return S.map(Z=>ht(Z))}function xt(S){if(!S)return;let Z=new Map;if(S.changeAnnotations!==void 0)for(let Qe of Object.keys(S.changeAnnotations)){let vt=lt(S.changeAnnotations[Qe]);Z.set(Qe,vt)}let ge=Qe=>{if(Qe!==void 0)return Z.get(Qe)},Ge=new Pe.WorkspaceEdit;if(S.documentChanges)for(let Qe of S.documentChanges)if(ze.CreateFile.is(Qe))Ge.createFile(n(Qe.uri),Qe.options,ge(Qe.annotationId));else if(ze.RenameFile.is(Qe))Ge.renameFile(n(Qe.oldUri),n(Qe.newUri),Qe.options,ge(Qe.annotationId));else if(ze.DeleteFile.is(Qe))Ge.deleteFile(n(Qe.uri),Qe.options,ge(Qe.annotationId));else if(ze.TextDocumentEdit.is(Qe)){let vt=n(Qe.textDocument.uri);for(let ur of Qe.edits)If.AnnotatedTextEdit.is(ur)?Ge.replace(vt,p(ur.range),ur.newText,ge(ur.annotationId)):Ge.replace(vt,p(ur.range),ur.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Qe,void 0,4)}`);else S.changes&&Object.keys(S.changes).forEach(Qe=>{Ge.set(n(Qe),U(S.changes[Qe]))});return Ge}function lt(S){if(S!==void 0)return{label:S.label,needsConfirmation:!!S.needsConfirmation,description:S.description}}function Ft(S){let Z=p(S.range),ge=S.target?s(S.target):void 0,Ge=new fR.default(Z,ge);return S.tooltip!==void 0&&(Ge.tooltip=S.tooltip),S.data!==void 0&&S.data!==null&&(Ge.data=S.data),Ge}function Pt(S){if(!!S)return S.map(Ft)}function M(S){return new Pe.Color(S.red,S.green,S.blue,S.alpha)}function N(S){return new Pe.ColorInformation(p(S.range),M(S.color))}function P(S){if(Array.isArray(S))return S.map(N)}function q(S){let Z=new Pe.ColorPresentation(S.label);return Z.additionalTextEdits=U(S.additionalTextEdits),S.textEdit&&(Z.textEdit=te(S.textEdit)),Z}function H(S){if(Array.isArray(S))return S.map(q)}function E(S){if(S)switch(S){case ze.FoldingRangeKind.Comment:return Pe.FoldingRangeKind.Comment;case ze.FoldingRangeKind.Imports:return Pe.FoldingRangeKind.Imports;case ze.FoldingRangeKind.Region:return Pe.FoldingRangeKind.Region}}function C(S){return new Pe.FoldingRange(S.startLine,S.endLine,E(S.kind))}function L(S){if(Array.isArray(S))return S.map(C)}function V(S){return new Pe.SelectionRange(p(S.range),S.parent?V(S.parent):void 0)}function ue(S){if(!Array.isArray(S))return[];let Z=[];for(let ge of S)Z.push(V(ge));return Z}function fe(S){if(S===null)return;let Z=new gR.default(je(S.kind),S.name,S.detail||"",s(S.uri),p(S.range),p(S.selectionRange),S.data);return S.tags!==void 0&&(Z.tags=it(S.tags)),Z}function Re(S){if(S!==null)return S.map(Z=>fe(Z))}function ye(S){return new Pe.CallHierarchyIncomingCall(fe(S.from),f(S.fromRanges))}function Fe(S){if(S!==null)return S.map(Z=>ye(Z))}function le(S){return new Pe.CallHierarchyOutgoingCall(fe(S.to),f(S.fromRanges))}function Me(S){if(S!==null)return S.map(Z=>le(Z))}function Nt(S){if(S!=null)return new Pe.SemanticTokens(new Uint32Array(S.data),S.resultId)}function De(S){return new Pe.SemanticTokensEdit(S.start,S.deleteCount,S.data!==void 0?new Uint32Array(S.data):void 0)}function Ht(S){if(S!=null)return new Pe.SemanticTokensEdits(S.edits.map(De),S.resultId)}function $r(S){return S}function Ur(S){if(S!=null)return new Pe.LinkedEditingRanges(f(S.ranges),Br(S.wordPattern))}function Br(S){if(S!=null)return new RegExp(S)}return{asUri:s,asDiagnostics:a,asDiagnostic:i,asRange:p,asRanges:f,asPosition:l,asDiagnosticSeverity:g,asDiagnosticTag:d,asHover:T,asCompletionResult:w,asCompletionItem:z,asTextEdit:te,asTextEdits:U,asSignatureHelp:G,asSignatureInformations:Q,asSignatureInformation:ne,asParameterInformations:ve,asParameterInformation:de,asDeclarationResult:ce,asDefinitionResult:ie,asLocation:X,asReferences:Ce,asDocumentHighlights:_e,asDocumentHighlight:Be,asDocumentHighlightKind:Je,asSymbolKind:je,asSymbolTag:xe,asSymbolTags:it,asSymbolInformations:Ke,asSymbolInformation:ut,asDocumentSymbols:Oe,asDocumentSymbol:me,asCommand:ke,asCommands:nr,asCodeAction:ir,asCodeActionKind:re,asCodeActionKinds:Qt,asCodeLens:ht,asCodeLenses:rt,asWorkspaceEdit:xt,asDocumentLink:Ft,asDocumentLinks:Pt,asFoldingRangeKind:E,asFoldingRange:C,asFoldingRanges:L,asColor:M,asColorInformation:N,asColorInformations:P,asColorPresentation:q,asColorPresentations:H,asSelectionRange:V,asSelectionRanges:ue,asSemanticTokensLegend:$r,asSemanticTokens:Nt,asSemanticTokensEdit:De,asSemanticTokensEdits:Ht,asCallHierarchyItem:fe,asCallHierarchyItems:Re,asCallHierarchyIncomingCall:ye,asCallHierarchyIncomingCalls:Fe,asCallHierarchyOutgoingCall:le,asCallHierarchyOutgoingCalls:Me,asLinkedEditingRanges:Ur}}Lo.createConverter=mR});var Nf=ee(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.Delayer=void 0;var Af=St(),xf=class{constructor(t){this.defaultDelay=t,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(t,r=this.defaultDelay){return this.task=t,r>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(r>=0||this.timeout===void 0)&&(this.timeout=Af.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},r>=0?r:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let t=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,t}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(Af.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}};jo.Delayer=xf});var Ho=ee(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.generateUuid=Sr.parse=Sr.isUUID=Sr.v4=Sr.empty=void 0;var Fo=class{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},Xe=class extends Fo{constructor(){super([Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),"-",Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),"-","4",Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),"-",Xe._oneOf(Xe._timeHighBits),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),"-",Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex(),Xe._randomHex()].join(""))}static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return Xe._oneOf(Xe._chars)}};Xe._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Xe._timeHighBits=["8","9","a","b"];Sr.empty=new Fo("00000000-0000-0000-0000-000000000000");function kf(){return new Xe}Sr.v4=kf;var vR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Mf(e){return vR.test(e)}Sr.isUUID=Mf;function _R(e){if(!Mf(e))throw new Error("invalid uuid");return new Fo(e)}Sr.parse=_R;function yR(){return kf().asHex()}Sr.generateUuid=yR});var Ha=ee($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.ProgressPart=void 0;var qf=require("vscode"),Lf=St(),jf=sn(),Ff=class{constructor(t,r,n){this._client=t,this._token=r,this._reported=0,this._disposable=this._client.onProgress(Lf.WorkDoneProgress.type,this._token,s=>{switch(s.kind){case"begin":this.begin(s);break;case"report":this.report(s);break;case"end":this.done(),n&&n(this);break}})}begin(t){qf.window.withProgress({location:qf.ProgressLocation.Window,cancellable:t.cancellable,title:t.title},async(r,n)=>(this._progress=r,this._infinite=t.percentage===void 0,this._cancellationToken=n,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Lf.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(t),new Promise((s,a)=>{this._resolve=s,this._reject=a})))}report(t){if(this._infinite&&jf.string(t.message))this._progress.report({message:t.message});else if(jf.number(t.percentage)){let r=Math.max(0,Math.min(t.percentage,100)),n=Math.max(0,r-this._reported);this._progress.report({message:t.message,increment:n}),this._reported+=n}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};$o.ProgressPart=Ff});var gr=ee(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.BaseLanguageClient=Dt.MessageTransports=Dt.TextDocumentFeature=Dt.State=Dt.RevealOutputChannelOn=Dt.CloseAction=Dt.ErrorAction=void 0;var be=require("vscode"),j=St(),ER=wa(),CR=Pf(),bR=Df(),pt=sn(),Hf=Nf(),ft=Ho(),TR=Ha(),$f=class{error(t){j.RAL().console.error(t)}warn(t){j.RAL().console.warn(t)}info(t){j.RAL().console.info(t)}log(t){j.RAL().console.log(t)}};function SR(e,t,r,n,s){let a=new $f,i=j.createProtocolConnection(e,t,a,s);return i.onError(c=>{r(c[0],c[1],c[2])}),i.onClose(n),{listen:()=>i.listen(),sendRequest:(c,...u)=>i.sendRequest(pt.string(c)?c:c.method,...u),onRequest:(c,u)=>i.onRequest(pt.string(c)?c:c.method,u),sendNotification:(c,u)=>i.sendNotification(pt.string(c)?c:c.method,u),onNotification:(c,u)=>i.onNotification(pt.string(c)?c:c.method,u),onProgress:i.onProgress,sendProgress:i.sendProgress,trace:(c,u,d)=>{let l={sendNotification:!1,traceFormat:j.TraceFormat.Text};d===void 0?i.trace(c,u,l):(pt.boolean(d),i.trace(c,u,d))},initialize:c=>i.sendRequest(j.InitializeRequest.type,c),shutdown:()=>i.sendRequest(j.ShutdownRequest.type,void 0),exit:()=>i.sendNotification(j.ExitNotification.type),onLogMessage:c=>i.onNotification(j.LogMessageNotification.type,c),onShowMessage:c=>i.onNotification(j.ShowMessageNotification.type,c),onTelemetry:c=>i.onNotification(j.TelemetryEventNotification.type,c),didChangeConfiguration:c=>i.sendNotification(j.DidChangeConfigurationNotification.type,c),didChangeWatchedFiles:c=>i.sendNotification(j.DidChangeWatchedFilesNotification.type,c),didOpenTextDocument:c=>i.sendNotification(j.DidOpenTextDocumentNotification.type,c),didChangeTextDocument:c=>i.sendNotification(j.DidChangeTextDocumentNotification.type,c),didCloseTextDocument:c=>i.sendNotification(j.DidCloseTextDocumentNotification.type,c),didSaveTextDocument:c=>i.sendNotification(j.DidSaveTextDocumentNotification.type,c),onDiagnostics:c=>i.onNotification(j.PublishDiagnosticsNotification.type,c),end:()=>i.end(),dispose:()=>i.dispose()}}var Bo;(function(e){e[e.Continue=1]="Continue",e[e.Shutdown=2]="Shutdown"})(Bo=Dt.ErrorAction||(Dt.ErrorAction={}));var kn;(function(e){e[e.DoNotRestart=1]="DoNotRestart",e[e.Restart=2]="Restart"})(kn=Dt.CloseAction||(Dt.CloseAction={}));var Uf=class{constructor(t,r){this.name=t,this.maxRestartCount=r,this.restarts=[]}error(t,r,n){return n&&n<=3?Bo.Continue:Bo.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?kn.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(be.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),kn.DoNotRestart):(this.restarts.shift(),kn.Restart)}},zi;(function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"})(zi=Dt.RevealOutputChannelOn||(Dt.RevealOutputChannelOn={}));var Uo;(function(e){e[e.Stopped=1]="Stopped",e[e.Starting=3]="Starting",e[e.Running=2]="Running"})(Uo=Dt.State||(Dt.State={}));var bt;(function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.StartFailed=2]="StartFailed",e[e.Running=3]="Running",e[e.Stopping=4]="Stopping",e[e.Stopped=5]="Stopped"})(bt||(bt={}));var Bf=[j.SymbolKind.File,j.SymbolKind.Module,j.SymbolKind.Namespace,j.SymbolKind.Package,j.SymbolKind.Class,j.SymbolKind.Method,j.SymbolKind.Property,j.SymbolKind.Field,j.SymbolKind.Constructor,j.SymbolKind.Enum,j.SymbolKind.Interface,j.SymbolKind.Function,j.SymbolKind.Variable,j.SymbolKind.Constant,j.SymbolKind.String,j.SymbolKind.Number,j.SymbolKind.Boolean,j.SymbolKind.Array,j.SymbolKind.Object,j.SymbolKind.Key,j.SymbolKind.Null,j.SymbolKind.EnumMember,j.SymbolKind.Struct,j.SymbolKind.Event,j.SymbolKind.Operator,j.SymbolKind.TypeParameter],RR=[j.CompletionItemKind.Text,j.CompletionItemKind.Method,j.CompletionItemKind.Function,j.CompletionItemKind.Constructor,j.CompletionItemKind.Field,j.CompletionItemKind.Variable,j.CompletionItemKind.Class,j.CompletionItemKind.Interface,j.CompletionItemKind.Module,j.CompletionItemKind.Property,j.CompletionItemKind.Unit,j.CompletionItemKind.Value,j.CompletionItemKind.Enum,j.CompletionItemKind.Keyword,j.CompletionItemKind.Snippet,j.CompletionItemKind.Color,j.CompletionItemKind.File,j.CompletionItemKind.Reference,j.CompletionItemKind.Folder,j.CompletionItemKind.EnumMember,j.CompletionItemKind.Constant,j.CompletionItemKind.Struct,j.CompletionItemKind.Event,j.CompletionItemKind.Operator,j.CompletionItemKind.TypeParameter],Gf=[j.SymbolTag.Deprecated];function Ie(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Xi;(function(e){function t(r){let n=be.workspace.getConfiguration("files",r);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}}e.fromConfiguration=t})(Xi||(Xi={}));var $a;(function(e){function t(r){let n=r;return n&&pt.func(n.register)&&pt.func(n.unregister)&&pt.func(n.dispose)&&n.registrationType!==void 0}e.is=t})($a||($a={}));var jr=class{constructor(t,r,n,s,a,i){this._client=t,this._event=r,this._type=n,this._middleware=s,this._createParams=a,this._selectorFilter=i,this._selectors=new Map}static textDocumentFilter(t,r){for(let n of t)if(be.languages.match(n,r))return!0;return!1}register(t){!t.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(t){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),t))&&(this._middleware?this._middleware(t,r=>this._client.sendNotification(this._type,this._createParams(r))):this._client.sendNotification(this._type,this._createParams(t)),this.notificationSent(t))}notificationSent(t){}unregister(t){this._selectors.delete(t),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(t){for(let r of this._selectors.values())if(be.languages.match(r,t))return{send:n=>{this.callback(n)}}}},Vf=class extends jr{constructor(t,r){super(t,be.workspace.onDidOpenTextDocument,j.DidOpenTextDocumentNotification.type,t.clientOptions.middleware.didOpen,n=>t.code2ProtocolConverter.asOpenTextDocumentParams(n),jr.textDocumentFilter);this._syncedDocuments=r}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:ft.generateUuid(),registerOptions:{documentSelector:r}})}get registrationType(){return j.DidOpenTextDocumentNotification.type}register(t){if(super.register(t),!t.registerOptions.documentSelector)return;let r=t.registerOptions.documentSelector;be.workspace.textDocuments.forEach(n=>{let s=n.uri.toString();if(!this._syncedDocuments.has(s)&&be.languages.match(r,n)){let a=this._client.clientOptions.middleware,i=o=>{this._client.sendNotification(this._type,this._createParams(o))};a.didOpen?a.didOpen(n,i):i(n),this._syncedDocuments.set(s,n)}})}notificationSent(t){super.notificationSent(t),this._syncedDocuments.set(t.uri.toString(),t)}},Wf=class extends jr{constructor(t,r){super(t,be.workspace.onDidCloseTextDocument,j.DidCloseTextDocumentNotification.type,t.clientOptions.middleware.didClose,n=>t.code2ProtocolConverter.asCloseTextDocumentParams(n),jr.textDocumentFilter);this._syncedDocuments=r}get registrationType(){return j.DidCloseTextDocumentNotification.type}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:ft.generateUuid(),registerOptions:{documentSelector:r}})}notificationSent(t){super.notificationSent(t),this._syncedDocuments.delete(t.uri.toString())}unregister(t){let r=this._selectors.get(t);super.unregister(t);let n=this._selectors.values();this._syncedDocuments.forEach(s=>{if(be.languages.match(r,s)&&!this._selectorFilter(n,s)){let a=this._client.clientOptions.middleware,i=o=>{this._client.sendNotification(this._type,this._createParams(o))};this._syncedDocuments.delete(s.uri.toString()),a.didClose?a.didClose(s,i):i(s)}})}},Kf=class{constructor(t){this._client=t,this._changeData=new Map,this._forcingDelivery=!1}get registrationType(){return j.DidChangeTextDocumentNotification.type}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.change!==void 0&&n.change!==j.TextDocumentSyncKind.None&&this.register({id:ft.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},{syncKind:n.change})})}register(t){!t.registerOptions.documentSelector||(this._listener||(this._listener=be.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind}))}callback(t){if(t.contentChanges.length!==0){for(let r of this._changeData.values())if(be.languages.match(r.documentSelector,t.document)){let n=this._client.clientOptions.middleware;if(r.syncKind===j.TextDocumentSyncKind.Incremental){let s=this._client.code2ProtocolConverter.asChangeTextDocumentParams(t);n.didChange?n.didChange(t,()=>this._client.sendNotification(j.DidChangeTextDocumentNotification.type,s)):this._client.sendNotification(j.DidChangeTextDocumentNotification.type,s)}else if(r.syncKind===j.TextDocumentSyncKind.Full){let s=a=>{this._changeDelayer?(this._changeDelayer.uri!==a.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=a.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(j.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(a.document))})):(this._changeDelayer={uri:a.document.uri.toString(),delayer:new Hf.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(j.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(a.document))},-1))};n.didChange?n.didChange(t,s):s(t)}}}}unregister(t){this._changeData.delete(t),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(t){for(let r of this._changeData.values())if(be.languages.match(r.documentSelector,t))return{send:n=>{this.callback(n)}}}},zf=class extends jr{constructor(t){super(t,be.workspace.onWillSaveTextDocument,j.WillSaveTextDocumentNotification.type,t.clientOptions.middleware.willSave,r=>t.code2ProtocolConverter.asWillSaveTextDocumentParams(r),(r,n)=>jr.textDocumentFilter(r,n.document))}get registrationType(){return j.WillSaveTextDocumentNotification.type}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"synchronization");r.willSave=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.willSave&&this.register({id:ft.generateUuid(),registerOptions:{documentSelector:r}})}},Xf=class{constructor(t){this._client=t,this._selectors=new Map}get registrationType(){return j.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"synchronization");r.willSaveWaitUntil=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.willSaveWaitUntil&&this.register({id:ft.generateUuid(),registerOptions:{documentSelector:r}})}register(t){!t.registerOptions.documentSelector||(this._listener||(this._listener=be.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(t){if(jr.textDocumentFilter(this._selectors.values(),t.document)){let r=this._client.clientOptions.middleware,n=s=>this._client.sendRequest(j.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(s)).then(a=>{let i=this._client.protocol2CodeConverter.asTextEdits(a);return i===void 0?[]:i});t.waitUntil(r.willSaveWaitUntil?r.willSaveWaitUntil(t,n):n(t))}}unregister(t){this._selectors.delete(t),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},Yf=class extends jr{constructor(t){super(t,be.workspace.onDidSaveTextDocument,j.DidSaveTextDocumentNotification.type,t.clientOptions.middleware.didSave,r=>t.code2ProtocolConverter.asSaveTextDocumentParams(r,this._includeText),jr.textDocumentFilter);this._includeText=!1}get registrationType(){return j.DidSaveTextDocumentNotification.type}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"synchronization").didSave=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;if(r&&n&&n.save){let s=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:ft.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},s)})}}register(t){this._includeText=!!t.registerOptions.includeText,super.register(t)}},Qf=class{constructor(t,r){this._client=t,this._notifyFileEvent=r,this._watchers=new Map}get registrationType(){return j.DidChangeWatchedFilesNotification.type}fillClientCapabilities(t){Ie(Ie(t,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(t,r){}register(t){if(!Array.isArray(t.registerOptions.watchers))return;let r=[];for(let n of t.registerOptions.watchers){if(!pt.string(n.globPattern))continue;let s=!0,a=!0,i=!0;n.kind!==void 0&&n.kind!==null&&(s=(n.kind&j.WatchKind.Create)!==0,a=(n.kind&j.WatchKind.Change)!==0,i=(n.kind&j.WatchKind.Delete)!==0);let o=be.workspace.createFileSystemWatcher(n.globPattern,!s,!a,!i);this.hookListeners(o,s,a,i),r.push(o)}this._watchers.set(t.id,r)}registerRaw(t,r){let n=[];for(let s of r)this.hookListeners(s,!0,!0,!0,n);this._watchers.set(t,n)}hookListeners(t,r,n,s,a){r&&t.onDidCreate(i=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(i),type:j.FileChangeType.Created}),null,a),n&&t.onDidChange(i=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(i),type:j.FileChangeType.Changed}),null,a),s&&t.onDidDelete(i=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(i),type:j.FileChangeType.Deleted}),null,a)}unregister(t){let r=this._watchers.get(t);if(r)for(let n of r)n.dispose()}dispose(){this._watchers.forEach(t=>{for(let r of t)r.dispose()}),this._watchers.clear()}},tr=class{constructor(t,r){this._client=t,this._registrationType=r,this._registrations=new Map}get registrationType(){return this._registrationType}register(t){if(!t.registerOptions.documentSelector)return;let r=this.registerLanguageProvider(t.registerOptions);this._registrations.set(t.id,{disposable:r[0],data:t,provider:r[1]})}unregister(t){let r=this._registrations.get(t);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(t=>{t.disposable.dispose()}),this._registrations.clear()}getRegistration(t,r){if(r){if(j.TextDocumentRegistrationOptions.is(r)){let n=j.StaticRegistrationOptions.hasId(r)?r.id:ft.generateUuid(),s=r.documentSelector||t;if(s)return[n,Object.assign({},r,{documentSelector:s})]}else if(pt.boolean(r)&&r===!0||j.WorkDoneProgressOptions.is(r)){if(!t)return[void 0,void 0];let n=pt.boolean(r)&&r===!0?{documentSelector:t}:Object.assign({},r,{documentSelector:t});return[ft.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(t,r){if(!(!t||!r))return pt.boolean(r)&&r===!0?{documentSelector:t}:Object.assign({},r,{documentSelector:t})}getProvider(t){for(let r of this._registrations.values()){let n=r.data.registerOptions.documentSelector;if(n!==null&&be.languages.match(n,t))return r.provider}}getAllProviders(){let t=[];for(let r of this._registrations.values())t.push(r.provider);return t}};Dt.TextDocumentFeature=tr;var Jf=class{constructor(t,r){this._client=t,this._registrationType=r,this._registrations=new Map}get registrationType(){return this._registrationType}register(t){let r=this.registerLanguageProvider(t.registerOptions);this._registrations.set(t.id,{disposable:r[0],provider:r[1]})}unregister(t){let r=this._registrations.get(t);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(t=>{t.disposable.dispose()}),this._registrations.clear()}getProviders(){let t=[];for(let r of this._registrations.values())t.push(r.provider);return t}},Zf=class extends tr{constructor(t){super(t,j.CompletionRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"completion");r.dynamicRegistration=!0,r.contextSupport=!0,r.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[j.MarkupKind.Markdown,j.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[j.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[j.InsertTextMode.asIs,j.InsertTextMode.adjustIndentation]}},r.completionItemKind={valueSet:RR}}initialize(t,r){let n=this.getRegistrationOptions(r,t.completionProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r=t.triggerCharacters||[],n={provideCompletionItems:(s,a,i,o)=>{let c=this._client,u=this._client.clientOptions.middleware,d=(l,p,f,g)=>c.sendRequest(j.CompletionRequest.type,c.code2ProtocolConverter.asCompletionParams(l,p,f),g).then(c.protocol2CodeConverter.asCompletionResult,m=>c.handleFailedRequest(j.CompletionRequest.type,m,null));return u.provideCompletionItem?u.provideCompletionItem(s,a,o,i,d):d(s,a,o,i)},resolveCompletionItem:t.resolveProvider?(s,a)=>{let i=this._client,o=this._client.clientOptions.middleware,c=(u,d)=>i.sendRequest(j.CompletionResolveRequest.type,i.code2ProtocolConverter.asCompletionItem(u),d).then(i.protocol2CodeConverter.asCompletionItem,l=>i.handleFailedRequest(j.CompletionResolveRequest.type,l,u));return o.resolveCompletionItem?o.resolveCompletionItem(s,a,c):c(s,a)}:void 0};return[be.languages.registerCompletionItemProvider(t.documentSelector,n,...r),n]}},eh=class extends tr{constructor(t){super(t,j.HoverRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"hover");r.dynamicRegistration=!0,r.contentFormat=[j.MarkupKind.Markdown,j.MarkupKind.PlainText]}initialize(t,r){let n=this.getRegistrationOptions(r,t.hoverProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideHover:(n,s,a)=>{let i=this._client,o=(u,d,l)=>i.sendRequest(j.HoverRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asHover,p=>i.handleFailedRequest(j.HoverRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideHover?c.provideHover(n,s,a,o):o(n,s,a)}};return[be.languages.registerHoverProvider(t.documentSelector,r),r]}},th=class extends tr{constructor(t){super(t,j.SignatureHelpRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"signatureHelp");r.dynamicRegistration=!0,r.signatureInformation={documentationFormat:[j.MarkupKind.Markdown,j.MarkupKind.PlainText]},r.signatureInformation.parameterInformation={labelOffsetSupport:!0},r.signatureInformation.activeParameterSupport=!0,r.contextSupport=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.signatureHelpProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideSignatureHelp:(s,a,i,o)=>{let c=this._client,u=(l,p,f,g)=>c.sendRequest(j.SignatureHelpRequest.type,c.code2ProtocolConverter.asSignatureHelpParams(l,p,f),g).then(c.protocol2CodeConverter.asSignatureHelp,m=>c.handleFailedRequest(j.SignatureHelpRequest.type,m,null)),d=c.clientOptions.middleware;return d.provideSignatureHelp?d.provideSignatureHelp(s,a,o,i,u):u(s,a,o,i)}},n;if(t.retriggerCharacters===void 0){let s=t.triggerCharacters||[];n=be.languages.registerSignatureHelpProvider(t.documentSelector,r,...s)}else{let s={triggerCharacters:t.triggerCharacters||[],retriggerCharacters:t.retriggerCharacters||[]};n=be.languages.registerSignatureHelpProvider(t.documentSelector,r,s)}return[n,r]}},rh=class extends tr{constructor(t){super(t,j.DefinitionRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"definition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.definitionProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDefinition:(n,s,a)=>{let i=this._client,o=(u,d,l)=>i.sendRequest(j.DefinitionRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asDefinitionResult,p=>i.handleFailedRequest(j.DefinitionRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideDefinition?c.provideDefinition(n,s,a,o):o(n,s,a)}};return[be.languages.registerDefinitionProvider(t.documentSelector,r),r]}},nh=class extends tr{constructor(t){super(t,j.ReferencesRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"references").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.referencesProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideReferences:(n,s,a,i)=>{let o=this._client,c=(d,l,p,f)=>o.sendRequest(j.ReferencesRequest.type,o.code2ProtocolConverter.asReferenceParams(d,l,p),f).then(o.protocol2CodeConverter.asReferences,g=>o.handleFailedRequest(j.ReferencesRequest.type,g,null)),u=o.clientOptions.middleware;return u.provideReferences?u.provideReferences(n,s,a,i,c):c(n,s,a,i)}};return[be.languages.registerReferenceProvider(t.documentSelector,r),r]}},ih=class extends tr{constructor(t){super(t,j.DocumentHighlightRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentHighlightProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentHighlights:(n,s,a)=>{let i=this._client,o=(u,d,l)=>i.sendRequest(j.DocumentHighlightRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asDocumentHighlights,p=>i.handleFailedRequest(j.DocumentHighlightRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideDocumentHighlights?c.provideDocumentHighlights(n,s,a,o):o(n,s,a)}};return[be.languages.registerDocumentHighlightProvider(t.documentSelector,r),r]}},oh=class extends tr{constructor(t){super(t,j.DocumentSymbolRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"documentSymbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:Bf},r.hierarchicalDocumentSymbolSupport=!0,r.tagSupport={valueSet:Gf},r.labelSupport=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentSymbolProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentSymbols:(s,a)=>{let i=this._client,o=(u,d)=>i.sendRequest(j.DocumentSymbolRequest.type,i.code2ProtocolConverter.asDocumentSymbolParams(u),d).then(l=>{if(l!==null){if(l.length===0)return[];{let p=l[0];return j.DocumentSymbol.is(p)?i.protocol2CodeConverter.asDocumentSymbols(l):i.protocol2CodeConverter.asSymbolInformations(l)}}},l=>i.handleFailedRequest(j.DocumentSymbolRequest.type,l,null)),c=i.clientOptions.middleware;return c.provideDocumentSymbols?c.provideDocumentSymbols(s,a,o):o(s,a)}},n=t.label!==void 0?{label:t.label}:void 0;return[be.languages.registerDocumentSymbolProvider(t.documentSelector,r,n),r]}},sh=class extends Jf{constructor(t){super(t,j.WorkspaceSymbolRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"workspace"),"symbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:Bf},r.tagSupport={valueSet:Gf}}initialize(t){!t.workspaceSymbolProvider||this.register({id:ft.generateUuid(),registerOptions:t.workspaceSymbolProvider===!0?{workDoneProgress:!1}:t.workspaceSymbolProvider})}registerLanguageProvider(t){let r={provideWorkspaceSymbols:(n,s)=>{let a=this._client,i=(c,u)=>a.sendRequest(j.WorkspaceSymbolRequest.type,{query:c},u).then(a.protocol2CodeConverter.asSymbolInformations,d=>a.handleFailedRequest(j.WorkspaceSymbolRequest.type,d,null)),o=a.clientOptions.middleware;return o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(n,s,i):i(n,s)}};return[be.languages.registerWorkspaceSymbolProvider(r),r]}},ah=class extends tr{constructor(t){super(t,j.CodeActionRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"codeAction");r.dynamicRegistration=!0,r.isPreferredSupport=!0,r.disabledSupport=!0,r.dataSupport=!0,r.resolveSupport={properties:["edit"]},r.codeActionLiteralSupport={codeActionKind:{valueSet:[j.CodeActionKind.Empty,j.CodeActionKind.QuickFix,j.CodeActionKind.Refactor,j.CodeActionKind.RefactorExtract,j.CodeActionKind.RefactorInline,j.CodeActionKind.RefactorRewrite,j.CodeActionKind.Source,j.CodeActionKind.SourceOrganizeImports]}},r.honorsChangeAnnotations=!1}initialize(t,r){let n=this.getRegistrationOptions(r,t.codeActionProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideCodeActions:(n,s,a,i)=>{let o=this._client,c=(d,l,p,f)=>{let g={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(d),range:o.code2ProtocolConverter.asRange(l),context:o.code2ProtocolConverter.asCodeActionContext(p)};return o.sendRequest(j.CodeActionRequest.type,g,f).then(m=>{if(m===null)return;let v=[];for(let y of m)j.Command.is(y)?v.push(o.protocol2CodeConverter.asCommand(y)):v.push(o.protocol2CodeConverter.asCodeAction(y));return v},m=>o.handleFailedRequest(j.CodeActionRequest.type,m,null))},u=o.clientOptions.middleware;return u.provideCodeActions?u.provideCodeActions(n,s,a,i,c):c(n,s,a,i)},resolveCodeAction:t.resolveProvider?(n,s)=>{let a=this._client,i=this._client.clientOptions.middleware,o=(c,u)=>a.sendRequest(j.CodeActionResolveRequest.type,a.code2ProtocolConverter.asCodeAction(c),u).then(a.protocol2CodeConverter.asCodeAction,d=>a.handleFailedRequest(j.CodeActionResolveRequest.type,d,c));return i.resolveCodeAction?i.resolveCodeAction(n,s,o):o(n,s)}:void 0};return[be.languages.registerCodeActionsProvider(t.documentSelector,r,t.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(t.codeActionKinds)}:void 0),r]}},ch=class extends tr{constructor(t){super(t,j.CodeLensRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"codeLens").dynamicRegistration=!0,Ie(Ie(t,"workspace"),"codeLens").refreshSupport=!0}initialize(t,r){this._client.onRequest(j.CodeLensRefreshRequest.type,async()=>{for(let a of this.getAllProviders())a.onDidChangeCodeLensEmitter.fire()});let s=this.getRegistrationOptions(r,t.codeLensProvider);!s||this.register({id:ft.generateUuid(),registerOptions:s})}registerLanguageProvider(t){let r=new be.EventEmitter,n={onDidChangeCodeLenses:r.event,provideCodeLenses:(s,a)=>{let i=this._client,o=(u,d)=>i.sendRequest(j.CodeLensRequest.type,i.code2ProtocolConverter.asCodeLensParams(u),d).then(i.protocol2CodeConverter.asCodeLenses,l=>i.handleFailedRequest(j.CodeLensRequest.type,l,null)),c=i.clientOptions.middleware;return c.provideCodeLenses?c.provideCodeLenses(s,a,o):o(s,a)},resolveCodeLens:t.resolveProvider?(s,a)=>{let i=this._client,o=(u,d)=>i.sendRequest(j.CodeLensResolveRequest.type,i.code2ProtocolConverter.asCodeLens(u),d).then(i.protocol2CodeConverter.asCodeLens,l=>i.handleFailedRequest(j.CodeLensResolveRequest.type,l,u)),c=i.clientOptions.middleware;return c.resolveCodeLens?c.resolveCodeLens(s,a,o):o(s,a)}:void 0};return[be.languages.registerCodeLensProvider(t.documentSelector,n),{provider:n,onDidChangeCodeLensEmitter:r}]}},uh=class extends tr{constructor(t){super(t,j.DocumentFormattingRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"formatting").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentFormattingProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentFormattingEdits:(n,s,a)=>{let i=this._client,o=(u,d,l)=>{let p={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(u),options:i.code2ProtocolConverter.asFormattingOptions(d,Xi.fromConfiguration(u))};return i.sendRequest(j.DocumentFormattingRequest.type,p,l).then(i.protocol2CodeConverter.asTextEdits,f=>i.handleFailedRequest(j.DocumentFormattingRequest.type,f,null))},c=i.clientOptions.middleware;return c.provideDocumentFormattingEdits?c.provideDocumentFormattingEdits(n,s,a,o):o(n,s,a)}};return[be.languages.registerDocumentFormattingEditProvider(t.documentSelector,r),r]}},lh=class extends tr{constructor(t){super(t,j.DocumentRangeFormattingRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentRangeFormattingProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentRangeFormattingEdits:(n,s,a,i)=>{let o=this._client,c=(d,l,p,f)=>{let g={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(d),range:o.code2ProtocolConverter.asRange(l),options:o.code2ProtocolConverter.asFormattingOptions(p,Xi.fromConfiguration(d))};return o.sendRequest(j.DocumentRangeFormattingRequest.type,g,f).then(o.protocol2CodeConverter.asTextEdits,m=>o.handleFailedRequest(j.DocumentRangeFormattingRequest.type,m,null))},u=o.clientOptions.middleware;return u.provideDocumentRangeFormattingEdits?u.provideDocumentRangeFormattingEdits(n,s,a,i,c):c(n,s,a,i)}};return[be.languages.registerDocumentRangeFormattingEditProvider(t.documentSelector,r),r]}},dh=class extends tr{constructor(t){super(t,j.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentOnTypeFormattingProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideOnTypeFormattingEdits:(s,a,i,o,c)=>{let u=this._client,d=(p,f,g,m,v)=>{let y={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(p),position:u.code2ProtocolConverter.asPosition(f),ch:g,options:u.code2ProtocolConverter.asFormattingOptions(m,Xi.fromConfiguration(p))};return u.sendRequest(j.DocumentOnTypeFormattingRequest.type,y,v).then(u.protocol2CodeConverter.asTextEdits,T=>u.handleFailedRequest(j.DocumentOnTypeFormattingRequest.type,T,null))},l=u.clientOptions.middleware;return l.provideOnTypeFormattingEdits?l.provideOnTypeFormattingEdits(s,a,i,o,c,d):d(s,a,i,o,c)}},n=t.moreTriggerCharacter||[];return[be.languages.registerOnTypeFormattingEditProvider(t.documentSelector,r,t.firstTriggerCharacter,...n),r]}},ph=class extends tr{constructor(t){super(t,j.RenameRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"rename");r.dynamicRegistration=!0,r.prepareSupport=!0,r.prepareSupportDefaultBehavior=j.PrepareSupportDefaultBehavior.Identifier,r.honorsChangeAnnotations=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.renameProvider);!n||(pt.boolean(t.renameProvider)&&(n.prepareProvider=!1),this.register({id:ft.generateUuid(),registerOptions:n}))}registerLanguageProvider(t){let r={provideRenameEdits:(n,s,a,i)=>{let o=this._client,c=(d,l,p,f)=>{let g={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(d),position:o.code2ProtocolConverter.asPosition(l),newName:p};return o.sendRequest(j.RenameRequest.type,g,f).then(o.protocol2CodeConverter.asWorkspaceEdit,m=>o.handleFailedRequest(j.RenameRequest.type,m,null))},u=o.clientOptions.middleware;return u.provideRenameEdits?u.provideRenameEdits(n,s,a,i,c):c(n,s,a,i)},prepareRename:t.prepareProvider?(n,s,a)=>{let i=this._client,o=(u,d,l)=>{let p={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(u),position:i.code2ProtocolConverter.asPosition(d)};return i.sendRequest(j.PrepareRenameRequest.type,p,l).then(f=>j.Range.is(f)?i.protocol2CodeConverter.asRange(f):this.isDefaultBehavior(f)?f.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):f&&j.Range.is(f.range)?{range:i.protocol2CodeConverter.asRange(f.range),placeholder:f.placeholder}:Promise.reject(new Error("The element can't be renamed.")),f=>i.handleFailedRequest(j.PrepareRenameRequest.type,f,void 0))},c=i.clientOptions.middleware;return c.prepareRename?c.prepareRename(n,s,a,o):o(n,s,a)}:void 0};return[be.languages.registerRenameProvider(t.documentSelector,r),r]}isDefaultBehavior(t){let r=t;return r&&pt.boolean(r.defaultBehavior)}},fh=class extends tr{constructor(t){super(t,j.DocumentLinkRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"documentLink");r.dynamicRegistration=!0,r.tooltipSupport=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentLinkProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentLinks:(n,s)=>{let a=this._client,i=(c,u)=>a.sendRequest(j.DocumentLinkRequest.type,a.code2ProtocolConverter.asDocumentLinkParams(c),u).then(a.protocol2CodeConverter.asDocumentLinks,d=>a.handleFailedRequest(j.DocumentLinkRequest.type,d,null)),o=a.clientOptions.middleware;return o.provideDocumentLinks?o.provideDocumentLinks(n,s,i):i(n,s)},resolveDocumentLink:t.resolveProvider?(n,s)=>{let a=this._client,i=(c,u)=>a.sendRequest(j.DocumentLinkResolveRequest.type,a.code2ProtocolConverter.asDocumentLink(c),u).then(a.protocol2CodeConverter.asDocumentLink,d=>a.handleFailedRequest(j.DocumentLinkResolveRequest.type,d,c)),o=a.clientOptions.middleware;return o.resolveDocumentLink?o.resolveDocumentLink(n,s,i):i(n,s)}:void 0};return[be.languages.registerDocumentLinkProvider(t.documentSelector,r),r]}},hh=class{constructor(t){this._client=t,this._listeners=new Map}get registrationType(){return j.DidChangeConfigurationNotification.type}fillClientCapabilities(t){Ie(Ie(t,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let t=this._client.clientOptions.synchronize.configurationSection;t!==void 0&&this.register({id:ft.generateUuid(),registerOptions:{section:t}})}register(t){let r=be.workspace.onDidChangeConfiguration(n=>{this.onDidChangeConfiguration(t.registerOptions.section,n)});this._listeners.set(t.id,r),t.registerOptions.section!==void 0&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(t){let r=this._listeners.get(t);r&&(this._listeners.delete(t),r.dispose())}dispose(){for(let t of this._listeners.values())t.dispose();this._listeners.clear()}onDidChangeConfiguration(t,r){let n;if(pt.string(t)?n=[t]:n=t,n!==void 0&&r!==void 0&&!n.some(o=>r.affectsConfiguration(o)))return;let s=i=>{if(i===void 0){this._client.sendNotification(j.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(j.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(i)})},a=this.getMiddleware();a?a(n,s):s(n)}extractSettingsInformation(t){function r(a,i){let o=a;for(let c=0;c<i.length-1;c++){let u=o[i[c]];u||(u=Object.create(null),o[i[c]]=u),o=u}return o}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,s=Object.create(null);for(let a=0;a<t.length;a++){let i=t[a],o=i.indexOf("."),c=null;if(o>=0?c=be.workspace.getConfiguration(i.substr(0,o),n).get(i.substr(o+1)):c=be.workspace.getConfiguration(void 0,n).get(i),c){let u=t[a].split(".");r(s,u)[u[u.length-1]]=ER.toJSONObject(c)}}return s}getMiddleware(){let t=this._client.clientOptions.middleware;if(t.workspace&&t.workspace.didChangeConfiguration)return t.workspace.didChangeConfiguration}},gh=class{constructor(t){this._client=t,this._commands=new Map}get registrationType(){return j.ExecuteCommandRequest.type}fillClientCapabilities(t){Ie(Ie(t,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(t){!t.executeCommandProvider||this.register({id:ft.generateUuid(),registerOptions:Object.assign({},t.executeCommandProvider)})}register(t){let r=this._client,n=r.clientOptions.middleware,s=(a,i)=>{let o={command:a,arguments:i};return r.sendRequest(j.ExecuteCommandRequest.type,o).then(void 0,c=>r.handleFailedRequest(j.ExecuteCommandRequest.type,c,void 0))};if(t.registerOptions.commands){let a=[];for(let i of t.registerOptions.commands)a.push(be.commands.registerCommand(i,(...o)=>n.executeCommand?n.executeCommand(i,o,s):s(i,o)));this._commands.set(t.id,a)}}unregister(t){let r=this._commands.get(t);r&&r.forEach(n=>n.dispose())}dispose(){this._commands.forEach(t=>{t.forEach(r=>r.dispose())}),this._commands.clear()}},wR;(function(e){function t(r){return r&&j.MessageReader.is(r.reader)&&j.MessageWriter.is(r.writer)}e.is=t})(wR=Dt.MessageTransports||(Dt.MessageTransports={}));var Ua=class{constructor(t,r){this._resolve=t,this._reject=r,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(t){this._used=!0,this._reject(t)}},ri=class{constructor(t,r,n){var s;this._traceFormat=j.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=t,this._name=r,n=n||{};let a={isTrusted:!1};n.markdown!==void 0&&n.markdown.isTrusted===!0&&(a.isTrusted=!0),this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||zi.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler||this.createDefaultErrorHandler((s=n.connectionOptions)===null||s===void 0?void 0:s.maxRestartCount),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:a},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=bt.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new Hf.Delayer(250),this._onReady=new Promise((i,o)=>{this._onReadyCallbacks=new Ua(i,o)}),this._onStop=void 0,this._telemetryEmitter=new j.Emitter,this._stateChangeEmitter=new j.Emitter,this._trace=j.Trace.Off,this._tracer={log:(i,o)=>{pt.string(i)?this.logTrace(i,o):this.logObjectTrace(i)}},this._c2p=CR.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=bR.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(t){let r=this.getPublicState();this._state=t;let n=this.getPublicState();n!==r&&this._stateChangeEmitter.fire({oldState:r,newState:n})}getPublicState(){return this.state===bt.Running?Uo.Running:this.state===bt.Starting?Uo.Starting:Uo.Stopped}get initializeResult(){return this._initializeResult}sendRequest(t,...r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(t,...r)}catch(n){throw this.error(`Sending request ${pt.string(t)?t:t.method} failed.`,n),n}}onRequest(t,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onRequest(t,r)}catch(n){throw this.error(`Registering request handler ${pt.string(t)?t:t.method} failed.`,n),n}}sendNotification(t,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(t,r)}catch(n){throw this.error(`Sending notification ${pt.string(t)?t:t.method} failed.`,n),n}}onNotification(t,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onNotification(t,r)}catch(n){throw this.error(`Registering notification handler ${pt.string(t)?t:t.method} failed.`,n),n}}onProgress(t,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{if(j.WorkDoneProgress.is(t)){let s=this._clientOptions.middleware.handleWorkDoneProgress;if(s!==void 0)return this._resolvedConnection.onProgress(t,r,a=>{s(r,a,()=>n(a))})}return this._resolvedConnection.onProgress(t,r,n)}catch(s){throw this.error(`Registering progress handler for token ${r} failed.`,s),s}}sendProgress(t,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(t,r,n)}catch(s){throw this.error(`Sending progress for token ${r} failed.`,s),s}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=be.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(t){if(t!==void 0&&t<0)throw new Error(`Invalid maxRestartCount: ${t}`);return new Uf(this._name,t??4)}set trace(t){this._trace=t,this.onReady().then(()=>{this.resolveConnection().then(r=>{r.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(t){if(t instanceof j.ResponseError){let r=t;return`  Message: ${r.message}
  Code: ${r.code} ${r.data?`
`+r.data.toString():""}`}return t instanceof Error?pt.string(t.stack)?t.stack:t.message:pt.string(t)?t:t.toString()}info(t,r,n=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${t}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=zi.Info&&this.showNotificationMessage()}warn(t,r,n=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${t}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=zi.Warn&&this.showNotificationMessage()}error(t,r,n=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${t}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=zi.Error&&this.showNotificationMessage()}showNotificationMessage(){be.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(t,r){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${t}`),r&&this.traceOutputChannel.appendLine(this.data2String(r))}logObjectTrace(t){t.isLSPMessage&&t.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),t&&this.traceOutputChannel.appendLine(`${JSON.stringify(t)}`)}needsStart(){return this.state===bt.Initial||this.state===bt.Stopping||this.state===bt.Stopped}needsStop(){return this.state===bt.Starting||this.state===bt.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===bt.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((t,r)=>{this._onReadyCallbacks=new Ua(t,r)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?be.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):be.languages.createDiagnosticCollection()),this.state=bt.Starting,this.resolveConnection().then(t=>(t.onLogMessage(r=>{switch(r.type){case j.MessageType.Error:this.error(r.message,void 0,!1);break;case j.MessageType.Warning:this.warn(r.message,void 0,!1);break;case j.MessageType.Info:this.info(r.message,void 0,!1);break;default:this.outputChannel.appendLine(r.message)}}),t.onShowMessage(r=>{switch(r.type){case j.MessageType.Error:be.window.showErrorMessage(r.message);break;case j.MessageType.Warning:be.window.showWarningMessage(r.message);break;case j.MessageType.Info:be.window.showInformationMessage(r.message);break;default:be.window.showInformationMessage(r.message)}}),t.onRequest(j.ShowMessageRequest.type,r=>{let n;switch(r.type){case j.MessageType.Error:n=be.window.showErrorMessage;break;case j.MessageType.Warning:n=be.window.showWarningMessage;break;case j.MessageType.Info:n=be.window.showInformationMessage;break;default:n=be.window.showInformationMessage}let s=r.actions||[];return n(r.message,...s)}),t.onTelemetry(r=>{this._telemetryEmitter.fire(r)}),t.onRequest(j.ShowDocumentRequest.type,async r=>{var n;let s=async i=>{let o=this.protocol2CodeConverter.asUri(i.uri);try{if(i.external===!0)return{success:await be.env.openExternal(o)};{let c={};return i.selection!==void 0&&(c.selection=this.protocol2CodeConverter.asRange(i.selection)),i.takeFocus===void 0||i.takeFocus===!1?c.preserveFocus=!0:i.takeFocus===!0&&(c.preserveFocus=!1),await be.window.showTextDocument(o,c),{success:!0}}}catch{return{success:!0}}},a=(n=this._clientOptions.middleware.window)===null||n===void 0?void 0:n.showDocument;return a!==void 0?a(r,s):s(r)}),t.listen(),this.initialize(t))).then(void 0,t=>{this.state=bt.StartFailed,this._onReadyCallbacks.reject(t),this.error("Starting client failed",t),be.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new be.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(t){this.refreshTrace(t,!1);let r=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),s={processId:null,clientInfo:{name:be.env.appName,version:be.version},locale:this.getLocale(),rootPath:n||null,rootUri:n?this._c2p.asUri(be.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:pt.func(r)?r():r,trace:j.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(s),this._clientOptions.progressOnInitialization){let a=ft.generateUuid(),i=new TR.ProgressPart(t,a);return s.workDoneToken=a,this.doInitialize(t,s).then(o=>(i.done(),o),o=>{throw i.cancel(),o})}else return this.doInitialize(t,s)}doInitialize(t,r){return t.initialize(r).then(n=>{this._resolvedConnection=t,this._initializeResult=n,this.state=bt.Running;let s;return pt.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===j.TextDocumentSyncKind.None?s={openClose:!1,change:j.TextDocumentSyncKind.None,save:void 0}:s={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(s=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:s}),t.onDiagnostics(a=>this.handleDiagnostics(a)),t.onRequest(j.RegistrationRequest.type,a=>this.handleRegistrationRequest(a)),t.onRequest("client/registerFeature",a=>this.handleRegistrationRequest(a)),t.onRequest(j.UnregistrationRequest.type,a=>this.handleUnregistrationRequest(a)),t.onRequest("client/unregisterFeature",a=>this.handleUnregistrationRequest(a)),t.onRequest(j.ApplyWorkspaceEditRequest.type,a=>this.handleApplyWorkspaceEdit(a)),t.sendNotification(j.InitializedNotification.type,{}),this.hookFileEvents(t),this.hookConfigurationChanged(t),this.initializeFeatures(t),this._onReadyCallbacks.resolve(),n}).then(void 0,n=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(t):(this.stop(),this._onReadyCallbacks.reject(n)):n instanceof j.ResponseError&&n.data&&n.data.retry?be.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(s=>{s&&s.id==="retry"?this.initialize(t):(this.stop(),this._onReadyCallbacks.reject(n))}):(n&&n.message&&be.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop(),this._onReadyCallbacks.reject(n)),n})}_clientGetRootPath(){let t=be.workspace.workspaceFolders;if(!t||t.length===0)return;let r=t[0];if(r.uri.scheme==="file")return r.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===bt.Stopping&&this._onStop?this._onStop:(this.state=bt.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(t=>t.shutdown().then(()=>{t.exit(),t.end(),t.dispose(),this.state=bt.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=bt.Stopped,Promise.resolve())}cleanUp(t=!0,r=!0){this._listeners&&(this._listeners.forEach(n=>n.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(n=>n.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let n of this._features.values())n.dispose();t&&this.cleanUpChannel(),r&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(t){var r;let n=this;function s(i){n._fileEvents.push(i),n._fileEventDelayer.trigger(()=>{n.onReady().then(()=>{n.resolveConnection().then(o=>{n.isConnectionActive()&&(n.forceDocumentSync(),o.didChangeWatchedFiles({changes:n._fileEvents})),n._fileEvents=[]})},o=>{n.error("Notify file events failed.",o)})})}let a=(r=this.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;a?.didChangeWatchedFile?a.didChangeWatchedFile(t,s):s(t)}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(j.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(t){if(!this._diagnostics)return;let r=this._p2c.asUri(t.uri),n=this._p2c.asDiagnostics(t.diagnostics),s=this.clientOptions.middleware;s.handleDiagnostics?s.handleDiagnostics(r,n,(a,i)=>this.setDiagnostics(a,i)):this.setDiagnostics(r,n)}setDiagnostics(t,r){!this._diagnostics||this._diagnostics.set(t,r)}createConnection(){let t=(n,s,a)=>{this.handleConnectionError(n,s,a)},r=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>SR(n.reader,n.writer,t,r,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===bt.Stopping||this.state===bt.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let t=kn.DoNotRestart;try{t=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,t===kn.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===bt.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=bt.StartFailed):this.state=bt.Stopped,this.cleanUp(!1,!0)):t===kn.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=bt.Initial,this.start())}handleConnectionError(t,r,n){this._clientOptions.errorHandler.error(t,r,n)===Bo.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(t){be.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(t,!0)})}refreshTrace(t,r=!1){let n=be.workspace.getConfiguration(this._id),s=j.Trace.Off,a=j.TraceFormat.Text;if(n){let i=n.get("trace.server","off");typeof i=="string"?s=j.Trace.fromString(i):(s=j.Trace.fromString(n.get("trace.server.verbosity","off")),a=j.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=s,this._traceFormat=a,t.trace(this._trace,this._tracer,{sendNotification:r,traceFormat:this._traceFormat})}hookFileEvents(t){let r=this._clientOptions.synchronize.fileEvents;if(!r)return;let n;pt.array(r)?n=r:n=[r],n&&this._dynamicFeatures.get(j.DidChangeWatchedFilesNotification.type.method).registerRaw(ft.generateUuid(),n)}registerFeatures(t){for(let r of t)this.registerFeature(r)}registerFeature(t){if(this._features.push(t),$a.is(t)){let r=t.registrationType;this._dynamicFeatures.set(r.method,t)}}getFeature(t){return this._dynamicFeatures.get(t)}registerBuiltinFeatures(){this.registerFeature(new hh(this)),this.registerFeature(new Vf(this,this._syncedDocuments)),this.registerFeature(new Kf(this)),this.registerFeature(new zf(this)),this.registerFeature(new Xf(this)),this.registerFeature(new Yf(this)),this.registerFeature(new Wf(this,this._syncedDocuments)),this.registerFeature(new Qf(this,t=>this.notifyFileEvent(t))),this.registerFeature(new Zf(this)),this.registerFeature(new eh(this)),this.registerFeature(new th(this)),this.registerFeature(new rh(this)),this.registerFeature(new nh(this)),this.registerFeature(new ih(this)),this.registerFeature(new oh(this)),this.registerFeature(new sh(this)),this.registerFeature(new ah(this)),this.registerFeature(new ch(this)),this.registerFeature(new uh(this)),this.registerFeature(new lh(this)),this.registerFeature(new dh(this)),this.registerFeature(new ph(this)),this.registerFeature(new fh(this)),this.registerFeature(new gh(this))}fillInitializeParams(t){for(let r of this._features)pt.func(r.fillInitializeParams)&&r.fillInitializeParams(t)}computeClientCapabilities(){let t={};Ie(t,"workspace").applyEdit=!0;let r=Ie(Ie(t,"workspace"),"workspaceEdit");r.documentChanges=!0,r.resourceOperations=[j.ResourceOperationKind.Create,j.ResourceOperationKind.Rename,j.ResourceOperationKind.Delete],r.failureHandling=j.FailureHandlingKind.TextOnlyTransactional,r.normalizesLineEndings=!0,r.changeAnnotationSupport={groupsOnLabel:!0};let n=Ie(Ie(t,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[j.DiagnosticTag.Unnecessary,j.DiagnosticTag.Deprecated]},n.codeDescriptionSupport=!0,n.dataSupport=!0;let s=Ie(t,"window"),a=Ie(s,"showMessage");a.messageActionItem={additionalPropertiesSupport:!0};let i=Ie(s,"showDocument");i.support=!0;let o=Ie(t,"general");o.regularExpressions={engine:"ECMAScript",version:"ES2020"},o.markdown={parser:"marked",version:"1.1.0"};for(let c of this._features)c.fillClientCapabilities(t);return t}initializeFeatures(t){let r=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,r)}handleRegistrationRequest(t){return new Promise((r,n)=>{for(let s of t.registrations){let a=this._dynamicFeatures.get(s.method);if(a===void 0){n(new Error(`No feature implementation for ${s.method} found. Registration failed.`));return}let i=s.registerOptions||{};i.documentSelector=i.documentSelector||this._clientOptions.documentSelector;let o={id:s.id,registerOptions:i};try{a.register(o)}catch(c){n(c);return}}r()})}handleUnregistrationRequest(t){return new Promise((r,n)=>{for(let s of t.unregisterations){let a=this._dynamicFeatures.get(s.method);if(!a){n(new Error(`No feature implementation for ${s.method} found. Unregistration failed.`));return}a.unregister(s.id)}r()})}handleApplyWorkspaceEdit(t){let r=t.edit,n=new Map;be.workspace.textDocuments.forEach(a=>n.set(a.uri.toString(),a));let s=!1;if(r.documentChanges){for(let a of r.documentChanges)if(j.TextDocumentEdit.is(a)&&a.textDocument.version&&a.textDocument.version>=0){let i=n.get(a.textDocument.uri);if(i&&i.version!==a.textDocument.version){s=!0;break}}}return s?Promise.resolve({applied:!1}):pt.asPromise(be.workspace.applyEdit(this._p2c.asWorkspaceEdit(t.edit)).then(a=>({applied:a})))}handleFailedRequest(t,r,n){if(r instanceof j.ResponseError){if(r.code===j.LSPErrorCodes.RequestCancelled)throw this.makeCancelError();if(r.code===j.LSPErrorCodes.ContentModified)return n}throw this.error(`Request ${t.method} failed.`,r),r}makeCancelError(){let t=new Error(ri.Canceled);return t.name=ri.Canceled,t}};Dt.BaseLanguageClient=ri;ri.Canceled="Canceled"});var _h=ee(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.ColorProviderFeature=void 0;var Go=require("vscode"),Yi=St(),PR=gr();function mh(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var vh=class extends PR.TextDocumentFeature{constructor(t){super(t,Yi.DocumentColorRequest.type)}fillClientCapabilities(t){mh(mh(t,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(t,r){let[n,s]=this.getRegistration(r,t.colorProvider);!n||!s||this.register({id:n,registerOptions:s})}registerLanguageProvider(t){let r={provideColorPresentations:(n,s,a)=>{let i=this._client,o=(u,d,l)=>{let p={color:u,textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(d.document),range:i.code2ProtocolConverter.asRange(d.range)};return i.sendRequest(Yi.ColorPresentationRequest.type,p,l).then(this.asColorPresentations.bind(this),f=>i.handleFailedRequest(Yi.ColorPresentationRequest.type,f,null))},c=i.clientOptions.middleware;return c.provideColorPresentations?c.provideColorPresentations(n,s,a,o):o(n,s,a)},provideDocumentColors:(n,s)=>{let a=this._client,i=(c,u)=>{let d={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(c)};return a.sendRequest(Yi.DocumentColorRequest.type,d,u).then(this.asColorInformations.bind(this),l=>a.handleFailedRequest(Yi.ColorPresentationRequest.type,l,null))},o=a.clientOptions.middleware;return o.provideDocumentColors?o.provideDocumentColors(n,s,i):i(n,s)}};return[Go.languages.registerColorProvider(t.documentSelector,r),r]}asColor(t){return new Go.Color(t.red,t.green,t.blue,t.alpha)}asColorInformations(t){return Array.isArray(t)?t.map(r=>new Go.ColorInformation(this._client.protocol2CodeConverter.asRange(r.range),this.asColor(r.color))):[]}asColorPresentations(t){return Array.isArray(t)?t.map(r=>{let n=new Go.ColorPresentation(r.label);return n.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(r.additionalTextEdits),n.textEdit=this._client.protocol2CodeConverter.asTextEdit(r.textEdit),n}):[]}};Vo.ColorProviderFeature=vh});var Ch=ee(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.ImplementationFeature=void 0;var OR=require("vscode"),Ba=St(),IR=gr();function yh(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Eh=class extends IR.TextDocumentFeature{constructor(t){super(t,Ba.ImplementationRequest.type)}fillClientCapabilities(t){let r=yh(yh(t,"textDocument"),"implementation");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(t,r){let[n,s]=this.getRegistration(r,t.implementationProvider);!n||!s||this.register({id:n,registerOptions:s})}registerLanguageProvider(t){let r={provideImplementation:(n,s,a)=>{let i=this._client,o=(u,d,l)=>i.sendRequest(Ba.ImplementationRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asDefinitionResult,p=>i.handleFailedRequest(Ba.ImplementationRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideImplementation?c.provideImplementation(n,s,a,o):o(n,s,a)}};return[OR.languages.registerImplementationProvider(t.documentSelector,r),r]}};Wo.ImplementationFeature=Eh});var Th=ee(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.TypeDefinitionFeature=void 0;var DR=require("vscode"),Ga=St(),AR=gr();function Ko(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var bh=class extends AR.TextDocumentFeature{constructor(t){super(t,Ga.TypeDefinitionRequest.type)}fillClientCapabilities(t){Ko(Ko(t,"textDocument"),"typeDefinition").dynamicRegistration=!0;let r=Ko(Ko(t,"textDocument"),"typeDefinition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(t,r){let[n,s]=this.getRegistration(r,t.typeDefinitionProvider);!n||!s||this.register({id:n,registerOptions:s})}registerLanguageProvider(t){let r={provideTypeDefinition:(n,s,a)=>{let i=this._client,o=(u,d,l)=>i.sendRequest(Ga.TypeDefinitionRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asDefinitionResult,p=>i.handleFailedRequest(Ga.TypeDefinitionRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideTypeDefinition?c.provideTypeDefinition(n,s,a,o):o(n,s,a)}};return[DR.languages.registerTypeDefinitionProvider(t.documentSelector,r),r]}};zo.TypeDefinitionFeature=bh});var Rh=ee(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.WorkspaceFoldersFeature=ni.arrayDiff=void 0;var xR=Ho(),Xo=require("vscode"),Va=St();function Wa(e,t){if(e!==void 0)return e[t]}function Ka(e,t){return e.filter(r=>t.indexOf(r)<0)}ni.arrayDiff=Ka;var Sh=class{constructor(t){this._client=t,this._listeners=new Map}get registrationType(){return Va.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(t){let r=Xo.workspace.workspaceFolders;this.initializeWithFolders(r),r===void 0?t.workspaceFolders=null:t.workspaceFolders=r.map(n=>this.asProtocol(n))}initializeWithFolders(t){this._initialFolders=t}fillClientCapabilities(t){t.workspace=t.workspace||{},t.workspace.workspaceFolders=!0}initialize(t){let r=this._client;r.onRequest(Va.WorkspaceFoldersRequest.type,a=>{let i=()=>{let c=Xo.workspace.workspaceFolders;return c===void 0?null:c.map(d=>this.asProtocol(d))},o=r.clientOptions.middleware.workspace;return o&&o.workspaceFolders?o.workspaceFolders(a,i):i(a)});let n=Wa(Wa(Wa(t,"workspace"),"workspaceFolders"),"changeNotifications"),s;typeof n=="string"?s=n:n===!0&&(s=xR.generateUuid()),s&&this.register({id:s,registerOptions:void 0})}sendInitialEvent(t){if(this._initialFolders&&t){let r=Ka(this._initialFolders,t),n=Ka(t,this._initialFolders);(n.length>0||r.length>0)&&this.doSendEvent(n,r)}else this._initialFolders?this.doSendEvent([],this._initialFolders):t&&this.doSendEvent(t,[])}doSendEvent(t,r){let n={event:{added:t.map(s=>this.asProtocol(s)),removed:r.map(s=>this.asProtocol(s))}};this._client.sendNotification(Va.DidChangeWorkspaceFoldersNotification.type,n)}register(t){let r=t.id,n=this._client,s=Xo.workspace.onDidChangeWorkspaceFolders(a=>{let i=c=>{this.doSendEvent(c.added,c.removed)},o=n.clientOptions.middleware.workspace;o&&o.didChangeWorkspaceFolders?o.didChangeWorkspaceFolders(a,i):i(a)});this._listeners.set(r,s),this.sendInitialEvent(Xo.workspace.workspaceFolders)}unregister(t){let r=this._listeners.get(t);r!==void 0&&(this._listeners.delete(t),r.dispose())}dispose(){for(let t of this._listeners.values())t.dispose();this._listeners.clear()}asProtocol(t){return t===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(t.uri),name:t.name}}};ni.WorkspaceFoldersFeature=Sh});var Ph=ee(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.FoldingRangeFeature=void 0;var Qi=require("vscode"),ii=St(),NR=gr();function wh(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Ji=class extends NR.TextDocumentFeature{constructor(t){super(t,ii.FoldingRangeRequest.type)}fillClientCapabilities(t){let r=wh(wh(t,"textDocument"),"foldingRange");r.dynamicRegistration=!0,r.rangeLimit=5e3,r.lineFoldingOnly=!0}initialize(t,r){let[n,s]=this.getRegistration(r,t.foldingRangeProvider);!n||!s||this.register({id:n,registerOptions:s})}registerLanguageProvider(t){let r={provideFoldingRanges:(n,s,a)=>{let i=this._client,o=(u,d,l)=>{let p={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(u)};return i.sendRequest(ii.FoldingRangeRequest.type,p,l).then(Ji.asFoldingRanges,f=>i.handleFailedRequest(ii.FoldingRangeRequest.type,f,null))},c=i.clientOptions.middleware;return c.provideFoldingRanges?c.provideFoldingRanges(n,s,a,o):o(n,s,a)}};return[Qi.languages.registerFoldingRangeProvider(t.documentSelector,r),r]}static asFoldingRangeKind(t){if(t)switch(t){case ii.FoldingRangeKind.Comment:return Qi.FoldingRangeKind.Comment;case ii.FoldingRangeKind.Imports:return Qi.FoldingRangeKind.Imports;case ii.FoldingRangeKind.Region:return Qi.FoldingRangeKind.Region}}static asFoldingRanges(t){return Array.isArray(t)?t.map(r=>new Qi.FoldingRange(r.startLine,r.endLine,Ji.asFoldingRangeKind(r.kind))):[]}};Yo.FoldingRangeFeature=Ji});var Dh=ee(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.DeclarationFeature=void 0;var kR=require("vscode"),za=St(),MR=gr();function Oh(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Ih=class extends MR.TextDocumentFeature{constructor(t){super(t,za.DeclarationRequest.type)}fillClientCapabilities(t){let r=Oh(Oh(t,"textDocument"),"declaration");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(t,r){let[n,s]=this.getRegistration(r,t.declarationProvider);!n||!s||this.register({id:n,registerOptions:s})}registerLanguageProvider(t){let r={provideDeclaration:(n,s,a)=>{let i=this._client,o=(u,d,l)=>i.sendRequest(za.DeclarationRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asDeclarationResult,p=>i.handleFailedRequest(za.DeclarationRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideDeclaration?c.provideDeclaration(n,s,a,o):o(n,s,a)}};return[kR.languages.registerDeclarationProvider(t.documentSelector,r),r]}};Qo.DeclarationFeature=Ih});var Nh=ee(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.SelectionRangeFeature=void 0;var qR=require("vscode"),Xa=St(),LR=gr();function Ah(e,t){return e[t]===void 0&&(e[t]=Object.create(null)),e[t]}var xh=class extends LR.TextDocumentFeature{constructor(t){super(t,Xa.SelectionRangeRequest.type)}fillClientCapabilities(t){let r=Ah(Ah(t,"textDocument"),"selectionRange");r.dynamicRegistration=!0}initialize(t,r){let[n,s]=this.getRegistration(r,t.selectionRangeProvider);!n||!s||this.register({id:n,registerOptions:s})}registerLanguageProvider(t){let r={provideSelectionRanges:(n,s,a)=>{let i=this._client,o=(u,d,l)=>{let p={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(u),positions:i.code2ProtocolConverter.asPositions(d)};return i.sendRequest(Xa.SelectionRangeRequest.type,p,l).then(f=>i.protocol2CodeConverter.asSelectionRanges(f),f=>i.handleFailedRequest(Xa.SelectionRangeRequest.type,f,null))},c=i.clientOptions.middleware;return c.provideSelectionRanges?c.provideSelectionRanges(n,s,a,o):o(n,s,a)}};return[qR.languages.registerSelectionRangeProvider(t.documentSelector,r),r]}};Jo.SelectionRangeFeature=xh});var Mh=ee(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.ProgressFeature=void 0;var jR=St(),FR=Ha();function HR(e,t){return e[t]===void 0&&(e[t]=Object.create(null)),e[t]}var kh=class{constructor(t){this._client=t,this.activeParts=new Set}fillClientCapabilities(t){HR(t,"window").workDoneProgress=!0}initialize(){let t=this._client,r=s=>{this.activeParts.delete(s)},n=s=>{this.activeParts.add(new FR.ProgressPart(this._client,s.token,r))};t.onRequest(jR.WorkDoneProgressCreateRequest.type,n)}dispose(){for(let t of this.activeParts)t.done();this.activeParts.clear()}};Zo.ProgressFeature=kh});var Fh=ee(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.CallHierarchyFeature=void 0;var $R=require("vscode"),Mn=St(),UR=gr();function qh(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Lh=class{constructor(t){this.client=t,this.middleware=t.clientOptions.middleware}prepareCallHierarchy(t,r,n){let s=this.client,a=this.middleware,i=(o,c,u)=>{let d=s.code2ProtocolConverter.asTextDocumentPositionParams(o,c);return s.sendRequest(Mn.CallHierarchyPrepareRequest.type,d,u).then(l=>s.protocol2CodeConverter.asCallHierarchyItems(l),l=>s.handleFailedRequest(Mn.CallHierarchyPrepareRequest.type,l,null))};return a.prepareCallHierarchy?a.prepareCallHierarchy(t,r,n,i):i(t,r,n)}provideCallHierarchyIncomingCalls(t,r){let n=this.client,s=this.middleware,a=(i,o)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(i)};return n.sendRequest(Mn.CallHierarchyIncomingCallsRequest.type,c,o).then(u=>n.protocol2CodeConverter.asCallHierarchyIncomingCalls(u),u=>n.handleFailedRequest(Mn.CallHierarchyIncomingCallsRequest.type,u,null))};return s.provideCallHierarchyIncomingCalls?s.provideCallHierarchyIncomingCalls(t,r,a):a(t,r)}provideCallHierarchyOutgoingCalls(t,r){let n=this.client,s=this.middleware,a=(i,o)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(i)};return n.sendRequest(Mn.CallHierarchyOutgoingCallsRequest.type,c,o).then(u=>n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(u),u=>n.handleFailedRequest(Mn.CallHierarchyOutgoingCallsRequest.type,u,null))};return s.provideCallHierarchyOutgoingCalls?s.provideCallHierarchyOutgoingCalls(t,r,a):a(t,r)}},jh=class extends UR.TextDocumentFeature{constructor(t){super(t,Mn.CallHierarchyPrepareRequest.type)}fillClientCapabilities(t){let n=qh(qh(t,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(t,r){let[n,s]=this.getRegistration(r,t.callHierarchyProvider);!n||!s||this.register({id:n,registerOptions:s})}registerLanguageProvider(t){let r=this._client,n=new Lh(r);return[$R.languages.registerCallHierarchyProvider(t.documentSelector,n),n]}};es.CallHierarchyFeature=jh});var $h=ee(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.SemanticTokensFeature=void 0;var ts=require("vscode"),BR=gr(),$e=St(),GR=sn();function rs(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Hh=class extends BR.TextDocumentFeature{constructor(t){super(t,$e.SemanticTokensRegistrationType.type)}fillClientCapabilities(t){let r=rs(rs(t,"textDocument"),"semanticTokens");r.dynamicRegistration=!0,r.tokenTypes=[$e.SemanticTokenTypes.namespace,$e.SemanticTokenTypes.type,$e.SemanticTokenTypes.class,$e.SemanticTokenTypes.enum,$e.SemanticTokenTypes.interface,$e.SemanticTokenTypes.struct,$e.SemanticTokenTypes.typeParameter,$e.SemanticTokenTypes.parameter,$e.SemanticTokenTypes.variable,$e.SemanticTokenTypes.property,$e.SemanticTokenTypes.enumMember,$e.SemanticTokenTypes.event,$e.SemanticTokenTypes.function,$e.SemanticTokenTypes.method,$e.SemanticTokenTypes.macro,$e.SemanticTokenTypes.keyword,$e.SemanticTokenTypes.modifier,$e.SemanticTokenTypes.comment,$e.SemanticTokenTypes.string,$e.SemanticTokenTypes.number,$e.SemanticTokenTypes.regexp,$e.SemanticTokenTypes.operator],r.tokenModifiers=[$e.SemanticTokenModifiers.declaration,$e.SemanticTokenModifiers.definition,$e.SemanticTokenModifiers.readonly,$e.SemanticTokenModifiers.static,$e.SemanticTokenModifiers.deprecated,$e.SemanticTokenModifiers.abstract,$e.SemanticTokenModifiers.async,$e.SemanticTokenModifiers.modification,$e.SemanticTokenModifiers.documentation,$e.SemanticTokenModifiers.defaultLibrary],r.formats=[$e.TokenFormat.Relative],r.requests={range:!0,full:{delta:!0}},r.multilineTokenSupport=!1,r.overlappingTokenSupport=!1,rs(rs(t,"workspace"),"semanticTokens").refreshSupport=!0}initialize(t,r){this._client.onRequest($e.SemanticTokensRefreshRequest.type,async()=>{for(let i of this.getAllProviders())i.onDidChangeSemanticTokensEmitter.fire()});let[s,a]=this.getRegistration(r,t.semanticTokensProvider);!s||!a||this.register({id:s,registerOptions:a})}registerLanguageProvider(t){let r=GR.boolean(t.full)?t.full:t.full!==void 0,n=t.full!==void 0&&typeof t.full!="boolean"&&t.full.delta===!0,s=new ts.EventEmitter,a=r?{onDidChangeSemanticTokens:s.event,provideDocumentSemanticTokens:(l,p)=>{let f=this._client,g=f.clientOptions.middleware,m=(v,y)=>{let T={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(v)};return f.sendRequest($e.SemanticTokensRequest.type,T,y).then(w=>f.protocol2CodeConverter.asSemanticTokens(w),w=>f.handleFailedRequest($e.SemanticTokensRequest.type,w,null))};return g.provideDocumentSemanticTokens?g.provideDocumentSemanticTokens(l,p,m):m(l,p)},provideDocumentSemanticTokensEdits:n?(l,p,f)=>{let g=this._client,m=g.clientOptions.middleware,v=(y,T,w)=>{let R={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(y),previousResultId:T};return g.sendRequest($e.SemanticTokensDeltaRequest.type,R,w).then(O=>$e.SemanticTokens.is(O)?g.protocol2CodeConverter.asSemanticTokens(O):g.protocol2CodeConverter.asSemanticTokensEdits(O),O=>g.handleFailedRequest($e.SemanticTokensDeltaRequest.type,O,null))};return m.provideDocumentSemanticTokensEdits?m.provideDocumentSemanticTokensEdits(l,p,f,v):v(l,p,f)}:void 0}:void 0,o=t.range===!0?{provideDocumentRangeSemanticTokens:(l,p,f)=>{let g=this._client,m=g.clientOptions.middleware,v=(y,T,w)=>{let R={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(y),range:g.code2ProtocolConverter.asRange(T)};return g.sendRequest($e.SemanticTokensRangeRequest.type,R,w).then(O=>g.protocol2CodeConverter.asSemanticTokens(O),O=>g.handleFailedRequest($e.SemanticTokensRangeRequest.type,O,null))};return m.provideDocumentRangeSemanticTokens?m.provideDocumentRangeSemanticTokens(l,p,f,v):v(l,p,f)}}:void 0,c=[],d=this._client.protocol2CodeConverter.asSemanticTokensLegend(t.legend);return a!==void 0&&c.push(ts.languages.registerDocumentSemanticTokensProvider(t.documentSelector,a,d)),o!==void 0&&c.push(ts.languages.registerDocumentRangeSemanticTokensProvider(t.documentSelector,o,d)),[new ts.Disposable(()=>c.forEach(l=>l.dispose())),{range:o,full:a,onDidChangeSemanticTokensEmitter:s}]}};ns.SemanticTokensFeature=Hh});var Bh=ee((oI,Uh)=>{Uh.exports=function(e,t){for(var r=[],n=0;n<e.length;n++){var s=t(e[n],n);VR(s)?r.push.apply(r,s):r.push(s)}return r};var VR=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var zh=ee((sI,Kh)=>{"use strict";Kh.exports=Vh;function Vh(e,t,r){e instanceof RegExp&&(e=Gh(e,r)),t instanceof RegExp&&(t=Gh(t,r));var n=Wh(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function Gh(e,t){var r=t.match(e);return r?r[0]:null}Vh.range=Wh;function Wh(e,t,r){var n,s,a,i,o,c=r.indexOf(e),u=r.indexOf(t,c+1),d=c;if(c>=0&&u>0){if(e===t)return[c,u];for(n=[],a=r.length;d>=0&&!o;)d==c?(n.push(d),c=r.indexOf(e,d+1)):n.length==1?o=[n.pop(),u]:(s=n.pop(),s<a&&(a=s,i=u),u=r.indexOf(t,d+1)),d=c<u&&c>=0?c:u;n.length&&(o=[a,i])}return o}});var rg=ee((aI,tg)=>{var WR=Bh(),Xh=zh();tg.exports=XR;var Yh="\0SLASH"+Math.random()+"\0",Qh="\0OPEN"+Math.random()+"\0",Qa="\0CLOSE"+Math.random()+"\0",Jh="\0COMMA"+Math.random()+"\0",Zh="\0PERIOD"+Math.random()+"\0";function Ya(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function KR(e){return e.split("\\\\").join(Yh).split("\\{").join(Qh).split("\\}").join(Qa).split("\\,").join(Jh).split("\\.").join(Zh)}function zR(e){return e.split(Yh).join("\\").split(Qh).join("{").split(Qa).join("}").split(Jh).join(",").split(Zh).join(".")}function eg(e){if(!e)return[""];var t=[],r=Xh("{","}",e);if(!r)return e.split(",");var n=r.pre,s=r.body,a=r.post,i=n.split(",");i[i.length-1]+="{"+s+"}";var o=eg(a);return a.length&&(i[i.length-1]+=o.shift(),i.push.apply(i,o)),t.push.apply(t,i),t}function XR(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),oi(KR(e),!0).map(zR)):[]}function YR(e){return"{"+e+"}"}function QR(e){return/^-?0\d/.test(e)}function JR(e,t){return e<=t}function ZR(e,t){return e>=t}function oi(e,t){var r=[],n=Xh("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var s=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),i=s||a,o=n.body.indexOf(",")>=0;if(!i&&!o)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+Qa+n.post,oi(e)):[e];var c;if(i)c=n.body.split(/\.\./);else if(c=eg(n.body),c.length===1&&(c=oi(c[0],!1).map(YR),c.length===1)){var d=n.post.length?oi(n.post,!1):[""];return d.map(function(U){return n.pre+c[0]+U})}var u=n.pre,d=n.post.length?oi(n.post,!1):[""],l;if(i){var p=Ya(c[0]),f=Ya(c[1]),g=Math.max(c[0].length,c[1].length),m=c.length==3?Math.abs(Ya(c[2])):1,v=JR,y=f<p;y&&(m*=-1,v=ZR);var T=c.some(QR);l=[];for(var w=p;v(w,f);w+=m){var R;if(a)R=String.fromCharCode(w),R==="\\"&&(R="");else if(R=String(w),T){var O=g-R.length;if(O>0){var F=new Array(O+1).join("0");w<0?R="-"+F+R.slice(1):R=F+R}}l.push(R)}}else l=WR(c,function(te){return oi(te,!1)});for(var z=0;z<l.length;z++)for(var K=0;K<d.length;K++){var J=u+l[z]+d[K];(!t||i||J)&&r.push(J)}return r}});var ug=ee((cI,cg)=>{cg.exports=Rr;Rr.Minimatch=Vt;var Zi={sep:"/"};try{Zi=require("path")}catch{}var ec=Rr.GLOBSTAR=Vt.GLOBSTAR={},ew=rg(),ng={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Ja="[^/]",Za=Ja+"*?",tw="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",rw="(?:(?!(?:\\/|^)\\.).)*?",ig=nw("().*{}+?[]^$\\!");function nw(e){return e.split("").reduce(function(t,r){return t[r]=!0,t},{})}var sg=/\/+/;Rr.filter=iw;function iw(e,t){return t=t||{},function(r,n,s){return Rr(r,e,t)}}function og(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach(function(n){r[n]=t[n]}),Object.keys(e).forEach(function(n){r[n]=e[n]}),r}Rr.defaults=function(e){if(!e||!Object.keys(e).length)return Rr;var t=Rr,r=function(s,a,i){return t.minimatch(s,a,og(e,i))};return r.Minimatch=function(s,a){return new t.Minimatch(s,og(e,a))},r};Vt.defaults=function(e){return!e||!Object.keys(e).length?Vt:Rr.defaults(e).Minimatch};function Rr(e,t,r){if(typeof t!="string")throw new TypeError("glob pattern string required");return r||(r={}),!r.nocomment&&t.charAt(0)==="#"?!1:t.trim()===""?e==="":new Vt(t,r).match(e)}function Vt(e,t){if(!(this instanceof Vt))return new Vt(e,t);if(typeof e!="string")throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),Zi.sep!=="/"&&(e=e.split(Zi.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}Vt.prototype.debug=function(){};Vt.prototype.make=ow;function ow(){if(!this._made){var e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(sg)}),this.debug(this.pattern,r),r=r.map(function(n,s,a){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}}Vt.prototype.parseNegate=sw;function sw(){var e=this.pattern,t=!1,r=this.options,n=0;if(!r.nonegate){for(var s=0,a=e.length;s<a&&e.charAt(s)==="!";s++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}}Rr.braceExpand=function(e,t){return ag(e,t)};Vt.prototype.braceExpand=ag;function ag(e,t){if(t||(this instanceof Vt?t=this.options:t={}),e=typeof e>"u"?this.pattern:e,typeof e>"u")throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:ew(e)}Vt.prototype.parse=aw;var is={};function aw(e,t){if(e.length>1024*64)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&e==="**")return ec;if(e==="")return"";var n="",s=!!r.nocase,a=!1,i=[],o=[],c,u=!1,d=-1,l=-1,p=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",f=this;function g(){if(c){switch(c){case"*":n+=Za,s=!0;break;case"?":n+=Ja,s=!0;break;default:n+="\\"+c;break}f.debug("clearStateChar %j %j",c,n),c=!1}}for(var m=0,v=e.length,y;m<v&&(y=e.charAt(m));m++){if(this.debug("%s	%s %s %j",e,m,n,y),a&&ig[y]){n+="\\"+y,a=!1;continue}switch(y){case"/":return!1;case"\\":g(),a=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,m,n,y),u){this.debug("  in class"),y==="!"&&m===l+1&&(y="^"),n+=y;continue}f.debug("call clearStateChar %j",c),g(),c=y,r.noext&&g();continue;case"(":if(u){n+="(";continue}if(!c){n+="\\(";continue}i.push({type:c,start:m-1,reStart:n.length,open:ng[c].open,close:ng[c].close}),n+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,n),c=!1;continue;case")":if(u||!i.length){n+="\\)";continue}g(),s=!0;var T=i.pop();n+=T.close,T.type==="!"&&o.push(T),T.reEnd=n.length;continue;case"|":if(u||!i.length||a){n+="\\|",a=!1;continue}g(),n+="|";continue;case"[":if(g(),u){n+="\\"+y;continue}u=!0,l=m,d=n.length,n+=y;continue;case"]":if(m===l+1||!u){n+="\\"+y,a=!1;continue}if(u){var w=e.substring(l+1,m);try{RegExp("["+w+"]")}catch{var R=this.parse(w,is);n=n.substr(0,d)+"\\["+R[0]+"\\]",s=s||R[1],u=!1;continue}}s=!0,u=!1,n+=y;continue;default:g(),a?a=!1:ig[y]&&!(y==="^"&&u)&&(n+="\\"),n+=y}}for(u&&(w=e.substr(l+1),R=this.parse(w,is),n=n.substr(0,d)+"\\["+R[0],s=s||R[1]),T=i.pop();T;T=i.pop()){var O=n.slice(T.reStart+T.open.length);this.debug("setting tail",n,T),O=O.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(pe,he,Ce){return Ce||(Ce="\\"),he+he+Ce+"|"}),this.debug(`tail=%j
   %s`,O,O,T,n);var F=T.type==="*"?Za:T.type==="?"?Ja:"\\"+T.type;s=!0,n=n.slice(0,T.reStart)+F+"\\("+O}g(),a&&(n+="\\\\");var z=!1;switch(n.charAt(0)){case".":case"[":case"(":z=!0}for(var K=o.length-1;K>-1;K--){var J=o[K],te=n.slice(0,J.reStart),U=n.slice(J.reStart,J.reEnd-8),G=n.slice(J.reEnd-8,J.reEnd),Q=n.slice(J.reEnd);G+=Q;var ne=te.split("(").length-1,ve=Q;for(m=0;m<ne;m++)ve=ve.replace(/\)[+*?]?/,"");Q=ve;var de="";Q===""&&t!==is&&(de="$");var X=te+U+Q+de+G;n=X}if(n!==""&&s&&(n="(?=.)"+n),z&&(n=p+n),t===is)return[n,s];if(!s)return lw(e);var ce=r.nocase?"i":"";try{var ie=new RegExp("^"+n+"$",ce)}catch{return new RegExp("$.")}return ie._glob=e,ie._src=n,ie}Rr.makeRe=function(e,t){return new Vt(e,t||{}).makeRe()};Vt.prototype.makeRe=cw;function cw(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?Za:t.dot?tw:rw,n=t.nocase?"i":"",s=e.map(function(a){return a.map(function(i){return i===ec?r:typeof i=="string"?dw(i):i._src}).join("\\/")}).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,n)}catch{this.regexp=!1}return this.regexp}Rr.match=function(e,t,r){r=r||{};var n=new Vt(t,r);return e=e.filter(function(s){return n.match(s)}),n.options.nonull&&!e.length&&e.push(t),e};Vt.prototype.match=uw;function uw(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;var r=this.options;Zi.sep!=="/"&&(e=e.split(Zi.sep).join("/")),e=e.split(sg),this.debug(this.pattern,"split",e);var n=this.set;this.debug(this.pattern,"set",n);var s,a;for(a=e.length-1;a>=0&&(s=e[a],!s);a--);for(a=0;a<n.length;a++){var i=n[a],o=e;r.matchBase&&i.length===1&&(o=[s]);var c=this.matchOne(o,i,t);if(c)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}Vt.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,a=0,i=e.length,o=t.length;s<i&&a<o;s++,a++){this.debug("matchOne loop");var c=t[a],u=e[s];if(this.debug(t,c,u),c===!1)return!1;if(c===ec){this.debug("GLOBSTAR",[t,c,u]);var d=s,l=a+1;if(l===o){for(this.debug("** at the end");s<i;s++)if(e[s]==="."||e[s]===".."||!n.dot&&e[s].charAt(0)===".")return!1;return!0}for(;d<i;){var p=e[d];if(this.debug(`
globstar while`,e,d,t,l,p),this.matchOne(e.slice(d),t.slice(l),r))return this.debug("globstar found match!",d,i,p),!0;if(p==="."||p===".."||!n.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,d,t,l);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,d,t,l),d===i))}var f;if(typeof c=="string"?(n.nocase?f=u.toLowerCase()===c.toLowerCase():f=u===c,this.debug("string match",c,u,f)):(f=u.match(c),this.debug("pattern match",c,u,f)),!f)return!1}if(s===i&&a===o)return!0;if(s===i)return r;if(a===o){var g=s===i-1&&e[s]==="";return g}throw new Error("wtf?")};function lw(e){return e.replace(/\\(.)/g,"$1")}function dw(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var _g=ee(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.WillDeleteFilesFeature=pr.WillRenameFilesFeature=pr.WillCreateFilesFeature=pr.DidDeleteFilesFeature=pr.DidRenameFilesFeature=pr.DidCreateFilesFeature=void 0;var Fr=require("vscode"),pw=ug(),Qr=St(),fw=Ho();function lg(e,t){return e[t]===void 0&&(e[t]={}),e[t]}function hw(e,t){return e[t]}function dg(e,t,r){e[t]=r}var qn=class{constructor(t,r,n,s,a){this._filters=new Map,this._client=t,this._event=r,this._registrationType=n,this._clientCapability=s,this._serverCapability=a}get registrationType(){return this._registrationType}fillClientCapabilities(t){let r=lg(lg(t,"workspace"),"fileOperations");dg(r,"dynamicRegistration",!0),dg(r,this._clientCapability,!0)}initialize(t){var r;let n=(r=t.workspace)===null||r===void 0?void 0:r.fileOperations,s=n!==void 0?hw(n,this._serverCapability):void 0;if(s?.filters!==void 0)try{this.register({id:fw.generateUuid(),registerOptions:{filters:s.filters}})}catch(a){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${a}`)}}register(t){this._listener||(this._listener=this._event(this.send,this));let r=t.registerOptions.filters.map(n=>{let s=new pw.Minimatch(n.pattern.glob,qn.asMinimatchOptions(n.pattern.options));if(!s.makeRe())throw new Error(`Invalid pattern ${n.pattern.glob}!`);return{scheme:n.scheme,matcher:s,kind:n.pattern.matches}});this._filters.set(t.id,r)}unregister(t){this._filters.delete(t),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async filter(t,r){let n=await Promise.all(t.files.map(async a=>{let i=r(a),o=i.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let u of c)if(!(u.scheme!==void 0&&u.scheme!==i.scheme)){if(u.matcher.match(o)){if(u.kind===void 0)return!0;let d=await qn.getFileType(i);if(d===void 0)return this._client.error(`Failed to determine file type for ${i.toString()}.`),!0;if(d===Fr.FileType.File&&u.kind===Qr.FileOperationPatternKind.file||d===Fr.FileType.Directory&&u.kind===Qr.FileOperationPatternKind.folder)return!0}else if(u.kind===Qr.FileOperationPatternKind.folder&&await qn.getFileType(i)===Fr.FileType.Directory&&u.matcher.match(`${o}/`))return!0}return!1})),s=t.files.filter((a,i)=>n[i]);return Object.assign(Object.assign({},t),{files:s})}static async getFileType(t){try{return(await Fr.workspace.fs.stat(t)).type}catch{return}}static asMinimatchOptions(t){if(t!==void 0&&t.ignoreCase===!0)return{nocase:!0}}},os=class extends qn{constructor(t,r,n,s,a,i,o){super(t,r,n,s,a);this._notificationType=n,this._accessUri=i,this._createParams=o}async send(t){let r=await this.filter(t,this._accessUri);if(r.files.length){let n=async s=>{this._client.sendNotification(this._notificationType,this._createParams(s))};this.doSend(r,n)}}},pg=class extends os{constructor(t){super(t,Fr.workspace.onDidCreateFiles,Qr.DidCreateFilesNotification.type,"didCreate","didCreate",r=>r,t.code2ProtocolConverter.asDidCreateFilesParams)}doSend(t,r){var n;let s=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return s?.didCreateFiles?s.didCreateFiles(t,r):r(t)}};pr.DidCreateFilesFeature=pg;var fg=class extends os{constructor(t){super(t,Fr.workspace.onDidRenameFiles,Qr.DidRenameFilesNotification.type,"didRename","didRename",r=>r.oldUri,t.code2ProtocolConverter.asDidRenameFilesParams)}doSend(t,r){var n;let s=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return s?.didRenameFiles?s.didRenameFiles(t,r):r(t)}};pr.DidRenameFilesFeature=fg;var hg=class extends os{constructor(t){super(t,Fr.workspace.onDidDeleteFiles,Qr.DidDeleteFilesNotification.type,"didDelete","didDelete",r=>r,t.code2ProtocolConverter.asDidDeleteFilesParams)}doSend(t,r){var n;let s=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return s?.didDeleteFiles?s.didDeleteFiles(t,r):r(t)}};pr.DidDeleteFilesFeature=hg;var ss=class extends qn{constructor(t,r,n,s,a,i,o){super(t,r,n,s,a);this._requestType=n,this._accessUri=i,this._createParams=o}async send(t){let r=this.waitUntil(t);t.waitUntil(r)}async waitUntil(t){let r=await this.filter(t,this._accessUri);if(r.files.length){let n=s=>this._client.sendRequest(this._requestType,this._createParams(s)).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(r,n)}else return}},gg=class extends ss{constructor(t){super(t,Fr.workspace.onWillCreateFiles,Qr.WillCreateFilesRequest.type,"willCreate","willCreate",r=>r,t.code2ProtocolConverter.asWillCreateFilesParams)}doSend(t,r){var n;let s=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return s?.willCreateFiles?s.willCreateFiles(t,r):r(t)}};pr.WillCreateFilesFeature=gg;var mg=class extends ss{constructor(t){super(t,Fr.workspace.onWillRenameFiles,Qr.WillRenameFilesRequest.type,"willRename","willRename",r=>r.oldUri,t.code2ProtocolConverter.asWillRenameFilesParams)}doSend(t,r){var n;let s=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return s?.willRenameFiles?s.willRenameFiles(t,r):r(t)}};pr.WillRenameFilesFeature=mg;var vg=class extends ss{constructor(t){super(t,Fr.workspace.onWillDeleteFiles,Qr.WillDeleteFilesRequest.type,"willDelete","willDelete",r=>r,t.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(t,r){var n;let s=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return s?.willDeleteFiles?s.willDeleteFiles(t,r):r(t)}};pr.WillDeleteFilesFeature=vg});var Cg=ee(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.LinkedEditingFeature=void 0;var gw=require("vscode"),tc=St(),mw=gr();function yg(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Eg=class extends mw.TextDocumentFeature{constructor(t){super(t,tc.LinkedEditingRangeRequest.type)}fillClientCapabilities(t){let r=yg(yg(t,"textDocument"),"linkedEditingRange");r.dynamicRegistration=!0}initialize(t,r){let[n,s]=this.getRegistration(r,t.linkedEditingRangeProvider);!n||!s||this.register({id:n,registerOptions:s})}registerLanguageProvider(t){let r={provideLinkedEditingRanges:(n,s,a)=>{let i=this._client,o=(u,d,l)=>i.sendRequest(tc.LinkedEditingRangeRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(u,d),l).then(i.protocol2CodeConverter.asLinkedEditingRanges,p=>i.handleFailedRequest(tc.LinkedEditingRangeRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideLinkedEditingRange?c.provideLinkedEditingRange(n,s,a,o):o(n,s,a)}};return[gw.languages.registerLinkedEditingRangeProvider(t.documentSelector,r),r]}};as.LinkedEditingFeature=Eg});var rc=ee(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.ProposedFeatures=Ln.CommonLanguageClient=void 0;var vw=gr(),_w=_h(),yw=wa(),Ew=Ch(),Cw=Th(),bw=Rh(),Tw=Ph(),Sw=Dh(),Rw=Nh(),ww=Mh(),Pw=Fh(),Ow=$h(),si=_g(),Iw=Cg(),bg=class extends vw.BaseLanguageClient{constructor(t,r,n){super(t,r,n)}registerProposedFeatures(){this.registerFeatures(Tg.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new yw.ConfigurationFeature(this)),this.registerFeature(new Cw.TypeDefinitionFeature(this)),this.registerFeature(new Ew.ImplementationFeature(this)),this.registerFeature(new _w.ColorProviderFeature(this)),this.registerFeature(new bw.WorkspaceFoldersFeature(this)),this.registerFeature(new Tw.FoldingRangeFeature(this)),this.registerFeature(new Sw.DeclarationFeature(this)),this.registerFeature(new Rw.SelectionRangeFeature(this)),this.registerFeature(new ww.ProgressFeature(this)),this.registerFeature(new Pw.CallHierarchyFeature(this)),this.registerFeature(new Ow.SemanticTokensFeature(this)),this.registerFeature(new Iw.LinkedEditingFeature(this)),this.registerFeature(new si.DidCreateFilesFeature(this)),this.registerFeature(new si.DidRenameFilesFeature(this)),this.registerFeature(new si.DidDeleteFilesFeature(this)),this.registerFeature(new si.WillCreateFilesFeature(this)),this.registerFeature(new si.WillRenameFilesFeature(this)),this.registerFeature(new si.WillDeleteFilesFeature(this))}};Ln.CommonLanguageClient=bg;var Tg;(function(e){function t(r){return[]}e.createAll=t})(Tg=Ln.ProposedFeatures||(Ln.ProposedFeatures={}))});var Rg=ee(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.terminate=void 0;var Sg=require("child_process"),Dw=require("path"),Aw=process.platform==="win32",xw=process.platform==="darwin",Nw=process.platform==="linux";function kw(e,t){if(Aw)try{let s={stdio:["pipe","pipe","ignore"]};return t&&(s.cwd=t),Sg.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],s),!0}catch{return!1}else if(Nw||xw)try{var r=Dw.join(__dirname,"terminateProcess.sh"),n=Sg.spawnSync(r,[e.pid.toString()]);return!n.error}catch{return!1}else return e.kill("SIGKILL"),!0}cs.terminate=kw});var nc=ee((fI,wg)=>{"use strict";wg.exports=St()});var Pg=ee(Jr=>{"use strict";var Mw=Jr&&Jr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ic=Jr&&Jr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Mw(t,e,r)};Object.defineProperty(Jr,"__esModule",{value:!0});ic(St(),Jr);ic(gr(),Jr);ic(rc(),Jr)});var ci=ee(cr=>{"use strict";var qw=cr&&cr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Dg=cr&&cr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&qw(t,e,r)};Object.defineProperty(cr,"__esModule",{value:!0});cr.SettingMonitor=cr.LanguageClient=cr.TransportKind=void 0;var jn=require("child_process"),oc=require("fs"),sc=require("path"),Og=Rd(),dn=require("vscode"),jt=sn(),Lw=rc(),jw=gr(),Fw=Rg(),Lt=nc();Dg(nc(),cr);Dg(Pg(),cr);var Ig="^1.52.0",ac;(function(e){function t(r){return jt.string(r.command)}e.is=t})(ac||(ac={}));var Yt;(function(e){e[e.stdio=0]="stdio",e[e.ipc=1]="ipc",e[e.pipe=2]="pipe",e[e.socket=3]="socket"})(Yt=cr.TransportKind||(cr.TransportKind={}));var ai;(function(e){function t(r){let n=r;return n&&n.kind===Yt.socket&&jt.number(n.port)}e.isSocket=t})(ai||(ai={}));var cc;(function(e){function t(r){return jt.string(r.module)}e.is=t})(cc||(cc={}));var uc;(function(e){function t(r){let n=r;return n&&n.writer!==void 0&&n.reader!==void 0}e.is=t})(uc||(uc={}));var lc;(function(e){function t(r){let n=r;return n&&n.process!==void 0&&typeof n.detached=="boolean"}e.is=t})(lc||(lc={}));var Ag=class extends Lw.CommonLanguageClient{constructor(t,r,n,s,a){let i,o,c,u,d;jt.string(r)?(i=t,o=r,c=n,u=s,d=!!a):(i=t.toLowerCase(),o=t,c=r,u=n,d=s),d===void 0&&(d=!1);super(i,o,u);this._serverOptions=c,this._forceDebug=d;try{this.checkVersion()}catch(l){throw jt.string(l.message)&&this.outputChannel.appendLine(l.message),l}}checkVersion(){let t=Og.parse(dn.version);if(!t)throw new Error(`No valid VS Code version detected. Version string is: ${dn.version}`);if(t.prerelease&&t.prerelease.length>0&&(t.prerelease=[]),!Og.satisfies(t,Ig))throw new Error(`The language client requires VS Code version ${Ig} but received version ${dn.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(t){!t||setTimeout(()=>{try{process.kill(t.pid,0),Fw.terminate(t)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(t){super.fillInitializeParams(t),t.processId===null&&(t.processId=process.pid)}createMessageTransports(t){function r(d,l){if(!d&&!l)return;let p=Object.create(null);return Object.keys(process.env).forEach(f=>p[f]=process.env[f]),l&&(p.ELECTRON_RUN_AS_NODE="1",p.ELECTRON_NO_ASAR="1"),d&&Object.keys(d).forEach(f=>p[f]=d[f]),p}let n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],s=["--debug","--debug-brk","--inspect","--inspect-brk"];function a(){let d=process.execArgv;return d?d.some(l=>n.some(p=>l.startsWith(p))||s.some(p=>l===p)):!1}function i(d){if(d.stdin===null||d.stdout===null||d.stderr===null)throw new Error("Process created without stdio streams")}let o=this._serverOptions;if(jt.func(o))return o().then(d=>{if(jw.MessageTransports.is(d))return this._isDetached=!!d.detached,d;if(uc.is(d))return this._isDetached=!!d.detached,{reader:new Lt.StreamMessageReader(d.reader),writer:new Lt.StreamMessageWriter(d.writer)};{let l;return lc.is(d)?(l=d.process,this._isDetached=d.detached):(l=d,this._isDetached=!1),l.stderr.on("data",p=>this.outputChannel.append(jt.string(p)?p:p.toString(t))),{reader:new Lt.StreamMessageReader(l.stdout),writer:new Lt.StreamMessageWriter(l.stdin)}}});let c,u=o;return u.run||u.debug?this._forceDebug||a()?c=u.debug:c=u.run:c=o,this._getServerWorkingDir(c.options).then(d=>{if(cc.is(c)&&c.module){let l=c,p=l.transport||Yt.stdio;if(l.runtime){let f=[],g=l.options||Object.create(null);g.execArgv&&g.execArgv.forEach(T=>f.push(T)),f.push(l.module),l.args&&l.args.forEach(T=>f.push(T));let m=Object.create(null);m.cwd=d,m.env=r(g.env,!1);let v=this._getRuntimePath(l.runtime,d),y;if(p===Yt.ipc?(m.stdio=[null,null,null,"ipc"],f.push("--node-ipc")):p===Yt.stdio?f.push("--stdio"):p===Yt.pipe?(y=Lt.generateRandomPipeName(),f.push(`--pipe=${y}`)):ai.isSocket(p)&&f.push(`--socket=${p.port}`),f.push(`--clientProcessId=${process.pid.toString()}`),p===Yt.ipc||p===Yt.stdio){let T=jn.spawn(v,f,m);return!T||!T.pid?Promise.reject(`Launching server using runtime ${v} failed.`):(this._serverProcess=T,T.stderr.on("data",w=>this.outputChannel.append(jt.string(w)?w:w.toString(t))),p===Yt.ipc?(T.stdout.on("data",w=>this.outputChannel.append(jt.string(w)?w:w.toString(t))),Promise.resolve({reader:new Lt.IPCMessageReader(T),writer:new Lt.IPCMessageWriter(T)})):Promise.resolve({reader:new Lt.StreamMessageReader(T.stdout),writer:new Lt.StreamMessageWriter(T.stdin)}))}else{if(p===Yt.pipe)return Lt.createClientPipeTransport(y).then(T=>{let w=jn.spawn(v,f,m);return!w||!w.pid?Promise.reject(`Launching server using runtime ${v} failed.`):(this._serverProcess=w,w.stderr.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),w.stdout.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),T.onConnected().then(R=>({reader:R[0],writer:R[1]})))});if(ai.isSocket(p))return Lt.createClientSocketTransport(p.port).then(T=>{let w=jn.spawn(v,f,m);return!w||!w.pid?Promise.reject(`Launching server using runtime ${v} failed.`):(this._serverProcess=w,w.stderr.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),w.stdout.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),T.onConnected().then(R=>({reader:R[0],writer:R[1]})))})}}else{let f;return new Promise((g,m)=>{let v=l.args&&l.args.slice()||[];p===Yt.ipc?v.push("--node-ipc"):p===Yt.stdio?v.push("--stdio"):p===Yt.pipe?(f=Lt.generateRandomPipeName(),v.push(`--pipe=${f}`)):ai.isSocket(p)&&v.push(`--socket=${p.port}`),v.push(`--clientProcessId=${process.pid.toString()}`);let y=l.options||Object.create(null);if(y.env=r(y.env,!0),y.execArgv=y.execArgv||[],y.cwd=d,y.silent=!0,p===Yt.ipc||p===Yt.stdio){let T=jn.fork(l.module,v||[],y);i(T),this._serverProcess=T,T.stderr.on("data",w=>this.outputChannel.append(jt.string(w)?w:w.toString(t))),p===Yt.ipc?(T.stdout.on("data",w=>this.outputChannel.append(jt.string(w)?w:w.toString(t))),g({reader:new Lt.IPCMessageReader(this._serverProcess),writer:new Lt.IPCMessageWriter(this._serverProcess)})):g({reader:new Lt.StreamMessageReader(T.stdout),writer:new Lt.StreamMessageWriter(T.stdin)})}else p===Yt.pipe?Lt.createClientPipeTransport(f).then(T=>{let w=jn.fork(l.module,v||[],y);i(w),this._serverProcess=w,w.stderr.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),w.stdout.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),T.onConnected().then(R=>{g({reader:R[0],writer:R[1]})})}):ai.isSocket(p)&&Lt.createClientSocketTransport(p.port).then(T=>{let w=jn.fork(l.module,v||[],y);i(w),this._serverProcess=w,w.stderr.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),w.stdout.on("data",R=>this.outputChannel.append(jt.string(R)?R:R.toString(t))),T.onConnected().then(R=>{g({reader:R[0],writer:R[1]})})})})}}else if(ac.is(c)&&c.command){let l=c,p=l.args||[],f=Object.assign({},l.options);f.cwd=f.cwd||d;let g=jn.spawn(l.command,p,f);return!g||!g.pid?Promise.reject(`Launching server using command ${l.command} failed.`):(g.stderr.on("data",m=>this.outputChannel.append(jt.string(m)?m:m.toString(t))),this._serverProcess=g,this._isDetached=!!f.detached,Promise.resolve({reader:new Lt.StreamMessageReader(g.stdout),writer:new Lt.StreamMessageWriter(g.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(o,null,4)))})}_getRuntimePath(t,r){if(sc.isAbsolute(t))return t;let n=this._mainGetRootPath();if(n!==void 0){let s=sc.join(n,t);if(oc.existsSync(s))return s}if(r!==void 0){let s=sc.join(r,t);if(oc.existsSync(s))return s}return t}_mainGetRootPath(){let t=dn.workspace.workspaceFolders;if(!t||t.length===0)return;let r=t[0];if(r.uri.scheme==="file")return r.uri.fsPath}_getServerWorkingDir(t){let r=t&&t.cwd;return r||(r=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),r?new Promise(n=>{oc.lstat(r,(s,a)=>{n(!s&&a.isDirectory()?r:void 0)})}):Promise.resolve(void 0)}getLocale(){let t=process.env.VSCODE_NLS_CONFIG;if(t===void 0)return"en";let r;try{r=JSON.parse(t)}catch{}return r===void 0||typeof r.locale!="string"?"en":r.locale}};cr.LanguageClient=Ag;var xg=class{constructor(t,r){this._client=t,this._setting=r,this._listeners=[]}start(){return dn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new dn.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let t=this._setting.indexOf("."),r=t>=0?this._setting.substr(0,t):this._setting,n=t>=0?this._setting.substr(t+1):void 0,s=n?dn.workspace.getConfiguration(r).get(n,!1):dn.workspace.getConfiguration(r);s&&this._client.needsStart()?this._client.start():!s&&this._client.needsStop()&&this._client.stop()}};cr.SettingMonitor=xg});var us=ee((eo,dc)=>{(function(e,t){if(typeof eo=="object"&&typeof dc=="object")dc.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var r=t();for(var n in r)(typeof eo=="object"?eo:e)[n]=r[n]}})(eo,function(){return(()=>{"use strict";var e={470:r=>{function n(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function s(i,o){for(var c,u="",d=0,l=-1,p=0,f=0;f<=i.length;++f){if(f<i.length)c=i.charCodeAt(f);else{if(c===47)break;c=47}if(c===47){if(!(l===f-1||p===1))if(l!==f-1&&p===2){if(u.length<2||d!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var g=u.lastIndexOf("/");if(g!==u.length-1){g===-1?(u="",d=0):d=(u=u.slice(0,g)).length-1-u.lastIndexOf("/"),l=f,p=0;continue}}else if(u.length===2||u.length===1){u="",d=0,l=f,p=0;continue}}o&&(u.length>0?u+="/..":u="..",d=2)}else u.length>0?u+="/"+i.slice(l+1,f):u=i.slice(l+1,f),d=f-l-1;l=f,p=0}else c===46&&p!==-1?++p:p=-1}return u}var a={resolve:function(){for(var i,o="",c=!1,u=arguments.length-1;u>=-1&&!c;u--){var d;u>=0?d=arguments[u]:(i===void 0&&(i=process.cwd()),d=i),n(d),d.length!==0&&(o=d+"/"+o,c=d.charCodeAt(0)===47)}return o=s(o,!c),c?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(i){if(n(i),i.length===0)return".";var o=i.charCodeAt(0)===47,c=i.charCodeAt(i.length-1)===47;return(i=s(i,!o)).length!==0||o||(i="."),i.length>0&&c&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return n(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var c=arguments[o];n(c),c.length>0&&(i===void 0?i=c:i+="/"+c)}return i===void 0?".":a.normalize(i)},relative:function(i,o){if(n(i),n(o),i===o||(i=a.resolve(i))===(o=a.resolve(o)))return"";for(var c=1;c<i.length&&i.charCodeAt(c)===47;++c);for(var u=i.length,d=u-c,l=1;l<o.length&&o.charCodeAt(l)===47;++l);for(var p=o.length-l,f=d<p?d:p,g=-1,m=0;m<=f;++m){if(m===f){if(p>f){if(o.charCodeAt(l+m)===47)return o.slice(l+m+1);if(m===0)return o.slice(l+m)}else d>f&&(i.charCodeAt(c+m)===47?g=m:m===0&&(g=0));break}var v=i.charCodeAt(c+m);if(v!==o.charCodeAt(l+m))break;v===47&&(g=m)}var y="";for(m=c+g+1;m<=u;++m)m!==u&&i.charCodeAt(m)!==47||(y.length===0?y+="..":y+="/..");return y.length>0?y+o.slice(l+g):(l+=g,o.charCodeAt(l)===47&&++l,o.slice(l))},_makeLong:function(i){return i},dirname:function(i){if(n(i),i.length===0)return".";for(var o=i.charCodeAt(0),c=o===47,u=-1,d=!0,l=i.length-1;l>=1;--l)if((o=i.charCodeAt(l))===47){if(!d){u=l;break}}else d=!1;return u===-1?c?"/":".":c&&u===1?"//":i.slice(0,u)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');n(i);var c,u=0,d=-1,l=!0;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var p=o.length-1,f=-1;for(c=i.length-1;c>=0;--c){var g=i.charCodeAt(c);if(g===47){if(!l){u=c+1;break}}else f===-1&&(l=!1,f=c+1),p>=0&&(g===o.charCodeAt(p)?--p==-1&&(d=c):(p=-1,d=f))}return u===d?d=f:d===-1&&(d=i.length),i.slice(u,d)}for(c=i.length-1;c>=0;--c)if(i.charCodeAt(c)===47){if(!l){u=c+1;break}}else d===-1&&(l=!1,d=c+1);return d===-1?"":i.slice(u,d)},extname:function(i){n(i);for(var o=-1,c=0,u=-1,d=!0,l=0,p=i.length-1;p>=0;--p){var f=i.charCodeAt(p);if(f!==47)u===-1&&(d=!1,u=p+1),f===46?o===-1?o=p:l!==1&&(l=1):o!==-1&&(l=-1);else if(!d){c=p+1;break}}return o===-1||u===-1||l===0||l===1&&o===u-1&&o===c+1?"":i.slice(o,u)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return function(o,c){var u=c.dir||c.root,d=c.base||(c.name||"")+(c.ext||"");return u?u===c.root?u+d:u+"/"+d:d}(0,i)},parse:function(i){n(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var c,u=i.charCodeAt(0),d=u===47;d?(o.root="/",c=1):c=0;for(var l=-1,p=0,f=-1,g=!0,m=i.length-1,v=0;m>=c;--m)if((u=i.charCodeAt(m))!==47)f===-1&&(g=!1,f=m+1),u===46?l===-1?l=m:v!==1&&(v=1):l!==-1&&(v=-1);else if(!g){p=m+1;break}return l===-1||f===-1||v===0||v===1&&l===f-1&&l===p+1?f!==-1&&(o.base=o.name=p===0&&d?i.slice(1,f):i.slice(p,f)):(p===0&&d?(o.name=i.slice(1,l),o.base=i.slice(1,f)):(o.name=i.slice(p,l),o.base=i.slice(p,f)),o.ext=i.slice(l,f)),p>0?o.dir=i.slice(0,p-1):d&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,r.exports=a},465:(r,n,s)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=n.URI=void 0;var a=s(796);Object.defineProperty(n,"URI",{enumerable:!0,get:function(){return a.URI}});var i=s(679);Object.defineProperty(n,"Utils",{enumerable:!0,get:function(){return i.Utils}})},674:(r,n)=>{if(Object.defineProperty(n,"__esModule",{value:!0}),n.isWindows=void 0,typeof process=="object")n.isWindows=process.platform==="win32";else if(typeof navigator=="object"){var s=navigator.userAgent;n.isWindows=s.indexOf("Windows")>=0}},796:function(r,n,s){var a,i,o=this&&this.__extends||(a=function(U,G){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,ne){Q.__proto__=ne}||function(Q,ne){for(var ve in ne)Object.prototype.hasOwnProperty.call(ne,ve)&&(Q[ve]=ne[ve])})(U,G)},function(U,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function Q(){this.constructor=U}a(U,G),U.prototype=G===null?Object.create(G):(Q.prototype=G.prototype,new Q)});Object.defineProperty(n,"__esModule",{value:!0}),n.uriToFsPath=n.URI=void 0;var c=s(674),u=/^\w[\w\d+.-]*$/,d=/^\//,l=/^\/\//;function p(U,G){if(!U.scheme&&G)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(U.authority,'", path: "').concat(U.path,'", query: "').concat(U.query,'", fragment: "').concat(U.fragment,'"}'));if(U.scheme&&!u.test(U.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(U.path){if(U.authority){if(!d.test(U.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(U.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var f="",g="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,v=function(){function U(G,Q,ne,ve,de,X){X===void 0&&(X=!1),typeof G=="object"?(this.scheme=G.scheme||f,this.authority=G.authority||f,this.path=G.path||f,this.query=G.query||f,this.fragment=G.fragment||f):(this.scheme=function(ce,ie){return ce||ie?ce:"file"}(G,X),this.authority=Q||f,this.path=function(ce,ie){switch(ce){case"https":case"http":case"file":ie?ie[0]!==g&&(ie=g+ie):ie=g}return ie}(this.scheme,ne||f),this.query=ve||f,this.fragment=de||f,p(this,X))}return U.isUri=function(G){return G instanceof U||!!G&&typeof G.authority=="string"&&typeof G.fragment=="string"&&typeof G.path=="string"&&typeof G.query=="string"&&typeof G.scheme=="string"&&typeof G.fsPath=="string"&&typeof G.with=="function"&&typeof G.toString=="function"},Object.defineProperty(U.prototype,"fsPath",{get:function(){return F(this,!1)},enumerable:!1,configurable:!0}),U.prototype.with=function(G){if(!G)return this;var Q=G.scheme,ne=G.authority,ve=G.path,de=G.query,X=G.fragment;return Q===void 0?Q=this.scheme:Q===null&&(Q=f),ne===void 0?ne=this.authority:ne===null&&(ne=f),ve===void 0?ve=this.path:ve===null&&(ve=f),de===void 0?de=this.query:de===null&&(de=f),X===void 0?X=this.fragment:X===null&&(X=f),Q===this.scheme&&ne===this.authority&&ve===this.path&&de===this.query&&X===this.fragment?this:new T(Q,ne,ve,de,X)},U.parse=function(G,Q){Q===void 0&&(Q=!1);var ne=m.exec(G);return ne?new T(ne[2]||f,te(ne[4]||f),te(ne[5]||f),te(ne[7]||f),te(ne[9]||f),Q):new T(f,f,f,f,f)},U.file=function(G){var Q=f;if(c.isWindows&&(G=G.replace(/\\/g,g)),G[0]===g&&G[1]===g){var ne=G.indexOf(g,2);ne===-1?(Q=G.substring(2),G=g):(Q=G.substring(2,ne),G=G.substring(ne)||g)}return new T("file",Q,G,f,f)},U.from=function(G){var Q=new T(G.scheme,G.authority,G.path,G.query,G.fragment);return p(Q,!0),Q},U.prototype.toString=function(G){return G===void 0&&(G=!1),z(this,G)},U.prototype.toJSON=function(){return this},U.revive=function(G){if(G){if(G instanceof U)return G;var Q=new T(G);return Q._formatted=G.external,Q._fsPath=G._sep===y?G.fsPath:null,Q}return G},U}();n.URI=v;var y=c.isWindows?1:void 0,T=function(U){function G(){var Q=U!==null&&U.apply(this,arguments)||this;return Q._formatted=null,Q._fsPath=null,Q}return o(G,U),Object.defineProperty(G.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=F(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),G.prototype.toString=function(Q){return Q===void 0&&(Q=!1),Q?z(this,!0):(this._formatted||(this._formatted=z(this,!1)),this._formatted)},G.prototype.toJSON=function(){var Q={$mid:1};return this._fsPath&&(Q.fsPath=this._fsPath,Q._sep=y),this._formatted&&(Q.external=this._formatted),this.path&&(Q.path=this.path),this.scheme&&(Q.scheme=this.scheme),this.authority&&(Q.authority=this.authority),this.query&&(Q.query=this.query),this.fragment&&(Q.fragment=this.fragment),Q},G}(v),w=((i={})[58]="%3A",i[47]="%2F",i[63]="%3F",i[35]="%23",i[91]="%5B",i[93]="%5D",i[64]="%40",i[33]="%21",i[36]="%24",i[38]="%26",i[39]="%27",i[40]="%28",i[41]="%29",i[42]="%2A",i[43]="%2B",i[44]="%2C",i[59]="%3B",i[61]="%3D",i[32]="%20",i);function R(U,G){for(var Q=void 0,ne=-1,ve=0;ve<U.length;ve++){var de=U.charCodeAt(ve);if(de>=97&&de<=122||de>=65&&de<=90||de>=48&&de<=57||de===45||de===46||de===95||de===126||G&&de===47)ne!==-1&&(Q+=encodeURIComponent(U.substring(ne,ve)),ne=-1),Q!==void 0&&(Q+=U.charAt(ve));else{Q===void 0&&(Q=U.substr(0,ve));var X=w[de];X!==void 0?(ne!==-1&&(Q+=encodeURIComponent(U.substring(ne,ve)),ne=-1),Q+=X):ne===-1&&(ne=ve)}}return ne!==-1&&(Q+=encodeURIComponent(U.substring(ne))),Q!==void 0?Q:U}function O(U){for(var G=void 0,Q=0;Q<U.length;Q++){var ne=U.charCodeAt(Q);ne===35||ne===63?(G===void 0&&(G=U.substr(0,Q)),G+=w[ne]):G!==void 0&&(G+=U[Q])}return G!==void 0?G:U}function F(U,G){var Q;return Q=U.authority&&U.path.length>1&&U.scheme==="file"?"//".concat(U.authority).concat(U.path):U.path.charCodeAt(0)===47&&(U.path.charCodeAt(1)>=65&&U.path.charCodeAt(1)<=90||U.path.charCodeAt(1)>=97&&U.path.charCodeAt(1)<=122)&&U.path.charCodeAt(2)===58?G?U.path.substr(1):U.path[1].toLowerCase()+U.path.substr(2):U.path,c.isWindows&&(Q=Q.replace(/\//g,"\\")),Q}function z(U,G){var Q=G?O:R,ne="",ve=U.scheme,de=U.authority,X=U.path,ce=U.query,ie=U.fragment;if(ve&&(ne+=ve,ne+=":"),(de||ve==="file")&&(ne+=g,ne+=g),de){var pe=de.indexOf("@");if(pe!==-1){var he=de.substr(0,pe);de=de.substr(pe+1),(pe=he.indexOf(":"))===-1?ne+=Q(he,!1):(ne+=Q(he.substr(0,pe),!1),ne+=":",ne+=Q(he.substr(pe+1),!1)),ne+="@"}(pe=(de=de.toLowerCase()).indexOf(":"))===-1?ne+=Q(de,!1):(ne+=Q(de.substr(0,pe),!1),ne+=de.substr(pe))}if(X){if(X.length>=3&&X.charCodeAt(0)===47&&X.charCodeAt(2)===58)(Ce=X.charCodeAt(1))>=65&&Ce<=90&&(X="/".concat(String.fromCharCode(Ce+32),":").concat(X.substr(3)));else if(X.length>=2&&X.charCodeAt(1)===58){var Ce;(Ce=X.charCodeAt(0))>=65&&Ce<=90&&(X="".concat(String.fromCharCode(Ce+32),":").concat(X.substr(2)))}ne+=Q(X,!0)}return ce&&(ne+="?",ne+=Q(ce,!1)),ie&&(ne+="#",ne+=G?ie:R(ie,!1)),ne}function K(U){try{return decodeURIComponent(U)}catch{return U.length>3?U.substr(0,3)+K(U.substr(3)):U}}n.uriToFsPath=F;var J=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function te(U){return U.match(J)?U.replace(J,function(G){return K(G)}):U}},679:function(r,n,s){var a=this&&this.__spreadArray||function(u,d,l){if(l||arguments.length===2)for(var p,f=0,g=d.length;f<g;f++)!p&&f in d||(p||(p=Array.prototype.slice.call(d,0,f)),p[f]=d[f]);return u.concat(p||Array.prototype.slice.call(d))};Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=void 0;var i,o=s(470),c=o.posix||o;(i=n.Utils||(n.Utils={})).joinPath=function(u){for(var d=[],l=1;l<arguments.length;l++)d[l-1]=arguments[l];return u.with({path:c.join.apply(c,a([u.path],d,!1))})},i.resolvePath=function(u){for(var d=[],l=1;l<arguments.length;l++)d[l-1]=arguments[l];var p=u.path||"/";return u.with({path:c.resolve.apply(c,a([p],d,!1))})},i.dirname=function(u){var d=c.dirname(u.path);return d.length===1&&d.charCodeAt(0)===46?u:u.with({path:d})},i.basename=function(u){return c.basename(u.path)},i.extname=function(u){return c.extname(u.path)}}},t={};return function r(n){if(t[n])return t[n].exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(465)})()})});var Ng=ee(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});var ls,pc;(()=>{let e=new Map;ls={register(o,c,u){e.set(o,{d:c,f:u,exp:{}})}};async function t(o,c){let u=o.replace(/\.\w+$/i,"");if(u.includes("./")){let[d,...l]=u.split("/").reverse(),[,...p]=c.split("/").reverse(),f=[d],g=0,m;for(;m=l.shift();)if(m==="..")g++;else{if(m===".")break;f.push(m)}g<p.length&&f.push(...p.slice(g)),u=f.reverse().join("/")}return e.has(u)?a(u):Promise.resolve().then(()=>require(o))}function r(o,c){return{id:o,import:u=>t(u,o),meta:{url:o,main:c}}}function n(o){return(c,u)=>{u=typeof c=="string"?{[c]:u}:c;for(let[d,l]of Object.entries(u))Object.defineProperty(o,d,{value:l,writable:!0,enumerable:!0})}}function s(o){for(let[c,u]of e.entries()){let{f:d,exp:l}=u,{execute:p,setters:f}=d(n(l),r(c,c===o));delete u.f,u.e=p,u.s=f}}async function a(o){if(!e.has(o))return;let c=e.get(o);if(c.s){let{d:u,e:d,s:l}=c;delete c.s,delete c.e;for(let f=0;f<l.length;f++)l[f](await a(u[f]));let p=d();p&&await p}return c.exp}function i(o){if(!e.has(o))return;let c=e.get(o);if(c.s){let{d:u,e:d,s:l}=c;delete c.s,delete c.e;for(let p=0;p<l.length;p++)l[p](i(u[p]));d()}return c.exp}pc=(o,c)=>(ls=pc=void 0,s(o),c?a(o):i(o))})();ls.register("version",[],function(e,t){"use strict";var r=t&&t.id;return{setters:[],execute:function(){e("default","3.2.3")}}});ls.register("mod",["version"],function(e,t){"use strict";var r,n,s,a,i,o,c,u,d,l,p,f=t&&t.id;return{setters:[function(g){r=g}],execute:function(){n=6,s=48,a=58,i=97,o=123,c=65,u=91,d={digits:[s,a],lowerCase:[i,o],upperCase:[c,u]},l={dictionary:[],shuffle:!0,debug:!1,length:n},p=class extends Function{constructor(m={}){super();this.dictIndex=0,this.dictRange=[],this.lowerBound=0,this.upperBound=0,this.dictLength=0;let v={...l,...m};this.counter=0,this.debug=!1,this.dict=[],this.version=r.default;let{dictionary:y,shuffle:T,length:w}=v;if(this.uuidLength=w,y&&y.length>1)this.setDictionary(y);else{let R;this.dictIndex=R=0,Object.keys(d).forEach(O=>{let F=O;for(this.dictRange=d[F],this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1],this.dictIndex=R=this.lowerBound;this.lowerBound<=this.upperBound?R<this.upperBound:R>this.upperBound;this.dictIndex=this.lowerBound<=this.upperBound?R+=1:R-=1)this.dict.push(String.fromCharCode(this.dictIndex))})}return T?this.setDictionary(this.dict.sort(()=>Math.random()-.5)):this.setDictionary(this.dict),this.debug=v.debug,this.log(this.dict),this.log(`Generator instantiated with Dictionary Size ${this.dictLength}`),new Proxy(this,{apply:(R,O,F)=>this.randomUUID(...F)})}log(...m){let v=[...m];if(v[0]=`[short-unique-id] ${m[0]}`,this.debug===!0&&typeof console<"u"&&console!==null)return console.log(...v)}setDictionary(m){this.dict=m,this.dictLength=this.dict.length,this.counter=0}seq(){return this.sequentialUUID()}sequentialUUID(){let m,v,y="";for(m=this.counter;v=m%this.dictLength,m=Math.trunc(m/this.dictLength),y+=this.dict[v],m!==0;);return this.counter+=1,y}randomUUID(m=this.uuidLength||n){let v,y,T,w;if(m===null||typeof m>"u"||m<1)throw new Error("Invalid UUID Length Provided");for(v="",w=T=0;0<=m?T<m:T>m;w=0<=m?T+=1:T-=1)y=parseInt((Math.random()*this.dictLength).toFixed(0),10)%this.dictLength,v+=this.dict[y];return v}availableUUIDs(m=this.uuidLength){return parseFloat(Math.pow([...new Set(this.dict)].length,m).toFixed(0))}approxMaxBeforeCollision(m=this.availableUUIDs(this.uuidLength)){return parseFloat(Math.sqrt(Math.PI/2*m).toFixed(20))}collisionProbability(m=this.availableUUIDs(this.uuidLength),v=this.uuidLength){return parseFloat((this.approxMaxBeforeCollision(m)/this.availableUUIDs(v)).toFixed(20))}uniqueness(m=this.availableUUIDs(this.uuidLength)){let v=parseFloat((1-this.approxMaxBeforeCollision(m)/m).toFixed(20));return v>1?1:v<0?0:v}getVersion(){return this.version}},e("default",p)}}});var Hw=pc("mod",!1);fc.default=Hw.default});var Mg=ee((_I,kg)=>{"use strict";kg.exports=ci()});var Jg=ee((UI,Qg)=>{Qg.exports=Yg;Yg.sync=Gw;var zg=require("fs");function Bw(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var s=r[n].toLowerCase();if(s&&e.substr(-s.length).toLowerCase()===s)return!0}return!1}function Xg(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:Bw(t,r)}function Yg(e,t,r){zg.stat(e,function(n,s){r(n,n?!1:Xg(s,e,t))})}function Gw(e,t){return Xg(zg.statSync(e),e,t)}});var nm=ee((BI,rm)=>{rm.exports=em;em.sync=Vw;var Zg=require("fs");function em(e,t,r){Zg.stat(e,function(n,s){r(n,n?!1:tm(s,t))})}function Vw(e,t){return tm(Zg.statSync(e),t)}function tm(e,t){return e.isFile()&&Ww(e,t)}function Ww(e,t){var r=e.mode,n=e.uid,s=e.gid,a=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),i=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),o=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),d=o|c,l=r&u||r&c&&s===i||r&o&&n===a||r&d&&a===0;return l}});var om=ee((VI,im)=>{var GI=require("fs"),ds;process.platform==="win32"||global.TESTING_WINDOWS?ds=Jg():ds=nm();im.exports=Ec;Ec.sync=Kw;function Ec(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,s){Ec(e,t||{},function(a,i){a?s(a):n(i)})})}ds(e,t||{},function(n,s){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,s=!1),r(n,s)})}function Kw(e,t){try{return ds.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var pm=ee((WI,dm)=>{var li=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",sm=require("path"),zw=li?";":":",am=om(),cm=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),um=(e,t)=>{let r=t.colon||zw,n=e.match(/\//)||li&&e.match(/\\/)?[""]:[...li?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],s=li?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",a=li?s.split(r):[""];return li&&e.indexOf(".")!==-1&&a[0]!==""&&a.unshift(""),{pathEnv:n,pathExt:a,pathExtExe:s}},lm=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:s,pathExtExe:a}=um(e,t),i=[],o=u=>new Promise((d,l)=>{if(u===n.length)return t.all&&i.length?d(i):l(cm(e));let p=n[u],f=/^".*"$/.test(p)?p.slice(1,-1):p,g=sm.join(f,e),m=!f&&/^\.[\\\/]/.test(e)?e.slice(0,2)+g:g;d(c(m,u,0))}),c=(u,d,l)=>new Promise((p,f)=>{if(l===s.length)return p(o(d+1));let g=s[l];am(u+g,{pathExt:a},(m,v)=>{if(!m&&v)if(t.all)i.push(u+g);else return p(u+g);return p(c(u,d,l+1))})});return r?o(0).then(u=>r(null,u),r):o(0)},Xw=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:s}=um(e,t),a=[];for(let i=0;i<r.length;i++){let o=r[i],c=/^".*"$/.test(o)?o.slice(1,-1):o,u=sm.join(c,e),d=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;for(let l=0;l<n.length;l++){let p=d+n[l];try{if(am.sync(p,{pathExt:s}))if(t.all)a.push(p);else return p}catch{}}}if(t.all&&a.length)return a;if(t.nothrow)return null;throw cm(e)};dm.exports=lm;lm.sync=Xw});var nP={};Jm(nP,{activate:()=>Zw,deactivate:()=>eP,moduleCallers:()=>Sc,terraformStatus:()=>Hr,updateTerraformStatusBar:()=>_m});module.exports=Zm(nP);var Ue=Rt(require("vscode")),mm=Rt(Ou()),vm=Rt(ci()),fs=Rt(us());var Fg=Rt(Ng()),Hg=Rt(require("vscode")),hn=Rt(Mg());var Zr=Rt(require("vscode")),Lg=Rt(ci()),qg="client.showReferences",$w="editor.action.showReferences",hc=class{constructor(t){this._client=t;this.registeredCommands=[]}fillClientCapabilities(t){t.experimental||(t.experimental={}),t.experimental.showReferencesCommandId=qg}initialize(t){if(!t.experimental?.referenceCountCodeLens)return;let r=Zr.commands.registerCommand(qg,async(n,s)=>{let a=this._client,i=Zr.window?.activeTextEditor?.document;if(!i)return;let o=new Zr.Position(n.line,n.character),c={includeDeclaration:s.includeDeclaration},u=a.getFeature(Lg.ReferencesRequest.method).getProvider(i);if(!u)return;let d=new Zr.CancellationTokenSource,l=await u.provideReferences(i,o,c,d.token);await Zr.commands.executeCommand($w,i.uri,o,l)});this.registeredCommands.push(r)}dispose(){this.registeredCommands.forEach(function(t,r,n){t.dispose(),n.splice(r,1)})}};var jg=1,gc=class{constructor(t,r){this.client=t;this.client.onTelemetry(n=>{if(n.v!==jg){console.log(`unsupported telemetry event: ${n}`);return}r.sendRawTelemetryEvent(n.name,n.properties)})}fillClientCapabilities(t){t.experimental||(t.experimental={}),t.experimental.telemetryVersion=jg}initialize(){}dispose(){}};var to=Rt(require("vscode"));function Wt(e,t){return to.workspace.getConfiguration(e,t)}function pn(){return to.window.visibleTextEditors.find(e=>!!e.viewColumn)}function fn(e){return e===void 0||e.isUntitled?!1:!!e.fileName.endsWith("tf")}var mc=class{constructor(t,r,n){this.lsPath=t;this.outputChannel=r;this.reporter=n;this.shortUid=new Fg.default;this.commands=[];t.hasCustomBinPath()&&this.reporter.sendTelemetryEvent("usePathToBinary")}async startClient(){console.log("Starting client"),this.tfClient=await this.createTerraformClient();let t=this.tfClient.client.start();await this.tfClient.client.onReady(),this.reporter.sendTelemetryEvent("startClient");let r=this.tfClient.client.initializeResult;if(r!==void 0){let n=r.capabilities.workspace?.workspaceFolders?.supported;console.log(`Multi-folder support: ${n}`),this.commands=r.capabilities.executeCommandProvider?.commands??[]}return t}async createTerraformClient(){let t=this.shortUid.seq(),r=this.getInitializationOptions(t),n=await this.getServerOptions(),a={documentSelector:[{scheme:"file",language:"terraform"},{scheme:"file",language:"terraform-vars"}],initializationOptions:r,initializationFailedHandler:u=>(this.reporter.sendTelemetryException(u),!1),outputChannel:this.outputChannel,revealOutputChannelOn:hn.RevealOutputChannelOn.Never},i="terraform",o=new hn.LanguageClient(i,n,a);return Wt("terraform").get("codelens.referenceCount")&&o.registerFeature(new hc(o)),Hg.env.isTelemetryEnabled&&o.registerFeature(new gc(o,this.reporter)),o.onDidChangeState(u=>{console.log(`Client: ${hn.State[u.oldState]} --> ${hn.State[u.newState]}`),u.newState===hn.State.Stopped&&this.reporter.sendTelemetryEvent("stopClient")}),{commandPrefix:t,client:o}}async getServerOptions(){let t=await this.lsPath.resolvedPathToBinary(),r=Wt("terraform").get("languageServer.args",[]),n={command:t,args:r,options:{}},s={run:n,debug:n};return this.outputChannel.appendLine(`Launching language server: ${t} ${r.join(" ")}`),s}getInitializationOptions(t){let r=Wt("terraform-ls").get("rootModules",[]),n=Wt("terraform-ls").get("terraformExecPath",""),s=Wt("terraform-ls").get("terraformExecTimeout",""),a=Wt("terraform-ls").get("terraformLogFilePath",""),i=Wt("terraform-ls").get("excludeRootModules",[]),o=Wt("terraform-ls").get("ignoreDirectoryNames",[]);if(r.length>0&&i.length>0)throw new Error("Only one of rootModules and excludeRootModules can be set at the same time, please remove the conflicting config and reload");let c=Wt("terraform-ls").get("experimentalFeatures");return{commandPrefix:t,experimentalFeatures:c,...n.length>0&&{terraformExecPath:n},...s.length>0&&{terraformExecTimeout:s},...a.length>0&&{terraformLogFilePath:a},...r.length>0&&{rootModulePaths:r},...i.length>0&&{excludeModulePaths:i},...o.length>0&&{ignoreDirectoryNames:o}}}async stopClient(){this.tfClient?.client!==void 0&&(await this.tfClient.client.stop(),console.log("Client stopped"))}getClient(){return this.tfClient}clientSupportsCommand(t){return this.commands.includes(t)}};var ui=Rt(require("os")),Mr=Rt(require("vscode")),Uw=require("child_process"),vc=class{constructor(t){this.ctx=t;this.ctx.subscriptions.push(Mr.commands.registerCommand("terraform.generateBugReport",async()=>{let r=await Mr.window.showInputBox({title:"Generate a Bug Report",prompt:"Enter a short description of the problem or hit enter to submit now",placeHolder:"For example: I'm having trouble getting autocomplete to work when I..."}),n=this.getExtensions(),s=await this.generateBody(n,r),i=`https://github.com/hashicorp/vscode-terraform/issues/new?body=${encodeURIComponent(s)}`;Mr.commands.executeCommand("vscode.open",Mr.Uri.parse(i))}))}dispose(){}async generateBody(t,r){return r||(r=`Steps To Reproduce
=====

Steps to reproduce the behavior:

1. Go to '...'
2. Type '...'
3. See error

Include any relevant Terraform configuration or project structure:

\`\`\`terraform
resource "github_repository" "test" {
  name = "vscode-terraform"
}
\`\`\`


You can use 'tree' to output ASCII-based hierarchy of your project.

If applicable, add screenshots to help explain your problem.

Expected Behavior
-----

<!-- What should have happened? -->

Actual Behavior
-----

<!-- What actually happened? -->

Additional context
-----

<!--
Add any other context about the problem here.
Note whether you use any tools for managing Terraform version/execution (e.g. 'tfenv')
any credentials helpers, or whether you have any other Terraform extensions installed.
-->
`),`Issue Description
=====

${r}

Environment Information
=====

Terraform Information
-----

${this.generateRuntimeMarkdown(await this.getRuntimeInfo())}

Visual Studio Code
-----

| Name | Version |
| --- | --- |
| Operating System | ${ui.type()} ${ui.arch()} ${ui.release()} |
| VSCode | ${Mr.version}|

Visual Studio Code Extensions
-----

<details><summary>Visual Studio Code Extensions(Click to Expand)</summary>

${this.generateExtesnionMarkdown(t)}
</details>

Extension Logs
-----

> Find this from the first few lines of the relevant Output pane:
View -> Output -> 'HashiCorp Terraform'

`}generateExtesnionMarkdown(t){if(!t.length)return"none";let r=`|Extension|Author|Version|
|---|---|---|`,n=t.map(a=>`|${a.name}|${a.publisher}|${a.version}|`).join(`
`);return`${r}
${n}`}generateRuntimeMarkdown(t){return`
Version:	${t.version}
Platform:	${t.platform}
Outdated:	${t.outdated}
    `}getExtensions(){return Mr.extensions.all.filter(r=>r.packageJSON.isBuiltin===!1).sort((r,n)=>r.packageJSON.name.toLowerCase()<n.packageJSON.name.toLowerCase()?-1:r.packageJSON.name.toLowerCase()>n.packageJSON.name.toLowerCase()?1:0).map(r=>({name:r.packageJSON.name,publisher:r.packageJSON.publisher,version:r.packageJSON.version}))}async getRuntimeInfo(){let t="terraform",r=Uw.spawnSync,n=r(t,["version","-json"]);if(n.error===void 0)try{let a=n.stdout.toString(),i=JSON.parse(a);return{version:i.terraform_version,platform:i.platform,outdated:i.terraform_outdated}}catch{}let s=r(t,["version"]);if(s.error===void 0)try{let a=s.stdout.toString()||s.stderr.toString(),o=new RegExp("v?(?<version>[0-9]+(?:.[0-9]+)*(?:-[A-Za-z0-9.]+)?)").exec(a),c=o&&o.length>1?o[1]:"Not found",u=a.split(`
`)[1].replace("on ","");return{version:c,platform:u,outdated:!0}}catch{}return{version:"Not found",platform:"Not found",outdated:!1}}};var $g=Rt(require("path")),At=Rt(require("vscode")),Ug=Rt(ci()),Bg=Rt(us());var Gg=class extends At.TreeItem{constructor(t,r,n,s,a,i,o){super(t,o.length>=1?At.TreeItemCollapsibleState.Collapsed:At.TreeItemCollapsibleState.None);this.label=t;this.sourceAddr=r;this.version=n;this.sourceType=s;this.docsLink=a;this.terraformIcon=i;this.children=o;this.iconPath=this.getIcon(this.sourceType);this.description=this.version?`${this.version}`:"",this.version===void 0?this.tooltip=`${this.sourceAddr}`:this.tooltip=`${this.sourceAddr}@${this.version}`}getIcon(t){switch(t){case"tfregistry":return{light:this.terraformIcon,dark:this.terraformIcon};case"local":return new At.ThemeIcon("symbol-folder");case"github":return new At.ThemeIcon("github");case"git":return new At.ThemeIcon("git-branch");default:return new At.ThemeIcon("extensions-view-icon")}}},_c=class{constructor(t,r){this.handler=r;this._onDidChangeTreeData=new At.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.svg="";this.svg=t.asAbsolutePath($g.join("assets","icons","terraform.svg")),t.subscriptions.push(At.commands.registerCommand("terraform.modules.refreshList",()=>this.refresh()),At.commands.registerCommand("terraform.modules.openDocumentation",n=>{n.docsLink&&At.env.openExternal(At.Uri.parse(n.docsLink))}),At.window.onDidChangeActiveTextEditor(async n=>{let s=pn();!fn(s?.document)||n&&s&&this.refresh()}))}refresh(){this._onDidChangeTreeData.fire()}getTreeItem(t){return t}getChildren(t){if(t)return Promise.resolve(t.children);{let r=this.getModules();return Promise.resolve(r)}}async getModules(){let t=pn();if(t?.document===void 0)return[];if(!fn(t.document))return[];let r=t.document.uri,n=Bg.Utils.dirname(r),s=this.handler.getClient();return s===void 0?[]:await s.client.onReady().then(async()=>{if(!this.handler.clientSupportsCommand(`${s.commandPrefix}.terraform-ls.module.calls`))return Promise.resolve([]);let i={command:`${s.commandPrefix}.terraform-ls.module.calls`,arguments:[`uri=${n}`]},o=await s.client.sendRequest(Ug.ExecuteCommandRequest.type,i);return o===null?Promise.resolve([]):o.module_calls.map(u=>this.toModuleCall(u.name,u.source_addr,u.version,u.source_type,u.docs_link,this.svg,u.dependent_modules))})}toModuleCall(t,r,n,s,a,i,o){let c=[];return o.length!==0&&(c=o.map(u=>this.toModuleCall(u.name,u.source_addr,u.version,u.source_type,u.docs_link,i,u.dependent_modules))),new Gg(t,r,n,s,a,i,c)}};var rr=Rt(require("vscode")),Vg=Rt(us()),Wg=Rt(ci());var Kg=class extends rr.TreeItem{constructor(t,r,n,s,a){super(r,rr.TreeItemCollapsibleState.None);this.fullName=t;this.displayName=r;this.requiredVersion=n;this.installedVersion=s;this.docsLink=a;this.description=s??"",this.iconPath=new rr.ThemeIcon("package"),this.tooltip=`${t} ${n??""}`,a&&(this.contextValue="moduleProviderHasDocs")}},yc=class{constructor(t,r){this.handler=r;this.didChangeTreeData=new rr.EventEmitter;this.onDidChangeTreeData=this.didChangeTreeData.event;t.subscriptions.push(rr.window.onDidChangeActiveTextEditor(async n=>{let s=pn();!fn(s?.document)||n&&s&&this.refresh()}),rr.commands.registerCommand("terraform.providers.openDocumentation",n=>{n.docsLink&&rr.env.openExternal(rr.Uri.parse(n.docsLink))}))}refresh(){this.didChangeTreeData.fire()}getTreeItem(t){return t}getChildren(t){return t?[]:this.getProvider()}async getProvider(){let t=pn();if(t?.document===void 0)return[];if(!fn(t.document))return[];let r=t.document.uri,n=Vg.Utils.dirname(r),s=this.handler.getClient();if(s===void 0)return[];if(await s.client.onReady(),!this.handler.clientSupportsCommand(`${s.commandPrefix}.terraform-ls.module.providers`))return[];let i={command:`${s.commandPrefix}.terraform-ls.module.providers`,arguments:[`uri=${n}`]},o=await s.client.sendRequest(Wg.ExecuteCommandRequest.type,i);return o===null?[]:Object.entries(o.provider_requirements).map(([c,u])=>new Kg(c,u.display_name,u.version_constraint,o.installed_providers[c],u.docs_link)).filter(c=>Boolean(c.requiredVersion))}};var en=Rt(require("path")),ro=Rt(require("vscode")),hm=Rt(pm()),Yw="bin",fm="languageServer.pathToBinary",Cc=class{constructor(t){this.context=t;this.customBinPath=ro.workspace.getConfiguration("terraform").get(fm)}installPath(){return en.join(this.context.extensionPath,Yw)}legacyBinPath(){return en.resolve(this.context.asAbsolutePath("lsp"),this.binName())}hasCustomBinPath(){return!!this.customBinPath}binPath(){return this.customBinPath?this.customBinPath:en.resolve(this.installPath(),this.binName())}binName(){return this.customBinPath?en.basename(this.customBinPath):process.platform==="win32"?"terraform-ls.exe":"terraform-ls"}async resolvedPathToBinary(){let t=this.binPath(),r;try{en.isAbsolute(t)?(await ro.workspace.fs.stat(ro.Uri.file(t)),r=t):r=hm.sync(t),console.log(`Found server at ${r}`)}catch(n){let s="";throw this.customBinPath&&(s=`. Check "${fm}" in your settings.`),new Error(`Unable to launch language server: ${n instanceof Error?n.message:n}${s}`)}return r}};var Qw="HashiCorp Terraform",Jw=Ue.window.createOutputChannel(Qw),Hr,no,wr;async function Zw(e){let t=e.extension.packageJSON;Hr=Ue.window.createStatusBarItem(Ue.StatusBarAlignment.Left,0),no=new mm.default(e.extension.id,t.version,t.appInsightsKey),e.subscriptions.push(no);let r=new Cc(e);if(wr=new mc(r,Jw,no),Wt("terraform").has("languageServer.enabled"))try{await Wt("terraform").update("languageServer",{enabled:void 0,external:!0},Ue.ConfigurationTarget.Global)}catch(n){let s=n instanceof Error?n.message:n;console.error(`Error trying to erase pre-2.0.0 settings: ${s}`)}e.subscriptions.push(Ue.commands.registerCommand("terraform.enableLanguageServer",async()=>{if(!bc()){let n=Wt("terraform").get("languageServer");await Wt("terraform").update("languageServer",Object.assign(n,{external:!0}),Ue.ConfigurationTarget.Global)}return gm()}),Ue.commands.registerCommand("terraform.disableLanguageServer",async()=>{if(bc()){let n=Wt("terraform").get("languageServer");await Wt("terraform").update("languageServer",Object.assign(n,{external:!1}),Ue.ConfigurationTarget.Global)}return tP()}),Ue.commands.registerCommand("terraform.apply",async()=>{await ps("apply",!1)}),Ue.commands.registerCommand("terraform.init",async()=>{let n=Ue.workspace.workspaceFolders,s=await Ue.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,defaultUri:n?n[0]?.uri:void 0,openLabel:"Initialize"}),a=wr.getClient();if(s&&a){let i=s[0],o={command:`${a.commandPrefix}.terraform-ls.terraform.init`,arguments:[`uri=${i}`]};await Tc(a.client,o)}}),Ue.commands.registerCommand("terraform.initCurrent",async()=>{await ps("init",!0)}),Ue.commands.registerCommand("terraform.plan",async()=>{await ps("plan",!1)}),Ue.commands.registerCommand("terraform.validate",async()=>{await ps("validate",!0)}),new vc(e),Ue.window.registerTreeDataProvider("terraform.modules",new _c(e,wr)),Ue.window.registerTreeDataProvider("terraform.providers",new yc(e,wr)),Ue.workspace.onDidChangeConfiguration(async n=>{if(n.affectsConfiguration("terraform")||n.affectsConfiguration("terraform-ls")){let s="Reload VSCode window to apply language server changes";await Ue.window.showInformationMessage(s,"Reload")==="Reload"&&Ue.commands.executeCommand("workbench.action.reloadWindow")}}),Ue.window.onDidChangeVisibleTextEditors(async n=>{let s=n.find(a=>!!a.viewColumn);s?.document!==void 0&&(!fn(s.document)||await _m(s.document.uri))})),bc()&&await gm()}async function eP(){if(wr!==void 0)return wr.stopClient()}async function _m(e){let t=wr.getClient();if(!(t===void 0||!wr.clientSupportsCommand(`${t.commandPrefix}.terraform-ls.terraform.init`)))try{let n=fs.Utils.dirname(e);if((await Sc(n.toString())).moduleCallers.length===0){let a=fs.Utils.basename(n);Hr.text=`$(refresh) ${a}`,Hr.color=new Ue.ThemeColor("statusBar.foreground"),Hr.tooltip="Click to run terraform init",Hr.command="terraform.initCurrent",Hr.show()}else Hr.hide(),Hr.text=""}catch(n){n instanceof Error&&(Ue.window.showErrorMessage(n.message),no.sendTelemetryException(n)),Hr.hide()}}async function gm(){try{await wr.startClient(),Ue.commands.executeCommand("setContext","terraform.showTreeViews",!0)}catch(e){console.log(e),e instanceof Error?Ue.window.showErrorMessage(e instanceof Error?e.message:e):typeof e=="string"&&Ue.window.showErrorMessage(e)}}async function tP(){try{await wr.stopClient(),Ue.commands.executeCommand("setContext","terraform.showTreeViews",!1)}catch(e){console.log(e),e instanceof Error?Ue.window.showErrorMessage(e instanceof Error?e.message:e):typeof e=="string"&&Ue.window.showErrorMessage(e)}}function Tc(e,t){return no.sendTelemetryEvent("execWorkspaceCommand",{command:t.command}),e.sendRequest(vm.ExecuteCommandRequest.type,t)}async function rP(e,t){let r={command:`${e.commandPrefix}.terraform-ls.module.callers`,arguments:[`uri=${t}`]};return Tc(e.client,r)}async function Sc(e){let t=wr.getClient();if(t===void 0)return{version:0,moduleCallers:[]};let r=await rP(t,e),n=r.callers;return{version:r.v,moduleCallers:n}}async function ps(e,t=!0){let r=pn();if(r){let n=wr.getClient(),s=fs.Utils.dirname(r.document.uri),a=await Sc(s.toString()),i;if(a.moduleCallers.length>1){let o=await Ue.window.showQuickPick(a.moduleCallers.map(c=>c.uri),{canPickMany:!1});if(!o)return;i=o}else a.moduleCallers.length===1?i=a.moduleCallers[0].uri:i=s.toString();if(t&&n){let o={command:`${n.commandPrefix}.terraform-ls.terraform.${e}`,arguments:[`uri=${i}`]};return Tc(n.client,o)}else{let o=`Terraform ${i}`,c=Ue.Uri.parse(i),u=await Ue.window.showInputBox({value:`terraform ${e}`,prompt:`Run in ${i}`});if(u){let d=Ue.window.terminals.find(l=>l.name===o)||Ue.window.createTerminal({name:`Terraform ${i}`,cwd:c});d.sendText(u),d.show()}return}}else{Ue.window.showWarningMessage(`Open a module then run terraform ${e} again`);return}}function bc(){return Wt("terraform").get("languageServer.external",!1)}0&&(module.exports={activate,deactivate,moduleCallers,terraformStatus,updateTerraformStatusBar});
