# changing directory to code project
function c { cd $1; }

function cloudset {
  if [ ! -n "$1" ]; then
    unset HEROKU_HOST
    unset HEROKU_DOMAIN
    unset ION_USER
    unset CORE_URL
  else
    export HEROKU_HOST="https://api.$1.herokudev.com"
    export CORE_URL="https://api.$1.herokudev.com"
    export HEROKU_DOMAIN="$1.herokudev.com"
    export ION_USER="$1"
    export ION_HOST="$1-ion.heroku.com"
  fi
  echo "HEROKU_HOST now set to $HEROKU_HOST"
  echo "CORE_URL now set to $CORE_URL"
  echo "HEROKU_DOMAIN now set to $HEROKU_DOMAIN"
  echo "ION_USER now set to $ION_USER"
}

# alternative to "rails" command to use templates
function railsapp {
  template=$1
  appname=$2
  shift 2
  rails $appname -m ~/Development/ruby/rails-templates/$template.rb $@
}

function mategem {
  GEM="$1"
  [ -z "$GEM" ] && usage
  mate "$(gem environment gemdir)/gems/$GEM"
}

function pg_start {
  pg_ctl start --pgdata /Users/glenngillen/Library/Application\ Support/postgresql/data --silent &
}

function unmount {
  for share in media music photos downloads backups glenn
  do
    if ! mount | grep "on /Volumes/$share" > /dev/null
    then
      sudo umount /Volumes/$share
    fi
  done
}

function mount_bender_local {
  ssh `cat ~/.bender_credentials | cut -d : -f 1`@`cat ~/.bender_local_hostname` bin/wakebender
  for share in media music photos downloads backups
  do
    if [ ! -d "/Volumes/$share" ]
    then
      mkdir -p /Volumes/$share
    fi
    if ! mount | grep "on /Volumes/$share" > /dev/null
    then
      mount_afp afp://`cat ~/.bender_credentials`@`cat ~/.bender_local_hostname`/$share /Volumes/$share
    fi
  done
}

function mount_bender_remote {
  ssh `cat ~/.bender_credentials | cut -d : -f 1`@`cat ~/.bender_remote_hostname` bin/wakebender
  for share in media music photos downloads backups
  do
    if [ ! -d "/Volumes/$share" ]
    then
      mkdir -p /Volumes/$share
    fi
    if ! mount | grep "on /Volumes/$share" > /dev/null
    then
      mount_afp afp://`cat ~/.bender_credentials`@`cat ~/.bender_remote_hostname`/$share /Volumes/$share
    fi
  done
}

function db {
  rvm 1.8.7
  BUNDLE_GEMFILE=~/Development/heroku/docbrown/Gemfile bundle exec ~/Development/heroku/docbrown/bin/docbrown $@
}
